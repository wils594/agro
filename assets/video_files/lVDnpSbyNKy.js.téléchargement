;/*FB_PKG_DELIM*/

__d("WAMapsShallowEqual",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){var n;if(e.size!==t.size)return!1;for(var r of e){var o=r[0],a=r[1];if(n=t.get(o),n!==a||n===void 0&&!t.has(o))return!1}return!0}i.default=e}),66);
__d("WAWebFirstPartyStickerInfo.react",["fbt","WAWebButton.react","WAWebCmd","WAWebFavoriteStickerAction","WAWebFavoriteStickerCollection","WAWebFlex.react","WAWebMiscGatingUtils","WAWebStickerDetailsStickerPackInfo.react","WAWebStickerPackCollectionMd","react","useWAWebEventTargetValue"],(function(t,n,r,o,a,i,l,s){var e,u,c=u||(u=r("react")),d=(e||(e=o("react"))).useEffect,m=150;function p(e){var t=e.onStickerPackView,n=e.showViewPackButton,r=e.sticker,a=e.stickerPackId,i=e.stickerPackViewDelay,l=_(a),u;if(a){var d=function(n){n.stopPropagation(),t&&t(),i!=null?self.setTimeout(function(){return o("WAWebCmd").Cmd.openStickerPack(a)},i+m):o("WAWebCmd").Cmd.openStickerPack(a)};o("WAWebMiscGatingUtils").isFavoriteStickersEnabled()?r!=null&&(u=c.jsxs(o("WAWebFlex.react").FlexRow,{gap:8,children:[n&&c.jsx(o("WAWebButton.react").Button,{onClick:d,type:"secondary",children:s._(/*BTDS*/"Afficher le pack")}),o("WAWebFavoriteStickerCollection").FavoriteStickerCollection.get(r.filehash)?c.jsx(o("WAWebButton.react").Button,{onClick:function(){return o("WAWebFavoriteStickerAction").removeStickerFromFavorites(r)},type:"secondary",children:s._(/*BTDS*/"Supprimer des favoris")}):c.jsx(o("WAWebButton.react").Button,{onClick:function(){return o("WAWebFavoriteStickerAction").addStickerToFavorites(r)},type:"secondary",children:s._(/*BTDS*/"Ajouter aux favoris")})]})):u=n?c.jsx(o("WAWebButton.react").Button,{onClick:d,type:"secondary",children:s._(/*BTDS*/"Afficher le pack")}):null}return c.jsxs(c.Fragment,{children:[c.jsx(o("WAWebStickerDetailsStickerPackInfo.react").StickerDetailsStickerPackInfo,{name:l==null?void 0:l.name,publisher:l==null?void 0:l.publisher,theme:o("WAWebStickerDetailsStickerPackInfo.react").Theme.MediaViewer}),u]})}p.displayName=p.name+" [from "+i.id+"]";function _(e){d(function(){e&&o("WAWebStickerPackCollectionMd").StickerPackCollectionMd.fetchStickerPack(e)},[e]);var t=r("useWAWebEventTargetValue")(o("WAWebStickerPackCollectionMd").StickerPackCollectionMd,"add remove reset",function(){return e!=null?o("WAWebStickerPackCollectionMd").StickerPackCollectionMd.get(e):null});return t}l.default=p}),226);
__d("WAWebIcCloseIcon.react",["WAWebSvgComponentBase","react","stylex"],(function(t,n,r,o,a,i,l){var e=["height","iconXstyle","name","viewBox","width"],s,u,c=s||(s=r("react")),d="ic-close";function m(t){var n=t.height,a=t.iconXstyle,i=t.name,l=t.viewBox,s=t.width,m=babelHelpers.objectWithoutPropertiesLoose(t,e),p;if(l){var _=l.height,f=_===void 0?0:_,g=l.width,h=g===void 0?0:g,y=l.x,C=y===void 0?0:y,b=l.y,v=b===void 0?0:b;p=[C,v,h,f].join(" ")}var S=24,R=24;return(n!=null||s!=null)&&(S=n,R=s),c.jsx(o("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers.extends({name:i!=null?i:d},m,{children:c.jsxs("svg",{viewBox:p,height:S,width:R,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(a),fill:"none",children:[c.jsx("title",{children:i!=null?i:d}),c.jsx("path",{fill:"currentColor",d:"m12 13.4-4.9 4.9a.95.95 0 0 1-.7.27.95.95 0 0 1-.7-.27.95.95 0 0 1-.28-.7c0-.28.1-.52.28-.7l4.9-4.9-4.9-4.9a.95.95 0 0 1-.28-.7.95.95 0 0 1 .97-.98c.3 0 .53.1.71.28l4.9 4.9 4.9-4.9a.95.95 0 0 1 .7-.27c.28 0 .52.09.7.27.18.18.27.42.27.7 0 .28-.09.52-.27.7L13.4 12l4.9 4.9c.18.18.27.42.27.7 0 .28-.09.52-.27.7a.95.95 0 0 1-.7.27.95.95 0 0 1-.7-.27L12 13.4Z"})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.IcCloseIcon=m}),98);
__d("WAWebMediaAudio.react",["fbt","WAWebEnvironment","WAWebMediaUrlProvider","WAWebPttAudioTag.react","WAWebStopEvent","react","useWAWebModelValues"],(function(t,n,r,o,a,i,l,s){var e,u=e||(e=r("react"));function c(e){var t=e.msg,n=e.url,a=r("WAWebEnvironment").isWindows===!0?s._(/*BTDS*/"La lecture audio n\u2019est pas prise en charge sur cet appareil."):s._(/*BTDS*/"Votre navigateur ne prend pas en charge la lecture audio.");return u.jsx(r("WAWebPttAudioTag.react"),{url:n,className:"xh8yej3 xqolr7f x1anomrk",onClick:o("WAWebStopEvent").stopPropagation,autoPlay:!0,msg:t,controls:!0,testId:"media-audio",children:a})}c.displayName=c.name+" [from "+i.id+"]";function d(){return u.jsx("div",{className:"xzkaem6 xdzyupr x1vd4hg5 xx5krr6 xztyhrg x18d0r48",onClick:o("WAWebStopEvent").stopPropagation})}d.displayName=d.name+" [from "+i.id+"]";function m(e){var t=e.mediaData,n=e.msg,a=o("useWAWebModelValues").useModelValues(t,["mediaStage","renderableUrl"]);return u.jsx(r("WAWebMediaUrlProvider"),{mediaData:a,placeholderRenderer:d,children:function(t){return u.jsx(c,{url:t,msg:n})}})}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),226);
__d("WAWebMediaViewerFlow.react",["Keys","Promise","WALogger","WANullthrows","WAWebAllMediaCollection","WAWebCarouselMsgUtils","WAWebChatMedia","WAWebFrontendConstants","WAWebFrontendMsgGetters","WAWebL10N","WAWebMediaIncrementalZoom","WAWebMediaTypes","WAWebMediaViewerModal.react","WAWebMiscGatingUtils","WAWebModalManager","WAWebMsgGetters","WAWebMsgType","WAWebSuspendedGroupUtils","WAWebThumbList.react","WAWebUiActionWamEvent","WAWebVelocityAnimate","WAWebWamEnumUiActionType","WAWebWamGroupMetadataMetricUtils_WORKER_INCOMPATIBLE","WAWebWamMsgUtils","WAWebWamPrivateStatsUtils","asyncToGeneratorRuntime","react","useLazyRef","useWAWebForceUpdate","useWAWebListener","useWAWebPrevious","useWAWebStableCallback","useWAWebThrottledCallback","useWAWebUiIdle","useWAWebUnmountSignal","useWAWebVideoPlaybackRate"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m=d||(d=o("react")),p=c||(c=r("react")),_=m.useCallback,f=m.useEffect,g=m.useRef,h=m.useState,y=p.createContext(!1),C={duration:300,delay:100,easing:[.1,.82,.25,1]},b=function(t){var e=t.direction,n=[1,0],r=["0%","100%"];return e==="down"&&(n.reverse(),r.reverse()),{opacity:n,translateY:r}},v=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.direction,n=e.el;if(n)return r("WAWebVelocityAnimate")(n,b({direction:t}),C)});return function(n){return e.apply(this,arguments)}})();function S(t){"use no forget";var a,i,l,c=t.highlightedMsgIds,d=t.msg,m=t.shouldShowAllMedia,C=r("useWAWebUnmountSignal")(),b=r("useWAWebUiIdle")(),S=o("useWAWebForceUpdate").useForceUpdateDONOTUSE(),L=o("WAWebFrontendMsgGetters").getChat(d),E=!!((a=L.groupMetadata)!=null&&a.isLidAddressingMode),k=o("WAWebWamMsgUtils").msgIsLid(d,L.id,E),I=r("useLazyRef")(function(){return d.type===o("WAWebMsgType").MSG_TYPE.IMAGE?new(o("WAWebUiActionWamEvent")).UiActionWamEvent({uiActionType:o("WAWebWamEnumUiActionType").UI_ACTION_TYPE.IMAGE_OPEN,uiActionPreloaded:d.mediaData.mediaStage===o("WAWebMediaTypes").MediaDataStage.RESOLVED,isLid:k}):null}),T=r("useLazyRef")(function(){var e=d;if(d.isCarouselCard){var t;e=(t=o("WAWebCarouselMsgUtils").getParentMsgFromCarouselCard(d))!=null?t:d}return o("WAWebChatMedia").constructMediaMsgs(o("WAWebFrontendMsgGetters").getChat(e),e)}),D=m===!0?o("WAWebAllMediaCollection").AllMediaCollection:null,x=T.current.length,$=r("useWAWebPrevious")(x),P=g(null),N=g(),M=g(),w=g(null),A=g(null),F=g(null),O=h(d),B=O[0],W=O[1],q=h(!1),U=q[0],V=q[1],H=h(R(B)),G=H[0],z=H[1],j=r("useWAWebPrevious")(B),K=function(t){t===void 0&&(t=!1);var e=A.current,n=F.current,o=w.current;if(!(!e||!n||!o)){var a=0;o instanceof HTMLElement&&(a=o.clientWidth/2-e.clientWidth/2),r("WAWebVelocityAnimate")(n,"stop");var i=0;t&&(i=300),r("WAWebVelocityAnimate")(o,"scroll",{duration:i,container:n,offset:a,axis:"x",easing:[.1,.82,.25,1]})}};f(function(){var e=function(t){t&&r("WAWebVelocityAnimate")(t,{opacity:[1,0],translateY:["0%","100%"]},{duration:300,delay:100,easing:[.1,.82,.25,1]}).then(function(){C.aborted||z(!1)})};K(),R(d)&&e(A.current)},[]),f(function(){x>($!=null?$:0)&&K()},void 0);var Q=_(function(e){b(function(){T.current.loadMoreAroundIfNeeded(e)}),W(e)},[T,b]),X=function(){var e=-1;if(!c||!B)return e;var t=B.id.toString();if(!c.has(t))return e;var n=0;return c.forEach(function(r){r===t&&(e=n),n++}),e},Y=function(n){var t,r=D!=null?D:T.current;if(n&&n.stopPropagation(),!U){var a=B;if(a){var i=null;if(i=r.getAfter(a),i){Q(i);return}T.current.hasMediaAfter&&(N.current||(N.current=(t=T.current.queryMedia({chat:o("WAWebFrontendMsgGetters").getChat(d),msg:d,direction:"after"}))==null?void 0:t.then(function(e){C.aborted||typeof(e==null?void 0:e.length)=="number"&&e.length>0&&B===d&&Y()}).catch(function(t){o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["query media msgs error: "])))}).finally(function(){N.current=null})))}}},J=function(t){var e,n=D!=null?D:T.current;if(t&&t.stopPropagation(),!U){var r=B;if(r){var a=null;if(a=n.getBefore(r),a){Q(a);return}T.current.hasMediaBefore&&(M.current||(M.current=(e=T.current.queryMedia({chat:o("WAWebFrontendMsgGetters").getChat(d),msg:d,direction:"before"}))==null?void 0:e.then(function(e){C.aborted||typeof(e==null?void 0:e.length)=="number"&&e.length>0&&B===d&&J()}).catch(function(e){o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["query media msgs error: "])))}).finally(function(){M.current=null})))}}},Z=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){if(!e.defaultPrevented&&!(B&&!R(B))){var t=yield new(u||(u=n("Promise")))(function(e){o("WAWebModalManager").ModalManager.exists(e)});if(!(t&&D==null)){var a=r("WAWebL10N").isRTL();e.keyCode===r("Keys").LEFT?a?Y():J():e.keyCode===r("Keys").RIGHT&&(a?J():Y())}}});return function(n){return e.apply(this,arguments)}})(),ee=null;d.type===o("WAWebMsgType").MSG_TYPE.IMAGE&&(ee=function(){var e=I.current;if(e){var t,n=o("WAWebWamGroupMetadataMetricUtils_WORKER_INCOMPATIBLE").getGroupCountMetricsFromChatWid((t=o("WAWebFrontendMsgGetters").getChat(d))==null?void 0:t.id);n!=null&&e.set(n),e.markUiActionT(),e.commit(),I.current=null}o("WAWebWamPrivateStatsUtils").logUiActionShadowPrivateStatsTestEvents()});var te=function(t){V(t)},ne=function(){o("WAWebModalManager").ModalManager.closeMedia()},re=function(){var e=function(t){t&&r("WAWebVelocityAnimate")(t,{opacity:[0,1],translateY:["100%","0%"]},{duration:300,easing:[.1,.82,.25,1]})};R(d)&&e(A.current)},oe=function(){R(d)&&v({el:A.current,direction:"up"})},ae=function(){R(d)&&v({el:A.current,direction:"down"})},ie=r("useWAWebVideoPlaybackRate")(null),le=ie.resetAllPlaybackRates,se=r("useWAWebStableCallback")(function(){W(null),le(),ne()});f(function(){return function(){le()}},[le]),o("useWAWebListener").useListener(R(B)?null:B,"revoked",se);var ue=R(B)?T.current:null;o("useWAWebListener").useListener(ue,"remove",function(e,t,n){var o=T.current,a=B;if(o.includes(e)||a!=null&&a.id!=null&&a.id.toString()!==e.id.toString()){S();return}var i=n.index;o.length===0?ne():o.length===i?Q(r("WANullthrows")(o.at(i-1))):Q(r("WANullthrows")(o.at(i)))}),o("useWAWebListener").useListener(ue,"reset",function(){ne()}),o("useWAWebListener").useListener(ue,"query_media_after",function(){S()}),o("useWAWebListener").useListener(ue,"query_media_before",function(){var e=F.current;e&&(P.current=e.scrollWidth,e instanceof HTMLElement&&S())}),o("useWAWebListener").useListener(window,"keydown",Z),f(function(){b(function(){B&&T.current.loadMoreAroundIfNeeded(B)})},[B,T,b]),f(function(){if(j!==B)K(!0);else{var e=F.current;if(!e||P.current==null||P.current===0)return;e instanceof HTMLElement&&(e.scrollLeft+=e.scrollWidth-P.current),P.current=null}},[B,j]);var ce=function(t,n,a){if(n.length!==0&&a!=null){if(n.hasMediaBefore&&a<t.clientWidth){var e=r("WANullthrows")(n.head());b(function(){n.queryMedia({chat:o("WAWebFrontendMsgGetters").getChat(e),msg:e}),S()})}if(n.hasMediaAfter&&a+o("WAWebFrontendConstants").SCROLL_FUDGE>t.scrollWidth-2*t.clientWidth){var i=r("WANullthrows")(n.last());b(function(){n.queryMedia({chat:o("WAWebFrontendMsgGetters").getChat(i),msg:i,direction:"after"}),S()})}}},de=r("useWAWebThrottledCallback")(ce,100),me=function(t){de(t.currentTarget,T.current,t.currentTarget.scrollLeft)},pe=_(function(e){w.current=e},[]);if(!B)return null;if(!o("WAWebMsgGetters").getIsNewsletterMsg(d)&&o("WAWebFrontendMsgGetters").getChat(d).isSuspendedOrTerminated()&&o("WAWebMiscGatingUtils").isGroupSuspendV2Enabled()){o("WAWebSuspendedGroupUtils").openSuspendedGroupMediaDownloadFailureModal();return}var _e=T.current,fe=D!=null?D:T.current,ge=fe.last(),he=_e.hasMediaAfter||B!==ge?Y:null,ye=fe.head(),Ce=_e.hasMediaBefore||B!==ye?J:null;return p.jsx(o("WAWebMediaIncrementalZoom").MediaIncrementalZoomCtxProvider,{activeMsg:B,children:p.jsx(y.Provider,{value:U,children:p.jsxs("div",{className:U?"img-zoomed-in":null,children:[p.jsx(r("WAWebMediaViewerModal.react"),{msg:B,mediaData:B.mediaData,onBack:ne,onExitAnimation:re,onNext:he,onPrev:Ce,onImgZoomIn:te,getZoomNode:t.getZoomNode,startTime:t.startTime,isAnimatingThumbs:G,onImageLoad:ee,msgIndexInAlbum:X(),albumSize:((i=t.highlightedMsgIds)==null?void 0:i.size)||0,shouldShowNumberText:(l=t.shouldShowNumberText)!=null?l:!1,shouldShowAllMedia:m}),o("WAWebMsgGetters").getHasThumbList(B)&&p.jsx(r("WAWebThumbList.react"),{activeMsg:B,mediaMsgs:D!=null?D:T.current,highlightedMsgIds:t.highlightedMsgIds,onSelectThumb:Q,onSetActiveThumb:pe,onScroll:me,setRefThumbsContainer:function(t){A.current=t},setRefThumbs:function(t){F.current=t},moveUpAnimation:oe,moveDownAnimation:ae})]})})})}S.displayName=S.name+" [from "+i.id+"]";function R(e){return e?o("WAWebMsgGetters").getHasThumbList(e):!0}l.MediaViewerFlowZoomContext=y,l.MediaViewerFlow=S}),98);
__d("WAWebMediaViewerReportSpamPopupLoadable",["JSResourceForInteraction","WAWebLazyLoadedRetriable","WAWebLoadable","WAWebLoadingDrawer.react","asyncToGeneratorRuntime","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=r("react")),u=r("WAWebLazyLoadedRetriable")(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield r("JSResourceForInteraction")("WAWebMediaViewerReportSpamPopup.react").__setRef("WAWebMediaViewerReportSpamPopupLoadable").load();return e}),"WAWebMediaViewerReportSpamPopup"),c=r("WAWebLoadable")({loader:u,loading:function(t){return s.jsx(r("WAWebLoadingDrawer.react"),{error:!!t.error})}});l.WAWebMediaViewerReportSpamPopupLoadable=c}),98);
__d("WDSIconIcBookmark.react",["WDSSvgComponentBase.react","react","stylex"],(function(t,n,r,o,a,i,l){var e=["height","iconXstyle","viewBox","width"],s,u,c=s||(s=r("react")),d="ic-bookmark";function m(t){var n=t.height,o=t.iconXstyle,a=t.viewBox,i=t.width,l=babelHelpers.objectWithoutPropertiesLoose(t,e),s;if(a){var m=a.height,p=m===void 0?0:m,_=a.width,f=_===void 0?0:_,g=a.x,h=g===void 0?0:g,y=a.y,C=y===void 0?0:y;s=[h,C,f,p].join(" ")}var b=24,v=24;return(n!=null||i!=null)&&(b=n,v=i),c.jsx(r("WDSSvgComponentBase.react"),babelHelpers.extends({},l,{children:c.jsxs("svg",{viewBox:s!=null?s:"0 0 24 24",height:b,width:v,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(o),fill:"none",children:[c.jsx("title",{children:d}),c.jsx("path",{d:"M12 18L7.8 19.8C7.13333 20.0833 6.5 20.0292 5.9 19.6375C5.3 19.2458 5 18.6917 5 17.975V5C5 4.45 5.19583 3.97917 5.5875 3.5875C5.97917 3.19583 6.45 3 7 3H17C17.55 3 18.0208 3.19583 18.4125 3.5875C18.8042 3.97917 19 4.45 19 5V17.975C19 18.6917 18.7 19.2458 18.1 19.6375C17.5 20.0292 16.8667 20.0833 16.2 19.8L12 18ZM12 15.8L17 17.95V5H7V17.95L12 15.8Z",fill:"currentColor"})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),98);
__d("WDSIconWdsIcBookmarkSlash.react",["WDSSvgComponentBase.react","react","stylex"],(function(t,n,r,o,a,i,l){var e=["height","iconXstyle","viewBox","width"],s,u,c=s||(s=r("react")),d="wds-ic-bookmark-slash";function m(t){var n=t.height,o=t.iconXstyle,a=t.viewBox,i=t.width,l=babelHelpers.objectWithoutPropertiesLoose(t,e),s;if(a){var m=a.height,p=m===void 0?0:m,_=a.width,f=_===void 0?0:_,g=a.x,h=g===void 0?0:g,y=a.y,C=y===void 0?0:y;s=[h,C,f,p].join(" ")}var b=24,v=24;return(n!=null||i!=null)&&(b=n,v=i),c.jsx(r("WDSSvgComponentBase.react"),babelHelpers.extends({},l,{children:c.jsxs("svg",{viewBox:s!=null?s:"0 0 24 24",height:b,width:v,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(o),fill:"none",children:[c.jsx("title",{children:d}),c.jsx("path",{d:"M17 5V13.5859L19 15.5859V5C19 3.89543 18.1046 3 17 3H7C6.8208 3 6.6471 3.02357 6.48184 3.06778L8.41406 5H17Z",fill:"currentColor"}),c.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 6.41421V18C5 19.4149 6.42905 20.3824 7.74278 19.857L12 18.1541L16.2572 19.857C16.9442 20.1317 17.6627 19.9983 18.1919 19.6061L19.2929 20.7071C19.6834 21.0976 20.3166 21.0976 20.7071 20.7071C21.0976 20.3166 21.0976 19.6834 20.7071 19.2929L4.70711 3.29289C4.31658 2.90237 3.68342 2.90237 3.29289 3.29289C2.90237 3.68342 2.90237 4.31658 3.29289 4.70711L5 6.41421ZM7 8.41421L16.3096 17.7239L12 16L7 18V8.41421Z",fill:"currentColor"})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),98);
__d("WAWebMediaPanelHeaderButtons.react",["fbt","$InternalEnum","WALogger","WAPromiseDelays","WAWebBotGating","WAWebChatGetters","WAWebChatMessageSearch","WAWebChatRefreshedIcon.react","WAWebCmd","WAWebColumnChangeDispatch","WAWebCommentsModal.react","WAWebComposeBoxActions","WAWebConfirmPopup.react","WAWebCopyToClipboard","WAWebDeleteRevokeMsgFlow.react","WAWebDevOnlyBadge.react","WAWebDrawerManager","WAWebDrawerManagerContext","WAWebDropdownItem.react","WAWebEnvironment","WAWebFbtCommon","WAWebFileSaver","WAWebForwardMessageModalLoadable","WAWebFrontendChatGetters","WAWebFrontendMsgGetters","WAWebIcDownloadIcon.react","WAWebIcShareWindowsIcon.react","WAWebInfoRefreshedIcon.react","WAWebKeepInChatActions","WAWebLaunchIcon.react","WAWebMediaDocumentUtils","WAWebMediaPanelHeaderTestIds","WAWebMediaViewerConstants","WAWebMediaViewerReportSpamPopupLoadable","WAWebModalManager","WAWebMsgGetters","WAWebMsgType","WAWebNewsletterMembershipUtil","WAWebPinInChatCollection","WAWebPinMessageModal.react","WAWebPinnedMessagesUserJourneyLogger","WAWebProtobufsE2E.pb","WAWebReplyPrivatelyRefreshedIcon.react","WAWebReplyToMsgChatAction","WAWebReportGatingUtils","WAWebRevokeMetricUtils","WAWebSendPinMessageAction","WAWebSendSpamChatAction","WAWebSpamConstants","WAWebStateUtils","WAWebThreadMsgUtils","WAWebThumbsDownRefreshedIcon.react","WAWebWamEnumKicEntryPointType","WDSIconIcArrowForward.react","WDSIconIcBookmark.react","WDSIconIcDelete.react","WDSIconIcForward.react","WDSIconIcGrade.react","WDSIconIcMood.react","WDSIconIcOpenInNew.react","WDSIconIcPushPin.react","WDSIconIcReply.react","WDSIconWdsIcBookmarkSlash.react","WDSIconWdsIcGradeSlash.react","WDSIconWdsIcPushPinSlash.react","WDSMenuBarItem.react","cr:13786","cr:23046","cr:7565","react","requireDeferred","useWAWebIsPinnedMsg","useWAWebMsgValues"],(function(t,n,r,o,a,i,l,s){var e,u,c,d,m,p,_=p||(p=r("react")),f=r("requireDeferred")("WAWebAusOSAReportModalTrigger").__setRef("WAWebMediaPanelHeaderButtons.react"),g=n("$InternalEnum").Mirrored(["MenuBar","Dropdown"]);function h(e){var t=o("WAWebFrontendMsgGetters").getChat(e);o("WAWebFrontendChatGetters").getIsCAG(t)?o("WAWebModalManager").ModalManager.open(_.jsx(r("WAWebCommentsModal.react"),{parentMsgs:[e]})):(t.composeQuotedMsg=e,o("WAWebComposeBoxActions").ComposeBoxActions.focus(t))}function y(e){return s._(/*BTDS*/"Signaler {contact_name}",[s._param("contact_name",e.displayName())])}y.displayName=y.name+" [from "+i.id+"]";function C(e){return o("WAWebMsgGetters").getIsSentByMe(e)||o("WAWebNewsletterMembershipUtil").iAmAdminOrOwner(o("WAWebFrontendMsgGetters").getChat(e).newsletterMetadata)}var b=function(){return(n("cr:23046")==null||n("cr:23046").isWindowsShareSheetEnabled==null?void 0:n("cr:23046").isWindowsShareSheetEnabled())===!0},v=function(r,a){r==null||r.stopPropagation(),n("cr:7565")==null||n("cr:7565").openMediaFile(o("WAWebStateUtils").unproxy(a),o("WAWebMediaDocumentUtils").displayFileOpeningToast).catch(function(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Error while opening media file: ",""])),t)})};function S(e){var t=function(n){v(n,e)},r=function(r){r.stopPropagation(),n("cr:7565")&&n("cr:7565").saveMediaFile(o("WAWebStateUtils").unproxy(e)).then(function(){if(n("cr:13786"))return n("cr:13786").shareFile(o("WAWebStateUtils").unproxy(e))}).catch(function(e){o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Error while sharing a message: ",""])),e)})},a=[_.jsx(o("WAWebDropdownItem.react").DropdownItem,{action:r,icon:_.jsx(o("WAWebIcShareWindowsIcon.react").IcShareWindowsIcon,{}),children:s._(/*BTDS*/"Partager")},"share"),_.jsx(o("WAWebDropdownItem.react").DropdownItem,{action:t,icon:_.jsx(o("WAWebLaunchIcon.react").LaunchIcon,{}),children:s._(/*BTDS*/"Ouvrir avec")},"open-with")];return a}function R(e){var t=e.msg,n=e.onClose,a=e.theme,i=a===void 0?"default":a,l=e.type,u=o("WAWebDrawerManagerContext").useDrawerManagerContext("right"),c=function(r){var e;r==null||r.stopPropagation(),n();var a=(e=u.existsDrawer())!=null?e:!1;a&&o("WAWebColumnChangeDispatch").Column.column===2&&o("WAWebDrawerManager").DrawerManager.closeDrawerRight();var i=o("WAWebFrontendMsgGetters").getChat(t),l=o("WAWebChatMessageSearch").getSearchContext(i,o("WAWebStateUtils").unproxy(t).id),s;i.id.isBot()&&o("WAWebBotGating").isAiChatThreadsEnabled()&&(s=o("WAWebThreadMsgUtils").getMsgAiThread(t.unsafe())),o("WAWebCmd").Cmd.openChatAt({chat:i,msgContext:l,threadId:s!=null?s:void 0}).then(function(e){e&&(o("WAWebModalManager").ModalManager.close(),o("WAWebComposeBoxActions").ComposeBoxActions.focus(o("WAWebFrontendMsgGetters").getChat(t)))})},d=i==="media_hub"?o("WAWebChatRefreshedIcon.react").ChatRefreshedIcon:r("WDSIconIcArrowForward.react");return l===g.Dropdown?_.jsx(o("WAWebDropdownItem.react").DropdownItem,{action:c,icon:_.jsx(d,{}),children:s._(/*BTDS*/"Aller au message")}):_.jsx(r("WDSMenuBarItem.react"),{testid:void 0,icon:d,title:s._(/*BTDS*/"Aller au message"),onClick:c})}R.displayName=R.name+" [from "+i.id+"]";function L(e){var t=e.msg;return _.jsx(o("WAWebDropdownItem.react").DropdownItem,{addSpacing:!0,testid:void 0,action:function(){o("WAWebCopyToClipboard").copyTextToClipboard(t.id.toString())},children:_.jsx(o("WAWebDevOnlyBadge.react").DevOnlyBadge,{label:"Copy Msg ID"})},"copy-id")}L.displayName=L.name+" [from "+i.id+"]";function E(e){var t=e.msg,n=e.onClose,a=function(r){n(),o("WAPromiseDelays").delayMs(o("WAWebMediaViewerConstants").CLOSE_ANIMATION_DURATION).then(h.bind(null,o("WAWebStateUtils").unproxy(t)))};return _.jsx(r("WDSMenuBarItem.react"),{testid:void 0,icon:r("WDSIconIcReply.react"),title:s._(/*BTDS*/"R\u00e9pondre"),onClick:a})}E.displayName=E.name+" [from "+i.id+"]";function k(e){var t=e.msg,n=e.onClose,a=function(a){o("WAWebModalManager").ModalManager.open(_.jsx(r("WAWebDeleteRevokeMsgFlow.react"),{chat:o("WAWebFrontendMsgGetters").getChat(t),msgList:[o("WAWebStateUtils").unproxy(t)],onDelete:n})),o("WAWebRevokeMetricUtils").UiRevokeActionHelper.startSession(),o("WAWebRevokeMetricUtils").UiRevokeActionHelper.messageSelected()};return _.jsx(r("WDSMenuBarItem.react"),{testid:void 0,icon:r("WDSIconIcDelete.react"),title:s._(/*BTDS*/"Supprimer"),onClick:a})}k.displayName=k.name+" [from "+i.id+"]";function I(e){var t=e.isMediaDownloadable,n=e.msg,a=e.type,i=function(t){t==null||t.stopPropagation(),o("WAWebFileSaver").FileSaver.initDownload(o("WAWebStateUtils").unproxy(n))};if(!t())return null;var l=r("WAWebEnvironment").isWindows?s._(/*BTDS*/"Enregistrer sous\u2026"):s._(/*BTDS*/"T\u00e9l\u00e9charger");return a===g.Dropdown?_.jsx(o("WAWebDropdownItem.react").DropdownItem,{action:i,disabled:!t(),icon:_.jsx(o("WAWebIcDownloadIcon.react").IcDownloadIcon,{}),children:l}):_.jsx(r("WDSMenuBarItem.react"),{testid:void 0,icon:o("WAWebIcDownloadIcon.react").IcDownloadIcon,title:l,disabled:!t(),onClick:i})}I.displayName=I.name+" [from "+i.id+"]";function T(e){var t=e.msg,n=function(n){v(n,t)};return _.jsx(r("WDSMenuBarItem.react"),{icon:r("WDSIconIcOpenInNew.react"),title:s._(/*BTDS*/"Ouvrir avec"),onClick:n})}T.displayName=T.name+" [from "+i.id+"]";function D(e){var t=e.msg,n=e.openReactionTray,a=e.sendReactionButtonRef;return t.type===o("WAWebMsgType").MSG_TYPE.STICKER?null:_.jsx(r("WDSMenuBarItem.react"),{ref:a,testid:void 0,icon:r("WDSIconIcMood.react"),title:s._(/*BTDS*/"R\u00e9agir"),onClick:n})}D.displayName=D.name+" [from "+i.id+"]";function x(e){var t=e.msg,n,a,i,l=o("useWAWebMsgValues").useMsgValues(t.id,[o("WAWebMsgGetters").getIsKept]),u=l[0],c=function(n){n==null||n.stopPropagation(),o("WAWebKeepInChatActions").runKeepInChatUX(o("WAWebStateUtils").unproxy(t),o("WAWebWamEnumKicEntryPointType").KIC_ENTRY_POINT_TYPE.MEDIA)},d=function(n){n==null||n.stopPropagation(),o("WAWebKeepInChatActions").runUndoKeepInChatUX(o("WAWebStateUtils").unproxy(t),o("WAWebWamEnumKicEntryPointType").KIC_ENTRY_POINT_TYPE.MEDIA)};if(u&&t.canShowUnkeepOption())n=r("WDSIconWdsIcBookmarkSlash.react"),a=d,i=s._(/*BTDS*/"Ne plus garder");else if(!u&&t.canShowKeepOption())n=r("WDSIconIcBookmark.react"),a=c,i=s._(/*BTDS*/"Garder");else return null;return _.jsx(r("WDSMenuBarItem.react"),{testid:void 0,icon:n,title:i,onClick:a},"keep-in-chat-button")}x.displayName=x.name+" [from "+i.id+"]";function $(e){var t=e.msg,n=o("useWAWebMsgValues").useMsgValues(t.id,[o("WAWebMsgGetters").getStar]),a=n[0],i,l,u;return a?(i=function(n){n==null||n.stopPropagation(),o("WAWebCmd").Cmd.sendUnstarMsgs(o("WAWebFrontendMsgGetters").getChat(t),[o("WAWebStateUtils").unproxy(t)])},l=r("WDSIconWdsIcGradeSlash.react"),u=s._(/*BTDS*/"_j{\"*\":\"Retirer des messages importants\"}",[s._plural(1)])):(i=function(n){n==null||n.stopPropagation(),o("WAWebCmd").Cmd.sendStarMsgs(o("WAWebFrontendMsgGetters").getChat(t),[o("WAWebStateUtils").unproxy(t)])},l=r("WDSIconIcGrade.react"),u=s._(/*BTDS*/"_j{\"*\":\"Marquer comme important\"}",[s._plural(1)])),_.jsx(r("WDSMenuBarItem.react"),{testid:void 0,icon:l,title:u,onClick:i},"star-button")}$.displayName=$.name+" [from "+i.id+"]";function P(e){var t=e.msg,n,a,i,l=r("useWAWebIsPinnedMsg")(t.id),u=o("WAWebFrontendMsgGetters").getChat(t);return l?(n=function(n){n==null||n.stopPropagation();var e=o("WAWebPinInChatCollection").PinInChatCollection.getByParentMsgKey(t.id);new(o("WAWebPinnedMessagesUserJourneyLogger")).PinnedMessagesUserJourneyLogger(u).messageMenuClickUnpin(t,e),o("WAWebSendPinMessageAction").sendPinInChatMsg(t,o("WAWebProtobufsE2E.pb").Message$PinInChatMessage$Type.UNPIN_FOR_ALL).catch(function(e){o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Error while unpinning a message: ",""])),e)})},a=r("WDSIconWdsIcPushPinSlash.react"),i=s._(/*BTDS*/"D\u00e9tacher")):(n=function(n){n==null||n.stopPropagation();var e=new(o("WAWebPinnedMessagesUserJourneyLogger")).PinnedMessagesUserJourneyLogger(u);e.messageMenuClickPin(t),o("WAWebModalManager").ModalManager.open(_.jsx(r("WAWebPinMessageModal.react"),{msg:t,logger:e}))},a=r("WDSIconIcPushPin.react"),i=s._(/*BTDS*/"\u00c9pingler")),_.jsx(r("WDSMenuBarItem.react"),{testid:void 0,icon:a,title:i,onClick:n},"pin-button")}P.displayName=P.name+" [from "+i.id+"]";function N(e){var t=e.msg,n=function(n){n==null||n.stopPropagation(),o("WAWebFrontendMsgGetters").getIsUnsentMedia(t)?o("WAWebModalManager").ModalManager.open(_.jsx(o("WAWebConfirmPopup.react").ConfirmPopup,{title:s._(/*BTDS*/"Transfert impossible"),onOK:function(){return o("WAWebModalManager").ModalManager.close()},okText:r("WAWebFbtCommon")("OK"),children:s._(/*BTDS*/"_j{\"*\":\"Veuillez patienter jusqu\\u2019\\u00e0 la fin de l\\u2019envoi des messages et l\\u2019apparition d\\u2019une coche avant de les transf\\u00e9rer.\",\"_1\":\"Veuillez patienter jusqu\\u2019\\u00e0 la fin de l\\u2019envoi du message et l\\u2019apparition d\\u2019une coche avant de le transf\\u00e9rer.\"}",[s._plural(1)])})):o("WAWebModalManager").ModalManager.open(_.jsx(o("WAWebForwardMessageModalLoadable").ForwardMessageModalLoadable,{msgs:[o("WAWebStateUtils").unproxy(t)],onClose:function(){return o("WAWebModalManager").ModalManager.close()}}),{transition:"modal-flow"})};return _.jsx(r("WDSMenuBarItem.react"),{testid:void 0,icon:r("WDSIconIcForward.react"),title:s._(/*BTDS*/"Transf\u00e9rer"),onClick:n})}N.displayName=N.name+" [from "+i.id+"]";function M(e){var t=e.msg,n=function(){r("WAWebReplyToMsgChatAction")(t)};return _.jsx(o("WAWebDropdownItem.react").DropdownItem,{testid:void 0,action:n,icon:_.jsx(o("WAWebReplyPrivatelyRefreshedIcon.react").ReplyPrivatelyRefreshedIcon,{}),children:s._(/*BTDS*/"R\u00e9pondre en priv\u00e9")})}M.displayName=M.name+" [from "+i.id+"]";function w(e){var t=e.msg,n=function(n){n?o("WAWebSendSpamChatAction").sendMessageReportBlock(t,o("WAWebSpamConstants").SpamFlow.MediaViewer):o("WAWebSendSpamChatAction").sendMessageReport(t,o("WAWebSpamConstants").SpamFlow.MediaViewer).then(function(e){o("WAWebModalManager").ModalManager.close(),e!=null&&o("WAWebReportGatingUtils").isAusOSAReportingEnabled()&&f.load().then(function(t){return t.WAWebAusOSAReportModalTrigger(e)}).catch(function(e){o("WALogger").ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Error opening Aus OSA modal while reporting a message from media viewer: ",""])),e).sendLogs("report-message-aus-osa-from-media-viewer-error")})}).catch(function(e){o("WALogger").ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Error while reporting a message from media viewer: ",""])),e).sendLogs("report-message-from-media-viewer-error")})},r=function(){var e,r;o("WAWebModalManager").ModalManager.open(_.jsx(o("WAWebMediaViewerReportSpamPopupLoadable").WAWebMediaViewerReportSpamPopupLoadable,{isBusiness:t.senderObj.isBusiness,isGroup:o("WAWebChatGetters").getIsGroup(o("WAWebFrontendMsgGetters").getChat(t)),isBizBot3p:(e=(r=o("WAWebFrontendMsgGetters").getChat(t).contact.businessProfile)==null?void 0:r.isBizBot3p)!=null?e:!1,onReport:n,onCancel:function(){return o("WAWebModalManager").ModalManager.close()},title:y(t)}))};return _.jsx(o("WAWebDropdownItem.react").DropdownItem,{action:r,icon:_.jsx(o("WAWebThumbsDownRefreshedIcon.react").ThumbsDownRefreshedIcon,{}),children:y(t)})}w.displayName=w.name+" [from "+i.id+"]";function A(e){var t=e.msg,n=e.onClose,r=function(r){n(),o("WAPromiseDelays").delayMs(o("WAWebMediaViewerConstants").CLOSE_ANIMATION_DURATION+250).then(o("WAWebCmd").Cmd.msgInfoDrawer.bind(o("WAWebCmd").Cmd,o("WAWebStateUtils").unproxy(t)))};return _.jsx(o("WAWebDropdownItem.react").DropdownItem,{action:r,icon:_.jsx(o("WAWebInfoRefreshedIcon.react").InfoRefreshedIcon,{}),children:s._(/*BTDS*/"Infos du message")})}A.displayName=A.name+" [from "+i.id+"]",l.ButtonType=g,l.delayedReplyCallback=h,l.getReportSpamTitle=y,l.canDeleteMsg=C,l.isShareSheetEnabled=b,l.handleOpenAnotherAppButtonClick=v,l.getDropdownMenuItemsForWindowsShareSheet=S,l.GoToButton=R,l.CopyMsgIdButton=L,l.ReplyButton=E,l.DeleteButton=k,l.DownloadButton=I,l.OpenWithAnotherAppButton=T,l.SendReactionButton=D,l.KeepInChatButton=x,l.StarButton=$,l.PinButton=P,l.ForwardButton=N,l.PrivateReplyButton=M,l.ReportSpamButton=w,l.MsgInfoButton=A}),226);
__d("WAWebReportNewsletterPostSpamButton.react",["fbt","WAWebDropdownItem.react","WAWebFrontendMsgGetters","WAWebModalManager","WAWebReportNewsletterPostPopup.react","WAWebSpamConstants","WAWebThumbsDownRefreshedIcon.react","react"],(function(t,n,r,o,a,i,l,s){var e,u=e||(e=r("react"));function c(e){var t=e.msg,n=o("WAWebFrontendMsgGetters").getChat(t),a=function(){o("WAWebModalManager").ModalManager.open(u.jsx(r("WAWebReportNewsletterPostPopup.react"),{chat:n,msg:t,spamFlow:o("WAWebSpamConstants").SpamFlow.MediaViewer}))};return u.jsx(o("WAWebDropdownItem.react").DropdownItem,{action:a,icon:u.jsx(o("WAWebThumbsDownRefreshedIcon.react").ThumbsDownRefreshedIcon,{}),children:s._(/*BTDS*/"Signaler")})}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),226);
__d("WAWebSearchTheWebButton.react",["WAWebDropdownItem.react","WAWebModalManager","WAWebSearchRefreshedIcon.react","WAWebSearchTheWebCommonUtils","WAWebSearchTheWebEventLogger","WAWebWamEnumStwInteraction","WAWebWebSearchPopup.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=e.entryPoint,n=e.messageType,a=e.msg,i=e.stwFormat,l=function(){o("WAWebSearchTheWebEventLogger").logSTWEvent({stwEntryPoint:t,stwFormat:i,stwInteraction:o("WAWebWamEnumStwInteraction").STW_INTERACTION.ENTRY_POINT_CLICKED,messageType:n}),o("WAWebModalManager").ModalManager.open(s.jsx(r("WAWebWebSearchPopup.react"),{message:a,entryPoint:t,stwFormat:i}))};return s.jsx(o("WAWebDropdownItem.react").DropdownItem,{action:l,icon:s.jsx(o("WAWebSearchRefreshedIcon.react").SearchRefreshedIcon,{}),children:o("WAWebSearchTheWebCommonUtils").getHFMHeaderCTAText()})}u.displayName=u.name+" [from "+i.id+"]",l.default=u}),98);
__d("WAWebSendForAdminReviewButton.react",["fbt","WAWebDropdownItem.react","WAWebFrontendMsgGetters","WAWebModalManager","WAWebReportToAdminEventsLogger","WAWebReportToAdminPopup.react","WAWebThumbsDownRefreshedIcon.react","WAWebWamEnumReportToAdminInteraction","react"],(function(t,n,r,o,a,i,l,s){var e,u=e||(e=r("react"));function c(e){var t=e.msg,n=function(){o("WAWebReportToAdminEventsLogger").logRTAReportingEvent({reportToAdminInteraction:o("WAWebWamEnumReportToAdminInteraction").REPORT_TO_ADMIN_INTERACTION.CLICK_SEND_FOR_ADMIN_REVIEW,groupId:o("WAWebFrontendMsgGetters").getChat(t).id.user}),o("WAWebModalManager").ModalManager.open(u.jsx(r("WAWebReportToAdminPopup.react"),{msg:t}))};return u.jsx(o("WAWebDropdownItem.react").DropdownItem,{action:n,icon:u.jsx(o("WAWebThumbsDownRefreshedIcon.react").ThumbsDownRefreshedIcon,{}),children:s._(/*BTDS*/"Envoyer \u00e0 l\u2019admin pour examen")})}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),226);
__d("WAWebMediaPanelHeader.react",["fbt","WAWebCellFrame.react","WAWebChatGetters","WAWebClock","WAWebDebugGatingUtils","WAWebDetailImage.react","WAWebDropdown.react","WAWebDropdownItemSeparator.react","WAWebEmojiText.react","WAWebEnvironment","WAWebFbtCommon","WAWebFlex.react","WAWebFrontendMsgGetters","WAWebIcCloseIcon.react","WAWebMediaIncrementalZoom","WAWebMediaPanelHeader.styles","WAWebMediaPanelHeaderButtons.react","WAWebMediaPanelHeaderTestIds","WAWebMediaTypes","WAWebMediaViewerFlow.react","WAWebMenuBar.react","WAWebMessageAssociation.flow","WAWebMessageMeta.react","WAWebMsgActionCapability","WAWebMsgGetters","WAWebMsgReply","WAWebMsgViewCount","WAWebNewsletterGatingUtils","WAWebPdfViewerEventEmitter","WAWebReactionUserJourneyLogger","WAWebReactionsPanel.react","WAWebReactionsUtils","WAWebReportNewsletterPostSpamButton.react","WAWebSearchTheWebButton.react","WAWebSearchTheWebCommonUtils","WAWebSearchTheWebEventLogger","WAWebSendForAdminReviewButton.react","WAWebSendReactionMsgAction","WAWebSendReactionsTray.react","WAWebSendReactionsTrayContainer.react","WAWebTPPdfViewerGatingUtils","WAWebUimUie.react","WAWebUimUieMenu.react","WAWebWamEnumReactionUserJourneyEntryPoint","WAWebWamEnumStwEntryPoint","WAWebWamEnumStwInteraction","WDSIconIcMoreVert.react","WDSIconWdsIcViewOnce.react","WDSMenuBarItem.react","cr:12529","cr:7565","cr:7572","isStringNullOrEmpty","react","stylex","useWAWebListener","useWAWebModelValues","useWAWebMsgValues","useWAWebStableCallback"],(function(t,n,r,o,a,i,l,s){var e,u,c,d=c||(c=o("react")),m=e||(e=r("react")),p=d.useContext,_=d.useRef,f=d.useState;function g(e){var t,a=e.msg,i=e.msgIndexInAlbum,l=e.onClose,s=e.onHightlightCloseEnd,c=e.onViewOnceInfoClick,d=e.showBorderBottom,g=d===void 0?!1:d,h=e.theme,y=h===void 0?"default":h,b=_(null),v=o("useWAWebMsgValues").useMsgValues(e.msg.id,[o("WAWebMsgGetters").getId,o("WAWebMsgGetters").getStar,o("WAWebMsgGetters").getType,o("WAWebMsgGetters").getIsGif,o("WAWebMsgGetters").getIsViewOnce,o("WAWebMsgGetters").getSender,o("WAWebFrontendMsgGetters").getSenderObj,o("WAWebMsgGetters").getT,o("WAWebMsgGetters").getIsSentByMe,o("WAWebMsgGetters").getIsStickerMsg,o("WAWebMsgGetters").getBroadcastId,o("WAWebMsgGetters").getIsKept,o("WAWebMsgGetters").getMessageSecret,o("WAWebMsgGetters").getIsCarouselCard,o("WAWebMsgGetters").getCaption]),S=v[0],R=v[1],L=v[2],E=v[3],k=v[4],I=v[5],T=v[6],D=v[7],x=v[8],$=v[9],P=v[10],N=v[11],M=v[12],w=v[13],A=v[14],F=o("WAWebMsgViewCount").useWAWebLocalizedViewCount(a.id),O=o("WAWebFrontendMsgGetters").getChat(a),B=o("useWAWebModelValues").useModelValues(e.mediaData,["filehash","mediaStage","renderableUrl","filename","mimetype"]),W=f(null),q=W[0],U=W[1],V=f(null),H=V[0],G=V[1],z=_(null),j=_(!1),K=function(){U(null),j.current||o("WAWebReactionUserJourneyLogger").ReactionUserJourneyLogger.trayClose()},Q=function(){G(null),o("WAWebReactionUserJourneyLogger").ReactionUserJourneyLogger.trayClose(),j.current=!1},X=r("useWAWebStableCallback")(function(e){if(o("WAWebReactionsUtils").canReactToMessage(e)){var t=function(n){o("WAWebReactionUserJourneyLogger").ReactionUserJourneyLogger.reactionSelect(n),o("WAWebSendReactionMsgAction").sendReactionToMsg(e,n).catch(function(e){}),Q()};G({dirY:o("WAWebDropdown.react").DirY.BOTTOM,dirX:o("WAWebDropdown.react").DirX.CENTER,type:o("WAWebDropdown.react").MenuType.ReactionPicker,menu:m.jsx(r("WAWebReactionsPanel.react"),{msgId:e.id.toString(),onSelection:t}),flipOnRTL:!0,anchor:z.current})}}),Y=function(){if(o("WAWebReactionsUtils").canReactToMessage(a)){var e=function(t){j.current=t===o("WAWebSendReactionsTray.react").MORE_REACTIONS,t!==o("WAWebSendReactionsTray.react").MORE_REACTIONS?(o("WAWebReactionUserJourneyLogger").ReactionUserJourneyLogger.reactionSelect(t),o("WAWebSendReactionMsgAction").sendReactionToMsg(a,t).catch(function(e){})):self.setTimeout(function(){X(a)},150),K()},t={dirY:o("WAWebDropdown.react").DirY.BOTTOM,dirX:o("WAWebDropdown.react").DirX.CENTER,type:o("WAWebDropdown.react").MenuType.ReactionSendTray,menu:m.jsx(o("WAWebSendReactionsTrayContainer.react").SendReactionsTrayContainer,{msg:a,selectedCallback:e,userJourneyEntryPoint:o("WAWebWamEnumReactionUserJourneyEntryPoint").REACTION_USER_JOURNEY_ENTRY_POINT.MEDIA_VIEWER_REACTION_CTA}),flipOnRTL:!1,anchor:z.current};U(t)}};o("useWAWebListener").useListener(b.current,"animationend",function(){s()});var J=a.displayName({showShortName:!0,withPushName:!0}),Z=function(){return k||!o("WAWebMsgActionCapability").canDownloadMsg(a)?!1:o("WAWebTPPdfViewerGatingUtils").isWebTPPdfViewerEnabledForMimeType(B.mimetype)&&B.mediaStage===o("WAWebMediaTypes").MediaDataStage.INIT?!0:!!B.renderableUrl||B.mediaStage===o("WAWebMediaTypes").MediaDataStage.RESOLVED},ee=function(){return m.jsx(o("WAWebIcCloseIcon.react").IcCloseIcon,{xstyle:e.isHighlightClose?r("WAWebMediaPanelHeader.styles").highlightClose:{},containerRef:b})},te;q?te=m.jsx(o("WAWebUimUie.react").UIE,{displayName:"MsgReaction",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:K,children:m.jsx(r("WAWebUimUieMenu.react"),{contextMenu:q})}):H&&(te=m.jsx(o("WAWebUimUie.react").UIE,{displayName:"MsgReactionPicker",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:Q,children:m.jsx(r("WAWebUimUieMenu.react"),{contextMenu:H})}));var ne=o("WAWebNewsletterGatingUtils").isNewsletterViewCountEnabled(O==null||(t=O.newsletterMetadata)==null?void 0:t.membershipType)&&F!=null?m.jsxs(o("WAWebFlex.react").FlexRow,{className:(u||(u=r("stylex")))(r("WAWebMediaPanelHeader.styles").viewCount),children:[o("WAWebClock").Clock.relativeDateAndTimeStr(D),m.jsx(o("WAWebMessageMeta.react").MetaBullet,{}),m.jsx("span",{children:F})]}):m.jsx(m.Fragment,{children:o("WAWebClock").Clock.relativeDateAndTimeStr(D)});o("WAWebTPPdfViewerGatingUtils").isWebTPPdfViewerEnabledForMimeType(B.mimetype)&&!r("isStringNullOrEmpty")(A)&&A!==B.filename&&(ne=m.jsxs(o("WAWebFlex.react").FlexRow,{children:[m.jsx("span",{children:o("WAWebClock").Clock.relativeDateAndTimeStr(D)}),m.jsx(o("WAWebMessageMeta.react").MetaBullet,{}),m.jsx(o("WAWebEmojiText.react").EmojiText,{className:(u||(u=r("stylex")))(r("WAWebMediaPanelHeader.styles").filename),ellipsify:!0,text:A,titlify:!0,title:A})]}));var re=o("WAWebTPPdfViewerGatingUtils").isWebTPPdfViewerEnabledForMimeType(B.mimetype)?m.jsxs(o("WAWebFlex.react").FlexRow,{children:[m.jsx(o("WAWebEmojiText.react").EmojiText,{className:(u||(u=r("stylex")))(r("WAWebMediaPanelHeader.styles").author),ellipsify:!0,text:J}),m.jsx("div",{className:(u||(u=r("stylex")))(r("WAWebMediaPanelHeader.styles").dot),children:"\xB7"}),m.jsx(o("WAWebEmojiText.react").EmojiText,{className:(u||(u=r("stylex")))(r("WAWebMediaPanelHeader.styles").filename),ellipsify:!0,text:B.filename})]}):m.jsx(o("WAWebEmojiText.react").EmojiText,{ellipsify:!0,text:J}),oe=p(o("WAWebMediaViewerFlow.react").MediaViewerFlowZoomContext),ae=p(o("WAWebMediaIncrementalZoom").MediaIncrementalZoomCtx).isEnabled,ie=!ae&&oe;return m.jsxs("div",babelHelpers.extends({},(u||(u=r("stylex"))).props(r("WAWebMediaPanelHeader.styles").mediaPanelHeader,ie&&r("WAWebMediaPanelHeader.styles").mediaPanelHeaderHidden,g&&r("WAWebMediaPanelHeader.styles").mediaPanelHeaderBorderBottom),{children:[m.jsx("div",babelHelpers.extends({},u.props(r("WAWebMediaPanelHeader.styles").info),{children:m.jsx(r("WAWebCellFrame.react"),{idle:!0,image:m.jsx(o("WAWebDetailImage.react").DetailImage,{id:I,size:40}),primary:re,secondary:ne,theme:"media"})})),m.jsx("div",babelHelpers.extends({},u.props(r("WAWebMediaPanelHeader.styles").mediaPanelTools),{children:m.jsxs(o("WAWebMenuBar.react").MenuBar,{theme:"strong",gap:"single",children:[n("cr:12529")&&o("WAWebTPPdfViewerGatingUtils").isWebTP3PSharingEnabled()&&o("WAWebTPPdfViewerGatingUtils").isWebTPPdfEditorEnabledForMimeType(B.mimetype)&&m.jsx(n("cr:12529"),{msg:a,mediaData:B,isDisabled:B.mediaStage!==o("WAWebMediaTypes").MediaDataStage.RESOLVED||e.hasRendered!==!0}),n("cr:7572")&&o("WAWebTPPdfViewerGatingUtils").isWebTPPdfViewerEnabledForMimeType(B.mimetype)&&m.jsx(n("cr:7572"),{isDisabled:B.mediaStage!==o("WAWebMediaTypes").MediaDataStage.RESOLVED||e.hasRendered!==!0,onSearchClick:function(){o("WAWebPdfViewerEventEmitter").pdfViewerEventEmitter.trigger("search:show",[])}}),m.jsx(C,{isMediaDownloadable:Z,msg:a,msgIndexInAlbum:i,onClose:l,onViewOnceInfoClick:c,openReactionTray:Y,sendReactionButtonRef:z,theme:y}),m.jsx(r("WDSMenuBarItem.react"),{testid:void 0,icon:ee,title:r("WAWebFbtCommon")("Close"),onClick:e.onClose})]},"media-panel-header")})),te]}))}g.displayName=g.name+" [from "+i.id+"]";function h(e){var t=e.isMediaDownloadable,n=e.msg,r=e.onClose,a=e.openReactionTray,i=e.sendReactionButtonRef;return m.jsxs(m.Fragment,{children:[o("WAWebMsgReply").canReplyMsg(n)?m.jsx(o("WAWebMediaPanelHeaderButtons.react").ReplyButton,{msg:n,onClose:r}):null,o("WAWebMsgActionCapability").canStarMsg(n)?m.jsx(o("WAWebMediaPanelHeaderButtons.react").StarButton,{msg:n}):null,n.canShowKeepOrUnkeepOption()?m.jsx(o("WAWebMediaPanelHeaderButtons.react").KeepInChatButton,{msg:n}):null,o("WAWebMsgActionCapability").canPinMsg(n)?m.jsx(o("WAWebMediaPanelHeaderButtons.react").PinButton,{msg:n}):null,o("WAWebReactionsUtils").canReactToMessage(n)?m.jsx(o("WAWebMediaPanelHeaderButtons.react").SendReactionButton,{msg:n,openReactionTray:a,sendReactionButtonRef:i}):null,m.jsx(o("WAWebMediaPanelHeaderButtons.react").DeleteButton,{msg:n,onClose:r}),o("WAWebMsgActionCapability").canForwardMsg(n)?m.jsx(o("WAWebMediaPanelHeaderButtons.react").ForwardButton,{msg:n}):null,m.jsx(b,{isMediaDownloadable:t,isAlbumMedia:!0,msg:n,onClose:r})]})}h.displayName=h.name+" [from "+i.id+"]";function y(e){var t=e.isMediaDownloadable,a=e.msg,i=e.onClose,l=e.openReactionTray,s=e.sendReactionButtonRef,u=e.theme,c=u===void 0?"default":u;return m.jsxs(m.Fragment,{children:[!o("WAWebMsgGetters").getIsStickerMsg(a)&&!o("WAWebMsgGetters").getIsCarouselCard(a)?m.jsx(o("WAWebMediaPanelHeaderButtons.react").GoToButton,{msg:a,type:o("WAWebMediaPanelHeaderButtons.react").ButtonType.MenuBar,onClose:i,theme:c}):null,(o("WAWebMsgGetters").getIsStickerMsg(a)||o("WAWebMsgGetters").getIsMedia(a))&&!o("WAWebMsgGetters").getIsCarouselCard(a)&&!o("WAWebMsgGetters").getIsNewsletterMsg(a)?m.jsx(o("WAWebMediaPanelHeaderButtons.react").ReplyButton,{msg:a,onClose:i}):null,o("WAWebMsgActionCapability").canStarMsg(a)?m.jsx(o("WAWebMediaPanelHeaderButtons.react").StarButton,{msg:a}):null,o("WAWebMsgActionCapability").canPinMsg(a)?m.jsx(o("WAWebMediaPanelHeaderButtons.react").PinButton,{msg:a}):null,a.canShowKeepOrUnkeepOption()?m.jsx(o("WAWebMediaPanelHeaderButtons.react").KeepInChatButton,{msg:a}):null,o("WAWebMsgGetters").getIsStickerMsg(a)&&o("WAWebMediaPanelHeaderButtons.react").canDeleteMsg(a)?m.jsx(o("WAWebMediaPanelHeaderButtons.react").DeleteButton,{msg:a,onClose:i}):null,o("WAWebReactionsUtils").canReactToMessage(a)?m.jsx(o("WAWebMediaPanelHeaderButtons.react").SendReactionButton,{msg:a,openReactionTray:l,sendReactionButtonRef:s}):null,o("WAWebMsgActionCapability").canForwardMsg(a)?m.jsx(o("WAWebMediaPanelHeaderButtons.react").ForwardButton,{msg:a}):null,o("WAWebMsgGetters").getIsStickerMsg(a)?null:m.jsx(o("WAWebMediaPanelHeaderButtons.react").DownloadButton,{isMediaDownloadable:t,msg:a,type:o("WAWebMediaPanelHeaderButtons.react").ButtonType.MenuBar}),!o("WAWebMsgGetters").getIsStickerMsg(a)&&r("WAWebEnvironment").isWindows&&n("cr:7565")!=null&&t()&&!o("WAWebMediaPanelHeaderButtons.react").isShareSheetEnabled()?m.jsx(o("WAWebMediaPanelHeaderButtons.react").OpenWithAnotherAppButton,{msg:a}):null,o("WAWebMsgActionCapability").canReportMsg(a)?m.jsx(b,{isMediaDownloadable:t,isAlbumMedia:!1,msg:a,onClose:i}):null]})}y.displayName=y.name+" [from "+i.id+"]";function C(e){var t=e.isMediaDownloadable,n=e.msg,r=e.msgIndexInAlbum,a=e.onClose,i=e.onViewOnceInfoClick,l=e.openReactionTray,s=e.sendReactionButtonRef,u=e.theme,c=u===void 0?"default":u,d=p(o("WAWebMediaIncrementalZoom").MediaIncrementalZoomCtx),_=[];if(d.isEnabled){var f;_.push(m.jsx((f=o("WAWebMediaIncrementalZoom")).ZoomButton,{direction:f.ZoomDirection.OUT},"zoom-out"),m.jsx(f.ZoomButton,{direction:f.ZoomDirection.IN},"zoom-in"))}return n.isViewOnce?_.push(m.jsx(v,{isMediaDownloadable:t,msg:n,onClose:a,onViewOnceInfoClick:i},"view-once")):r>=0&&n.associationType===o("WAWebMessageAssociation.flow").MessageAssociationType.MEDIA_ALBUM?_.push(m.jsx(h,{isMediaDownloadable:t,msg:n,onClose:a,openReactionTray:l,sendReactionButtonRef:s},"album")):_.push(m.jsx(y,{isMediaDownloadable:t,msg:n,onClose:a,openReactionTray:l,sendReactionButtonRef:s,theme:c},"non-album")),_}C.displayName=C.name+" [from "+i.id+"]";function b(e){var t=e.isAlbumMedia,n=e.isMediaDownloadable,a=e.msg,i=e.onClose,l=o("WAWebSearchTheWebCommonUtils").getSupportedSearchOptions(a),u;l.get(o("WAWebSearchTheWebCommonUtils").SearchType.IMAGE)!=null&&(u=o("WAWebSearchTheWebCommonUtils").getSTWFormat(l));var c=[];n()&&o("WAWebMediaPanelHeaderButtons.react").isShareSheetEnabled()&&c.push.apply(c,o("WAWebMediaPanelHeaderButtons.react").getDropdownMenuItemsForWindowsShareSheet(a));var d=o("WAWebFrontendMsgGetters").getChat(a);(o("WAWebMsgReply").canPrivateReply(a)||o("WAWebMsgReply").canPrivateReplyInRestrictedGrp(a))&&c.push(m.jsx(o("WAWebMediaPanelHeaderButtons.react").PrivateReplyButton,{msg:a},"private_reply")),t&&(o("WAWebMsgGetters").getIsSentByMe(a)&&c.push(m.jsx(o("WAWebMediaPanelHeaderButtons.react").MsgInfoButton,{msg:a,onClose:i},"dropdownMsgInfo")),c.push(m.jsx(o("WAWebMediaPanelHeaderButtons.react").GoToButton,{msg:a,type:o("WAWebMediaPanelHeaderButtons.react").ButtonType.Dropdown,onClose:i},"dropdownGoToMsg"),m.jsx(o("WAWebMediaPanelHeaderButtons.react").DownloadButton,{isMediaDownloadable:n,msg:a,type:o("WAWebMediaPanelHeaderButtons.react").ButtonType.Dropdown},"dropdownDownload"))),u!=null&&c.push(m.jsx(r("WAWebSearchTheWebButton.react"),{messageType:a.getWamMessageType(),msg:a,entryPoint:o("WAWebWamEnumStwEntryPoint").STW_ENTRY_POINT.MEDIA_VIEWER,stwFormat:u},"search_the_web"));var p=!o("WAWebChatGetters").getIsNewsletter(d)&&(a.isViewOnce||o("WAWebMsgActionCapability").canReportMsg(a)),_=o("WAWebChatGetters").getIsNewsletter(d)&&o("WAWebMsgActionCapability").canReportMsg(a);return _?c.push(m.jsx(r("WAWebReportNewsletterPostSpamButton.react"),{msg:a},"reportSpam")):p&&c.push(m.jsx(o("WAWebMediaPanelHeaderButtons.react").ReportSpamButton,{msg:a},"reportSpam")),o("WAWebMsgActionCapability").canReportToAdmin(a)&&c.push(m.jsx(r("WAWebSendForAdminReviewButton.react"),{msg:a},"report_to_admin")),o("WAWebDebugGatingUtils").msgDebugMenuItemsEnabled()&&(c.push(m.jsx(r("WAWebDropdownItemSeparator.react"),{})),c.push(m.jsx(o("WAWebMediaPanelHeaderButtons.react").CopyMsgIdButton,{msg:a}))),m.jsx(r("WDSMenuBarItem.react"),{testid:void 0,icon:r("WDSIconIcMoreVert.react"),title:s._(/*BTDS*/"Menu"),dropdownMenu:{menu:c,type:o("WAWebDropdown.react").MenuType.DropdownMenu,flipOnRTL:!0,dirX:o("WAWebDropdown.react").DirX.LEFT},onOpen:function(){u!=null&&o("WAWebSearchTheWebEventLogger").logSTWEvent({stwEntryPoint:o("WAWebWamEnumStwEntryPoint").STW_ENTRY_POINT.MEDIA_VIEWER,stwInteraction:o("WAWebWamEnumStwInteraction").STW_INTERACTION.ENTRY_POINT_SURFACED,stwFormat:u,messageType:a.getWamMessageType()})}})}b.displayName=b.name+" [from "+i.id+"]";function v(e){var t=e.isMediaDownloadable,n=e.msg,a=e.onClose,i=e.onViewOnceInfoClick;return m.jsxs(m.Fragment,{children:[m.jsx(o("WAWebMenuBar.react").MenuBarItem,{icon:m.jsx(r("WDSIconWdsIcViewOnce.react"),{iconXstyle:r("WAWebMediaPanelHeader.styles").voIcon}),title:s._(/*BTDS*/"Information sur la vue unique"),onClick:i}),m.jsx(b,{isMediaDownloadable:t,isAlbumMedia:!1,msg:n,onClose:a})]})}v.displayName=v.name+" [from "+i.id+"]",l.default=g}),226);
__d("WAWebMediaSticker.react",["Promise","WAWebFirstPartyStickerInfo.react","WAWebFlex.react","WAWebImg.react","WAWebLottieSticker.react","WAWebMediaUrlProvider","WAWebMediaViewerStyles","WAWebMediaZoomable.react","WAWebNewsletterCollection","WAWebNewsletterMembershipUtil","WAWebNullFunc","WAWebStickerDetailsStickerPackInfo.react","WAWebStickerLikeMsgPlaceholder.react","WAWebStickerModel","WAWebStickerUtils","WAWebWamEnumWebcRmrReasonCode","react","stylex","useMergeRefs","useWAWebModelValues"],(function(t,n,r,o,a,i,l){var e=["ref"],s,u,c,d,m=d||(d=r("react")),p=(c||(c=o("react"))).useRef,_=376,f={container:{width:"xh8yej3",height:"x5yr21d",$$css:!0}};function g(t){var a=t.ref,i=babelHelpers.objectWithoutPropertiesLoose(t,e),l=i.msg,c=o("useWAWebModelValues").useModelValues(i.mediaData,["encFilehash","directPath","filehash","mediaKey","mediaKeyTimestamp","mediaStage","mimetype","fullWidth","fullHeight","isFirstParty","isAvatar","stickerPackId","stickerPackName","stickerPackPublisher","extractedLottieSticker","accessibilityLabel"]),d=p(null),_=r("useMergeRefs")(a,d),g=function(t){var e;(e=d.current)==null||e.onClick(t)},y=function(){return l?l.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:o("WAWebWamEnumWebcRmrReasonCode").WEBC_RMR_REASON_CODE.MEDIA_VIEWER,isUserInitiated:!1}):(s||(s=n("Promise"))).resolve()},C=r("WAWebNewsletterCollection").getActive(),b=o("WAWebNewsletterMembershipUtil").iAmAdminOrOwner(C==null?void 0:C.newsletterMetadata),v=c.isFirstParty===!0?m.jsx(r("WAWebFirstPartyStickerInfo.react"),{stickerPackId:c.stickerPackId,onStickerPackView:i.onStickerPackView,stickerPackViewDelay:i.stickerPackViewDelay,showViewPackButton:C!=null?c.isAvatar!==!0&&b:c.isAvatar!==!0,sticker:new(o("WAWebStickerModel")).StickerModel({id:c.filehash,mimetype:c.mimetype,width:c.fullWidth,height:c.fullHeight,filehash:c.filehash,encFilehash:c.encFilehash,directPath:c.directPath,mediaKey:c.mediaKey,mediaKeyTimestamp:c.mediaKeyTimestamp})}):m.jsx(o("WAWebStickerDetailsStickerPackInfo.react").StickerDetailsStickerPackInfo,{name:c.stickerPackName,publisher:c.stickerPackPublisher,theme:o("WAWebStickerDetailsStickerPackInfo.react").Theme.MediaViewer,sticker:new(o("WAWebStickerModel")).StickerModel({id:c.filehash,mimetype:c.mimetype,width:c.fullWidth,height:c.fullHeight,filehash:c.filehash,encFilehash:c.encFilehash,directPath:c.directPath,mediaKey:c.mediaKey,mediaKeyTimestamp:c.mediaKeyTimestamp})}),S=m.jsx(r("WAWebMediaUrlProvider"),{mediaData:c,placeholderRenderer:h,downloadMedia:y,children:function(t){return m.jsx(r("WAWebImg.react"),{className:(u||(u=r("stylex")))(r("WAWebMediaViewerStyles").content),onClick:g,src:t,onLoad:i.onLoad})}});return o("WAWebStickerUtils").getStickerFileType(c.mimetype)===o("WAWebStickerUtils").StickerFileType.LOTTIE&&(S=m.jsx(r("WAWebLottieSticker.react"),{className:"",mediaData:c,startAnimation:!0,onClick:g,placeholderRenderer:o("WAWebNullFunc").returnNull,downloadMedia:y})),m.jsxs(o("WAWebFlex.react").FlexColumn,{align:"center",justify:"center",xstyle:f.container,children:[m.jsx("div",{className:"xh8yej3 x5yr21d xlnrm6 xjkwb7i x1iymm2a xupqr0c","data-testid":void 0,children:m.jsx(r("WAWebMediaZoomable.react"),{ref:_,width:c.fullWidth,height:c.fullHeight,onZoomIn:i.onImgZoomIn,msg:l,children:S})}),v]})}g.displayName=g.name+" [from "+i.id+"]";function h(){return m.jsx(r("WAWebStickerLikeMsgPlaceholder.react"),{size:_})}h.displayName=h.name+" [from "+i.id+"]",l.default=g}),98);
__d("WAWebMediaViewerCaption.react",["WAWebFormatConfiguration","WAWebMsgLinks","WAWebMsgPhoneNumbers"],(function(t,n,r,o,a,i,l){function e(e){var t=e.id,n=e.msg;return o("WAWebFormatConfiguration").Conversation({mentions:n.mentionMap(),groupMentions:n.groupMentionMap(),phoneNumbers:o("WAWebMsgPhoneNumbers").getPhoneNumbersFromMsg(n),links:o("WAWebMsgLinks").getLinksFromMsg(n),trusted:!0,fromMe:t.fromMe,fromChatWid:t.remote,parseLists:!0,parseQuotes:!0,parseInlineCode:!0})}l.getCaptionFormatters=e}),98);
__d("WAWebMediaViewerMediaVideo.react",["fbt","WAWebAddOnBubbleType","WAWebAddOnBubblesContainer.react","WAWebAnnotation.react","WAWebBlurredImage.react","WAWebEnvironment","WAWebGetDisplayType","WAWebMediaTypes","WAWebMediaViewerStyles","WAWebMsgGetters","WAWebNoop","WAWebObjectFit.react","WAWebPipConst","WAWebPipFloatingVideoPlayer.react","WAWebPipMsgVideoPlayer.react","WAWebReactionsUtils","WAWebStopEvent","WAWebVideo.react","WAWebVideoUtils","WAWebWamEnumWebcRmrReasonCode","isNonZeroNumber","react","stylex","useWAWebModelValues"],(function(t,n,r,o,a,i,l,s){var e=["ref"],u,c,d,m=d||(d=o("react")),p=u||(u=r("react")),_=m.useEffect,f=m.useImperativeHandle,g=m.useMemo,h=m.useRef,y=m.useState;function C(t){var n,a=t.ref,i=babelHelpers.objectWithoutPropertiesLoose(t,e),l=i.autoPlay,u=i.msg,d=i.onClose,m=i.onLoad,C=i.onLoadedData,v=i.startTime,S=v===void 0?0:v,R=o("useWAWebModelValues").useModelValues(i.mediaData,["mediaStage","fullWidth","fullHeight","isGif","isViewOnce","preview","renderableUrl","streamable"]),L=y(!1),E=L[0],k=L[1],I=y(!0),T=I[0],D=I[1],x=h(),$=g(function(){return(R.mediaStage===o("WAWebMediaTypes").MediaDataStage.RESOLVED||o("WAWebVideoUtils").isMsgStreamable(u))&&o("isNonZeroNumber").isNonZeroNumber(R.fullWidth)&&o("isNonZeroNumber").isNonZeroNumber(R.fullHeight)?b(R):{width:0,height:0}},[R,u]);_(function(){if(!o("WAWebVideoUtils").isMsgStreamable(u))return u.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:o("WAWebWamEnumWebcRmrReasonCode").WEBC_RMR_REASON_CODE.MEDIA_VIEWER,isUserInitiated:!0}),function(){u.mediaObject&&u.cancelDownload()}},[]);var P=function(t){k(t)};f(a,function(){return{getContainerElement:function(){return x.current},closingMedia:function(){D(!1)}}});var N=R.isGif,M=R.mediaStage===o("WAWebMediaTypes").MediaDataStage.RESOLVED||o("WAWebVideoUtils").isMsgStreamable(u);M=M||u!=null&&u.isForcingRMR();var w=null,A=o("WAWebGetDisplayType").getDisplayType(u),F=o("WAWebAddOnBubbleType").AddOnBubbleType.MEDIA_VIEWER;if(u&&o("WAWebReactionsUtils").shouldShowReactionBubble(u,F)&&(w=p.jsx(r("WAWebAddOnBubblesContainer.react"),{isOutgoingMsg:o("WAWebMsgGetters").getIsSentByMe(u),displayType:A,bubbleType:F,parentIds:[u.id.toString()],displayReactionBubble:T})),M){var O=r("WAWebEnvironment").isWindows===!0?s._(/*BTDS*/"La lecture vid\u00e9o n\u2019est pas prise en charge sur cet appareil."):s._(/*BTDS*/"Votre navigateur ne prend pas en charge la lecture vid\u00e9o."),B;!E&&u!=null&&u.interactiveAnnotations&&u.interactiveAnnotations.length>0&&(B=p.jsx(r("WAWebAnnotation.react"),{annotations:u.interactiveAnnotations}));var W;return N?W=p.jsxs("div",babelHelpers.extends({},(c||(c=r("stylex"))).props(r("WAWebMediaViewerStyles").content),{ref:x,"data-testid":void 0,children:[p.jsx(r("WAWebVideo.react"),{src:R.renderableUrl,onClick:o("WAWebStopEvent").stopPropagation,autoPlay:!0,loop:!0,onLoadedData:C,children:O}),B]})):W=p.jsx("div",babelHelpers.extends({ref:x},(c||(c=r("stylex"))).props(r("WAWebMediaViewerStyles").content),{onClick:o("WAWebStopEvent").stopPropagation,"data-testid":void 0,children:p.jsx(o("WAWebPipMsgVideoPlayer.react").WrappedMsgVideoPlayer,{msg:u,mediaData:R,startTime:S,onClose:d,onError:r("WAWebNoop"),onFullscreenToggle:P,autoPlay:l,type:o("WAWebPipConst").PlayerType.MEDIA_VIEWER,overlays:B,noPip:u==null?void 0:u.isViewOnce,onLoadedData:C})})),p.jsxs(r("WAWebObjectFit.react"),{type:"scaleDown",position:"relative",objectPosition:"relative",size:$,onObjectLoad:m,children:[W,w]})}return p.jsxs(r("WAWebObjectFit.react"),{type:"scaleDown",position:"relative",objectPosition:"relative",size:{width:R.fullWidth,height:R.fullHeight},children:[p.jsx(r("WAWebBlurredImage.react"),{altText:(n=u.caption)!=null?n:"",mediaData:R}),w]})}C.displayName=C.name+" [from "+i.id+"]";function b(e){if(e.isGif){var t=330;return e.fullWidth>=t?{width:e.fullWidth,height:e.fullHeight}:{width:t,height:e.fullHeight*t/e.fullWidth}}return e.fullWidth>=o("WAWebPipFloatingVideoPlayer.react").MIN_WIDTH?{width:e.fullWidth,height:e.fullHeight}:{width:o("WAWebPipFloatingVideoPlayer.react").MIN_WIDTH,height:e.fullHeight}}l.default=C}),226);
__d("WAWebMediaViewerShortcuts.react",["fbt","WALogger","WAWebEnvironment","WAWebFileSaver","WAWebStateUtils","WAWebToast.react","WAWebToastManager","asyncToGeneratorRuntime","cr:7565","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=c||(c=o("react")),m=u||(u=r("react")),p=d.useCallback,_=d.useEffect,f=d.useMemo;function g(t){var a=p(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){n("cr:7565")&&n("cr:7565").copyMediaFile(o("WAWebStateUtils").unproxy(t)).then(function(e){o("WAWebToastManager").ToastManager.open(m.jsx(o("WAWebToast.react").Toast,{msg:s._(/*BTDS*/"Image copi\u00e9e\u00a0: {fileName}",[s._param("fileName",e)])}))}).catch(function(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Error while copying image: ",""])),t)})}),[t]),i=f(function(){return{s:function(){o("WAWebFileSaver").FileSaver.initDownload(o("WAWebStateUtils").unproxy(t))},c:function(){a()}}},[a,t]),l=p(function(e){if(e.ctrlKey){var t=e.key,n=i[t];n!=null&&(e.preventDefault(),n(e))}},[i]);_(function(){var e=r("WAWebEnvironment").isWindows;if(e)return window.addEventListener("keydown",l),function(){window.removeEventListener("keydown",l)}},[l,t])}l.useMediaViewerShortcuts=g}),226);
__d("WAWebWdsIllViewOncePhotoIcon.react",["WAWebSvgComponentBase","react","stylex"],(function(t,n,r,o,a,i,l){var e=["height","iconXstyle","name","viewBox","width"],s,u,c=s||(s=r("react")),d="wds-ill-view-once-photo";function m(t){var n=t.height,a=t.iconXstyle,i=t.name,l=t.viewBox,s=t.width,m=babelHelpers.objectWithoutPropertiesLoose(t,e),p;if(l){var _=l.height,f=_===void 0?0:_,g=l.width,h=g===void 0?0:g,y=l.x,C=y===void 0?0:y,b=l.y,v=b===void 0?0:b;p=[C,v,h,f].join(" ")}var S=120,R=180;return(n!=null||s!=null)&&(S=n,R=s),c.jsx(o("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers.extends({name:i!=null?i:d},m,{children:c.jsxs("svg",{viewBox:p!=null?p:"0 0 180 120",height:S,width:R,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(a),version:"1.1",id:"Layer_1",x:"0",y:"0",children:[c.jsx("title",{children:i!=null?i:d}),c.jsx("style",{children:".st0{fill:#25d366;stroke:#111b21;stroke-width:1.4412;stroke-linecap:round;stroke-miterlimit:10}.st2,.st4{fill:#e6ffda;stroke:#111b21;stroke-width:1.5}.st4{fill:#fcf5eb;stroke-miterlimit:10}.st6{fill:#0a0a0a}"}),c.jsx("path",{className:"st0",d:"M82 1.3H33.2c-8.7 0-15.8 7.1-15.8 15.8V103c0 8.7 7.1 15.8 15.8 15.8h48.9c8.7 0 15.8-7.1 15.8-15.8V17.2C97.8 8.4 90.7 1.3 82 1.3z"}),c.jsx("path",{className:"st0",d:"M97.8 95.7V17.1c0-8.6-7-15.6-15.6-15.6H40.3c-8.6 0-15.6 7-15.6 15.6v78.7c0 8.7 5 15.8 15.8 15.8h41.6c8.3 0 15.7-7.1 15.7-15.9q0 0 0 0z"}),c.jsx("path",{className:"st0",d:"M61.2 103c5 0 9-2.2 9-4.8s-4-4.8-9-4.8-9 2.2-9 4.8 4 4.8 9 4.8z"}),c.jsx("path",{d:"M55.6 14.4H67",fill:"none",stroke:"#111b21",strokeWidth:1.441,strokeLinecap:"round",strokeMiterlimit:10}),c.jsx("path",{className:"st2",d:"M133.8 86.3H73.3c-3.5 0-6.1-.8-7.7-2.5-1.6-1.6-2.6-4.1-2.6-7.5V33.6c0-3.5.9-6 2.6-7.6 1.6-1.6 4.1-2.5 7.7-2.5h60.5c3.6 0 6.1.9 7.7 2.5s2.5 4.1 2.5 7.6v42.7c0 3.5-.9 6-2.5 7.5-1.7 1.7-4.3 2.5-7.7 2.5z"}),c.jsx("path",{d:"M143.6 75.6 121.7 55c-1.6-1.4-3.6-2.3-5.5-2.3-2.1 0-3.8.7-5.5 2.3L93.9 69.9l-6.8-6.2c-1.5-1.4-3.3-2.1-5-2.1-1.6 0-3.2.6-4.7 2.1L63.3 76.3",fill:"none",stroke:"#111b21",strokeWidth:1.5}),c.jsx("path",{className:"st2",d:"M96.6 47.1c0 4.1-3.4 7.5-7.4 7.5-4.1 0-7.5-3.4-7.5-7.5s3.4-7.5 7.5-7.5c4 0 7.4 3.3 7.4 7.5z"}),c.jsx("path",{className:"st4",d:"M162.6 76c0 11.3-9.1 20.4-20.4 20.4s-20.4-9.1-20.4-20.4 9.1-20.4 20.4-20.4 20.4 9.1 20.4 20.4z"}),c.jsx("path",{d:"M141.8 59.2c-8.6.5-15.5 6.9-16.5 14.5-1.2 9 6.1 18.3 16.5 19.1",fill:"none",stroke:"#111b21",strokeWidth:1.5,strokeLinecap:"round",strokeMiterlimit:10}),c.jsx("path",{className:"st4",d:"M143.8 84c.7 0 1.3-.6 1.3-1.3V70c0-1.3-1.2-2.4-2.6-2.1l-3.4.8c-.9.2-1.5 1-1.5 2.1 0 1.3 1.2 2.3 2.5 2.1l1-.2v10.1c0 .7.6 1.3 1.3 1.3z"}),c.jsx("circle",{className:"st6",cx:149.8,cy:61.6,r:1.5}),c.jsx("circle",{className:"st6",cx:155.9,cy:67.9,r:1.5}),c.jsx("circle",{className:"st6",cx:158.2,cy:76.3,r:1.5}),c.jsx("circle",{className:"st6",cx:155.9,cy:84.8,r:1.5}),c.jsx("circle",{className:"st6",cx:150.1,cy:90.6,r:1.5})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.WdsIllViewOncePhotoIcon=m}),98);
__d("WAWebViewOnceNux.react",["fbt","WAWebConfirmPopup.react","WAWebExternalLink.react","WAWebFaqUrl","WAWebFlex.react","WAWebFlexItem.react","WAWebText.react","WAWebWdsIllViewOncePhotoIcon.react","react"],(function(t,n,r,o,a,i,l,s){var e,u=e||(e=r("react")),c={graphic:{marginBottom:"xod5an3",paddingTop:"x1h678fw",paddingInlineEnd:"xcldk2z",paddingBottom:"xv6tirj",paddingInlineStart:"x1phvje8",$$css:!0}};function d(e){var t=e.onOkClick;return u.jsx(o("WAWebConfirmPopup.react").ConfirmPopup,{onOK:t,cancelText:s._(/*BTDS*/"En savoir plus"),onCancel:m,children:u.jsxs(o("WAWebFlex.react").FlexColumn,{children:[u.jsx(r("WAWebFlexItem.react"),{xstyle:c.graphic,align:"center",children:u.jsx(o("WAWebWdsIllViewOncePhotoIcon.react").WdsIllViewOncePhotoIcon,{width:195})}),u.jsx(o("WAWebText.react").WAWebTextLarge,{children:e.isPhoto?s._(/*BTDS*/"La vue unique est activ\u00e9e pour cette photo"):s._(/*BTDS*/"La vue unique est activ\u00e9e pour cette vid\u00e9o")}),u.jsx(o("WAWebText.react").WAWebTextMuted,{children:e.isPhoto?s._(/*BTDS*/"Dans un souci de confidentialit\u00e9, cette photo dispara\u00eetra apr\u00e8s sa fermeture."):s._(/*BTDS*/"Dans un souci de confidentialit\u00e9, cette vid\u00e9o dispara\u00eetra apr\u00e8s sa fermeture.")})]})})}d.displayName=d.name+" [from "+i.id+"]";function m(){o("WAWebExternalLink.react").openExternalLink(o("WAWebFaqUrl").getViewOnceFaqUrl())}l.default=d}),226);
__d("WAWebMediaViewerModal.react",["cx","fbt","WALogger","WATypeUtils","WAWebAppTracker","WAWebClassnames","WAWebEmojiText.react","WAWebFocusTracer","WAWebFrontendMsgGetters","WAWebGroupMetadataContext","WAWebIncrementalZoomUtils","WAWebKeyboardHotKeys.react","WAWebMarkPlayedMsgAction","WAWebMediaAudio.react","WAWebMediaData","WAWebMediaImage.react","WAWebMediaIncrementalZoom","WAWebMediaPanelHeader.react","WAWebMediaStage.react","WAWebMediaSticker.react","WAWebMediaTypes","WAWebMediaViewerCaption.react","WAWebMediaViewerConstants","WAWebMediaViewerFlow.react","WAWebMediaViewerMediaVideo.react","WAWebMediaViewerModalStyle","WAWebMediaViewerShortcuts.react","WAWebModalManager","WAWebMsgActionCapability","WAWebMsgGetters","WAWebNux","WAWebResizeObserver.react","WAWebTPPdfViewerGatingUtils","WAWebTimeSpentLoggingNavigation","WAWebUISpacing","WAWebUimUie.react","WAWebVelocityAnimate","WAWebViewOnceNux.react","WDSButton.react","WDSIconIcChevronLeft.react","WDSIconIcChevronRight.react","WDSTooltip.react","cr:23046","cr:27506","react","stylex","useWAWebModelValues","useWAWebMsgValues","useWAWebNux","useWAWebThrottledCallback"],(function(t,n,r,o,a,i,l,s,u){var e,c,d,m,p,_,f=_||(_=o("react")),g=m||(m=r("react")),h=f.useCallback,y=f.useContext,C=f.useEffect,b=f.useId,v=f.useMemo,S=f.useRef,R=f.useState;function L(e){e==null||e.stopPropagation()}function E(t){var a,i,l=t.isAnimatingThumbs,s=t.msg,m=t.onBack,_=t.onExitAnimation,f=t.onImageLoad,b=t.onImgZoomIn,L=t.shouldShowAllMedia,E=t.shouldShowNumberText,D=o("useWAWebMsgValues").useMsgValues(t.msg.id,[(i=o("WAWebMsgGetters")).getId,i.getStar,o("WAWebFrontendMsgGetters").getIsUnsentMedia,i.getIsViewOnce,i.getIsStickerMsg,i.getHasThumbList,i.getCaption,i.getInteractiveAnnotations,i.getType,i.getMessageSecret]),x=D[0],$=D[1],P=D[2],N=D[3],M=D[4],w=D[5],A=D[6],F=D[7],O=D[8],B=D[9],W=o("WAWebFrontendMsgGetters").getChat(s),q=o("useWAWebModelValues").useModelValues(t.mediaData,["mediaStage","type","isGif","mimetype","filename"]),U=y(o("WAWebMediaIncrementalZoom").MediaIncrementalZoomCtx),V=U.hasOverflownThumbnailSection,H=y(o("WAWebMediaViewerFlow.react").MediaViewerFlowZoomContext)||V,G=S(null),z=S(null),j=S(null),K=S(null),Q=S(null),X=S(!1),Y=S(!1),J=S(!1),Z=r("useWAWebNux")(o("WAWebNux").NUX.EPHEMERAL_VIEW_ONCE_RECEIVER),ee=Z[0],te=Z[1],ne=N&&ee,re=t.getZoomNode,oe=v(function(){return q.mediaStage===o("WAWebMediaTypes").MediaDataStage.RESOLVED&&re?re(x):null},[q.mediaStage,re,x]),ae=R(!1),ie=ae[0],le=ae[1],se=U.isEnabled,ue=R(!1),ce=ue[0],de=ue[1],me=[r("WAWebMediaData").TYPE.IMAGE,r("WAWebMediaData").TYPE.STICKER].includes(q.type),pe=R(me),_e=pe[0],fe=pe[1],ge=R(!t.isAnimatingThumbs&&!_e),he=ge[0],ye=ge[1],Ce=R(!1),be=Ce[0],ve=Ce[1],Se=R(!1),Re=Se[0],Le=Se[1],Ee=N||!o("WAWebMsgActionCapability").canWamoSubMsgBeSharedByUser(s,W),ke=S(null);o("WAWebIncrementalZoomUtils").usePreventDefaultZoom(ke);var Ie=function(){var e=g.jsx(r("WAWebViewOnceNux.react"),{isPhoto:q.type===r("WAWebMediaData").TYPE.IMAGE,onOkClick:function(){te(),o("WAWebModalManager").ModalManager.close()}});o("WAWebModalManager").ModalManager.open(e)},Te=r("useWAWebThrottledCallback")(function(e,t){if(!ce){var n=G.current;if(n){var a=n.getInsideContainer();if(!(!a||!(a instanceof HTMLElement))){var i=n.getOutsideContainer();if(!(!i||!(i instanceof HTMLElement))){var l=n.getTranslatePosition(i,e,t),s=l.translateX,u=l.translateY;r("WAWebVelocityAnimate")(a,"stop"),r("WAWebVelocityAnimate")(a,{translateX:s,translateY:u,scale:o("WAWebMediaViewerConstants").ZOOM_IN_FACTOR},{duration:0})}}}}});C(function(){return o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["MediaViewerModal: Opened"]))),ne&&Ie(),r("WAWebFocusTracer").focus(K.current),function(){o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["MediaViewerModal: Closed"]))),T(),Te.cancel()}},[]),C(function(){I(q.type)},[q.type]);var De=function(){Ie()},xe=function(t,n){var e,a=n.getBoundingClientRect(),i=t.getBoundingClientRect(),l=i.top-a.top,s=i.left-a.left,u=t.clientWidth/n.clientWidth,c=(n.clientHeight-t.clientHeight)/2,d=(n.clientWidth-t.clientWidth)/2;l-=c,s-=d,r("WAWebVelocityAnimate")(n,{opacity:[1,0],translateX:[0,s],translateY:[0,l],scale:[1,u]},{duration:o("WAWebMediaViewerConstants").ANIMATION_DURATION,easing:[.1,.82,.25,1]}).then(function(){return fe(!1)});var m=(e=j.current)==null?void 0:e.getElement();m&&r("WAWebVelocityAnimate")(m,{opacity:[1,0]},{duration:o("WAWebMediaViewerConstants").ANIMATION_DURATION})},$e=function(){N&&o("WAWebMarkPlayedMsgAction").canMarkPlayed(s)&&o("WAWebMarkPlayedMsgAction").markPlayed(s)},Pe=function(t){$e(),f&&f();var e=oe,n=t.target;if(!e||!n||!(n instanceof HTMLElement)||J.current||se){fe(!1);return}J.current=!0,xe(e,n)},Ne=function(){var e;if(!X.current){X.current=!0,o("WATypeUtils").isFunction(_)&&_();var n=t.getZoomNode&&t.getZoomNode(x);if(!n)return m();var a;if(me&&G.current){var i;a=G.current.getInsideContainer(),(i=G.current)==null||i.closingMediaZoomable()}else if(q.isGif&&z.current){var l;a=z.current.getContainerElement(),(l=z.current)==null||l.closingMedia()}else Q.current&&(a=Q.current);if(!a)return m();var s=a,u=a.getBoundingClientRect(),c=n.getBoundingClientRect(),d=c.top-u.top,p=c.left-u.left,f=n.clientWidth/s.clientWidth,g=(s.clientHeight-n.clientHeight)/2,h=(s.clientWidth-n.clientWidth)/2;d-=g,p-=h,r("WAWebVelocityAnimate")(a,{translateX:[p,0],translateY:[d,0],scale:[f,1]},{duration:o("WAWebMediaViewerConstants").CLOSE_ANIMATION_DURATION,easing:[.1,.82,.25,1]}).then(function(){m()});var y=(e=j.current)==null?void 0:e.getElement();y&&r("WAWebVelocityAnimate")(y,{opacity:[0,1]},{duration:o("WAWebMediaViewerConstants").CLOSE_ANIMATION_DURATION,easing:[.1,.82,.25,1]})}},Me=function(t){var e=G.current;t&&e&&(Y.current=e.getHeightOverflow()>0||e.getWidthOverflow()>0),le(t),b(t)},we=function(t){Te.cancel();var e=G.current;e&&ie&&e.onClick(t)},Ae=function(t){se||Te(t.pageX,t.pageY)},Fe=function(t){var e,n=(e=G.current)==null?void 0:e.getInsideContainer(),r=!!(n!=null&&n.contains(document.activeElement));if(!(l||_e||!r)){Te.cancel();var o=G.current;o!=null&&o.onKeyboardZoom(t)}},Oe=function(){ve(!0)},Be=function(){ve(!1)},We=function(){de(!0)},qe=function(){de(!1)};C(function(){!he&&!l&&!_e&&ye(!0)},[l,he,_e]),o("WAWebTimeSpentLoggingNavigation").useTsNavigation({surface:"media-viewer"});var Ue=null,Ve=t.msgIndexInAlbum>=0&&t.albumSize>=0;function He(){return[]}if(A||Ve){var Ge=function(){var e=A==null&&ze!=null?ze:A,t=[{testid:"media-caption",text:e}];return E&&A!=null&&ze!=null&&t.push({testid:"media-number-caption",text:ze}),t},ze;Ve&&(ze=u._(/*BTDS*/"{number} sur {totalNumber}",[u._param("number",t.msgIndexInAlbum+1),u._param("totalNumber",t.albumSize)]));var je=o("WAWebMediaViewerCaption.react").getCaptionFormatters({msg:s,id:x}),Ke=q.type===r("WAWebMediaData").TYPE.IMAGE&&!N,Qe=!he&&(q.isGif||Ke)||U.isZoomedIn,Xe={className:o("WAWebClassnames").classnamesConvertMeToStylexPlease("_alhf",(p||(p=r("stylex")))(r("WAWebMediaViewerModalStyle").mediaCaption,Qe&&r("WAWebMediaViewerModalStyle").mediaCaptionHidden)),formatters:je};Ue=g.jsx(g.Fragment,{children:(o("WAWebTPPdfViewerGatingUtils").isWebTPPdfViewerEnabledForMimeType(q.mimetype)?He():Ge()).map(function(e,t){return g.jsx(o("WAWebEmojiText.react").EmojiText,babelHelpers.extends({},e,Xe,{ref:function(t){j.current=t}}),t)})})}var Ye=babelHelpers.extends({},(p||(p=r("stylex"))).props(r("WAWebMediaViewerModalStyle").captionWrapper,H&&r("WAWebMediaViewerModalStyle").captionWrapperZoomedIn));Ue=U.isEnabled?g.jsx(r("WAWebResizeObserver.react"),babelHelpers.extends({component:"p",onResize:function(t){U.setCaptionHeight(t.height)}},Ye,{children:Ue})):g.jsx("p",babelHelpers.extends({},Ye,{children:Ue}));var Je,Ze=h(function(){Le(!0)},[Le]);switch(q.type){case r("WAWebMediaData").TYPE.IMAGE:Je=g.jsx(r("WAWebMediaImage.react"),{msg:s,mediaData:q,onLoad:Pe,onImgZoomIn:Me,onAnnotationTooltipDisplay:We,onAnnotationTooltipDismiss:qe,preventDownload:Ee,ref:G},x.toString());break;case r("WAWebMediaData").TYPE.STICKER:Je=g.jsx(r("WAWebMediaSticker.react"),{msg:s,mediaData:q,onLoad:Pe,onImgZoomIn:Me,onStickerPackView:Ne,stickerPackViewDelay:o("WAWebMediaViewerConstants").CLOSE_ANIMATION_DURATION,ref:G},x.toString());break;case r("WAWebMediaData").TYPE.VIDEO:Je=g.jsx(r("WAWebMediaViewerMediaVideo.react"),{autoPlay:!ne,msg:s,mediaData:q,onLoadedData:q.isGif?Pe:$e,startTime:t.startTime,onClose:Ne,ref:z},x.toString());break;case r("WAWebMediaData").TYPE.AUDIO:Je=g.jsx(r("WAWebMediaAudio.react"),{mediaData:q,msg:s},x.toString());break;case r("WAWebMediaData").TYPE.DOCUMENT:n("cr:27506")&&o("WAWebTPPdfViewerGatingUtils").isWebTPPdfViewerEnabledForMimeType(q.mimetype)&&(Je=g.jsx(n("cr:27506"),{onLoad:Pe,msg:s,mediaData:q,containerRef:Q,onRender:Ze},x.toString()));break;default:o("WALogger").ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["type: ",""])),q.type).sendLogs("MediaViewerModal: unexpected media type")}var et=p(r("WAWebMediaViewerModalStyle").media,!!Ue&&r("WAWebMediaViewerModalStyle").mediaWithCaption),tt=(a=n("cr:23046")==null?void 0:n("cr:23046").isWindowsHybridEnabled())!=null?a:!1,nt=He().length===0&&o("WAWebTPPdfViewerGatingUtils").isWebTPPdfViewerEnabledForMimeType(q.mimetype),rt=o("WAWebTPPdfViewerGatingUtils").isWebTPPdfViewerEnabledForMimeType(q.mimetype),ot=o("WAWebClassnames").classnamesConvertMeToStylexPlease("overlay",p((_e||l)&&r("WAWebMediaViewerModalStyle").mediaViewerAnimate,ie&&r("WAWebMediaViewerModalStyle").cursorZoomOut,r("WAWebMediaViewerModalStyle").mediaViewer,!w&&o("WAWebUISpacing").uiPadding.bottom40,tt&&r("WAWebMediaViewerModalStyle").mediaViewerHybrid,nt&&o("WAWebUISpacing").uiPadding.bottom0)),at=ie&&Y.current?Ae:null,it=ie?we:null,lt=ie?null:Ne;return lt!=null&&N&&(lt=Oe),o("WAWebMediaViewerShortcuts.react").useMediaViewerShortcuts(s),g.jsx(o("WAWebUimUie.react").UIE,{displayName:"MediaViewer",escapable:!0,requestDismiss:function(t,n){var e;if(!U.isEnabled){Ne();return}var r=n instanceof KeyboardEvent&&n.key==="Escape";if(!r||U.currentZoomLevel===1){Ne();return}(e=U.getHandler())==null||e.performZoom(1)},children:g.jsx(o("WAWebKeyboardHotKeys.react").HotKeys,{handlers:{space:Fe,enter:Fe},ref:K,children:g.jsxs("div",{className:ot,"data-animate-media-viewer":!0,"data-testid":void 0,onClick:it,onMouseMove:at,children:[g.jsx(r("WAWebMediaPanelHeader.react"),{isHighlightClose:be,msg:s,mediaData:q,onClose:Ne,onHightlightCloseEnd:Be,onViewOnceInfoClick:De,msgIndexInAlbum:t.msgIndexInAlbum,theme:L===!0?"media_hub":void 0,hasRendered:Re,showBorderBottom:o("WAWebTPPdfViewerGatingUtils").isWebTPPdfViewerEnabledForMimeType(q.mimetype)}),g.jsx("div",babelHelpers.extends({ref:ke},p.props([r("WAWebMediaViewerModalStyle").mediaContent,o("WAWebUISpacing").uiPadding.top10,o("WAWebUISpacing").uiPadding.bottom15],M&&r("WAWebMediaViewerModalStyle").mediaContentSticker,nt&&o("WAWebUISpacing").uiPadding.bottom0,rt&&o("WAWebUISpacing").uiPadding.top0),{onClick:lt,children:g.jsx(k,{hasNavigationButtons:w,onNext:t.onNext,onPrev:t.onPrev,imgZoomed:ie,children:g.jsxs("div",{className:et,children:[g.jsx(r("WAWebMediaStage.react"),{msg:s,mediaData:q}),Je,g.jsx(r("WAWebGroupMetadataContext").Provider,{value:W.groupMetadata,children:Ue})]})})}))]})})})}E.displayName=E.name+" [from "+i.id+"]";function k(e){var t=e.children,n=e.hasNavigationButtons,a=e.imgZoomed,i=e.onNext,l=e.onPrev,s=y(o("WAWebMediaIncrementalZoom").MediaIncrementalZoomCtx).isZoomedIn,c=b(),d=b();return g.jsxs(g.Fragment,{children:[n&&g.jsx("div",babelHelpers.extends({},(p||(p=r("stylex"))).props(r("WAWebMediaViewerModalStyle").mediaNavBtn,r("WAWebMediaViewerModalStyle").mediaNavBtnPrev,s&&r("WAWebMediaViewerModalStyle").mediaNavBtnHidden,r("WAWebMediaViewerModalStyle").mediaNavBtnPrevIncrementalZoom),{children:g.jsx("div",{onClick:l?null:L,children:g.jsx(r("WDSTooltip.react"),{id:c,label:u._(/*BTDS*/"Pr\u00e9c\u00e9dent"),children:g.jsx(r("WDSButton.react"),{Icon:r("WDSIconIcChevronLeft.react"),variant:"tonal",type:"media",size:"medium",directional:!0,onPress:l!=null?l:void 0,disabled:!l||a,testid:void 0,"aria-describedby":c,"aria-label":u._(/*BTDS*/"Pr\u00e9c\u00e9dent")})})})})),t,n&&g.jsx("div",babelHelpers.extends({},(p||(p=r("stylex"))).props(r("WAWebMediaViewerModalStyle").mediaNavBtn,r("WAWebMediaViewerModalStyle").mediaNavBtnNext,s&&r("WAWebMediaViewerModalStyle").mediaNavBtnHidden,r("WAWebMediaViewerModalStyle").mediaNavBtnNextIncrementalZoom),{children:g.jsx("div",{onClick:i?null:L,children:g.jsx(r("WDSTooltip.react"),{id:d,label:u._(/*BTDS*/"Suivant"),children:g.jsx(r("WDSButton.react"),{Icon:r("WDSIconIcChevronRight.react"),variant:"tonal",type:"media",size:"medium",directional:!0,onPress:i!=null?i:void 0,disabled:!i||a,testid:void 0,"aria-describedby":d,"aria-label":u._(/*BTDS*/"Suivant")})})})}))]})}k.displayName=k.name+" [from "+i.id+"]";function I(e){var t;(t=o("WAWebAppTracker")).AppTracker.start(t.AppTrackerType.MediaOpen),t.AppTracker.stop(t.AppTrackerType.MediaOpenImage),t.AppTracker.stop(t.AppTrackerType.MediaOpenVideo),e===r("WAWebMediaData").TYPE.IMAGE?o("WAWebAppTracker").AppTracker.start(o("WAWebAppTracker").AppTrackerType.MediaOpenImage):e===r("WAWebMediaData").TYPE.VIDEO&&o("WAWebAppTracker").AppTracker.start(o("WAWebAppTracker").AppTrackerType.MediaOpenVideo)}function T(){var e;(e=o("WAWebAppTracker")).AppTracker.stop(e.AppTrackerType.MediaOpen),e.AppTracker.stop(e.AppTrackerType.MediaOpenImage),e.AppTracker.stop(e.AppTrackerType.MediaOpenVideo)}l.default=E}),226);
__d("WAWebThumbList.react",["fbt","WALogger","WAMapsShallowEqual","WAWebAllMediaCollection","WAWebFocusTracer","WAWebMediaIncrementalZoom","WAWebMediaThumb.react","WAWebMediaViewerFlow.react","WAWebMsgGetters","WAWebPREGatingUtils","WAWebSpinner.react","WAWebUISpacing","react","stylex","useWAWebPrevious","useWAWebThrottledCallback"],(function(t,n,r,o,a,i,l,s){var e,u,c,d,m=d||(d=o("react")),p=u||(u=r("react")),_=m.useCallback,f=m.useContext,g=m.useEffect,h=m.useImperativeHandle,y=m.useLayoutEffect,C=m.useRef,b=m.useState,v=o("WAWebPREGatingUtils").isPREMessageSendFollowupEnabled()?p.memo(r("WAWebMediaThumb.react")):r("WAWebMediaThumb.react"),S={viewerThumbs:{display:"x78zum5",width:"xh8yej3",overflowX:"x14aock7",$$css:!0},mediaThumb:{position:"x1n2onr6",boxSizing:"x9f619",display:"x78zum5",flex:"x3psx0u",alignItems:"x6s0dn4",justifyContent:"xl56j7k",width:"x9whnou",minWidth:"xa06r8k",maxWidth:"xr6zewm",height:"xuzvuw4",$$css:!0}};function R(t){var n=t.activeMsg,a=t.highlightedMsgIds,i=t.mediaMsgs,l=t.msgIdToPreferPreview,s=t.onSelectThumb,u=t.onSetActiveThumb,d=t.ref,m=C({}),f=function(){var e=n.id.toString(),t=m.current[e];t&&r("WAWebFocusTracer").focus(t)};h(d,function(){return{focusOnActive:f}});var g=a!=null&&a.size>0&&a.has(n.id.toString()),y=[],b=_(function(e,t){m.current[t]=e},[]),v=i instanceof o("WAWebAllMediaCollection").WAWebAllMediaCollection?i.getMsgsAround(n,50):i;v.forEach(function(t){if(t.mediaData==null){var r=n;o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["MediaViewerFlow: attempted to render a msg without mediaData: ",""])),JSON.stringify({type:t.type,isMedia:o("WAWebMsgGetters").getIsMedia(t),startMsgType:r.type,startMsgIsMedia:o("WAWebMsgGetters").getIsMedia(r)})).verbose();return}var i=g&&a&&!a.has(t.id.toString())?"viewerFlowTransparent":"viewerFlow";y.push(p.jsx(L,{theme:i,active:t===n,msg:t,onClick:s,setThumbRef:b,onSetActiveThumb:u,preferPreview:!!l.get(t.id.toString()),showTooltip:o("WAWebMsgGetters").getIsGroupMsg(t),tabIndex:t===n?0:-1},"media-"+t.id.id))});var R=(c||(c=r("stylex")))(S.mediaThumb,o("WAWebUISpacing").uiMargin.end8);return y.push(p.jsx("div",{className:R,children:i.queryMediaAfter!=null?p.jsx(o("WAWebSpinner.react").Spinner,{stroke:6,size:24}):null},"spinner-right")),y.unshift(p.jsx("div",{className:R,children:i.queryMediaBefore!=null?p.jsx(o("WAWebSpinner.react").Spinner,{stroke:6,size:24}):null},"spinner-left")),y.push(p.jsx("div",{className:"x1mkiy5m"},"padding-right")),y.unshift(p.jsx("div",{className:"x1mkiy5m"},"padding-left")),p.jsx(p.Fragment,{children:y})}R.displayName=R.name+" [from "+i.id+"]";function L(e){var t=e.active,n=e.msg,r=e.onClick,o=e.onSetActiveThumb,a=e.preferPreview,i=e.setThumbRef,l=e.showTooltip,s=e.tabIndex,u=e.theme,c=_(function(){r(n)},[n,r]),d=_(function(e){i(e,n.id.toString()),t===!0&&o(e)},[t,n.id,o,i]);return p.jsx(v,{theme:u,active:t,msg:n,containerRef:d,onClick:c,preferPreview:a,showTooltip:l,tabIndex:s})}L.displayName=L.name+" [from "+i.id+"]";var E=R;function k(e){var t=f(o("WAWebMediaViewerFlow.react").MediaViewerFlowZoomContext),n=e.activeMsg,a=e.mediaMsgs,i=e.moveDownAnimation,l=e.moveUpAnimation,u=e.onScroll;T({moveDownAnimation:i,moveUpAnimation:l});var d=C({}),m=C(null),_=C(null),h=r("useWAWebPrevious")(n.id),y=function(){var e;(e=m.current)==null||e.focusOnActive()};g(function(){var e;(e=_.current)!=null&&e.contains(document.activeElement)&&!n.id.equals(h)&&y()},[n,h]);var v=function(t){var e=d.current[t];if(!e)return!1;var n=e.getBoundingClientRect(),r=(n.left+n.right)/2,o=r>-1*window.innerWidth&&r<2*window.innerWidth;return!o},R=function(){var e=new Map;return a.forEach(function(t){var n=t.id.toString();e.set(n,v(n))}),e},L=b(R),k=L[0],I=L[1],D=r("useWAWebThrottledCallback")(function(){var e=R();r("WAMapsShallowEqual")(k,e)||I(e)},100),x=function(t){D(),u(t)},$=t;return p.jsx("div",babelHelpers.extends({},{0:{className:"xsm26vf x10l6tqk x1ey2m1c xoxg7ud x9f619 x78zum5 xdt5ytf x6s0dn4 x1nhvcw1 xh8yej3 xpyat2d x6ikm8r x10wlt62 x13fuv20 x178xt8z xx42vgk xg01cxk xqu7myx"},1:{className:"xsm26vf x10l6tqk x1ey2m1c xoxg7ud x9f619 x78zum5 xdt5ytf x6s0dn4 x1nhvcw1 xh8yej3 xpyat2d x6ikm8r x10wlt62 x13fuv20 x178xt8z xx42vgk xqu7myx x1yn0zye xvdu4fi"}}[!!$<<0],{ref:e.setRefThumbsContainer,children:p.jsx("div",{ref:_,className:"xh8yej3",dir:"ltr",children:p.jsx("div",babelHelpers.extends({role:"list","aria-label":s._(/*BTDS*/"Liste des m\u00e9dias"),onScroll:x},(c||(c=r("stylex"))).props(S.viewerThumbs,o("WAWebUISpacing").uiPadding.vert8),{ref:e.setRefThumbs,children:p.jsx(E,{ref:m,mediaMsgs:a,highlightedMsgIds:e.highlightedMsgIds,activeMsg:e.activeMsg,onSetActiveThumb:e.onSetActiveThumb,onSelectThumb:e.onSelectThumb,msgIdToPreferPreview:k})}))})}))}k.displayName=k.name+" [from "+i.id+"]";var I=200;function T(e){var t=e.moveDownAnimation,n=e.moveUpAnimation,a=f(o("WAWebMediaIncrementalZoom").MediaIncrementalZoomCtx),i=a.hasOverflownThumbnailSection,l=r("useWAWebPrevious")(i),s=C(!1),u=C(!1),c=a.isEnabled,d=a.msgId,m=_(function(){n==null||n(),s.current=!1},[n]),p=_(function(){t==null||t(),s.current=!0},[t]),h=function(){return u.current=!1,window.setTimeout(function(){u.current=!0},I)};g(function(){var e=h();return function(){window.clearTimeout(e)}},[]),y(function(){u.current=!1;var e=h();return s.current&&m(),function(){window.clearTimeout(e)}},[d]),g(function(){!c||!u.current||i===l||(s.current=i,i?p():m())},[a.msgId,i,p,c,t,n,l,m])}l.default=k}),226);