;/*FB_PKG_DELIM*/

__d("BaseChameleonThemeContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={classNames:null},c=s.createContext(u);l.default=c}),98);
__d("BaseFocusRing.react",["FocusWithinHandler.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={focused:{boxShadow:"x18bame2",outline:"x1a2a7pz xvetz19",$$css:!0},focusedInset:{boxShadow:"xpud6h4",$$css:!0},unfocused:{outline:"x1a2a7pz",$$css:!0}};function c(e){var t=o("react-compiler-runtime").c(10),n=e.children,a=e.focusRingPosition,i=e.mode,l=e.onFocusVisibleChange,c=e.suppressFocusRing,d=e.testOnly,m=e.xstyle,p=a===void 0?"default":a,_=i===void 0?"focus-visible":i,f=c===void 0?!1:c,g;t[0]!==n||t[1]!==p||t[2]!==_||t[3]!==l||t[4]!==f||t[5]!==m?(g=function(t,r){var e=!f&&t&&(r||_==="focus");l==null||l(r);var o=[];return e?o.push(p==="inset"?u.focusedInset:u.focused):o.push(u.unfocused),n([].concat(o,[m]))},t[0]=n,t[1]=p,t[2]=_,t[3]=l,t[4]=f,t[5]=m,t[6]=g):g=t[6];var h;return t[7]!==g||t[8]!==d?(h=s.jsx(r("FocusWithinHandler.react"),{testOnly:d,children:g}),t[7]=g,t[8]=d,t[9]=h):h=t[9],h}l.default=c}),98);
__d("BaseInput.react",["CometContainerPressableContext","Locale","react","react-compiler-runtime","stylex","testID"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref","xstyle","onChange","onClick","onValueChange","testid","type"],s,u,c=u||(u=o("react")),d=u,m=d.useContext,p=d.useMemo,_={root:{WebkitTapHighlightColor:"x1i10hfl",boxSizing:"x9f619",touchAction:"xggy1nq",":-webkit-autofill_-webkit-background-clip":"xtpw4lu",":-webkit-autofill_-webkit-text-fill-color":"x1tutvks",":-webkit-autofill_transition":"x1s3xk63",":disabled_cursor":"x1s07b3s",$$css:!0},zIndex:{zIndex:"x1vjfegm",$$css:!0}},f=o("Locale").isRTL();function g(t){var n=o("react-compiler-runtime").c(31),a,i,l,u,d,p,g,h;n[0]!==t?(d=t.ref,h=t.xstyle,a=t.onChange,i=t.onClick,l=t.onValueChange,g=t.testid,p=t.type,u=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=u,n[5]=d,n[6]=p,n[7]=g,n[8]=h):(a=n[1],i=n[2],l=n[3],u=n[4],d=n[5],p=n[6],g=n[7],h=n[8]);var y=p===void 0?"text":p,C;e:switch(y){case"switch":{C="checkbox";break e}default:C=y}var b=C,v=b==="checkbox"||b==="radio",S=b==="textarea",R=m(r("CometContainerPressableContext"))!=null,L=S?"textarea":"input",E;n[9]!==R||n[10]!==h?(E=(s||(s=r("stylex"))).props(_.root,h,R&&_.zIndex),n[9]=R,n[10]=h,n[11]=E):E=n[11];var k;n[12]!==g?(k=r("testID")(g),n[12]=g,n[13]=k):k=n[13];var I;n[14]!==v||n[15]!==a||n[16]!==l?(I=function(t){v||l==null||l(t.currentTarget.value,t),a==null||a(t)},n[14]=v,n[15]=a,n[16]=l,n[17]=I):I=n[17];var T;n[18]!==v||n[19]!==i||n[20]!==l?(T=function(t){v&&(l==null||l(t.currentTarget.checked,t)),i==null||i(t)},n[18]=v,n[19]=i,n[20]=l,n[21]=T):T=n[21];var D=S?void 0:b,x;return n[22]!==L||n[23]!==u||n[24]!==d||n[25]!==E||n[26]!==k||n[27]!==I||n[28]!==T||n[29]!==D?(x=c.jsx(L,babelHelpers.extends({},E,{dir:f?"rtl":"ltr"},u,k,{onChange:I,onClick:T,ref:d,type:D})),n[22]=L,n[23]=u,n[24]=d,n[25]=E,n[26]=k,n[27]=I,n[28]=T,n[29]=D,n[30]=x):x=n[30],x}var h=c.memo(g);l.default=h}),98);
__d("BaseCheckbox.react",["BaseFocusRing.react","BaseInput.react","BaseView.react","Locale","react","react-compiler-runtime","stylex","useMergeRefs"],(function(t,n,r,o,a,i,l){"use strict";var e=["children","ref","variant","xstyle","indeterminate","suppressFocusRing","testid"],s,u,c=u||(u=o("react")),d=u,m=d.useLayoutEffect,p=d.useRef,_=d.useState,f=o("Locale").isRTL(),g={checkbox:{cursor:"x1ypdohk",height:"x5yr21d",insetInlineStart:"x1o0tod",left:null,right:null,marginTop:"xdj266r",marginInlineEnd:"x14z9mp",marginBottom:"xat24cr",marginInlineStart:"x1lziwak",opacity:"x1w3u9th",outline:"x1a2a7pz",paddingTop:"xexx8yu",paddingInlineEnd:"xyri2b",paddingBottom:"x18d9i69",paddingInlineStart:"x1c1uobl",position:"x10l6tqk",top:"x13vifvy",width:"xh8yej3",$$css:!0},icon:{paddingTop:"x1nn3v0j",paddingInlineEnd:"x14vy60q",paddingBottom:"x1120s5i",paddingInlineStart:"xyiysdx",$$css:!0},inlineFlex:{display:"x3nfvp2",$$css:!0},labelRTL:{transformOrigin:"x1h1bmdg",$$css:!0},wrapper:{position:"x1n2onr6",$$css:!0}};function h(t){var n,a,i=o("react-compiler-runtime").c(35),l,u,d,h,y,C,b;if(i[0]!==t){var v=t.children,S=t.ref,R=t.variant,L=t.xstyle,E=t.indeterminate,k=t.suppressFocusRing,I=t.testid,T=babelHelpers.objectWithoutPropertiesLoose(t,e);l=v,d=S,C=R,b=L,h=E,y=I,u=T,i[0]=t,i[1]=l,i[2]=u,i[3]=d,i[4]=h,i[5]=y,i[6]=C,i[7]=b}else l=i[1],u=i[2],d=i[3],h=i[4],y=i[5],C=i[6],b=i[7];var D=h===void 0?!1:h,x=p(null),$=_(!1),P=$[0],N=$[1],M=(n=u.checked)!=null?n:!1,w=(a=u.disabled)!=null?a:!1,A,F;i[8]!==D?(A=function(){x.current!=null&&(x.current.indeterminate=D)},F=[D],i[8]=D,i[9]=A,i[10]=F):(A=i[9],F=i[10]),m(A,F);var O=r("useMergeRefs")(d,x),B;i[11]!==M||i[12]!==w||i[13]!==P||i[14]!==C?(B=function(t){var e,n,o,a,i;if(C==null)return null;var l=M?C.iconChecked:C.iconUnchecked;return c.jsx("div",babelHelpers.extends({},(s||(s=r("stylex"))).props([g.inlineFlex,(e=C)==null?void 0:e.xstyleConfig.iconWrapper,M&&((n=C)==null?void 0:n.xstyleConfig.iconCheckedWrapper),P&&((o=C)==null?void 0:o.xstyleConfig.iconFocusedWrapper),w&&((a=C)==null?void 0:a.xstyleConfig.iconDisabledWrapper),w&&M&&((i=C)==null?void 0:i.xstyleConfig.iconDisabledCheckedWrapper)]),{suppressHydrationWarning:!0,children:c.jsx("div",babelHelpers.extends({},s.props([t,g.icon,C.xstyleConfig.icon]),{suppressHydrationWarning:!0,children:l!=null&&c.jsx(l,{height:"100%",width:"100%"})}))}))},i[11]=M,i[12]=w,i[13]=P,i[14]=C,i[15]=B):B=i[15];var W=B,q;i[16]!==M||i[17]!==l||i[18]!==w||i[19]!==W||i[20]!==D||i[21]!==O||i[22]!==u||i[23]!==y||i[24]!==C||i[25]!==b?(q=function(t){var e,n,o,a;return c.jsxs(r("BaseView.react"),{role:"none",testid:void 0,xstyle:[g.wrapper,C!=null?(e=C)==null?void 0:e.xstyleConfig.checkboxWrapper:t,b],children:[W(t),C!=null?c.jsx("div",babelHelpers.extends({},(s||(s=r("stylex"))).props([g.inlineFlex,(n=C)==null?void 0:n.xstyleConfig.labelWrapper]),{children:l})):l,c.jsx(r("BaseInput.react"),babelHelpers.extends({},u,{"aria-checked":D?"mixed":M!=null?M:!1,ref:O,type:"checkbox",xstyle:[g.checkbox,(o=C)==null?void 0:o.xstyleConfig.checkbox,w&&((a=C)==null?void 0:a.xstyleConfig.checkboxDisabled)]}))]})},i[16]=M,i[17]=l,i[18]=w,i[19]=W,i[20]=D,i[21]=O,i[22]=u,i[23]=y,i[24]=C,i[25]=b,i[26]=q):q=i[26];var U=q,V=C!=null?"inset":void 0,H;i[27]!==U||i[28]!==w||i[29]!==u.id||i[30]!==C?(H=function(t){var e,n;return c.jsx(c.Fragment,{children:C!=null?c.jsx("label",babelHelpers.extends({},(s||(s=r("stylex"))).props([f&&g.labelRTL,(e=C)==null?void 0:e.xstyleConfig.label,w===!0&&((n=C)==null?void 0:n.xstyleConfig.labelDisabled)]),{htmlFor:u.id,suppressHydrationWarning:!0,children:U(t)})):U(t)})},i[27]=U,i[28]=w,i[29]=u.id,i[30]=C,i[31]=H):H=i[31];var G;return i[32]!==V||i[33]!==H?(G=c.jsx(r("BaseFocusRing.react"),{focusRingPosition:V,onFocusVisibleChange:N,children:H}),i[32]=V,i[33]=H,i[34]=G):G=i[34],G}l.default=h}),98);
__d("BaseContextualLayerAnchorRootContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({current:document.body});l.default=u}),98);
__d("BaseDOMContainer.react",["react","react-compiler-runtime","useMergeRefs"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useLayoutEffect,d=u.useRef;function m(e){var t=o("react-compiler-runtime").c(5),n=e.node,a=e.ref,i=d(null),l,u;t[0]!==n?(l=function(){var e=i.current;if(n!=null&&e!=null)return e.appendChild(n),(function(){e.removeChild(n)})},u=[n],t[0]=n,t[1]=l,t[2]=u):(l=t[1],u=t[2]),c(l,u);var m=r("useMergeRefs")(a,i),p;return t[3]!==m?(p=s.jsx("div",{ref:m}),t[3]=m,t[4]=p):p=t[4],p}var p=s.memo(m);l.default=p}),98);
__d("BaseContextualLayerAnchorRoot.react",["BaseContextualLayerAnchorRootContext","BaseDOMContainer.react","ExecutionEnvironment","react","react-compiler-runtime","useStable","useUnsafeRef_DEPRECATED"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react"));function d(t){var n=o("react-compiler-runtime").c(8),a=t.children,i=r("useStable")(m),l=(e||(e=r("useUnsafeRef_DEPRECATED")))(i),s;n[0]!==l||n[1]!==a?(s=c.jsx(r("BaseContextualLayerAnchorRootContext").Provider,{value:l,children:a}),n[0]=l,n[1]=a,n[2]=s):s=n[2];var u;n[3]!==i?(u=c.jsx(r("BaseDOMContainer.react"),{node:i}),n[3]=i,n[4]=u):u=n[4];var d;return n[5]!==s||n[6]!==u?(d=c.jsxs(c.Fragment,{children:[s,u]}),n[5]=s,n[6]=u,n[7]=d):d=n[7],d}function m(){return(s||(s=r("ExecutionEnvironment"))).canUseDOM?document.createElement("div"):null}l.default=d}),98);
__d("BaseContextualLayerAvailableHeightContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext(null);l.default=u}),98);
__d("BaseContextualLayerDefaultContainer.react",["LegacyHidden","react","react-compiler-runtime","stylex","testID"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(13),a=t.children,i=t.hidden,l=t.ref,s=t.stopClickPropagation,c=t.testid,m=t.xstyle,p;n[0]!==c?(p=r("testID")(c),n[0]=c,n[1]=p):p=n[1];var _;n[2]!==m?(_=(e||(e=r("stylex")))(m),n[2]=m,n[3]=_):_=n[3];var f=s===!0?d:void 0,g;n[4]!==p||n[5]!==_||n[6]!==f?(g=babelHelpers.extends({},p,{className:_,onClick:f}),n[4]=p,n[5]=_,n[6]=f,n[7]=g):g=n[7];var h=i?"hidden":"visible",y;return n[8]!==a||n[9]!==l||n[10]!==g||n[11]!==h?(y=u.jsx(r("LegacyHidden"),{htmlAttributes:g,mode:h,ref:l,children:a}),n[8]=a,n[9]=l,n[10]=g,n[11]=h,n[12]=y):y=n[12],y}function d(e){return e.stopPropagation()}l.default=c}),98);
__d("BaseContextualLayerLayerAdjustmentContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext(null);l.default=u}),98);
__d("BaseContextualLayerOrientationContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={align:"start",position:"below"},c=s.createContext(u);l.default=c}),98);
__d("BasePortalTargetContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext(document.body);l.default=u}),98);
__d("CometThemeInfraFallbackConfig",[],(function(t,n,r,o,a,i){"use strict";var e={fallbackThemes:{auto:null,dark:null,light:null},setFallbackTheme:function(n){e.fallbackThemes=n}},l=e;i.default=l}),66);
__d("CometThemeInfraUtils",["gkx","ifRequired"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("14925")||r("gkx")("14926")||r("gkx")("14927")||r("gkx")("14887")}function s(){var t={auto:null,dark:null,light:null};return e()&&r("ifRequired")("Cds3CTheme",function(e){t.auto=e.Cds3CThemeWebAuto,t.dark=e.Cds3CThemeWebDark,t.light=e.Cds3CThemeWebLight}),t}l.enableCometThemeInfraThemeInXMDSComponents=e,l.getCometThemeInfraThemesForApp=s}),98);
__d("DSPDisplayModeContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext(null);l.default=u}),98);
__d("BasePortal.react",["BaseChameleonThemeContext","BaseDOMContainer.react","BasePortalTargetContext","BaseThemeProvider.react","CometThemeInfraBaseThemeContext.react","CometThemeInfraFallbackConfig","CometThemeInfraUtils","DSPDisplayModeContext","ExecutionEnvironment","ReactDOM","react","stylex","suspendOrThrowIfUsedInSSR","useStable"],(function(t,n,r,o,a,i,l){"use strict";var e=["children","hidden","target","xstyle"],s,u,c,d,m=d||(d=o("react")),p=d.useContext;function _(t){var n=t.children,a=t.hidden,i=a===void 0?!1:a,l=t.target,d=t.xstyle,_=babelHelpers.objectWithoutPropertiesLoose(t,e),f=p(r("BasePortalTargetContext")),g=p(r("BaseChameleonThemeContext")),h=l||f,y=r("useStable")(function(){return(s||(s=r("ExecutionEnvironment"))).canUseDOM?document.createElement("div"):null});(u||(u=r("suspendOrThrowIfUsedInSSR")))("BasePortal: Portals are not currently supported by the server renderer.");var C=p(r("CometThemeInfraBaseThemeContext.react")),b=p(r("DSPDisplayModeContext")),v=C[b!=null?b:"auto"],S=r("CometThemeInfraFallbackConfig").fallbackThemes,R=S[b!=null?b:"auto"];return h!=null?o("ReactDOM").createPortal(m.jsx(r("BaseThemeProvider.react"),{children:function(t,a){return m.jsxs("div",babelHelpers.extends({className:(c||(c=r("stylex")))(t,g.classNames,o("CometThemeInfraUtils").enableCometThemeInfraThemeInXMDSComponents()&&v,o("CometThemeInfraUtils").enableCometThemeInfraThemeInXMDSComponents()&&v===null&&R,d)||void 0,hidden:i},_,{style:a,children:[m.jsx(r("BasePortalTargetContext").Provider,{value:y,children:n}),m.jsx(r("BaseDOMContainer.react"),{node:y})]}))}}),h):null}_.displayName=_.name+" [from "+i.id+"]",l.default=_}),98);
__d("BaseScrollableAreaContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext([]);l.default=u}),98);
__d("FDSTextContext",["cr:20414","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useContext,c=s.createContext(null);function d(){return u(c)}function m(e){var t=o("react-compiler-runtime").c(8),r=e.children,a=e.color,i=e.type;if(i==null){var l;t[0]!==r?(l=typeof r=="function"?r(null):r,t[0]=r,t[1]=l):l=t[1];var u;return t[2]!==l?(u=s.jsx(c.Provider,{value:null,children:l}),t[2]=l,t[3]=u):u=t[3],u}else{var d=a!=null?a:"primary",m;return t[4]!==r||t[5]!==d||t[6]!==i?(m=s.jsx(n("cr:20414"),{children:r,color:d,type:i}),t[4]=r,t[5]=d,t[6]=i,t[7]=m):m=t[7],m}}function p(e){var t=o("react-compiler-runtime").c(2),r;return t[0]!==e?(r=s.jsx(n("cr:20414"),babelHelpers.extends({},e)),t[0]=e,t[1]=r):r=t[1],r}l.FDSTextContext=c,l.useFDSTextContext=d,l.FDSTextContextProvider=m,l.FDSTextContextProviderNonNull=p}),98);
__d("HiddenSubtreeContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({backgrounded:!1,hidden:!1,hiddenOrBackgrounded:!1,hiddenOrBackgrounded_FIXME:!1,visibleForAnimation:!1});l.default=u}),98);
__d("LayoutAnimationBoundaryContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext(null);l.default=u}),98);
__d("LayoutAnimationEvents",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e="layoutAnimation",l=n("$InternalEnum").Mirrored(["Start","Stop"]);i.LAYOUT_ANIMATION_EVENT=e,i.LayoutAnimationEventType=l}),66);
__d("calculateBaseContextualLayerPosition",["Locale"],(function(t,n,r,o,a,i,l){"use strict";var e=o("Locale").isRTL();function s(t){var n=t.align,r=t.contextRect,o=t.contextualLayerSize,a=t.fixed,i=t.offsetRect,l=t.position,s=t.screenRect,u={position:a?"fixed":void 0,transform:""},c=0,d=0,m=0,p=0,_=(r.bottom+r.top)/2,f=(r.left+r.right)/2,g=e?"start":"end",h=e?"end":"start";switch(l){case"above":d=r.top-i.top,p="-100%";break;case"below":d=r.bottom-i.top;break;case h:c=r.left-i.left,m="-100%";break;case g:c=r.right-i.left;break}if(l==="start"||l==="end")switch(n){case"start":d=r.top-i.top;break;case"middle":d=_-i.top,p="-50%";break;case"end":d=r.bottom-i.top,p="-100%";break;case"stretch":d=r.top-i.top,u.height=r.bottom-r.top+"px";break}else if(l==="above"||l==="below")switch(n){case h:c=r.left-i.left;break;case"middle":c=f-i.left,m="-50%";break;case g:c=r.right-i.left,m="-100%";break;case"stretch":c=r.left-i.left,u.width=r.right-r.left+"px";break}var y=0;if(o!=null){if(l==="start"||l==="end"){var C=null;switch(n){case"start":C=r.top;break;case"middle":C=_-o.height/2;break;case"end":C=r.bottom-o.height;break}C!=null&&(C<s.top?y=s.top-C:C+o.height>s.bottom&&(y=s.bottom-C-o.height)),d+=y}else if(l==="above"||l==="below"){var b=null;switch(n){case h:b=r.left;break;case"middle":b=f-o.width/2;break;case g:b=r.right-o.width;break}b!=null&&(b<s.left?y=s.left-b:b+o.width>s.right&&(y=s.right-b-o.width)),c+=y}}var v="";return(c!==0||d!==0)&&(v+="translate("+Math.round(c)+"px, "+Math.round(d)+"px) "),(m!==0||p!==0)&&(v+="translate("+m+", "+p+") "),u.transform=v,{adjustment:y,style:u}}l.default=s}),98);
__d("getDefaultViewForNode",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=e===document?document:e.ownerDocument;return t.defaultView}i.default=e}),66);
__d("getComputedStyle",["getDefaultViewForNode"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=r("getDefaultViewForNode")(e);return n==null?null:n.getComputedStyle(e,t)}l.default=e}),98);
__d("isElementFixedOrSticky",["getComputedStyle"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){for(var n=t;n!=null;){var o=(e||(e=r("getComputedStyle")))(n);if(o==null)return!1;var a=o.getPropertyValue("position");if(a==="fixed"||a==="sticky")return!0;n=n.parentElement}return!1}l.default=s}),98);
__d("useLayoutAnimationEvents",["LayoutAnimationBoundaryContext","LayoutAnimationEvents","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useContext,c=s.useEffect,d=s.useRef;function m(e){var t=o("react-compiler-runtime").c(7),n=u(r("LayoutAnimationBoundaryContext")),a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=[],t[0]=a):a=t[0];var i=d(a),l;t[1]!==(n==null?void 0:n.animationEventTargets)||t[2]!==e?(l=function(){var t=(n==null?void 0:n.animationEventTargets)||[];return t.forEach(function(t){var n=t.addListener(o("LayoutAnimationEvents").LAYOUT_ANIMATION_EVENT,e);i.current=[].concat(i.current,[n])}),(function(){i.current.forEach(p),i.current=[]})},t[1]=n==null?void 0:n.animationEventTargets,t[2]=e,t[3]=l):l=t[3];var s;t[4]!==n||t[5]!==e?(s=[e,n],t[4]=n,t[5]=e,t[6]=s):s=t[6],c(l,s)}function p(e){e.remove()}l.default=m}),98);
__d("useResizeObserver",["DOMRectReadOnly","FBLogger","getErrorSafe","gkx","react","react-compiler-runtime","resize-observer-polyfill-deprecated","uniqueID"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useLayoutEffect,d=s.useRef;function m(e){var t=o("react-compiler-runtime").c(4),n=d(null),r=d(e),a,i;t[0]!==e?(a=function(){r.current=e},i=[e],t[0]=e,t[1]=a,t[2]=i):(a=t[1],i=t[2]),c(a,i);var l;return t[3]===Symbol.for("react.memo_cache_sentinel")?(l=function(t){var e=function(t,n,o){r.current&&r.current(t,n,o)},o=t==null?null:h(t,e);n.current&&n.current(),n.current=o},t[3]=l):l=t[3],l}var p=null,_=new Map;function f(){return p==null&&(p=new(r("resize-observer-polyfill-deprecated"))(g)),p}function g(e){var t=new Map,n=new Map,o=new Map;for(var a of e){var i=a.contentRect;if(r("gkx")("20942")){var l=t.get(a.target);if(l==null){var s=E(a.target);t.set(a.target,s),i=s}else i=l}n.set(a.target,i);var u={target:a.target,contentRect:a.contentRect,borderBoxSize:a.borderBoxSize,contentBoxSize:a.contentBoxSize,devicePixelContentBoxSize:a.devicePixelContentBoxSize};o.set(a.target,u)}var c=new Set(_.keys());for(var d of n){var m=d[0],p=d[1],f=_.get(m);if(f!=null)for(var g of f){var h=g[1];try{h(p,m,o)}catch(e){r("FBLogger")("useResizeObserver").catching(r("getErrorSafe")(e))}}else c.has(m)||r("FBLogger")("useResizeObserver").mustfix("ResizeObserver observed resizing of an element that it should not be observing")}}function h(e,t){var n,o=r("uniqueID")(),a=(n=_.get(e))!=null?n:new Map;return a.set(o,t),_.set(e,a),f().observe(e),y(e,o)}function y(e,t){return function(){var n=_.get(e);n!=null&&(n.delete(t),n.size===0&&(f().unobserve(e),_.delete(e)))}}function C(e){return parseFloat(e)||0}function b(e){var t,n;return(t=e==null||(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window}var v=r("DOMRectReadOnly").fromRect();function S(e){return{top:C(e.paddingTop),right:C(e.paddingRight),bottom:C(e.paddingBottom),left:C(e.paddingLeft)}}function R(e){return{top:C(e.borderTopWidth),right:C(e.borderRightWidth),bottom:C(e.borderBottomWidth),left:C(e.borderLeftWidth)}}function L(e){for(var t=R(e),n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce(function(e,n){return e+C(t[n])},0)}function E(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return v;var o=b(e).getComputedStyle(e),a=S(o),i=a.left+a.right,l=a.top+a.bottom,s=C(o.width),u=C(o.height);return o.boxSizing==="border-box"&&(Math.round(s+i)!==t&&(s-=L(o,"left","right")+i),Math.round(u+l)!==n&&(u-=L(o,"top","bottom")+l)),r("DOMRectReadOnly").fromRect({x:a.left,y:a.top,width:s,height:u})}l.default=m}),98);
__d("BaseContextualLayer.react",["BaseContextualLayerAnchorRoot.react","BaseContextualLayerAnchorRootContext","BaseContextualLayerAvailableHeightContext","BaseContextualLayerContextSizeContext","BaseContextualLayerDefaultContainer.react","BaseContextualLayerLayerAdjustmentContext","BaseContextualLayerOrientationContext","BaseLinkNestedPressableContext","BasePortal.react","BaseScrollableAreaContext","BaseViewportMarginsContext","FDSTextContext","FocusRegion.react","HiddenSubtreeContext","LayoutAnimationBoundaryContext","LayoutAnimationEvents","Locale","calculateBaseContextualLayerPosition","focusScopeQueries","getComputedStyle","gkx","isElementFixedOrSticky","justknobx","mergeRefs","react","useLayoutAnimationEvents","useResizeObserver"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref","align","anchorRef","disableAutoAlign","children","containFocus","customContainer","disableAutoFlip","hidden","imperativeRef","onEscapeFocusRegion","onIndeterminatePosition","ownerDocument","presencePayload","reflowToPosition","position","restoreFocus","stopClickPropagation","xstyle","disablePositioning_DO_NOT_USE"],s,u,c=u||(u=o("react")),d=u,m=d.useCallback,p=d.useContext,_=d.useEffect,f=d.useImperativeHandle,g=d.useLayoutEffect,h=d.useMemo,y=d.useReducer,C=d.useRef,b=d.useState;function v(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,left:t.left,right:t.right,top:t.top}}function S(){var e,t,n=(e=(t=document.documentElement)==null?void 0:t.scrollHeight)!=null?e:0,r=window.innerHeight,o=n-r;return Math.max(0,o-window.pageYOffset)}function R(e){var t,n;return(t=(n=e[e.length-1])==null||(n=n.getDOMNode())==null?void 0:n.scrollTop)!=null?t:window.pageYOffset}function L(e){var t=(s||(s=r("getComputedStyle")))(e);return t!=null&&t.getPropertyValue("position")!=="static"?e:e instanceof HTMLElement&&e.offsetParent||e.ownerDocument.documentElement}var E=8,k=40,I=145;function T(e,t){return e.bottom<t.top||t.bottom<e.top||e.right<t.left||t.right<t.left?null:{bottom:Math.min(e.bottom,t.bottom),left:Math.max(e.left,t.left),right:Math.min(e.right,t.right),top:Math.max(e.top,t.top)}}var D=o("Locale").isRTL(),x={root:{left:"xu96u03",insetInlineStart:null,insetInlineEnd:null,marginRight:"xm80bdy",marginInlineStart:null,marginInlineEnd:null,position:"x10l6tqk",top:"x13vifvy",$$css:!0},rootReflowToPosition:{marginRight:"x1yf7rl7",marginInlineStart:null,marginInlineEnd:null,top:"x80663w",$$css:!0}};function $(e){return{adjustment:null,availableHeight:null,contextSize:null,isPositionIndeterminate:!1,position:e}}function P(e,t){var n,r,o,a;switch(t.type){case"determine_direction":if(e.position!==t.position||e.availableHeight!==t.availableHeight)return babelHelpers.extends({},e,{availableHeight:t.availableHeight,position:t.position});break;case"reposition":if(e.adjustment!==t.adjustment||((n=e.contextSize)==null?void 0:n.height)!==((r=t.contextSize)==null?void 0:r.height)||((o=e.contextSize)==null?void 0:o.width)!==((a=t.contextSize)==null?void 0:a.width))return babelHelpers.extends({},e,{adjustment:t.adjustment,contextSize:t.contextSize,isPositionIndeterminate:!1});break;case"position_indeterminate":return babelHelpers.extends({},e,{isPositionIndeterminate:!0});case"position_changed":if(e.position!==t.position)return babelHelpers.extends({},e,{position:t.position});break}return e}function N(t){"use no forget";var n,a=t.ref,i=t.align,l=i===void 0?"start":i,s=t.anchorRef,u=t.disableAutoAlign,d=u===void 0?!1:u,N=t.children,M=t.containFocus,w=M===void 0?!1:M,A=t.customContainer,F=A===void 0?r("BaseContextualLayerDefaultContainer.react"):A,O=t.disableAutoFlip,B=O===void 0?!1:O,W=t.hidden,q=W===void 0?!1:W,U=t.imperativeRef,V=t.onEscapeFocusRegion,H=t.onIndeterminatePosition,G=t.ownerDocument,z=t.presencePayload,j=t.reflowToPosition,K=j===void 0?!1:j,Q=t.position,X=Q===void 0?"below":Q,Y=t.restoreFocus,J=Y===void 0?!0:Y,Z=t.stopClickPropagation,ee=Z===void 0?!1:Z,te=t.xstyle,ne=t.disablePositioning_DO_NOT_USE,re=ne===void 0?!1:ne,oe=babelHelpers.objectWithoutPropertiesLoose(t,e),ae=X==="auto"?"below":X,ie=y(P,ae,$),le=ie[0],se=le.adjustment,ue=le.availableHeight,ce=le.contextSize,de=le.isPositionIndeterminate,me=le.position,pe=ie[1],_e=p(r("BaseContextualLayerAnchorRootContext")),fe=p(r("BaseScrollableAreaContext")),ge=K?!0:B,he=K?!0:d,ye=p(r("BaseViewportMarginsContext")),Ce=p(r("LayoutAnimationBoundaryContext")),be=b(!1),ve=be[0],Se=be[1],Re=p(r("HiddenSubtreeContext")),Le=Re.hidden,Ee=Le||q,ke=C(null),Ie=C(null),Te=m(function(){return oe.context_DEPRECATED==null&&oe.contextRef!=null?oe.contextRef.current:oe.context_DEPRECATED},[oe.contextRef,oe.context_DEPRECATED]),De=m(function(){var e=G!=null?G:document,t=e.documentElement;if(t!=null)return{bottom:t.clientHeight-ye.bottom-E,left:ye.left+E,right:t.clientWidth-ye.right-E,top:ye.top+E}},[G,ye.bottom,ye.left,ye.right,ye.top]),xe=null;K&&(xe=S());var $e=m(function(){var e=ke.current,t=Te(),n=De();if(!(e==null||t==null||n==null)){var o=v(t),a=v(e),i=a.bottom-a.top,l=a.right-a.left,u=D?"start":"end",c=D?"end":"start",d=me,m=null;if(!ge)if(me==="above"||me==="below"){var p=o.top-i<n.top&&o.bottom+i<n.bottom,_=o.bottom+i>n.bottom&&o.top-i>n.top;me==="above"&&R(fe)+o.top<i&&p||me==="above"&&p?d="below":me==="below"&&_&&(d="above")}else(me==="start"||me==="end")&&(me===c&&o.left-l<n.left&&o.right+l<n.right?d=u:me===u&&o.right+l>n.right&&o.left-l>n.left&&(d=c));if(d==="above"||d==="below"?m=d==="above"?o.top-n.top:n.bottom-o.bottom:(d==="start"||d==="end")&&(m=Math.max(n.bottom,o.bottom)-Math.min(o.top,n.top)),K&&xe!==null){var f,g,h,y=(f=s==null?void 0:s.current)!=null?f:_e.current,C=y?r("isElementFixedOrSticky")(y):!1,b=!C&&t.nodeType===1&&r("isElementFixedOrSticky")(t),S=((g=n==null?void 0:n.bottom)!=null?g:0)-((h=n==null?void 0:n.top)!=null?h:0),L=b?0:xe,E=L+S-k,T=L+n.bottom-o.bottom;m=Math.max(Math.min(E,T),I)}Ie.current={height:i,width:l},pe({availableHeight:m,position:d,type:"determine_direction"})}},[Te,De,me,ge,K,fe,_e,xe,s]),Pe=null;K&&(Pe=ue);var Ne=m(function(){var e,t=document.documentElement,n=(e=s==null?void 0:s.current)!=null?e:_e.current,o=De(),a=Te(),i=ke.current;if(!(t==null||n==null||o==null||a==null||i==null)){var u=v(i),c=L(n);if(c!=null){var d=r("isElementFixedOrSticky")(n),m=!d&&a.nodeType===1&&r("isElementFixedOrSticky")(a),p=fe.map(function(e){return e.getDOMNode()}).filter(Boolean).filter(function(e){return c.contains(e)}).reduce(function(e,t){return e!=null?T(e,v(t)):null},v(a));if(p==null||p.left===0&&p.right===0){pe({type:"position_indeterminate"}),H&&H();return}var _=m?{bottom:t.clientHeight,left:0,right:t.clientWidth,top:0}:v(c),f=r("calculateBaseContextualLayerPosition")({align:l,contextRect:p,contextualLayerSize:he?null:Ie.current,fixed:m,offsetRect:_,position:me,screenRect:o}),g=f.adjustment,h=f.style,y=h;if(r("justknobx")._("432")&&(y=babelHelpers.extends({left:null,"max-height":null,position:null,right:null,top:null,"z-index":null},h),K===!0)){var C=u.bottom-u.top,b=o.bottom-p.bottom,R=C-b,E=m?0:S(),k=p.bottom-_.top;R-E>0&&(k-=R);var I=o.left-_.left,D=o.right-o.left;y={left:I+"px","max-height":(Pe!=null?Pe:0)+"px",position:m?"fixed":"absolute",top:k+"px",width:D+"px","z-index":r("gkx")("7742")?"299":"3"}}if(i!=null)for(var x=Object.keys(y),$=0;$<x.length;$++){var P=x[$],N=y[P];N!=null?i.style.setProperty(P,N):i.style.removeProperty(P)}pe({adjustment:g,contextSize:{height:p.bottom-p.top,width:p.right-p.left},type:"reposition"})}}},[_e,De,Te,fe,he,l,me,H,Pe,K]),Me=m(function(e){e===o("LayoutAnimationEvents").LayoutAnimationEventType.Start&&Se(!0),e===o("LayoutAnimationEvents").LayoutAnimationEventType.Stop&&(Se(!1),Ne())},[Ne,Se]);g(function(){re||Ce!=null&&Ce.getIsAnimating()&&Me(o("LayoutAnimationEvents").LayoutAnimationEventType.Start)},[Ce,Me]),r("useLayoutAnimationEvents")(Me),f(U,function(){return{reposition:function(t){if(!Ee){var e=t||{},n=e.autoflip,r=n===void 0?!1:n;r&&$e(),Ne()}}}},[Ee,Ne,$e]);var we=r("useResizeObserver")(function(e){var t=e.height,n=e.width;Ie.current={height:t,width:n},Ne()}),Ae=C(ae);g(function(){re||ae!==Ae.current&&(pe({position:ae,type:"position_changed"}),Ee||($e(),Ne()),Ae.current=ae)},void 0);var Fe=m(function(e){ke.current=e,e!=null&&!Ee&&($e(),Ne())},[Ee,Ne,$e]);_(function(){if(!re&&!Ee){var e=Te(),t=new ResizeObserver(function(){$e(),Ne()});if(!(e==null||!(e instanceof HTMLElement)))return t.observe(e),function(){t.disconnect()}}},[Te,$e,Ne,Ee]),_(function(){if(!re&&!Ee){var e=function(){$e(),Ne()};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}},[Ee,Ne,$e]),_(function(){if(!re&&!Ee){var e=fe.map(function(e){return e.getDOMNode()}).filter(Boolean);if(e.length>0)return e.forEach(function(e){return e.addEventListener("scroll",Ne,{passive:!0})}),function(){e.forEach(function(e){return e.removeEventListener("scroll",Ne)})}}},[Ee,Ne,fe]),_(function(){if(!re&&!(window.addEventListener==null||Ee))return window.addEventListener("scroll",Ne,{passive:!0}),function(){window.removeEventListener("scroll",Ne)}},[Ee,Ne]);var Oe=h(function(){return r("mergeRefs")(Fe,we,a)},[Fe,we,a]),Be=h(function(){return{align:l,position:me==="auto"?"below":me}},[l,me]),We=q||de;if(re){var qe;return c.jsx(r("BasePortal.react"),{target:(qe=s==null?void 0:s.current)!=null?qe:_e.current,children:c.jsx(F,{hidden:q||de||ve,presencePayload:z,stopClickPropagation:ee,testid:void 0,xstyle:[x.root,K===!0?x.rootReflowToPosition:null,te],children:c.jsx(o("FocusRegion.react").FocusRegion,{autoFocusQuery:!We&&w?o("focusScopeQueries").headerFirstTabbableSecondScopeQuery:null,autoRestoreFocus:!We&&J,containFocusQuery:!We&&w?o("focusScopeQueries").tabbableScopeQuery:null,onEscapeFocusRegion:V,recoverFocusQuery:We?null:o("focusScopeQueries").headerFirstTabbableSecondScopeQuery,children:c.jsx(r("BaseLinkNestedPressableContext").Provider,{value:!1,children:c.jsx(o("FDSTextContext").FDSTextContextProvider,{color:null,type:null,children:N})})})})})}return c.jsx(r("BasePortal.react"),{target:(n=s==null?void 0:s.current)!=null?n:_e.current,children:c.jsx(F,{hidden:q||de||ve,presencePayload:z,ref:Oe,stopClickPropagation:ee,testid:void 0,xstyle:[x.root,K===!0?x.rootReflowToPosition:null,te],children:c.jsx(o("FocusRegion.react").FocusRegion,{autoFocusQuery:!We&&w?o("focusScopeQueries").headerFirstTabbableSecondScopeQuery:null,autoRestoreFocus:!We&&J,containFocusQuery:!We&&w?o("focusScopeQueries").tabbableScopeQuery:null,onEscapeFocusRegion:V,recoverFocusQuery:We?null:o("focusScopeQueries").headerFirstTabbableSecondScopeQuery,children:c.jsx(r("BaseContextualLayerAnchorRoot.react"),{children:c.jsx(r("BaseContextualLayerContextSizeContext").Provider,{value:ce,children:c.jsx(r("BaseContextualLayerLayerAdjustmentContext").Provider,{value:se,children:c.jsx(r("BaseContextualLayerAvailableHeightContext").Provider,{value:ue,children:c.jsx(r("BaseContextualLayerOrientationContext").Provider,{value:Be,children:c.jsx(r("BaseLinkNestedPressableContext").Provider,{value:!1,children:c.jsx(o("FDSTextContext").FDSTextContextProvider,{color:null,type:null,children:N})})})})})})})})})})}N.displayName=N.name+" [from "+i.id+"]",l.default=N}),98);
__d("BlobFactory",["emptyFunction"],(function(t,n,r,o,a,i,l){var e;function s(){try{new t.Blob,e=!0}catch(t){e=!1}}var u=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||t.MSBlobBuilder,c=t.Blob?{getBlob:function(r,o){if(r=r||[],o=o||{},e===void 0&&s(),e)return new t.Blob(r,o);for(var n=new u,a=0;a<r.length;a++)n.append(r[a]);return n.getBlob(o.type)},isSupported:r("emptyFunction").thatReturnsTrue}:{getBlob:function(t,n){},isSupported:r("emptyFunction").thatReturnsFalse},d=c;l.default=d}),98);
__d("ReactFbPropTypes",["FbtResultBase","warning"],(function(t,n,r,o,a,i){function e(e){var t=function(r,o,a,i,l,s,u){var t=o[a];return t instanceof n("FbtResultBase")?null:r?e.isRequired(o,a,i,l,s,u):e(o,a,i,l,s,u)},r=t.bind(null,!1);return r.isRequired=t.bind(null,!0),r}i.wrapStringTypeChecker=e}),null);
__d("WAAckLevel",[],(function(t,n,r,o,a,i){"use strict";var e={SENDER_BACKFILL_SENT:-7,INACTIVE_RECEIVED:-6,CONTENT_UNUPLOADABLE:-5,CONTENT_TOO_BIG:-4,CONTENT_GONE:-3,EXPIRED:-2,FAILED:-1,CLOCK:0,SENT:1,RECEIVED:2,READ:3,PLAYED:4};i.ACK=e}),66);
__d("WAArrayGroupBy",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){for(var n=new Map,r=0;r<e.length;r++){var o=t(e[r]),a=n.get(o);a==null?n.set(o,[e[r]]):a.push(e[r])}return Array.from(n.entries())}i.groupBy=e}),66);
__d("WAAsyncSleep",["Promise","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i){"use strict";var e;function l(e,t,n){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){t===void 0&&(t=200),n===void 0&&(n=200),e>0&&e%t===0&&(yield u(n))}),s.apply(this,arguments)}function u(t){return new(e||(e=n("Promise")))(function(e){return setTimeout(e,t)})}i.asyncSleepAfterGivenLoopIteration=l,i.asyncSleep=u}),66);
__d("WABackoffUtils",["WAPromiseDelays"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r){r===void 0&&(r=.1);var o;return e===0?o=n||0:o=Math.pow(2,e),Number.isFinite(t)&&o>t&&(o=t),typeof n=="number"&&Number.isFinite(n)&&o<n&&(o=n),r&&(o*=1+r*Math.random()),o}function s(t,n,r,a){return a===void 0&&(a=.1),o("WAPromiseDelays").delayMs(Math.floor(1e3*e(t,n,r,a)))}l.expBackoff=e,l.expDelaySec=s}),98);
__d("WABase64UrlSafe",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e.replace(/\//g,"_").replace(/\+/g,"-")}function l(e){return e.replace(/-/g,"+").replace(/_/g,"/")}function s(e){for(var t=atob(e),n=t.length,r=new Uint8Array(new ArrayBuffer(n)),o=0;o<n;o++)r[o]=t.charCodeAt(o);return r}i.urlSafeBase64=e,i.urlSafeBase64ToStandard=l,i.getBytesFromBase64=s}),66);
__d("WABatcher",["Promise","WAResolvable","err"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,o){var a=t.delayMs,i=t.maxSize,l=null;function s(e){return l&&l.args===e&&(l=null),o(e)}var u=function(){if(l==null)return(e||(e=n("Promise"))).resolve();var t=l;return l=null,clearTimeout(t.timer),t.run(),t.batchPromise},c=function(o){if(l)l.args.push(o);else{var t,c=[o],d=new(e||(e=n("Promise")))(function(e){t=function(){return void e(c)}}).then(s),m=t;l={args:c,batchPromise:d,run:m,timer:setTimeout(m,a)}}if(l==null)throw r("err")("activeBatch should not be null here");var p=l,_=p.args,f=p.batchPromise,g=_.length-1;return i!=null&&_.length>=i&&u(),f.then(function(e){return e[g]})};return{accept:c,runActiveBatch:u}}function u(e,t){var n=s(e,t);return function(e){return n.accept(e)}}function c(t){var a=[],i=new(o("WAResolvable")).Resolvable,l=function(l){if(a.length===0)return(e||(e=n("Promise"))).resolve(new Map);var r=a,s=i;return a=[],i=new(o("WAResolvable")).Resolvable,(e||(e=n("Promise"))).resolve(t(r,l)).then(function(e){return s.resolve(e),e})},s=function(t){return a.push(t),i.promise.then(function(e){var n=e.get(t);if(n==null)throw r("err")("This should not happen because we just added it to the batch");return n})};return{accept:s,runActiveBatch:l}}l.createSimpleBatcher=s,l.batch=u,l.createBatcher=c}),98);
__d("WABitArray",["err"],(function(t,n,r,o,a,i,l){"use strict";var e=8,s=(function(){function t(t){if(t<=0)throw r("err")("BitArray:numBits should be positive");this.$1=t,this.$2=new Uint8Array(Math.ceil(this.$1/e))}var n=t.prototype;return n.get=function(t){var e=this.$3(t),n=e[0],r=e[1];return!!(this.$2[n]>>r&1)},n.set=function(t){var e=this.$3(t),n=e[0],r=e[1];this.$2[n]|=1<<r},n.unset=function(t){var e=this.$3(t),n=e[0],r=e[1];this.$2[n]&=~(1<<r)},n.toggle=function(t){var e=this.$3(t),n=e[0],r=e[1];this.$2[n]^=1<<r},n.clear=function(){this.$2=new Uint8Array(Math.ceil(this.$1/e))},n.toArray=function(){for(var e=[],t=0;t<this.$1;t++)e.push(this.get(t));return e},n.toString=function(){return this.toArray().map(function(e){return e?"1":"0"}).join("")},n.toNumber=function(){return parseInt(this.toString(),2)},n.$3=function(n){if(n<0||n>=this.$1)throw r("err")("BitArray:index out of bounds");var t=Math.floor(n/e),o=n-t*e;return[t,o]},t})();l.default=s}),98);
__d("WAByteArray",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){for(var n=t,r=new Uint8Array(e),o=e-1;o>=0;o--)r[o]=n&255,n>>>=8;return r}function l(e){return e.buffer.slice(e.byteOffset,e.byteLength+e.byteOffset)}function s(e,t){if(!e||!t)return!1;var n=new Uint8Array(e),r=new Uint8Array(t),o=n.length,a=r.length;if(o!==a)return!1;for(var i=0;i<o;i++)if(n[i]!==r[i])return!1;return!0}i.intToBytes=e,i.uint8ArrayToBuffer=l,i.compareArrayBuffer=s}),66);
__d("WACcToIso",[],(function(t,n,r,o,a,i){var e=[];e[34]="ES",e[49]="DE",e[52]="MX",e[44]="GB",e[966]="SA",e[39]="IT",e[93]="AF",e[355]="AL",e[213]="DZ",e[376]="AD",e[244]="AO",e[54]="AR",e[374]="AM",e[297]="AW",e[61]="AU",e[43]="AT",e[994]="AZ",e[973]="BH",e[880]="BD",e[375]="BY",e[32]="BE",e[501]="BZ",e[229]="BJ",e[975]="BT",e[591]="BO",e[387]="BA",e[267]="BW",e[55]="BR",e[246]="IO",e[673]="BN",e[359]="BG",e[226]="BF",e[257]="BI",e[225]="CI",e[855]="KH",e[237]="CM",e[238]="CV",e[236]="CF",e[235]="TD",e[56]="CL",e[86]="CN",e[57]="CO",e[269]="KM",e[242]="CG",e[243]="CD",e[682]="CK",e[506]="CR",e[385]="HR",e[53]="CU",e[599]="CW",e[357]="CY",e[420]="CZ",e[45]="DK",e[253]="DJ",e[593]="EC",e[20]="EG",e[503]="SV",e[240]="GQ",e[291]="ER",e[372]="EE",e[251]="ET",e[298]="FO",e[679]="FJ",e[358]="FI",e[33]="FR",e[594]="GF",e[689]="PF",e[241]="GA",e[220]="GM",e[995]="GE",e[233]="GH",e[350]="GI",e[30]="GR",e[299]="GL",e[590]="GP",e[502]="GT",e[224]="GN",e[245]="GW",e[592]="GY",e[509]="HT",e[504]="HN",e[852]="HK",e[36]="HU",e[354]="IS",e[91]="IN",e[62]="ID",e[98]="IR",e[964]="IQ",e[353]="IE",e[972]="IL",e[81]="JP",e[962]="JO",e[254]="KE",e[965]="KW",e[996]="KG",e[856]="LA",e[371]="LV",e[961]="LB",e[266]="LS",e[231]="LR",e[218]="LY",e[423]="LI",e[370]="LT",e[352]="LU",e[853]="MO",e[389]="MK",e[261]="MG",e[265]="MW",e[60]="MY",e[960]="MV",e[223]="ML",e[356]="MT",e[692]="MH",e[596]="MQ",e[222]="MR",e[230]="MU",e[691]="FM",e[373]="MD",e[377]="MC",e[976]="MN",e[382]="ME",e[212]="MA",e[258]="MZ",e[95]="MM",e[264]="NA",e[674]="NR",e[977]="NP",e[31]="NL",e[687]="NC",e[64]="NZ",e[505]="NI",e[227]="NE",e[234]="NG",e[683]="NU",e[672]="NF",e[850]="KP",e[47]="NO",e[968]="OM",e[92]="PK",e[680]="PW",e[970]="PS",e[507]="PA",e[675]="PG",e[595]="PY",e[51]="PE",e[63]="PH",e[48]="PL",e[351]="PT",e[974]="QA",e[40]="RO",e[7]="RU",e[250]="RW",e[262]="RE",e[508]="PM",e[685]="WS",e[378]="SM",e[221]="SN",e[381]="RS",e[248]="SC",e[232]="SL",e[65]="SG",e[421]="SK",e[386]="SI",e[677]="SB",e[252]="SO",e[27]="ZA",e[82]="KR",e[211]="SS",e[94]="LK",e[249]="SD",e[597]="SR",e[268]="SZ",e[46]="SE",e[41]="CH",e[963]="SY",e[239]="ST",e[886]="TW",e[992]="TJ",e[255]="TZ",e[66]="TH",e[670]="TL",e[228]="TG",e[676]="TO",e[216]="TN",e[90]="TR",e[993]="TM",e[256]="UG",e[380]="UA",e[971]="AE",e[1]="US",e[598]="UY",e[998]="UZ",e[678]="VU",e[58]="VE",e[84]="VN",e[681]="WF",e[967]="YE",e[260]="ZM",e[263]="ZW",e[383]="XK";var l=e;i.default=l}),66);
__d("WACert.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={},c={},d={},m={};s.name="NoiseCertificate",s.internalSpec={details:[1,(e=o("WAProtoConst")).TYPES.BYTES],signature:[2,e.TYPES.BYTES]},u.name="NoiseCertificate$Details",u.internalSpec={serial:[1,e.TYPES.UINT32],issuer:[2,e.TYPES.STRING],expires:[3,e.TYPES.UINT64],subject:[4,e.TYPES.STRING],key:[5,e.TYPES.BYTES]},c.name="CertChain",c.internalSpec={leaf:[1,e.TYPES.MESSAGE,d],intermediate:[2,e.TYPES.MESSAGE,d]},d.name="CertChain$NoiseCertificate",d.internalSpec={details:[1,e.TYPES.BYTES],signature:[2,e.TYPES.BYTES]},m.name="CertChain$NoiseCertificate$Details",m.internalSpec={serial:[1,e.TYPES.UINT32],issuerSerial:[2,e.TYPES.UINT32],key:[3,e.TYPES.BYTES],notBefore:[4,e.TYPES.UINT64],notAfter:[5,e.TYPES.UINT64]},l.NoiseCertificateSpec=s,l.NoiseCertificate$DetailsSpec=u,l.CertChainSpec=c,l.CertChain$NoiseCertificateSpec=d,l.CertChain$NoiseCertificate$DetailsSpec=m}),98);
__d("WACryptoAesGcm",["WABinary","WACryptoDependencies","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r,o){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r,a){a===void 0&&(a=16);var i={name:"AES-GCM",iv:m(t),tagLength:a*8};return r!=null&&(i.additionalData=m(r)),o("WACryptoDependencies").getCrypto().subtle.encrypt(i,yield d(e),n)}),s.apply(this,arguments)}function u(e,t,n,r,o){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r,a){a===void 0&&(a=16);var i={name:"AES-GCM",iv:m(t),tagLength:a*8};return r!=null&&(i.additionalData=m(r)),o("WACryptoDependencies").getCrypto().subtle.decrypt(i,yield d(e),n)}),c.apply(this,arguments)}function d(e){return o("WACryptoDependencies").getCrypto().subtle.importKey("raw",e,"AES-GCM",!1,["encrypt","decrypt"])}function m(e){if(e instanceof Uint8Array)return e;if(typeof e=="string"){var t=new(o("WABinary")).Binary;return t.writeString(e),t.readByteArrayView()}return new Uint8Array(e)}l.gcmEncrypt=e,l.gcmDecrypt=u}),98);
__d("WACryptoCurveConstants",[],(function(t,n,r,o,a,i){"use strict";var e=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),l=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),s=BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),u=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),c=BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989");i.P=e,i.I=l,i.D=s,i.A=u,i.L=c}),66);
__d("WACryptoCurveEncoding",["err"],(function(t,n,r,o,a,i,l){"use strict";function e(e){for(var t=BigInt(0),n=0;n<e.length;n++)t|=BigInt(e[n])<<BigInt(8)*BigInt(n);return t}function s(e){for(var t=new Uint8Array(32),n=e,r=0;r<32;r++)t[r]=Number(n&BigInt(255)),n>>=BigInt(8);return t}function u(e){if(e.length%2)throw r("err")("hexToU8: odd string length");for(var t=new Uint8Array(e.length/2),n=0;n<t.length;n++)t[n]=parseInt(e.slice(2*n,2*n+2),16);return t}l.bytesToBigIntLE=e,l.bigIntTo32LE=s,l.hexToU8=u}),98);
__d("WACryptoCurveTransformations",["WACryptoCurveConstants","WACryptoCurveEncoding","err"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return(e%o("WACryptoCurveConstants").P+o("WACryptoCurveConstants").P)%o("WACryptoCurveConstants").P}function s(e){return u(e,o("WACryptoCurveConstants").P-BigInt(2))}function u(t,n){for(var r=e(t),o=n,a=BigInt(1);o>BigInt(0);)o&BigInt(1)&&(a=e(a*r)),r=e(r*r),o>>=BigInt(1);return a}function c(t,n){var a=e(t*s(n)),i=u(a,o("WACryptoCurveConstants").P+BigInt(3)>>BigInt(3)),l=e(i*i);if(l!==a&&(i=e(i*o("WACryptoCurveConstants").I),l=e(i*i),l!==a))throw r("err")("Montgomery u is on the twist (no sqrt for v)");return i}function d(t){var n=e(o("WACryptoCurveEncoding").bytesToBigIntLE(t));if(n===o("WACryptoCurveConstants").P-BigInt(1))throw r("err")("u == -1 (mod p): cannot convert");var a=e(e(n-BigInt(1))*s(e(n+BigInt(1))));return o("WACryptoCurveEncoding").bigIntTo32LE(a)}function m(t,n){return{X:t,Y:n,Z:BigInt(1),T:e(t*n)}}function p(t){var n=e(t.x),o=e(t.y),a=e(BigInt(1)-o);if(a===BigInt(0))throw r("err")("y == 1: map undefined");var i=e((BigInt(1)+o)*s(a)),l=n===BigInt(0)?void 0:e(i*s(n));return{u:i,v:l}}function _(e){var t=e.x,n=e.y,r=o("WACryptoCurveEncoding").bigIntTo32LE(n),a=(t&BigInt(1))===BigInt(1)?128:0;return r[31]|=a,r}function f(t){if(!(t instanceof Uint8Array)||t.length!==32)throw r("err")("Compressed Ed25519 key is not 32 bytes");var n=t[31],a=(n&128)!==0,i=t.slice();i[31]&=127;var l=e(o("WACryptoCurveEncoding").bytesToBigIntLE(i)),s=e(l*l),u=e(s-BigInt(1)),d=e(o("WACryptoCurveConstants").D*s+BigInt(1)),m=c(u,d);if((m&BigInt(1))!==(a?BigInt(1):BigInt(0))&&(m=e(-m)),m===BigInt(0)&&a)throw r("err")("Error during decompression of Ed25519: x coord is 0 but sign bit set");return{x:m,y:l}}l.mod=e,l.toEdwardsCompressed=d,l.affineToExtended=m,l.fromAffineToMontgomeryUV=p,l.compressEd25519=_,l.decompressEd25519=f}),98);
__d("WACryptoCurveEd25519PointOps",["WACryptoCurveConstants","WACryptoCurveTransformations","err"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n,r=e.T,a=e.X,i=e.Y,l=e.Z,s=t.T,u=t.X,c=t.Y,d=t.Z,m=(n=o("WACryptoCurveTransformations")).mod(a*u),p=n.mod(i*c),_=n.mod(r*o("WACryptoCurveConstants").D*s),f=n.mod(l*d),g=n.mod((a+i)*(u+c)-m-p),h=n.mod(f-_),y=n.mod(f+_),C=n.mod(p-o("WACryptoCurveConstants").A*m),b=n.mod(g*h),v=n.mod(y*C),S=n.mod(h*y),R=n.mod(g*C);return{X:b,Y:v,Z:S,T:R}}function s(e){var t,n=e.X,r=e.Y,a=e.Z,i=(t=o("WACryptoCurveTransformations")).mod(n*n),l=t.mod(r*r),s=t.mod(BigInt(2)*t.mod(a*a)),u=t.mod(o("WACryptoCurveConstants").A*i),c=n+r,d=t.mod(t.mod(c*c)-i-l),m=t.mod(u+l),p=t.mod(m-s),_=t.mod(u-l);return{X:t.mod(d*p),Y:t.mod(m*_),Z:t.mod(p*m),T:t.mod(d*_)}}function u(e,t){var n,r=e.X,a=e.Y,i=e.Z,l=t.X,s=t.Y,u=t.Z,c=(n=o("WACryptoCurveTransformations")).mod(r*u),d=n.mod(l*i),m=n.mod(a*u),p=n.mod(s*i);return c===d&&m===p}function c(t,n){for(var r={X:BigInt(0),Y:BigInt(1),Z:BigInt(1),T:BigInt(0)},o=t,a=n;a>BigInt(0);)a&BigInt(1)&&(r=e(r,o)),o=s(o),a>>=BigInt(1);return r}function d(e){var t,n=e.T,a=e.X,i=e.Y,l=e.Z,s=(t=o("WACryptoCurveTransformations")).mod(a*a),u=t.mod(i*i),c=t.mod(l*l),d=t.mod(c*c),m=t.mod(s*o("WACryptoCurveConstants").A),p=t.mod(c*t.mod(m+u)),_=t.mod(d+t.mod(o("WACryptoCurveConstants").D*t.mod(s*u)));if(p!==_)throw r("err")("bad point: equation left != right (1)");var f=o("WACryptoCurveTransformations").mod(a*i),g=o("WACryptoCurveTransformations").mod(l*n);if(f!==g)throw r("err")("bad point: equation left != right (2)");return!0}l.addPoints=e,l.doublePoint=s,l.equalPoints=u,l.scalarMult=c,l.isPointValid=d}),98);
__d("WACryptoCurveKeyCanonicalCheck",["WACryptoCurveConstants","WACryptoCurveEd25519PointOps","WACryptoCurveEncoding","WACryptoCurveTransformations"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("WACryptoCurveEd25519PointOps").equalPoints(e,{X:BigInt(0),Y:BigInt(1),Z:BigInt(1),T:BigInt(0)})}function s(e){var t=o("WACryptoCurveEncoding").bytesToBigIntLE(e);return t<o("WACryptoCurveConstants").P}function u(t){try{var n=o("WACryptoCurveTransformations").toEdwardsCompressed(t),r=o("WACryptoCurveTransformations").decompressEd25519(n),a=r.x,i=r.y,l=o("WACryptoCurveTransformations").affineToExtended(a,i),s=o("WACryptoCurveEd25519PointOps").scalarMult(l,o("WACryptoCurveConstants").L);return e(s)}catch(e){return!1}}function c(e){return u(e)&&s(e)}l.isIdentity=e,l.isInRange=s,l.isTorsionFree=u,l.isCanonical=c}),98);
__d("WALock",["Promise","WAResolvable","WATagsLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){return{lock:function(a,i){var r=new(o("WAResolvable")).Resolvable,l=a.map(function(e){return[e,new(o("WAResolvable")).Resolvable]});return(s||(s=n("Promise"))).all(l.map(function(e){var n=e[0],o=e[1];return t.enqueue(n,function(){return o.resolve(),r.promise})})).catch(function(){o("WATagsLogger").TAGS(["WALock"]).ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Lock failed for ",""])),a)}),s.all(l.map(function(e){var t=e[0],n=e[1];return n.promise})).then(function(){return i()}).finally(function(){r.resolve()})},wait:function(n){return t.wait(n)}}}l.makeLock=u}),98);
__d("WAPromiseQueue",["Promise"],(function(t,n,r,o,a,i){"use strict";var e,l=(function(){function t(t){t===void 0&&(t=-1),this.$1=(e||(e=n("Promise"))).resolve(),this.$3=0,this.$2=t}var r=t.prototype;return r.wait=function(){return this.$1},r.enqueueHandlers=function(t,n,r){var e=this;this.$3++;var o=this.$1.then(function(){return t}).then(n,r),a=o.then();return this.$1=u(o,this.$2).finally(function(){e.$3--}),a},r.enqueue=function(t){var e=this;this.$3++;var n=this.$1.then(t),r=n.then();return this.$1=u(n,this.$2).finally(function(){e.$3--}),r},r.size=function(){return this.$3},t})(),s=(function(){function t(e){e===void 0&&(e=-1),this.$1=new Map,this.$2=e}var r=t.prototype;return r.waitIfPending=function(t){return this.$1.get(t)},r.wait=function(r){return this.$1.get(r)||(e||(e=n("Promise"))).resolve()},r.enqueueHandlers=function(t,n,r,o){var e=this.wait(t).then(function(){return n}).then(r,o);return this.$3(t,e)},r.enqueue=function(t,n){var e=this.wait(t).then(n);return this.$3(t,e)},r.$3=function(t,n){var e=this,r=n.then(),o,a=function(){e.$1.get(t)===o&&e.$1.delete(t)};return o=u(n,this.$2).then(a,a),this.$1.set(t,o),r},t})();function u(t,r){return r>=0?new(e||(e=n("Promise")))(function(e){var n=function(){return void e()};t.then(n,n),setTimeout(n,r)}):t.then(c,c)}function c(){}i.PromiseQueue=l,i.PromiseQueueMap=s}),66);
__d("WALockMap",["WALock","WAPromiseQueue"],(function(t,n,r,o,a,i,l){"use strict";function e(e){e===void 0&&(e=-1);var t=new(o("WAPromiseQueue")).PromiseQueueMap(e);return o("WALock").makeLock(t)}l.makeLockMap=e}),98);
__d("WACryptoLibraryConfig",[],(function(t,n,r,o,a,i){"use strict";var e={signalFutureMessagesMax:2e3,S508658AutoAcknowledgeStaleSessions:!1,baseKeyCanonicalCheck:!1};function l(){return e}function s(t){e=t}i.getCryptoLibraryConfig=l,i.setCryptoLibraryConfig=s}),66);
__d("WASignalSessions",["WABinary","WACryptoLibraryConfig","WASignalKeys","WASignalOther","err"],(function(t,n,r,o,a,i,l){"use strict";var e=3;function s(e){return!o("WACryptoLibraryConfig").getCryptoLibraryConfig().S508658AutoAcknowledgeStaleSessions||e.initialExchangeInfo==null?e:y(e.local,e.remote,e.rootKey,e.recvChains,e.sendChain,null,e.prevSendChainHighestIndex,e.prevSessions,e.aliceBaseKey)}function u(e,t){return c(e,0,t,[])}function c(e,t,n,r){return{ratchetPubKey:e,nextMsgIndex:t,chainKey:n,unusedMsgKeys:r}}function d(e,t){return m(e,0,t)}function m(e,t,n){return{ratchetKey:e,nextMsgIndex:t,chainKey:n}}function p(e,t,n){return{remoteOneTimeId:e,remoteSignedId:t,localOneTimePubKey:n}}function _(e,t){return y(e.local,e.remote,e.rootKey,e.recvChains,e.sendChain,e.initialExchangeInfo,e.prevSendChainHighestIndex,t,e.aliceBaseKey)}function f(e,t,n){return y(e.local,e.remote,e.rootKey,t,n,e.initialExchangeInfo,e.prevSendChainHighestIndex,e.prevSessions,e.aliceBaseKey)}function g(e,t,n,r){return n===void 0&&(n=e.sendChain),y(e.local,e.remote,r,t,n,null,Math.max(e.sendChain.nextMsgIndex-1,0),e.prevSessions,e.aliceBaseKey)}function h(e,t,n,r,o,a,i){return y(e,t,n,r,o,a,0,[],i)}function y(e,t,n,r,o,a,i,l,s){return{local:e,remote:t,rootKey:n,sendChain:o,recvChains:r,initialExchangeInfo:a,prevSendChainHighestIndex:i,prevSessions:l,aliceBaseKey:s}}function C(e,t){var n=new(o("WABinary")).Binary(t),r=o("WASignalOther").readBytes(n,32),a=o("WASignalOther").readBytes(n,32),i=o("WASignalOther").readBytes(n,16);return b(e,r,a,i)}function b(e,t,n,r){return{index:e,cipherKey:t,macKey:n,iv:r}}function v(e){return{senderRatchetKey:e.ratchetPubKey,chainKey:{index:e.nextMsgIndex,key:e.chainKey},messageKeys:e.unusedMsgKeys}}function S(e){var t=e.ratchetKey;return{senderRatchetKey:t.serializedPubKey,senderRatchetKeyPrivate:t.privateKey,chainKey:{index:e.nextMsgIndex,key:e.chainKey}}}function R(t){var n=t.initialExchangeInfo,r=t.local,o=t.remote,a=void 0;if(n){var i=n.remoteOneTimeId;a={preKeyId:i!=null?i:void 0,signedPreKeyId:n.remoteSignedId,baseKey:n.localOneTimePubKey}}return{currentSession:{sessionVersion:e,localIdentityPublic:r.pubKey,remoteIdentityPublic:o.pubKey,rootKey:t.rootKey,previousCounter:t.prevSendChainHighestIndex,senderChain:S(t.sendChain),receiverChains:t.recvChains.map(v),pendingPreKey:a,remoteRegistrationId:o.regId,localRegistrationId:r.regId,aliceBaseKey:t.aliceBaseKey},previousSessions:t.prevSessions}}function L(t){var n=t.initialExchangeInfo,r=t.local,a=t.remote,i=t.sendChain,l=void 0;if(n){var s=n.remoteOneTimeId;l={preKeyId:s!=null?s:void 0,signedPreKeyId:n.remoteSignedId,baseKey:o("WASignalOther").toBuffer(n.localOneTimePubKey)}}return{sessionVersion:e,localIdentityPublic:o("WASignalOther").toBuffer(r.pubKey),remoteIdentityPublic:o("WASignalOther").toBuffer(a.pubKey),rootKey:o("WASignalOther").toBuffer(t.rootKey),previousCounter:t.prevSendChainHighestIndex,senderChain:{senderRatchetKey:o("WASignalOther").toBuffer(i.ratchetKey.serializedPubKey),senderRatchetKeyPrivate:o("WASignalOther").toBuffer(i.ratchetKey.privateKey),chainKey:{index:i.nextMsgIndex,key:o("WASignalOther").toBuffer(i.chainKey)},messageKeys:[]},receiverChains:t.recvChains.map(function(e){return{senderRatchetKey:o("WASignalOther").toBuffer(e.ratchetPubKey),chainKey:{index:e.nextMsgIndex,key:o("WASignalOther").toBuffer(e.chainKey)},messageKeys:e.unusedMsgKeys.map(function(e){return{index:e.index,cipherKey:o("WASignalOther").toBuffer(e.cipherKey),macKey:o("WASignalOther").toBuffer(e.macKey),iv:o("WASignalOther").toBuffer(e.iv)}})}}),pendingPreKey:l,remoteRegistrationId:a.regId,localRegistrationId:r.regId,aliceBaseKey:t.aliceBaseKey==null?void 0:o("WASignalOther").toBuffer(t.aliceBaseKey)}}function E(e){var t=$(e.currentSession,"currentSession");return I(t,e.previousSessions)}function k(e){return I(e,[])}function I(t,n){var a=$(t.sessionVersion,"sessionVersion");if(a!==e)throw r("err")("Signal: bad session version "+a);var i=$(t.senderChain,"senderChain"),l=$(i.chainKey,"senderChain.chainKey"),s=m(o("WASignalKeys").makeSerializedKeyPairFrom(x(i.senderRatchetKeyPrivate,32,"senderRatchetKeyPrivate"),D(i.senderRatchetKey,"senderRatchetKey")),$(l.index,"senderChain.chainKey.index"),x(l.key,32,"senderChain.chainKey.key")),u=$(t.receiverChains,"receiverChains").map(function(e){var t=$(e.chainKey,"receiverChains[].chainKey");return c(D(e.senderRatchetKey,"receiverChains[].senderRatchetKey"),$(t.index,"receiverChains[].chainKey.index"),x(t.key,32,"receiverChains[].chainKey.key"),T(e.messageKeys))}),d={regId:o("WASignalOther").castRegistrationId($(t.localRegistrationId,"localRegistrationId")),pubKey:D(t.localIdentityPublic,"localIdentityPublic")},_={regId:o("WASignalOther").castRegistrationId($(t.remoteRegistrationId,"remoteRegistrationId")),pubKey:D(t.remoteIdentityPublic,"remoteIdentityPublic")},f=t.pendingPreKey,g=null;if(f){var h=f.preKeyId;g=p(h!=null?o("WASignalKeys").castToPreKeyId(h):null,o("WASignalKeys").castToSignedPreKeyId($(f.signedPreKeyId,"pendingPreKey.signedPreKeyId")),D(f.baseKey,"pendingPreKey.baseKey"))}var C=t.aliceBaseKey==null?null:D(t.aliceBaseKey,"aliceBaseKey");return y(d,_,x(t.rootKey,32,"rootKey"),u,s,g,t.previousCounter||0,n,C)}function T(e){return e.map(function(e){return{index:$(e.index,"messageKeys[].index"),cipherKey:x(e.cipherKey,32,"messageKeys[].cipherKey"),macKey:x(e.macKey,32,"messageKeys[].macKey"),iv:x(e.iv,16,"messageKeys[].iv")}})}function D(e,t){return o("WASignalKeys").castToSerializedPubKey(new Uint8Array($(e,t)))}function x(e,t,n){return o("WASignalOther").toBytes($(e,n),t)}function $(e,t){if(e==null)throw r("err")("Signal: protobuf is missing "+t);return e}l.FORMAT_VERSION=e,l.maybeClearPendingPreKey=s,l.makeFreshRecvChain=u,l.makeRecvChain=c,l.makeFreshSendChain=d,l.makeSendChain=m,l.makeInitialExchangeInfo=p,l.setPrevSessions=_,l.updateChains=f,l.ratchetSession=g,l.makeFreshSession=h,l.makeSession=y,l.splitMsgKey=C,l.serializeSession=R,l.detachSession=L,l.parseSessionFromRecord=E,l.parseSession=k,l._parseSession=I,l.bytesOrThrow=x,l.definedOrThrow=$}),98);
__d("WASignalSignatures",["Promise","WACryptoDependencies","WACryptoEd25519","WACryptoPrimitives","WAHex","WALongInt","WASignalKeys","WASignalLocalStorageProtocol.pb","WASignalOther","decodeProtobuf","err"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t,n){return o("WACryptoEd25519").runInAllocationScope(function(){var r,a=t.length,i=e.privateKey,l=new Uint8Array(32);(r=o("WACryptoEd25519")).scalarmultBase(l,i);var s=l[31]&128,u=new Uint8Array(a+128);u[0]=254,u.fill(255,1,32),u.set(i,32),u.set(t,64),u.set(n,a+64);var c=r.allocate(Uint8Array,64);r.hashSha512(c,u,a+128),u.set(l,32);var d=r.allocate(Float64Array,64);r.reduce(c,d),r.scalarmultBase(u,c);var m=r.allocate(Uint8Array,64);r.hashSha512(m,u,a+64),r.reduce(m,d);var p,_;for(p=0;p<32;++p)d[p]=c[p];for(p=0;p<32;++p)for(_=0;_<32;++_)d[p+_]+=m[p]*i[_];return r.modL(u.subarray(32,64),d),{pubKeyNegative:s!==0,signedMsg:u}})}function u(t,r){return(e||(e=n("Promise"))).resolve().then(function(){var e=o("WASignalOther").makeBytes(64);return o("WACryptoDependencies").getCrypto().getRandomValues(e),d(t,r,e)})}function c(e,t,n){var r=n[63];return r&96?!1:o("WACryptoEd25519").runInAllocationScope(function(){var a,i,l=(a=o("WACryptoPrimitives")).lowlevel.A,s=a.lowlevel.M,u=a.lowlevel.Z,c=a.lowlevel.pack25519,d=a.lowlevel.unpack25519,m=(i=o("WACryptoEd25519")).allocate(Uint8Array,64);m.set(n),m[63]=r&127;var p=i.fieldElement(),_=i.fieldElement(),f=i.fieldElement(),g=i.fieldElement(),h=i.fieldElement(),y=i.allocate(Uint8Array,32),C=i.fieldElement();return C[0]=1,d(p,e.subarray(1)),u(_,p,C),l(f,p,C),i.inv25519(g,f),s(h,_,g),c(y,h),y[31]=y[31]&127|r&128,a.signDetachedVerify(t,m,y)})}function d(e,t,n){var r=s(e,t,n),a=o("WASignalOther").sliceBytes(r.signedMsg,0,64);return a[63]=a[63]&127|(r.pubKeyNegative?128:0),a}function m(e,t,n){var a=o("WASignalKeys").makeKeyPair(),i=o("WASignalOther").makeBytes(64);o("WACryptoDependencies").getCrypto().getRandomValues(i);var l=d(n,o("WASignalKeys").serializePubKey(a),i);if(!Number.isSafeInteger(t))throw r("err")("Expected timestamp to be a safe integer, given "+String(t));return{id:o("WASignalKeys").castToPreKeyId(e),ts:t,keyPair:a,signature:l}}function p(e,t){var n=o("WASignalOther").makeBytes(64);return o("WACryptoDependencies").getCrypto().getRandomValues(n),d(e,t,n)}function _(e){var t=e.id,n=e.keyPair;return o("WASignalOther").encodeSignalProto(o("WASignalLocalStorageProtocol.pb").SignedPreKeyRecordStructureSpec,{id:t,publicKey:o("WASignalKeys").serializePubKey(n),privateKey:n.privateKey,signature:e.signature,timestamp:e.ts})}function f(e){try{var t=o("decodeProtobuf").decodeProtobuf(o("WASignalLocalStorageProtocol.pb").SignedPreKeyRecordStructureSpec,e),n=t.id,r=t.privateKey,a=t.publicKey,i=t.signature,l=t.timestamp;return n==null||a==null||r==null||i==null||l==null?null:{id:o("WASignalKeys").castToSignedPreKeyId(n),ts:o("WALongInt").numberOrThrowIfTooLarge(l),keyPair:o("WASignalKeys").makeKeyPairFromSerialized(o("WASignalOther").toBytes(r,32),o("WASignalKeys").castToSerializedPubKey(new Uint8Array(a))),signature:o("WASignalOther").toBytes(i,64)}}catch(e){return null}}function g(e){return new Uint8Array(o("WAHex").parseHex(e))}function h(e){if(e.length===33)return o("WASignalKeys").castToSerializedPubKey(e);if(e.length===32)return o("WASignalKeys").serializeIdentity(e);throw r("err")("verifyCertificate publicKey incorrect length")}function y(t,r,o){return(e||(e=n("Promise"))).resolve().then(function(){var e=m(t,r,o),n=_(e);return{plainObject:e,record:n}})}l.signMsg=u,l.verifyMsgSignalVariant=c,l.makeSignature=d,l.makeSignedPreKey=m,l.signSenderKeyMessage=p,l.serializeSignedPreKeyForPrivateStorage=_,l.deserializeSignedPreKey=f,l.convertPublicKeyHexToUint8Array=g,l.convertPublicKeyToSerializedPubKey=h,l.generateSignedPreKey=y}),98);
__d("WASignalWhisperTextProtocol.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={},c={},d={},m={},p={};s.internalSpec={ratchetKey:[1,(e=o("WAProtoConst")).TYPES.BYTES],counter:[2,e.TYPES.UINT32],previousCounter:[3,e.TYPES.UINT32],ciphertext:[4,e.TYPES.BYTES]},u.internalSpec={registrationId:[5,e.TYPES.UINT32],preKeyId:[1,e.TYPES.UINT32],signedPreKeyId:[6,e.TYPES.UINT32],baseKey:[2,e.TYPES.BYTES],identityKey:[3,e.TYPES.BYTES],message:[4,e.TYPES.BYTES]},c.internalSpec={id:[1,e.TYPES.UINT32],baseKey:[2,e.TYPES.BYTES],ratchetKey:[3,e.TYPES.BYTES],identityKey:[4,e.TYPES.BYTES],baseKeySignature:[5,e.TYPES.BYTES]},d.internalSpec={id:[1,e.TYPES.UINT32],iteration:[2,e.TYPES.UINT32],ciphertext:[3,e.TYPES.BYTES]},m.internalSpec={id:[1,e.TYPES.UINT32],iteration:[2,e.TYPES.UINT32],chainKey:[3,e.TYPES.BYTES],signingKey:[4,e.TYPES.BYTES]},p.internalSpec={generation:[1,e.TYPES.UINT32],signature:[2,e.TYPES.BYTES]},l.SignalMessageSpec=s,l.PreKeySignalMessageSpec=u,l.KeyExchangeMessageSpec=c,l.SenderKeyMessageSpec=d,l.SenderKeyDistributionMessageSpec=m,l.DeviceConsistencyCodeMessageSpec=p}),98);
__d("WASignalGroupSession",["WASignalKeys","WASignalSessions"],(function(t,n,r,o,a,i,l){"use strict";var e=5,s=3;function u(e){var t=o("WASignalSessions").definedOrThrow(e.senderSigningKey,"senderSigningKey"),n=o("WASignalSessions").definedOrThrow(e.senderMessageKeys,"senderMessageKeys"),r=o("WASignalSessions").definedOrThrow(e.senderChainKey,"senderChainKey");return{senderSigningKeyPublic:S(t.public,"public"),senderSigningKeyPrivate:t.private?o("WASignalSessions").bytesOrThrow(t.private,32,"private"):void 0,senderKeyId:o("WASignalSessions").definedOrThrow(e.senderKeyId,"senderKeyId"),unusedMsgKeys:n.map(function(e){return _(o("WASignalSessions").definedOrThrow(e.iteration,"iteration"),o("WASignalSessions").bytesOrThrow(e.seed,50,"seed"))}),senderKeyChainKey:f(o("WASignalSessions").definedOrThrow(r.iteration,"iteration"),o("WASignalSessions").bytesOrThrow(r.seed,32,"seed"))}}function c(e,t,n,r,o){return{senderSigningKeyPublic:e,senderSigningKeyPrivate:t,senderKeyChainKey:n,senderKeyId:r,unusedMsgKeys:o==null?[]:o}}function d(e,t){var n=e.senderKeyStates.findIndex(function(e){return e.senderKeyId===t.senderKeyId});return{senderKeyStates:e.senderKeyStates.map(function(e,r){return r===n?t:e})}}function m(t,n){var r=t.senderKeyStates.slice(t.senderKeyStates.length>e-1?1:0);return r.push(n),{senderKeyStates:r}}function p(e){return{senderKeyStates:[e]}}function _(e,t){return{iteration:e,seed:t}}function f(e,t){return{nextMsgIndex:e,chainKey:t}}function g(e){var t=o("WASignalSessions").definedOrThrow(e.senderKeyStates,"senderKeyStates");return h(t)}function h(e){return y(e)}function y(e){var t=e.map(function(e){return u(e)});return{senderKeyStates:t}}function C(e,t){var n=e.senderKeyStates.findIndex(function(e){return e.senderKeyId===t});if(n!==-1)return e.senderKeyStates[n]}function b(e){return{senderKeyStates:e.senderKeyStates.map(function(e){return v(e)})}}function v(e){return{senderKeyId:e.senderKeyId,senderChainKey:{iteration:e.senderKeyChainKey.nextMsgIndex,seed:e.senderKeyChainKey.chainKey},senderSigningKey:{public:e.senderSigningKeyPublic,private:e.senderSigningKeyPrivate},senderMessageKeys:e.unusedMsgKeys.map(function(e){var t=e.iteration,n=e.seed;return{iteration:t,seed:n}})}}function S(e,t){return o("WASignalKeys").castToSerializedPubKey(new Uint8Array(o("WASignalSessions").definedOrThrow(e,t)))}function R(e){return e}l.FORMAT_VERSION=s,l.makeSenderKeyState=c,l.updateSessionWithUpdatedSenderKeyState=d,l.updateSessionWithNewSenderKeyState=m,l.makeNewSenderKeySession=p,l.makeSenderKeyMsgKey=_,l.makeSenderKeyChainKey=f,l.parseSessionFromRecord=g,l._parseSession=h,l.makeSenderKeySessionFromRecord=y,l.findSenderKeyState=C,l.serializeSession=b,l.serializeSenderKeyState=v,l.convertFromRawToSenderKeyState=R}),98);
__d("WASignalWhitepaper",["Promise","WABinary","WACryptoDependencies","WASignalGroupSession","WASignalKeys","WASignalOther","WASignalSessions","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new Uint8Array(32);s.fill(255);var u=new Uint8Array([1]),c=new Uint8Array([2]);function d(e,t,n){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r,a=e.regId,i=e.staticKeyPair,l=t.identity,u=t.signedKey.publicKey,c=n.privateKey,d=i.privateKey,m=(r=t.oneTimeKey)==null?void 0:r.publicKey,p=o("WABinary").Binary.build(s,E(d,u),E(c,l),E(c,u),m&&E(c,m)).readByteArrayView(),_=yield R(p,"WhisperText"),f=_[0],g=_[1],h=t.ratchetKey,y=o("WASignalSessions").makeFreshRecvChain(h,g),C=o("WASignalKeys").makeSerializedKeyPair(),b=yield v(f,C,h),S=o("WASignalSessions").makeInitialExchangeInfo(t.oneTimeKey==null?null:t.oneTimeKey.id,t.signedKey.id,o("WASignalKeys").serializePubKey(n));return o("WASignalSessions").makeFreshSession({regId:a,pubKey:o("WASignalKeys").serializePubKey(i)},{regId:t.regId,pubKey:l},b.rootKey,[y],o("WASignalSessions").makeFreshSendChain(C,b.chainKey),S,o("WASignalKeys").serializePubKey(n))}),m.apply(this,arguments)}function p(e,t,n,r){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r){var a,i=e.regId,l=e.staticKeyPair,u=l.privateKey,c=r.signed.privateKey,d=n,m=t.pubKey,p=(a=r.oneTime)==null?void 0:a.privateKey,_=o("WABinary").Binary.build(s,k(m,c),k(d,u),k(d,c),p&&k(d,p)).readByteArrayView(),f=yield R(_,"WhisperText"),g=f[0],h=f[1],y=r.ratchet,C=o("WASignalSessions").makeFreshSendChain(y,h);return o("WASignalSessions").makeSession({regId:i,pubKey:o("WASignalKeys").serializePubKey(l)},t,g,[],C,null,0,[],n)}),_.apply(this,arguments)}function f(t){var r=o("WASignalGroupSession").makeSenderKeyState(o("WASignalKeys").serializePubKey(t),t.privateKey,o("WASignalGroupSession").makeSenderKeyChainKey(0,o("WASignalKeys").makeRawSenderKey()),o("WASignalOther").makeSenderKeyId(),[]);return(e||(e=n("Promise"))).resolve(o("WASignalGroupSession").makeNewSenderKeySession(r))}function g(t,r,a,i,l){var s=o("WASignalGroupSession").makeSenderKeyState(a,void 0,o("WASignalGroupSession").makeSenderKeyChainKey(r,i),t,[]),u=null;return l?u=o("WASignalGroupSession").updateSessionWithNewSenderKeyState(l,s):u=o("WASignalGroupSession").makeNewSenderKeySession(s),(e||(e=n("Promise"))).resolve(u)}function h(e,t){return y.apply(this,arguments)}function y(){return y=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r){var a=yield o("WASignalOther").makeCryptoKey(r,"hmac-sha256"),i=function(t){return o("WACryptoDependencies").getCrypto().subtle.sign({name:"HMAC",hash:"SHA-256"},a,t)},l=i(u).then(function(e){return o("WASignalOther").hkdf(new Uint8Array(e),null,"WhisperMessageKeys",80)}).then(function(e){return o("WASignalSessions").splitMsgKey(t,e)}),s=i(c).then(function(e){return o("WASignalOther").toBytes(e,32)});return(e||(e=n("Promise"))).all([s,l])}),y.apply(this,arguments)}function C(e,t){return b.apply(this,arguments)}function b(){return b=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r){var a=yield o("WASignalOther").makeCryptoKey(r,"hmac-sha256"),i=function(t){return o("WACryptoDependencies").getCrypto().subtle.sign({name:"HMAC",hash:"SHA-256"},a,t)},l=i(u).then(function(e){return o("WASignalOther").hkdf(new Uint8Array(e),null,"WhisperGroup",50)}).then(function(e){return o("WASignalGroupSession").makeSenderKeyMsgKey(t,e)}),s=i(c).then(function(e){return o("WASignalOther").toBytes(e,32)});return(e||(e=n("Promise"))).all([s,l])}),b.apply(this,arguments)}function v(e,t,n){return S.apply(this,arguments)}function S(){return S=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=t.privateKey,a=n,i=o("WASignalKeys").ecdh(r,a),l=yield R(new Uint8Array(i),"WhisperRatchet",e),s=l[0],u=l[1];return{rootKey:s,chainKey:u}}),S.apply(this,arguments)}function R(e,t,n){return L.apply(this,arguments)}function L(){return L=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){n===void 0&&(n=null);var r=yield o("WASignalOther").hkdf(e,n,t,64);return[o("WASignalOther").sliceBytes(r,0,32),o("WASignalOther").sliceBytes(r,32,32)]}),L.apply(this,arguments)}function E(e,t){return new Uint8Array(o("WASignalKeys").ecdh(e,t))}function k(e,t){return E(t,e)}l.initiateSessionOutgoing=d,l.initiateSessionIncoming=p,l.initiateSenderKeySessionOutgoing=f,l.initiateSenderKeySessionIncoming=g,l.deriveMsgKey=h,l.deriveSenderKeyMsgKey=C,l.calculateRatchet=v}),98);
__d("WASignalCipher",["Promise","WABinary","WACryptoCurveKeyCanonicalCheck","WACryptoDependencies","WACryptoLibraryConfig","WACryptoUtils","WAResultOrError","WASignalKeys","WASignalOther","WASignalSessions","WASignalSignatures","WASignalWhisperTextProtocol.pb","WASignalWhitepaper","asyncToGeneratorRuntime","decodeProtobuf","encodeProtobuf"],(function(t,n,r,o,a,i,l){"use strict";var e,s=40,u=8,c=2e3;function d(e,t){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=e.sendChain,r=yield o("WASignalWhitepaper").deriveMsgKey(n.nextMsgIndex,n.chainKey),a=r[0],i=r[1],l=yield T(i),s=l.cipherKey,c=l.macKey,d=yield o("WACryptoDependencies").getCrypto().subtle.encrypt({name:"AES-CBC",iv:i.iv},s,t),m=new(o("WABinary")).Binary;m.writeByteArray(e.local.pubKey),m.writeByteArray(e.remote.pubKey);var p=m.size();m.writeUint8(E(o("WASignalSessions").FORMAT_VERSION,o("WASignalSessions").FORMAT_VERSION)),o("encodeProtobuf").encodeProtobuf(o("WASignalWhisperTextProtocol.pb").SignalMessageSpec,{ratchetKey:n.ratchetKey.serializedPubKey,counter:i.index,previousCounter:e.prevSendChainHighestIndex,ciphertext:d},m);var _=m.readByteArrayView(),f=yield I(c,_),g=_.subarray(p),h=o("WABinary").Binary.build(g,new Uint8Array(f,0,u)).readByteArrayView(),y,C,b=e.initialExchangeInfo;if(b!=null){var v,S=new(o("WABinary")).Binary;S.writeUint8(E(o("WASignalSessions").FORMAT_VERSION,o("WASignalSessions").FORMAT_VERSION)),o("encodeProtobuf").encodeProtobuf(o("WASignalWhisperTextProtocol.pb").PreKeySignalMessageSpec,{registrationId:e.local.regId,preKeyId:(v=b.remoteOneTimeId)!=null?v:void 0,signedPreKeyId:b.remoteSignedId,baseKey:b.localOneTimePubKey,identityKey:e.local.pubKey,message:h},S),y="pkmsg",C=S.readByteArrayView()}else y="msg",C=h;var R=o("WASignalSessions").makeSendChain(n.ratchetKey,i.index+1,a),L=o("WASignalSessions").updateChains(e,e.recvChains,R);return[L,{type:y,ciphertext:C}]}),m.apply(this,arguments)}function p(e,t){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){if(e==null)return o("WAResultOrError").makeError("errSignalNoSession");var n=yield b(e,t);if(n.success){var r=n.value,a=r[0],i=r[1];return o("WAResultOrError").makeResult({newSessionInfo:null,updatedSession:a,plaintext:i})}else{for(var l=e.prevSessions,s=n,u=0;!s.success&&u<l.length;u++){var c=o("WASignalSessions").maybeClearPendingPreKey(o("WASignalSessions").parseSession(l[u])),d=yield b(c,t);if(d.success){var m=d.value,p=m[0],_=m[1],f=o("WASignalSessions").setPrevSessions(p,[o("WASignalSessions").detachSession(e)].concat(l.slice(0,u),l.slice(u+1))),g=!e||!o("WACryptoUtils").serializedPubKeysEqual(f.remote.pubKey,e.remote.pubKey)?f.remote.pubKey:null;s=o("WAResultOrError").makeResult({newSessionInfo:{newIdentity:g,baseSession:c,usedPreKey:null},updatedSession:f,plaintext:_})}}return s}}),_.apply(this,arguments)}function f(e,t){if(e==null)return o("WAResultOrError").makeResult(null);var n=e;if(D(n,t))return o("WAResultOrError").makeResult(n);for(var r=n.prevSessions,a=0;a<r.length;a++){var i=o("WASignalSessions").parseSession(r[a]);if(D(i,t))return o("WAResultOrError").makeError("errSignalInvalidMsg")}return o("WAResultOrError").makeResult(null)}function g(e,t,n,r){return h.apply(this,arguments)}function h(){return h=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r){var a,i=r.localSignedPreKey;if(i==null)return o("WAResultOrError").makeError("errSignalInvalidSignedPreKey");var l=o("WASignalSignatures").deserializeSignedPreKey(i);if(l==null)return o("WAResultOrError").makeError("errSignalSignedPreKeyDeserialization");if(l.id!==n.localSignedPreKeyId)return o("WAResultOrError").makeError("errSignalSignedPreKeyIdMismatch");var u=null;if(n.localOneTimeKeyId!=null){var c=r.localOneTimeKey;if(c==null)return o("WAResultOrError").makeError("errSignalInvalidOneTimeKey");if(u=o("WASignalKeys").deserializePreKey(c),u==null)return o("WAResultOrError").makeError("errSignalOneTimeKeyDeserialization");if(u.id!==n.localOneTimeKeyId)return o("WAResultOrError").makeError("errSignalOneTimeKeyMismatch")}if(o("WACryptoLibraryConfig").getCryptoLibraryConfig().baseKeyCanonicalCheck&&!o("WACryptoCurveKeyCanonicalCheck").isCanonical(n.sessionBaseKey.subarray(1)))return o("WAResultOrError").makeError("errSignalBaseKeyIsNotCanonical");var d=yield o("WASignalWhitepaper").initiateSessionIncoming(e,n.remote,n.sessionBaseKey,{signed:l.keyPair,oneTime:(a=u)==null?void 0:a.keyPair,ratchet:o("WASignalKeys").toSerializedKeyPair(l.keyPair)}),m=d.remote.pubKey,p=!t||!o("WACryptoUtils").serializedPubKeysEqual(m,t.remote.pubKey)?m:null;t&&!p&&(d=o("WASignalSessions").setPrevSessions(d,[o("WASignalSessions").detachSession(t)].concat(t.prevSessions.slice(0,s-1))));var _=yield b(d,n);if(!_.success)return _;var f=_.value,g=f[0],h=f[1];return o("WAResultOrError").makeResult({newIdentity:p,baseSession:d,updatedSession:g,plaintext:h})}),h.apply(this,arguments)}function y(e){var t,n,r=null;try{var a=L(e,o("WASignalSessions").FORMAT_VERSION,u);if(!a.success)return a;var i=o("decodeProtobuf").decodeProtobuf(o("WASignalWhisperTextProtocol.pb").SignalMessageSpec,a.value),l=i.ratchetKey;if(r=i.counter,n=i.ciphertext,l==null||r==null||n==null)return o("WAResultOrError").makeError("errSignalDeserializeInvalidProtoFormat");t=o("WASignalKeys").castToSerializedPubKey(new Uint8Array(l))}catch(e){return o("WAResultOrError").makeError("errSignalDeserializeRatchetKeyBadFormat")}var s={ratchetPubKey:t,counter:r,ciphertext:new Uint8Array(n),versionContentMac:e};return o("WAResultOrError").makeResult(s)}function C(e){var t=L(e,o("WASignalSessions").FORMAT_VERSION,0);if(!t.success)return t;var n,r,a,i,l;try{var s=o("decodeProtobuf").decodeProtobuf(o("WASignalWhisperTextProtocol.pb").PreKeySignalMessageSpec,t.value),u=s.baseKey,c=s.identityKey,d=s.message,m=s.preKeyId,p=s.registrationId,_=s.signedPreKeyId;if(p==null||_==null||u==null||c==null||d==null)return o("WAResultOrError").makeError("errSignalDeserializePkInvalidProtoFormat");i=o("WASignalKeys").castToSerializedPubKey(new Uint8Array(u)),n={regId:o("WASignalOther").castRegistrationId(p),pubKey:o("WASignalKeys").castToSerializedPubKey(new Uint8Array(c))},a=m!=null?o("WASignalKeys").castToPreKeyId(m):null,r=o("WASignalKeys").castToSignedPreKeyId(_),l=new Uint8Array(d)}catch(e){return o("WAResultOrError").makeError("errSignalDeserializePkKeyBadFormat")}var f=y(l);return f.success?o("WAResultOrError").makeResult(babelHelpers.extends({},f.value,{remote:n,sessionBaseKey:i,localSignedPreKeyId:r,localOneTimeKeyId:a})):f}function b(e,t){return v.apply(this,arguments)}function v(){return v=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=t.ciphertext,r=t.counter,a=t.ratchetPubKey,i=t.versionContentMac,l=e.recvChains,s=e.recvChains.findIndex(function(e){return o("WACryptoUtils").serializedPubKeysEqual(e.ratchetPubKey,a)}),c,d;if(s===-1){var m=yield o("WASignalWhitepaper").calculateRatchet(e.rootKey,e.sendChain.ratchetKey,a),p=o("WASignalSessions").makeFreshRecvChain(a,m.chainKey),_=yield S(p,r);if(!_.success)return _;var f=_.value,g=o("WASignalKeys").makeSerializedKeyPair(),h=yield o("WASignalWhitepaper").calculateRatchet(m.rootKey,g,a),y=l.slice(-4);y.push(f.updatedChain),d=f.msgKey,c=o("WASignalSessions").ratchetSession(e,y,o("WASignalSessions").makeFreshSendChain(g,h.chainKey),h.rootKey)}else{var C=yield S(l[s],r);if(!C.success)return C;var b=C.value,v=l.slice();v[s]=b.updatedChain,d=b.msgKey,c=o("WASignalSessions").updateChains(e,v,e.sendChain)}var R=yield T(d),L=R.cipherKey,E=R.macKey,k=o("WABinary").Binary.build(e.remote.pubKey,e.local.pubKey,i.subarray(0,-u)).readByteArrayView(),D=yield I(E,k),x=i.subarray(-u),$=!o("WACryptoUtils").uint8ArraysEqual(new Uint8Array(D,0,u),x),P=null;try{P=yield o("WACryptoDependencies").getCrypto().subtle.decrypt({name:"AES-CBC",iv:d.iv},L,n)}catch(e){}return $&&P==null?s===-1?o("WAResultOrError").makeError("errInvalidMacInvalidCipherKeyNewChain"):o("WAResultOrError").makeError("errInvalidMacInvalidCipherKey"):$?o("WAResultOrError").makeError("errInvalidMacWithDecryptedPlaintext"):P==null?o("WAResultOrError").makeError("errUnknownInvalidCipherKey"):o("WAResultOrError").makeResult([c,P])}),v.apply(this,arguments)}function S(e,t){return R.apply(this,arguments)}function R(){return R=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=t-e.nextMsgIndex,r=o("WACryptoLibraryConfig").getCryptoLibraryConfig().signalFutureMessagesMax;if(n>r)return o("WAResultOrError").makeError("errSignalTooManyMessagesInFuture");var a=e.unusedMsgKeys;if(n<0){var i=a.findIndex(function(e){return e.index===t});return i===-1?o("WAResultOrError").makeError("errDuplicateMsg"):o("WAResultOrError").makeResult({msgKey:a[i],updatedChain:o("WASignalSessions").makeRecvChain(e.ratchetPubKey,e.nextMsgIndex,e.chainKey,k(a,i))})}var l=e.nextMsgIndex,s=yield o("WASignalWhitepaper").deriveMsgKey(l,e.chainKey),u=s[0],d=s[1],m=null;if(n>0){var p=n+a.length-c;p>0?(m=a.slice(p),p-=a.length):m=a.slice();for(var _=l+1;_<=t;_++){p>0?p--:m.push(d);var f=yield o("WASignalWhitepaper").deriveMsgKey(_,u);u=f[0],d=f[1]}}return o("WAResultOrError").makeResult({msgKey:d,updatedChain:o("WASignalSessions").makeRecvChain(e.ratchetPubKey,t+1,u,m||a)})}),R.apply(this,arguments)}function L(e,t,n){if(e.length<1)return o("WAResultOrError").makeError("errSignalEmptyVersionContentSuffix");var r=e[0]>>>4;if(r!==t)return r<t?o("WAResultOrError").makeError("errSignalLegacyMsg"):o("WAResultOrError").makeError("errSignalInvalidVersion");var a=e.length-n;return a<1?o("WAResultOrError").makeError("errSignalContentExceededExpectedLength"):o("WAResultOrError").makeResult(e.subarray(1,a))}function E(e,t){return(e<<4|t)&255}function k(e,t){for(var n=[],r=0;r<e.length;r++)r!==t&&n.push(e[r]);return n}function I(e,t){return o("WACryptoDependencies").getCrypto().subtle.sign(o("WASignalOther").HMAC_SHA256,e,t)}function T(t){return(e||(e=n("Promise"))).all([o("WASignalOther").makeCryptoKey(t.cipherKey,"aes-cbc"),o("WASignalOther").makeCryptoKey(t.macKey,"hmac-sha256")]).then(function(e){var t=e[0],n=e[1];return{cipherKey:t,macKey:n}})}function D(e,t){var n=e.aliceBaseKey;return n?o("WACryptoUtils").serializedPubKeysEqual(n,t):!1}l.MAX_UNUSED_KEYS=c,l.encryptMsg=d,l.decryptMsg=p,l.findMatchingSession=f,l.decryptPkMsgWithNewSession=g,l.deserializeMsg=y,l.deserializePkMsg=C,l.decryptMsgFromSession=b,l.readContent=L,l.versionByte=E}),98);
__d("WASignalGroupCipher",["WABinary","WACryptoDependencies","WACryptoLibraryConfig","WALogger","WAResultOrError","WASignalCipher","WASignalGroupSession","WASignalKeys","WASignalOther","WASignalSessions","WASignalSignatures","WASignalWhisperTextProtocol.pb","WASignalWhitepaper","asyncToGeneratorRuntime","decodeProtobuf","encodeProtobuf"],(function(t,n,r,o,a,i,l){"use strict";var e,s=64;function u(e,t){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=g(e);if(!n.success)return n;var r=n.value,a=r.chainKey,i=r.iteration,l=r.senderKeyId,s=r.signingKeyPublic,u=yield o("WASignalWhitepaper").initiateSenderKeySessionIncoming(l,i,s,a,t);return o("WAResultOrError").makeResult(u)}),c.apply(this,arguments)}function d(e){var t=o("WASignalGroupSession").serializeSenderKeyState(e),n=new(o("WABinary")).Binary;return n.writeUint8(o("WASignalCipher").versionByte(o("WASignalGroupSession").FORMAT_VERSION,o("WASignalGroupSession").FORMAT_VERSION)),o("encodeProtobuf").encodeProtobuf(o("WASignalWhisperTextProtocol.pb").SenderKeyDistributionMessageSpec,{id:t.senderKeyId,iteration:o("WASignalSessions").definedOrThrow(t.senderChainKey,"senderChainKey").iteration,chainKey:o("WASignalSessions").definedOrThrow(t.senderChainKey,"senderChainKey").seed,signingKey:o("WASignalSessions").definedOrThrow(t.senderSigningKey,"senderSigningKey").public},n),n.readByteArrayView()}function m(e,t){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){if(!e.senderKeyStates||e.senderKeyStates.length===0)return o("WAResultOrError").makeError("errSignalNoSession");var n=e.senderKeyStates[e.senderKeyStates.length-1],r=yield o("WASignalWhitepaper").deriveSenderKeyMsgKey(n.senderKeyChainKey.nextMsgIndex,n.senderKeyChainKey.chainKey),a=r[0],i=r[1],l=yield y(i.seed),s=l[0],u=l[1],c=yield o("WACryptoDependencies").getCrypto().subtle.encrypt({name:"AES-CBC",iv:u},s,t),d=new(o("WABinary")).Binary;o("encodeProtobuf").encodeProtobuf(o("WASignalWhisperTextProtocol.pb").SenderKeyMessageSpec,{id:n.senderKeyId,iteration:i.iteration,ciphertext:c},d);var m=new(o("WABinary")).Binary;m.writeUint8(o("WASignalCipher").versionByte(o("WASignalGroupSession").FORMAT_VERSION,o("WASignalGroupSession").FORMAT_VERSION)),m.writeBinary(d);var p=o("WASignalKeys").makeKeyPairFromSerialized(o("WASignalSessions").definedOrThrow(n.senderSigningKeyPrivate,"senderSigningKeyPrivate"),n.senderSigningKeyPublic),_=o("WASignalSignatures").signSenderKeyMessage(p,m.readByteArrayView()),f=new(o("WABinary")).Binary;f.writeUint8(o("WASignalCipher").versionByte(o("WASignalGroupSession").FORMAT_VERSION,o("WASignalGroupSession").FORMAT_VERSION)),f.writeBinary(d),f.writeByteArray(_);var g=o("WASignalGroupSession").makeSenderKeyChainKey(i.iteration+1,a),h=o("WASignalGroupSession").updateSessionWithUpdatedSenderKeyState(e,o("WASignalGroupSession").makeSenderKeyState(n.senderSigningKeyPublic,n.senderSigningKeyPrivate,g,n.senderKeyId,n.unusedMsgKeys));return o("WAResultOrError").makeResult([h,f.readByteArrayView()])}),p.apply(this,arguments)}function _(e,t){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=t.ciphertext,r=t.iteration,a=t.senderKeyMessageId,i=t.versionContentMac,l=o("WASignalGroupSession").findSenderKeyState(e,a);if(l==null)return o("WAResultOrError").makeError("errSignalNoSession");var s=l.senderSigningKeyPublic,u=b(i,s);if(!u)return o("WAResultOrError").makeError("errSignalInvalidKey");var c=yield v(l,r);if(!c.success)return c;var d=c.value,m=d.msgKey,p=o("WASignalGroupSession").updateSessionWithUpdatedSenderKeyState(e,d.updatedSenderKeyState),_=yield y(m.seed),f=_[0],g=_[1],h=yield o("WACryptoDependencies").getCrypto().subtle.decrypt({name:"AES-CBC",iv:g},f,n);return o("WAResultOrError").makeResult([p,h])}),f.apply(this,arguments)}function g(e){var t,n,r,a,i;try{if(i=o("WASignalCipher").readContent(e,o("WASignalGroupSession").FORMAT_VERSION,0),!i.success)return i;var l=o("decodeProtobuf").decodeProtobuf(o("WASignalWhisperTextProtocol.pb").SenderKeyDistributionMessageSpec,i.value);t=l.id,n=l.iteration;var s=o("WASignalSessions").bytesOrThrow(l.signingKey,33,"signingKey");if(r=o("WASignalKeys").castToSerializedPubKey(s),a=o("WASignalSessions").bytesOrThrow(l.chainKey,32,"chainKey"),t==null||n==null)return o("WAResultOrError").makeError("errSignalGrpInvalidProtoFormat")}catch(e){return o("WAResultOrError").makeError("errSignalGrpInvalidKeyFormat")}return o("WAResultOrError").makeResult({senderKeyId:t,iteration:n,signingKeyPublic:r,chainKey:a})}function h(t){if(t.length<1)return o("WAResultOrError").makeError("errSignalGrpVersionContentEmpty");var n=t[0]>>>4;if(n!==o("WASignalGroupSession").FORMAT_VERSION)return n<o("WASignalGroupSession").FORMAT_VERSION?o("WAResultOrError").makeError("errSignalLegacyMsg"):o("WAResultOrError").makeError("errSignalInvalidVersion");if(t.length<1+s)return o("WAResultOrError").makeError("errSignalGrpInvalidVersionContentLength");var r,a,i;try{var l=t.subarray(1,-s),u=o("decodeProtobuf").decodeProtobuf(o("WASignalWhisperTextProtocol.pb").SenderKeyMessageSpec,l);if(r=u.id,a=u.iteration,i=u.ciphertext,r==null||a==null||i==null)return o("WAResultOrError").makeError("errSignalGrpSenderKeyInvalidProtoFormat")}catch(t){return o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Exception caught during SenderKeyMessageSpec Proto: ",""])),t),o("WAResultOrError").makeError("errSignalGrpSenderKeyProtoError")}return o("WAResultOrError").makeResult({senderKeyMessageId:r,iteration:a,ciphertext:new Uint8Array(i),versionContentMac:t})}function y(e){return C.apply(this,arguments)}function C(){return C=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=new(o("WABinary")).Binary(e),n=o("WASignalOther").readBytes(t,16),r=o("WASignalOther").readBytes(t,32);return[yield o("WASignalOther").makeCryptoKey(r,"aes-cbc"),n]}),C.apply(this,arguments)}function b(e,t){var n=e.subarray(e.length-s),r=e.subarray(0,e.length-s);return o("WASignalSignatures").verifyMsgSignalVariant(t,r,o("WASignalOther").toBytes(o("WASignalOther").toBuffer(n),64))}function v(e,t){return S.apply(this,arguments)}function S(){return S=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=e,r=t-n.senderKeyChainKey.nextMsgIndex,a=o("WACryptoLibraryConfig").getCryptoLibraryConfig().signalFutureMessagesMax;if(r>a)return o("WAResultOrError").makeError("errSignalGrpTooManyMessagesInFuture");var i=e.unusedMsgKeys||[];if(r<0){var l=i.findIndex(function(e){return e.iteration===t});return l===-1?o("WAResultOrError").makeError("errDuplicateMsg"):o("WAResultOrError").makeResult({msgKey:i[l],updatedSenderKeyState:o("WASignalGroupSession").makeSenderKeyState(n.senderSigningKeyPublic,n.senderSigningKeyPrivate,n.senderKeyChainKey,n.senderKeyId,R(i,l))})}var s=n.senderKeyChainKey.nextMsgIndex,u=yield o("WASignalWhitepaper").deriveSenderKeyMsgKey(s,n.senderKeyChainKey.chainKey),c=u[0],d=u[1],m=null;if(r>0){var p=r+i.length-o("WASignalCipher").MAX_UNUSED_KEYS;p>0?(m=i.slice(p),p-=i.length):m=i.slice();for(var _=s+1;_<=t;_++){p>0?p--:m.push(d);var f=yield o("WASignalWhitepaper").deriveSenderKeyMsgKey(_,c);c=f[0],d=f[1]}}return o("WAResultOrError").makeResult({msgKey:d,updatedSenderKeyState:o("WASignalGroupSession").makeSenderKeyState(n.senderSigningKeyPublic,n.senderSigningKeyPrivate,o("WASignalGroupSession").makeSenderKeyChainKey(t+1,c),e.senderKeyId,m||i)})}),S.apply(this,arguments)}function R(e,t){for(var n=[],r=0;r<e.length;r++)r!==t&&n.push(e[r]);return n}l.processSenderKeyDistributionMsg=u,l.createSenderKeyDistributionProto=d,l.encryptSenderKeyMsgWithSession=m,l.decryptSenderKeyMsgFromSession=_,l.deserializeSenderKeyMsg=h}),98);
__d("WACryptoLibrary",["WACryptoUtils","WAJids","WALockMap","WALogger","WAResultOrError","WASignalCipher","WASignalGroupCipher","WASignalGroupSession","WASignalKeys","WASignalOther","WASignalSignatures","WASignalWhitepaper","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=o("WALockMap").makeLockMap(6e4),u=[],c=300;function d(e){u.push(e),u.length>=c&&u.shift()}function m(e){e(u),u=[]}function p(e,t){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){d("createOutgoingSession");var n=I(t),r=n.signedKey,a=yield o("WASignalSignatures").verifyMsgSignalVariant(n.identity,r.publicKey,r.signature);if(!a)return d("createOutgoingSession: errSignalInvalidKey"),o("WAResultOrError").makeError("errSignalInvalidKey");var i=yield o("WASignalWhitepaper").initiateSessionOutgoing(e,n,o("WASignalKeys").makeKeyPair());return o("WAResultOrError").makeResult(i)}),_.apply(this,arguments)}function f(e,t,n,r,o){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r,o){var a=e.handleNewSession;d("establishOutgoingSession");var i=yield p(t,r);if(!i.success)return i;var l=i.value;return a(n,l,l.remote.pubKey,null,o)}),g.apply(this,arguments)}function h(e,t,r,a){var i=e.handleNewSession,l=e.loadSession;return d("encryptContent"),s.lock([o("WAJids").extractUserJid(t)],n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=null;do{var n=yield l(t,"cryptoLibraryEncryptContent");if(n==null)return d("encryptContent: errSignalInvalidKey"),o("WAResultOrError").makeError("errSignalInvalidKey");if(a!=null&&!o("WACryptoUtils").uint8ArraysEqual(a,n.remote.pubKey))return d("encryptContent: identity-mismatch"),o("WAResultOrError").makeError("identity-mismatch");var s=yield o("WASignalCipher").encryptMsg(n,r),u=s[0],c=s[1],m=yield i(t,u,u.remote.pubKey);m.success?e=o("WAResultOrError").makeResult(babelHelpers.extends({},c,{baseKey:u.aliceBaseKey})):m.error}while(e==null);return e}))}function y(e,t,r,a,i){var l=e.handleNewSession,u=e.loadOneTimePreKey,c=e.loadSession,m=e.loadSignedPreKey;return d("decryptContent"),s.lock([o("WAJids").extractUserJid(r)],n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=!1,n=yield c(r,"decryptContent"),s;if(a.type==="pkmsg"){var p=o("WASignalCipher").deserializePkMsg(a.ciphertext);if(!p.success)return d("decryptContent: errCryptoDeserialization"),o("WAResultOrError").makeError("errCryptoDeserialization");var _=p.value,f=yield C({loadSignedPreKey:m,loadOneTimePreKey:u},t,_,n);if(!f.success)return f;s=f.value}else{a.type;var g=o("WASignalCipher").deserializeMsg(a.ciphertext);if(!g.success)return d("decryptContent: errCryptoDeserialization"),o("WAResultOrError").makeError("errCryptoDeserialization");var h=g.value,y=yield o("WASignalCipher").decryptMsg(n,h);if(!y.success)return y;s=y.value}var b=s,v=b.newSessionInfo;if(v&&(v.newIdentity!=null||v.usedPreKey!=null)&&(yield l(r,v.baseSession,v.newIdentity,v.usedPreKey)),!e){var S=v==null?void 0:v.baseSession.remote.pubKey;yield i(new Uint8Array(s.plaintext),S),e=!0}return yield l(r,s.updatedSession,s.updatedSession.remote.pubKey),o("WAResultOrError").makeResult()}))}function C(e,t,n,r){return b.apply(this,arguments)}function b(){return b=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r){var a=e.loadOneTimePreKey,i=e.loadSignedPreKey;d("decryptPkMsg");var l=o("WASignalCipher").findMatchingSession(r,n.sessionBaseKey);if(!l.success)return l;var s=l.value;if(s){var u=yield o("WASignalCipher").decryptMsgFromSession(s,n);if(!u.success)return u;var c=u.value,m=c[0],p=c[1];return o("WAResultOrError").makeResult({newSessionInfo:null,updatedSession:m,plaintext:p})}else{var _=n.localOneTimeKeyId,f=yield i(n.localSignedPreKeyId),g=_==null?null:yield a(_),h=yield o("WASignalCipher").decryptPkMsgWithNewSession(t,r,n,{localSignedPreKey:f,localOneTimeKey:g});if(!h.success)return h;var y=h.value,C=y.baseSession,b=y.newIdentity,v=y.plaintext,S=y.updatedSession;return o("WAResultOrError").makeResult({newSessionInfo:{newIdentity:b,baseSession:C,usedPreKey:_},updatedSession:S,plaintext:v})}}),b.apply(this,arguments)}function v(e,t,r,a){var i=e.loadSenderKeySession,l=e.saveSenderKeySession;return d("encryptGroupContent"),s.lock([t,o("WAJids").extractUserJid(r)],n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=null;do{var n=yield i(t,r);if(!n.success)return o("WAResultOrError").makeError(n.error);var s=n.value,u=yield o("WASignalGroupCipher").encryptSenderKeyMsgWithSession(s,a);if(u.success){var c=u.value,m=c[0],p=c[1];yield l(t,r,m);var _=s.senderKeyStates[s.senderKeyStates.length-1];e=o("WAResultOrError").makeResult({ciphertext:{ciphertext:p,type:"skmsg"},senderKeyId:_.senderKeyId,senderKeyDistributionProto:o("WASignalGroupCipher").createSenderKeyDistributionProto(o("WASignalGroupSession").convertFromRawToSenderKeyState(_))})}else return d("encryptGroupContent: sender-key-no-session"),o("WAResultOrError").makeError("sender-key-no-session")}while(e==null);return e}))}function S(t,r,a,i,l){var u=t.loadSenderKeySession,c=t.saveSenderKeySession;return d("decryptGroupContent"),s.lock([r,o("WAJids").extractUserJid(a)],n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=!1,n=yield u(r,a);if(!n.success)return o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[WACryptoLibrary] Unable to load sender key session for group during decryptGroupContent: ",", author: ",""])),r,a),o("WAResultOrError").makeError(n.error);var s=o("WASignalGroupCipher").deserializeSenderKeyMsg(i);if(!s.success)return d("decryptGroupContent: errCryptoDeserialization"),o("WAResultOrError").makeError("errCryptoDeserialization");var m=n.value,p=yield o("WASignalGroupCipher").decryptSenderKeyMsgFromSession(m,s.value);if(!p.success)return p;var _=p.value,f=_[0],g=_[1];return t||(yield l(new Uint8Array(g)),t=!0),yield c(r,a,f),o("WAResultOrError").makeResult()}))}function R(e,t,r,a){var i=e.loadSenderKeySession,l=e.saveSenderKeySession;return d("saveSenderKeySession"),s.lock([t,o("WAJids").extractUserJid(r)],n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=null;if(i){var n=yield i(t,r);e=n.success?n.value:null}var s=yield o("WASignalGroupCipher").processSenderKeyDistributionMsg(a,e);if(!s.success)return s;var u=s.value;return yield l(t,r,u),o("WAResultOrError").makeResult()}))}function L(e,t,r,a){var i=e.saveSenderKeySession;return d("rotateGroupSenderKey"),s.lock([t,o("WAJids").extractUserJid(r)],n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield o("WASignalWhitepaper").initiateSenderKeySessionOutgoing(a),n=e.senderKeyStates[0].senderKeyId;return yield i(t,r,e),{senderKeyId:n}}))}function E(e,t,n){return k.apply(this,arguments)}function k(){return k=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=e.loadSenderKeySession,a=e.saveSenderKeySession;d("createSenderKeyDistributionMsg");var i=yield r(t,n),l=i.error;if(!i.success&&l==="errLoadSenderKeySession"){var s=yield o("WASignalKeys").makeKeyPair();yield L({saveSenderKeySession:a},t,n,s),i=yield r(t,n)}if(i.success){var u=i.value.senderKeyStates.slice(-1);if(u.length>0)return o("WAResultOrError").makeResult(o("WASignalGroupCipher").createSenderKeyDistributionProto(o("WASignalGroupSession").convertFromRawToSenderKeyState(u[0])))}return d("createSenderKeyDistributionMsg: errGetSenderKeyProto"),o("WAResultOrError").makeError("errGetSenderKeyProto")}),k.apply(this,arguments)}function I(e){var t=e.identity,n=e.oneTimeKey,r=e.regId,a=e.signedKey;d("sanitizeInitialSessionInfo");var i=o("WASignalKeys").castToSerializedPubKey(a.publicKey);return{regId:o("WASignalOther").castRegistrationId(r),identity:o("WASignalKeys").castToSerializedPubKey(t),signedKey:{id:o("WASignalKeys").castToSignedPreKeyId(a.id),publicKey:i,signature:o("WASignalOther").ensureSize(a.signature,64)},oneTimeKey:n&&{id:o("WASignalKeys").castToPreKeyId(n.id),publicKey:o("WASignalKeys").castToSerializedPubKey(n.publicKey)},ratchetKey:i}}l.publishLogs=m,l.createOutgoingSession=p,l.establishOutgoingSession=f,l.encryptContent=h,l.decryptContent=y,l.encryptGroupContent=v,l.decryptGroupContent=S,l.saveSenderKeySession=R,l.rotateGroupSenderKey=L,l.createSenderKeyDistributionMsg=E}),98);
__d("WACryptoPkcs7",["WACryptoDependencies","err"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=new Uint8Array(1);do o("WACryptoDependencies").getCrypto().getRandomValues(t);while(t[0]===0);u(e,t[0])}function s(e){var t=new Uint8Array(1);o("WACryptoDependencies").getCrypto().getRandomValues(t),u(e,(t[0]&15)+1)}function u(e,t){for(var n=0;n<t;n++)e.writeUint8(t)}function c(e){if(e.length===0)throw r("err")("unpadPkcs7 given empty bytes");var t=e[e.length-1];if(t>e.length)throw r("err")("unpadPkcs7 given "+e.length+" bytes, but pad is "+t);return new Uint8Array(e.buffer,e.byteOffset,e.length-t)}l.writeRandomPad=e,l.writeRandomPadMax16=s,l.writePad=u,l.unpadPkcs7=c}),98);
__d("WACryptoSha256",["WABase64","WACryptoDependencies"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("WACryptoDependencies").getCrypto().subtle.digest({name:"SHA-256"},e)}function s(t){return e(t).then(o("WABase64").encodeB64)}function u(e){return s(c(e))}function c(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0,o=e.length;r<o;r++)n[r]=e.charCodeAt(r);return t}l.sha256=e,l.sha256Base64=s,l.sha256Str=u}),98);
__d("WADynamicRouterAsync",["Promise","WALogger","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u={sentinel:"RESPONSE_NAMESPACE"},c={sentinel:"NOT_HANDLED"},d=(function(){function t(){var e=this;this.$2=(s||(s=n("Promise"))).resolve(),this.$3=new Map,this.$5=0,this.$6=null,this.$7=null,this.$8=null,this.fireAndForget=function(t,n,r,o){o===void 0&&(o=!1),e.$4==null||e.$4(t,n,r),e.$10(t,n,r,null,o)},this.sendAndReceive=function(t,r,o,a){return a===void 0&&(a=!1),e.$4==null||e.$4(t,r,o),new(s||(s=n("Promise")))(function(n,i){var l=null;e.$10(t,r,o,function(t){try{var r=_(t);r?l=r.call(t,function(t){e.$10(u,"",t,n,a)},function(t){e.$10(u,"",t,i,!1)}):e.$10(u,"",t,n,a)}catch(t){e.$10(u,"",t,i,!1)}},a)})},this.$9=function(){var t=e.$7;if(t){for(var n=e.$3,r;t&&!(r=m(n,t));)e.$7=t=t.nextRoute;if(!(!t||!r)){var o=e.$11(r,t),a=!0;if(o!==c){var i=t.prevRoute,l=t.nextRoute;e.$7===t&&(e.$7=l),i?i.nextRoute=l:e.$6=l,l?l.prevRoute=i:(a=!1,e.$8=i)}return a&&e.$2.then(e.$9).finally(function(){}),o}}}}var a=t.prototype;return a.setAckPayload=function(t){this.$1=t},a.getAckPayoad=function(){return this.$1},a.hasHandlerForNamespace=function(t){return this.$3.has(t)},a.getHandledNamespaces=function(){return Array.from(this.$3.keys())},a.setOnRouteCalled=function(t){this.$4=t},a.setNamespaceHandler=function(t,n){var e=this.$3,r=e.get(t);if(r!==n&&(++this.$5,e.set(t,n),!r)){var o=this.$6;o&&(this.$7||this.$2.then(this.$9).finally(function(){}),this.$7=o)}},a.setHandlers=function(n,a){function t(t,i,l){if(a[t]==null)throw o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose([""," is not defined for ",""])),t,n),r("err")(t+" is not defined for "+n);var s=a[t](i);l&&l(s)}this.setNamespaceHandler(n,t)},a.$10=function(t,n,r,o,a){var e=this.$8,i={namespace:t,route:n,arg:r,resolver:o,prevRoute:e,nextRoute:null,silentLog:a};this.$8=i;var l=!0;e?(e.nextRoute=i,l=!this.$7):this.$6=i,l&&m(this.$3,i)&&(this.$7=i,this.$2.then(this.$9).finally(function(){}))},a.$11=function(t,o){var e=o.arg,a=o.resolver,i=o.route,l=o.silentLog,u=this.$5,d=null,m=null;try{d=t(i,e,a,l)}catch(e){m=(s||(s=n("Promise"))).reject(e)}if(d===c)if(u===this.$5)m=(s||(s=n("Promise"))).reject(r("err")("DynamicRouter: NOT_HANDLED can only be used when updating handlers"));else return c;if(a){m&&a(m);return}else return m},t})();function m(e,t){var n=t.namespace;return n===u?p:e.get(n)}function p(e,t,n){n(t)}function _(e){if(e!=null&&(typeof e=="object"||typeof e=="function")){var t=e.then;return typeof t=="function"?t:null}return null}l.NOT_HANDLED=c,l.DynamicRouter=d}),98);
__d("WAFrameSocket",["WABinary","WAErrors","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=(function(e){function t(t){var n,r="SocketClosed";return n=e.call(this,t!=null?t:r)||this,n.name=r,n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.toString=function(){return this.name},t})(babelHelpers.wrapNativeSuper(Error)),m=(function(){function t(t,n){var r=this;this.$3=new(o("WABinary")).Binary,this.closed=!1,this.$4=!1,this.onFrame=null,this.onClose=null,this.$5=function(e){r.$3.writeByteArray(e),r.convertBufferedToFrames()},this.$6=function(){if(r.$3.peek(p)){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["FrameSocket closed, waiting for pending processing"]))),r.$4=!0;return}r.$9()},this.$7=function(e){},this.$2=n,this.$1=t,t.onData=this.$5,t.onClose=this.$6,t.onError=this.$7}var n=t.prototype;return n.sendFrame=function(t){if(!this.$4){this.throwIfClosed();var e=this.$2,n=t.byteLength;this.$8(n);var r=this.$1.dataToSend;e?(this.$2=null,r.ensureAdditionalCapacity(e.length+3+n),r.writeByteArray(e)):r.ensureAdditionalCapacity(3+n),r.writeUint8(n>>16),r.writeUint16(n&65535),r.write(t),this.$1.requestSend()}},n.$9=function(){if(!this.closed){o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["FrameSocket closed"]))),this.$4=!1,this.closed=!0;var e=this.onClose;e&&e()}},n.$8=function(t){if(t>=1<<24)throw o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Buffer to send: ",""])),t),new(o("WAErrors")).BufferTooLargeError("Buffer too large: "+t)},n.convertBufferedToFrames=function(){for(var e=this.$3,t=this.onFrame;t&&e.peek(p);){var n=_(e),r=e.readByteArrayView(n);t(r),t=this.onFrame}this.$4&&!e.peek(p)&&this.$9(),t&&e.size()&&o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["FrameSocket: queueing partial frame of "," bytes"])),e.size())},n.throwIfClosed=function(){if(this.closed)throw new d},n.close=function(){this.$1.close()},t})();function p(e){if(e.size()<3)return!1;var t=_(e);return t<=e.size()}function _(e){return e.readUint8()<<16|e.readUint16()}l.SocketClosed=d,l.FrameSocket=m}),98);
__d("WASmaxInAbPropsIQErrorResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseReference").attrStringFromReference(t,["id"]);if(!r.success)return r;var a=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"id",r.value);if(!a.success)return a;var i=o("WASmaxParseReference").attrStringFromReference(t,["to"]);if(!i.success)return i;var l=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"from",i.value);if(!l.success)return l;var s=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"type","error");return s.success?o("WAResultOrError").makeResult({type:s.value}):s}l.parseIQErrorResponseMixin=e}),98);
__d("WASmaxInAbPropsIQErrorBadRequestMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","bad-request");if(!n.success)return n;var r=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,e,"code",400);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorBadRequestMixin=e}),98);
__d("WASmaxInAbPropsIQErrorFeatureNotImplementedMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","feature-not-implemented");if(!n.success)return n;var r=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,e,"code",501);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorFeatureNotImplementedMixin=e}),98);
__d("WASmaxInAbPropsNoRetryErrors",["WAResultOrError","WASmaxInAbPropsIQErrorBadRequestMixin","WASmaxInAbPropsIQErrorFeatureNotImplementedMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxInAbPropsIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(e);if(t.success)return o("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:t.value});var n=o("WASmaxInAbPropsIQErrorFeatureNotImplementedMixin").parseIQErrorFeatureNotImplementedMixin(e);return n.success?o("WAResultOrError").makeResult({name:"IQErrorFeatureNotImplemented",value:n.value}):o("WASmaxParseUtils").errorMixinDisjunction(e,["IQErrorBadRequest","IQErrorFeatureNotImplemented"],[t,n])}l.parseNoRetryErrors=e}),98);
__d("WASmaxInAbPropsGetExperimentConfigResponseErrorNoRetry",["WAResultOrError","WASmaxInAbPropsIQErrorResponseMixin","WASmaxInAbPropsNoRetryErrors","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"error");if(!r.success)return r;var a=o("WASmaxInAbPropsIQErrorResponseMixin").parseIQErrorResponseMixin(e,t);if(!a.success)return a;var i=o("WASmaxInAbPropsNoRetryErrors").parseNoRetryErrors(r.value);return i.success?o("WAResultOrError").makeResult(babelHelpers.extends({},a.value,{errorNoRetryErrors:i.value})):i}l.parseGetExperimentConfigResponseErrorNoRetry=e}),98);
__d("WASmaxInAbPropsIQErrorInternalServerErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","internal-server-error");if(!n.success)return n;var r=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,e,"code",500);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorInternalServerErrorMixin=e}),98);
__d("WASmaxInAbPropsGetExperimentConfigResponseErrorRetry",["WAResultOrError","WASmaxInAbPropsIQErrorInternalServerErrorMixin","WASmaxInAbPropsIQErrorResponseMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"error");if(!r.success)return r;var a=o("WASmaxInAbPropsIQErrorInternalServerErrorMixin").parseIQErrorInternalServerErrorMixin(r.value);if(!a.success)return a;var i=o("WASmaxInAbPropsIQErrorResponseMixin").parseIQErrorResponseMixin(e,t);return i.success?o("WAResultOrError").makeResult(babelHelpers.extends({errorIQErrorInternalServerErrorMixin:a.value},i.value)):i}l.parseGetExperimentConfigResponseErrorRetry=e}),98);
__d("WASmaxInAbPropsExperimentConfigMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"prop");if(!t.success)return t;var n=o("WASmaxParseUtils").attrIntRange(e,"config_code",1,void 0);if(!n.success)return n;var r=o("WASmaxParseUtils").attrString(e,"config_value");if(!r.success)return r;var a=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrIntRange,e,"config_expo_key",0,void 0);return a.success?o("WAResultOrError").makeResult({configCode:n.value,configValue:r.value,configExpoKey:a.value}):a}l.parseExperimentConfigMixin=e}),98);
__d("WASmaxInAbPropsSamplingConfigMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"prop");if(!t.success)return t;var n=o("WASmaxParseUtils").attrIntRange(e,"event_code",1,void 0);if(!n.success)return n;var r=o("WASmaxParseUtils").attrIntRange(e,"sampling_weight",-1e4,1e4);return r.success?o("WAResultOrError").makeResult({eventCode:n.value,samplingWeight:r.value}):r}l.parseSamplingConfigMixin=e}),98);
__d("WASmaxInAbPropsConfigs",["WAResultOrError","WASmaxInAbPropsExperimentConfigMixin","WASmaxInAbPropsSamplingConfigMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxInAbPropsExperimentConfigMixin").parseExperimentConfigMixin(e);if(t.success)return o("WAResultOrError").makeResult({name:"ExperimentConfig",value:t.value});var n=o("WASmaxInAbPropsSamplingConfigMixin").parseSamplingConfigMixin(e);return n.success?o("WAResultOrError").makeResult({name:"SamplingConfig",value:n.value}):o("WASmaxParseUtils").errorMixinDisjunction(e,["ExperimentConfig","SamplingConfig"],[t,n])}l.parseConfigs=e}),98);
__d("WASmaxInAbPropsEnums",[],(function(t,n,r,o,a,i){var e={false:"false",true:"true"};i.ENUM_FALSE_TRUE=e}),66);
__d("WASmaxInAbPropsIQResultResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseReference").attrStringFromReference(t,["id"]);if(!r.success)return r;var a=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"id",r.value);if(!a.success)return a;var i=o("WASmaxParseReference").attrStringFromReference(t,["to"]);if(!i.success)return i;var l=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"from",i.value);if(!l.success)return l;var s=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"type","result");return s.success?o("WAResultOrError").makeResult({type:s.value}):s}l.parseIQResultResponseMixin=e}),98);
__d("WASmaxInAbPropsGetExperimentConfigResponseSuccess",["WAResultOrError","WASmaxInAbPropsConfigs","WASmaxInAbPropsEnums","WASmaxInAbPropsIQResultResponseMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"prop");if(!t.success)return t;var n=o("WASmaxInAbPropsConfigs").parseConfigs(e);return n.success?o("WAResultOrError").makeResult({configs:n.value}):n}function s(e){var t=o("WASmaxParseUtils").assertTag(e,"erid");if(!t.success)return t;var n=o("WASmaxParseUtils").contentBytesRange(e,1,100);return n.success?o("WAResultOrError").makeResult({elementValue:n.value}):n}function u(t,n){var r=o("WASmaxParseUtils").assertTag(t,"iq");if(!r.success)return r;var a=o("WASmaxParseUtils").flattenedChildWithTag(t,"props");if(!a.success)return a;var i=o("WASmaxParseUtils").optionalChildWithTag(t,"erid",s);if(!i.success)return i;var l=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,a.value,"protocol","1");if(!l.success)return l;var u=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrString,a.value,"ab_key");if(!u.success)return u;var c=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrString,a.value,"hash");if(!c.success)return c;var d=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrIntRange,a.value,"refresh",0,void 0);if(!d.success)return d;var m=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrIntRange,a.value,"refresh_id",0,void 0);if(!m.success)return m;var p=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrStringEnum,a.value,"delta_update",o("WASmaxInAbPropsEnums").ENUM_FALSE_TRUE);if(!p.success)return p;var _=o("WASmaxInAbPropsIQResultResponseMixin").parseIQResultResponseMixin(t,n);if(!_.success)return _;var f=o("WASmaxParseUtils").mapChildrenWithTag(a.value,"prop",0,1/0,e);return f.success?o("WAResultOrError").makeResult(babelHelpers.extends({propsProtocol:l.value,propsAbKey:u.value,propsHash:c.value,propsRefresh:d.value,propsRefreshId:m.value,propsDeltaUpdate:p.value},_.value,{erid:i.value,propsProp:f.value})):f}l.parseGetExperimentConfigResponseSuccessPropsProp=e,l.parseGetExperimentConfigResponseSuccessErid=s,l.parseGetExperimentConfigResponseSuccess=u}),98);
__d("WASmaxOutAbPropsBaseIQGetRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("iq",{id:o("WAWap").generateId(),type:"get"});return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeBaseIQGetRequestMixin=s}),98);
__d("WASmaxOutAbPropsGetExperimentConfigRequest",["WASmaxAttrs","WASmaxJsx","WASmaxOutAbPropsBaseIQGetRequestMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.propsHash,n=e.propsRefreshId,r=o("WASmaxOutAbPropsBaseIQGetRequestMixin").mergeBaseIQGetRequestMixin(o("WASmaxJsx").smax("iq",{xmlns:"abt",to:o("WAWap").S_WHATSAPP_NET},o("WASmaxJsx").smax("props",{protocol:"1",hash:o("WASmaxAttrs").OPTIONAL(o("WAWap").CUSTOM_STRING,t),refresh_id:o("WASmaxAttrs").OPTIONAL(o("WAWap").INT,n)})));return r}l.makeGetExperimentConfigRequest=e}),98);
__d("WASmaxAbPropsGetExperimentConfigRPC",["WAComms","WASmaxInAbPropsGetExperimentConfigResponseErrorNoRetry","WASmaxInAbPropsGetExperimentConfigResponseErrorRetry","WASmaxInAbPropsGetExperimentConfigResponseSuccess","WASmaxOutAbPropsGetExperimentConfigRequest","WASmaxParsingFailure","WASmaxRpcUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){function e(e,t){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=o("WASmaxOutAbPropsGetExperimentConfigRequest").makeGetExperimentConfigRequest(e),r=yield o("WAComms").sendSmaxStanza(n,t),a=o("WASmaxInAbPropsGetExperimentConfigResponseSuccess").parseGetExperimentConfigResponseSuccess(r,n);if(a.success)return{name:"GetExperimentConfigResponseSuccess",value:a.value};var i=o("WASmaxInAbPropsGetExperimentConfigResponseErrorNoRetry").parseGetExperimentConfigResponseErrorNoRetry(r,n);if(i.success)return{name:"GetExperimentConfigResponseErrorNoRetry",value:i.value};var l=o("WASmaxInAbPropsGetExperimentConfigResponseErrorRetry").parseGetExperimentConfigResponseErrorRetry(r,n);if(l.success)return{name:"GetExperimentConfigResponseErrorRetry",value:l.value};throw new(o("WASmaxParsingFailure")).SmaxParsingFailure(o("WASmaxRpcUtils").errorMessageRpcParsing("GetExperimentConfig",{Success:a,ErrorNoRetry:i,ErrorRetry:l}))}),s.apply(this,arguments)}l.sendGetExperimentConfigRPC=e}),98);
__d("WAGetAbPropsProtocol",["WALogger","WAResultOrError","WASmaxAbPropsGetExperimentConfigRPC","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=yield o("WASmaxAbPropsGetExperimentConfigRPC").sendGetExperimentConfigRPC(t);if(n.name==="GetExperimentConfigResponseSuccess"){var r=n.value,a=r.erid,i=r.propsAbKey,l=r.propsDeltaUpdate,s=r.propsHash,u=r.propsProp,d=r.propsRefresh,m=r.propsRefreshId,p=c(u),_=p.newProps,f=p.samplingConfigs;return o("WAResultOrError").makeResult({abKey:i,hash:s,refresh:d,refreshId:m,props:_,samplingConfigs:f,erid:a==null?void 0:a.elementValue,isDeltaUpdate:l==="true"})}return o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["getAbPropsProtocol failed ",""])),n.value),o("WAResultOrError").makeError()}),u.apply(this,arguments)}function c(e){var t=[],n=[];return e.forEach(function(e){var r=e.configs;if(r.name==="ExperimentConfig"){var o;t.push({configCode:r.value.configCode,configValue:r.value.configValue,configExpoKey:(o=r.value.configExpoKey)==null?void 0:o.toString()})}else r.name==="SamplingConfig"&&n.push({eventCode:r.value.eventCode,samplingWeight:r.value.samplingWeight})}),{newProps:t,samplingConfigs:n}}l.getAbPropsProtocol=s}),98);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("fflate-0.6.10",[],(function(t,n,r,o,a,i){"use strict";var e={},l={exports:e};function s(){var t,n="";try{t={}.Worker}catch(e){}e.default=t?function(e,r,o,a,i){var l=!1,s=new t(e+n,{eval:!0}).on("error",function(e){return i(e,null)}).on("message",function(e){return i(null,e)}).on("exit",function(e){e&&!l&&i(new Error("exited with code "+e),null)});return s.postMessage(o,a),s.terminate=function(){return l=!0,t.prototype.terminate.call(s)},s}:function(e,t,n,r,o){setImmediate(function(){return o(new Error("async operations unsupported - update to Node 12+ (or Node 10-11 with the --experimental-worker CLI flag)"),null)});var a=function(){};return{terminate:a,postMessage:a}}}var u=!1;function c(){return u||(u=!0,s()),l.exports}var d={},m={exports:d};function p(){var e=c(),t=Uint8Array,n=Uint16Array,r=Uint32Array,o=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),a=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),i=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),l=function(e,t){for(var o=new n(31),a=0;a<31;++a)o[a]=t+=1<<e[a-1];for(var i=new r(o[30]),a=1;a<30;++a)for(var l=o[a];l<o[a+1];++l)i[l]=l-o[a]<<5|a;return[o,i]},s=l(o,2),u=s[0],m=s[1];u[28]=258,m[258]=28;for(var p=l(a,0),_=p[0],f=p[1],g=new n(32768),h=0;h<32768;++h){var y=(h&43690)>>>1|(h&21845)<<1;y=(y&52428)>>>2|(y&13107)<<2,y=(y&61680)>>>4|(y&3855)<<4,g[h]=((y&65280)>>>8|(y&255)<<8)>>>1}for(var C=(function(e,t,r){for(var o=e.length,a=0,i=new n(t);a<o;++a)++i[e[a]-1];var l=new n(t);for(a=0;a<t;++a)l[a]=l[a-1]+i[a-1]<<1;var s;if(r){s=new n(1<<t);var u=15-t;for(a=0;a<o;++a)if(e[a])for(var c=a<<4|e[a],d=t-e[a],m=l[e[a]-1]++<<d,p=m|(1<<d)-1;m<=p;++m)s[g[m]>>>u]=c}else for(s=new n(o),a=0;a<o;++a)e[a]&&(s[a]=g[l[e[a]-1]++]>>>15-e[a]);return s}),b=new t(288),h=0;h<144;++h)b[h]=8;for(var h=144;h<256;++h)b[h]=9;for(var h=256;h<280;++h)b[h]=7;for(var h=280;h<288;++h)b[h]=8;for(var v=new t(32),h=0;h<32;++h)v[h]=5;var S=C(b,9,0),R=C(b,9,1),L=C(v,5,0),E=C(v,5,1),k=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},I=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(t&7)&n},T=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},D=function(e){return(e/8|0)+(e&7&&1)},x=function(e,o,a){(o==null||o<0)&&(o=0),(a==null||a>e.length)&&(a=e.length);var i=new(e instanceof n?n:e instanceof r?r:t)(a-o);return i.set(e.subarray(o,a)),i},$=function(e,n,r){var l=e.length;if(!l||r&&!r.l&&l<5)return n||new t(0);var s=!n||r,c=!r||r.i;r||(r={}),n||(n=new t(l*3));var d=function(e){var r=n.length;if(e>r){var o=new t(Math.max(r*2,e));o.set(n),n=o}},m=r.f||0,p=r.p||0,f=r.b||0,g=r.l,h=r.d,y=r.m,b=r.n,v=l*8;do{if(!g){r.f=m=I(e,p,1);var S=I(e,p+1,3);if(p+=3,S)if(S==1)g=R,h=E,y=9,b=5;else if(S==2){var N=I(e,p,31)+257,M=I(e,p+10,15)+4,w=N+I(e,p+5,31)+1;p+=14;for(var A=new t(w),F=new t(19),O=0;O<M;++O)F[i[O]]=I(e,p+O*3,7);p+=M*3;for(var B=k(F),W=(1<<B)-1,q=C(F,B,1),O=0;O<w;){var U=q[I(e,p,W)];p+=U&15;var L=U>>>4;if(L<16)A[O++]=L;else{var V=0,H=0;for(L==16?(H=3+I(e,p,3),p+=2,V=A[O-1]):L==17?(H=3+I(e,p,7),p+=3):L==18&&(H=11+I(e,p,127),p+=7);H--;)A[O++]=V}}var G=A.subarray(0,N),z=A.subarray(N);y=k(G),b=k(z),g=C(G,y,1),h=C(z,b,1)}else throw"invalid block type";else{var L=D(p)+4,$=e[L-4]|e[L-3]<<8,P=L+$;if(P>l){if(c)throw"unexpected EOF";break}s&&d(f+$),n.set(e.subarray(L,P),f),r.b=f+=$,r.p=p=P*8;continue}if(p>v){if(c)throw"unexpected EOF";break}}s&&d(f+131072);for(var j=(1<<y)-1,K=(1<<b)-1,Q=p;;Q=p){var V=g[T(e,p)&j],X=V>>>4;if(p+=V&15,p>v){if(c)throw"unexpected EOF";break}if(!V)throw"invalid length/literal";if(X<256)n[f++]=X;else if(X==256){Q=p,g=null;break}else{var Y=X-254;if(X>264){var O=X-257,J=o[O];Y=I(e,p,(1<<J)-1)+u[O],p+=J}var Z=h[T(e,p)&K],ee=Z>>>4;if(!Z)throw"invalid distance";p+=Z&15;var z=_[ee];if(ee>3){var J=a[ee];z+=T(e,p)&(1<<J)-1,p+=J}if(p>v){if(c)throw"unexpected EOF";break}s&&d(f+131072);for(var te=f+Y;f<te;f+=4)n[f]=n[f-z],n[f+1]=n[f+1-z],n[f+2]=n[f+2-z],n[f+3]=n[f+3-z];f=te}}r.l=g,r.p=Q,r.b=f,g&&(m=1,r.m=y,r.d=h,r.n=b)}while(!m);return f==n.length?n:x(n,0,f)},P=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8},N=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},M=function(e,r){for(var o=[],a=0;a<e.length;++a)e[a]&&o.push({s:a,f:e[a]});var i=o.length,l=o.slice();if(!i)return[q,0];if(i==1){var s=new t(o[0].s+1);return s[o[0].s]=1,[s,1]}o.sort(function(e,t){return e.f-t.f}),o.push({s:-1,f:25001});var u=o[0],c=o[1],d=0,m=1,p=2;for(o[0]={s:-1,f:u.f+c.f,l:u,r:c};m!=i-1;)u=o[o[d].f<o[p].f?d++:p++],c=o[d!=m&&o[d].f<o[p].f?d++:p++],o[m++]={s:-1,f:u.f+c.f,l:u,r:c};for(var _=l[0].s,a=1;a<i;++a)l[a].s>_&&(_=l[a].s);var f=new n(_+1),g=w(o[m-1],f,0);if(g>r){var a=0,h=0,y=g-r,C=1<<y;for(l.sort(function(e,t){return f[t.s]-f[e.s]||e.f-t.f});a<i;++a){var b=l[a].s;if(f[b]>r)h+=C-(1<<g-f[b]),f[b]=r;else break}for(h>>>=y;h>0;){var v=l[a].s;f[v]<r?h-=1<<r-f[v]++-1:++a}for(;a>=0&&h;--a){var S=l[a].s;f[S]==r&&(--f[S],++h)}g=r}return[new t(f),g]},w=function(e,t,n){return e.s==-1?Math.max(w(e.l,t,n+1),w(e.r,t,n+1)):t[e.s]=n},A=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new n(++t),o=0,a=e[0],i=1,l=function(e){r[o++]=e},s=1;s<=t;++s)if(e[s]==a&&s!=t)++i;else{if(!a&&i>2){for(;i>138;i-=138)l(32754);i>2&&(l(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(l(a),--i;i>6;i-=6)l(8304);i>2&&(l(i-3<<5|8208),i=0)}for(;i--;)l(a);i=1,a=e[s]}return[r.subarray(0,o),t]},F=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},O=function(e,t,n){var r=n.length,o=D(t+2);e[o]=r&255,e[o+1]=r>>>8,e[o+2]=e[o]^255,e[o+3]=e[o+1]^255;for(var a=0;a<r;++a)e[o+a+4]=n[a];return(o+4+r)*8},B=function(e,t,r,l,s,u,c,d,m,p,_){P(t,_++,r),++s[256];for(var f=M(s,15),g=f[0],h=f[1],y=M(u,15),R=y[0],E=y[1],k=A(g),I=k[0],T=k[1],D=A(R),x=D[0],$=D[1],w=new n(19),B=0;B<I.length;++B)w[I[B]&31]++;for(var B=0;B<x.length;++B)w[x[B]&31]++;for(var W=M(w,7),q=W[0],U=W[1],V=19;V>4&&!q[i[V-1]];--V);var H=p+5<<3,G=F(s,b)+F(u,v)+c,z=F(s,g)+F(u,R)+c+14+3*V+F(w,q)+(2*w[16]+3*w[17]+7*w[18]);if(H<=G&&H<=z)return O(t,_,e.subarray(m,m+p));var j,K,Q,X;if(P(t,_,1+(z<G)),_+=2,z<G){j=C(g,h,0),K=g,Q=C(R,E,0),X=R;var Y=C(q,U,0);P(t,_,T-257),P(t,_+5,$-1),P(t,_+10,V-4),_+=14;for(var B=0;B<V;++B)P(t,_+3*B,q[i[B]]);_+=3*V;for(var J=[I,x],Z=0;Z<2;++Z)for(var ee=J[Z],B=0;B<ee.length;++B){var te=ee[B]&31;P(t,_,Y[te]),_+=q[te],te>15&&(P(t,_,ee[B]>>>5&127),_+=ee[B]>>>12)}}else j=S,K=b,Q=L,X=v;for(var B=0;B<d;++B)if(l[B]>255){var te=l[B]>>>18&31;N(t,_,j[te+257]),_+=K[te+257],te>7&&(P(t,_,l[B]>>>23&31),_+=o[te]);var ne=l[B]&31;N(t,_,Q[ne]),_+=X[ne],ne>3&&(N(t,_,l[B]>>>5&8191),_+=a[ne])}else N(t,_,j[l[B]]),_+=K[l[B]];return N(t,_,j[256]),_+K[256]},W=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),q=new t(0),U=function(e,i,l,s,u,c){var d=e.length,p=new t(s+d+5*(1+Math.ceil(d/7e3))+u),_=p.subarray(s,p.length-u),g=0;if(!i||d<8)for(var h=0;h<=d;h+=65535){var y=h+65535;y<d?g=O(_,g,e.subarray(h,y)):(_[h]=c,g=O(_,g,e.subarray(h,d)))}else{for(var C=W[i-1],b=C>>>13,v=C&8191,S=(1<<l)-1,R=new n(32768),L=new n(S+1),E=Math.ceil(l/3),k=2*E,I=function(t){return(e[t]^e[t+1]<<E^e[t+2]<<k)&S},T=new r(25e3),$=new n(288),P=new n(32),N=0,M=0,h=0,w=0,A=0,F=0;h<d;++h){var U=I(h),V=h&32767,H=L[U];if(R[V]=H,L[U]=V,A<=h){var G=d-h;if((N>7e3||w>24576)&&G>423){g=B(e,_,0,T,$,P,M,w,F,h-F,g),w=N=M=0,F=h;for(var z=0;z<286;++z)$[z]=0;for(var z=0;z<30;++z)P[z]=0}var j=2,K=0,Q=v,X=V-H&32767;if(G>2&&U==I(h-X))for(var Y=Math.min(b,G)-1,J=Math.min(32767,h),Z=Math.min(258,G);X<=J&&--Q&&V!=H;){if(e[h+j]==e[h+j-X]){for(var ee=0;ee<Z&&e[h+ee]==e[h+ee-X];++ee);if(ee>j){if(j=ee,K=X,ee>Y)break;for(var te=Math.min(X,ee-2),ne=0,z=0;z<te;++z){var re=h-X+z+32768&32767,oe=R[re],ae=re-oe+32768&32767;ae>ne&&(ne=ae,H=re)}}}V=H,H=R[V],X+=V-H+32768&32767}if(K){T[w++]=268435456|m[j]<<18|f[K];var ie=m[j]&31,le=f[K]&31;M+=o[ie]+a[le],++$[257+ie],++P[le],A=h+j,++N}else T[w++]=e[h],++$[e[h]]}}g=B(e,_,c,T,$,P,M,w,F,h-F,g),!c&&g&7&&(g=O(_,g+1,q))}return x(p,0,s+D(g)+u)},V=(function(){for(var e=new Int32Array(256),t=0;t<256;++t){for(var n=t,r=9;--r;)n=(n&1&&-306674912)^n>>>1;e[t]=n}return e})(),H=function(){var e=-1;return{p:function(t){for(var n=e,r=0;r<t.length;++r)n=V[n&255^t[r]]^n>>>8;e=n},d:function(){return~e}}},G=function(){var e=1,t=0;return{p:function(n){for(var r=e,o=t,a=n.length,i=0;i!=a;){for(var l=Math.min(i+2655,a);i<l;++i)o+=r+=n[i];r=(r&65535)+15*(r>>16),o=(o&65535)+15*(o>>16)}e=r,t=o},d:function(){return e%=65521,t%=65521,(e&255)<<24|e>>>8<<16|(t&255)<<8|t>>>8}}},z=function(e,t,n,r,o){return U(e,t.level==null?6:t.level,t.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):12+t.mem,n,r,!o)},j=function(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n},K=function(e,t,n){for(var r=e(),o=e.toString(),a=o.slice(o.indexOf("[")+1,o.lastIndexOf("]")).replace(/ /g,"").split(","),i=0;i<r.length;++i){var l=r[i],s=a[i];if(typeof l=="function"){t+=";"+s+"=";var u=l.toString();if(l.prototype)if(u.indexOf("[native code]")!=-1){var c=u.indexOf(" ",8)+1;t+=u.slice(c,u.indexOf("(",c))}else{t+=u;for(var d in l.prototype)t+=";"+s+".prototype."+d+"="+l.prototype[d].toString()}else t+=u}else n[s]=l}return[t,n]},Q=[],X=function(e){var o=[];for(var a in e)(e[a]instanceof t||e[a]instanceof n||e[a]instanceof r)&&o.push((e[a]=new e[a].constructor(e[a])).buffer);return o},Y=function(t,n,r,o){var a;if(!Q[r]){for(var i="",l={},s=t.length-1,u=0;u<s;++u)a=K(t[u],i,l),i=a[0],l=a[1];Q[r]=K(t[s],i,l)}var c=j({},Q[r][1]);return e.default(Q[r][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+n.toString()+"}",r,c,X(c),o)},J=function(){return[t,n,r,o,a,i,u,_,R,E,g,C,k,I,T,D,x,$,Ie,oe,ae]},Z=function(){return[t,n,r,o,a,i,m,f,S,b,L,v,g,W,q,C,P,N,M,w,A,F,O,B,D,x,U,z,Re,oe]},ee=function(){return[pe,ge,me,H,V]},te=function(){return[_e,fe]},ne=function(){return[he,me,G]},re=function(){return[ye]},oe=function(e){return postMessage(e,[e.buffer])},ae=function(e){return e&&e.size&&new t(e.size)},ie=function(e,t,n,r,o,a){var i=Y(n,r,o,function(e,t){i.terminate(),a(e,t)});return i.postMessage([e,t],t.consume?[e.buffer]:[]),function(){i.terminate()}},le=function(e){return e.ondata=function(e,t){return postMessage([e,t],[e.buffer])},function(t){return e.push(t.data[0],t.data[1])}},se=function(e,t,n,r,o){var a,i=Y(e,r,o,function(e,n){e?(i.terminate(),t.ondata.call(t,e)):(n[1]&&i.terminate(),t.ondata.call(t,e,n[0],n[1]))});i.postMessage(n),t.push=function(e,n){if(a)throw"stream finished";if(!t.ondata)throw"no stream handler";i.postMessage([e,a=n],[e.buffer])},t.terminate=function(){i.terminate()}},ue=function(e,t){return e[t]|e[t+1]<<8},ce=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},de=function(e,t){return ce(e,t)+ce(e,t+4)*4294967296},me=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},pe=function(e,t){var n=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:t.level==9?2:0,e[9]=3,t.mtime!=0&&me(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),n){e[3]=8;for(var r=0;r<=n.length;++r)e[r+10]=n.charCodeAt(r)}},_e=function(e){if(e[0]!=31||e[1]!=139||e[2]!=8)throw"invalid gzip data";var t=e[3],n=10;t&4&&(n+=e[10]|(e[11]<<8)+2);for(var r=(t>>3&1)+(t>>4&1);r>0;r-=!e[n++]);return n+(t&2)},fe=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},ge=function(e){return 10+(e.filename&&e.filename.length+1||0)},he=function(e,t){var n=t.level,r=n==0?0:n<6?1:n==9?3:2;e[0]=120,e[1]=r<<6|(r?32-2*r:1)},ye=function(e){if((e[0]&15)!=8||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(e[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Ce(e,t){return!t&&typeof e=="function"&&(t=e,e={}),this.ondata=t,e}var be=(function(){function e(e,t){!t&&typeof e=="function"&&(t=e,e={}),this.ondata=t,this.o=e||{}}return e.prototype.p=function(e,t){this.ondata(z(e,this.o,0,0,!t),t)},e.prototype.push=function(e,t){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";this.d=t,this.p(e,t||!1)},e})();d.Deflate=be;var ve=(function(){function e(e,t){se([Z,function(){return[le,be]}],this,Ce.call(this,e,t),function(e){var t=new be(e.data);onmessage=le(t)},6)}return e})();d.AsyncDeflate=ve;function Se(e,t,n){if(n||(n=t,t={}),typeof n!="function")throw"no callback";return ie(e,t,[Z],function(e){return oe(Re(e.data[0],e.data[1]))},0,n)}d.deflate=Se;function Re(e,t){return z(e,t||{},0,0)}d.deflateSync=Re;var Le=(function(){function e(e){this.s={},this.p=new t(0),this.ondata=e}return e.prototype.e=function(e){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";var n=this.p.length,r=new t(n+e.length);r.set(this.p),r.set(e,n),this.p=r},e.prototype.c=function(e){this.d=this.s.i=e||!1;var t=this.s.b,n=$(this.p,this.o,this.s);this.ondata(x(n,t,this.s.b),this.d),this.o=x(n,this.s.b-32768),this.s.b=this.o.length,this.p=x(this.p,this.s.p/8|0),this.s.p&=7},e.prototype.push=function(e,t){this.e(e),this.c(t)},e})();d.Inflate=Le;var Ee=(function(){function e(e){this.ondata=e,se([J,function(){return[le,Le]}],this,0,function(){var e=new Le;onmessage=le(e)},7)}return e})();d.AsyncInflate=Ee;function ke(e,t,n){if(n||(n=t,t={}),typeof n!="function")throw"no callback";return ie(e,t,[J],function(e){return oe(Ie(e.data[0],ae(e.data[1])))},1,n)}d.inflate=ke;function Ie(e,t){return $(e,t)}d.inflateSync=Ie;var Te=(function(){function e(e,t){this.c=H(),this.l=0,this.v=1,be.call(this,e,t)}return e.prototype.push=function(e,t){be.prototype.push.call(this,e,t)},e.prototype.p=function(e,t){this.c.p(e),this.l+=e.length;var n=z(e,this.o,this.v&&ge(this.o),t&&8,!t);this.v&&(pe(n,this.o),this.v=0),t&&(me(n,n.length-8,this.c.d()),me(n,n.length-4,this.l)),this.ondata(n,t)},e})();d.Gzip=Te,d.Compress=Te;var De=(function(){function e(e,t){se([Z,ee,function(){return[le,be,Te]}],this,Ce.call(this,e,t),function(e){var t=new Te(e.data);onmessage=le(t)},8)}return e})();d.AsyncGzip=De,d.AsyncCompress=De;function xe(e,t,n){if(n||(n=t,t={}),typeof n!="function")throw"no callback";return ie(e,t,[Z,ee,function(){return[$e]}],function(e){return oe($e(e.data[0],e.data[1]))},2,n)}d.gzip=xe,d.compress=xe;function $e(e,t){t||(t={});var n=H(),r=e.length;n.p(e);var o=z(e,t,ge(t),8),a=o.length;return pe(o,t),me(o,a-8,n.d()),me(o,a-4,r),o}d.gzipSync=$e,d.compressSync=$e;var Pe=(function(){function e(e){this.v=1,Le.call(this,e)}return e.prototype.push=function(e,t){if(Le.prototype.e.call(this,e),this.v){var n=this.p.length>3?_e(this.p):4;if(n>=this.p.length&&!t)return;this.p=this.p.subarray(n),this.v=0}if(t){if(this.p.length<8)throw"invalid gzip stream";this.p=this.p.subarray(0,-8)}Le.prototype.c.call(this,t)},e})();d.Gunzip=Pe;var Ne=(function(){function e(e){this.ondata=e,se([J,te,function(){return[le,Le,Pe]}],this,0,function(){var e=new Pe;onmessage=le(e)},9)}return e})();d.AsyncGunzip=Ne;function Me(e,t,n){if(n||(n=t,t={}),typeof n!="function")throw"no callback";return ie(e,t,[J,te,function(){return[we]}],function(e){return oe(we(e.data[0]))},3,n)}d.gunzip=Me;function we(e,n){return $(e.subarray(_e(e),-8),n||new t(fe(e)))}d.gunzipSync=we;var Ae=(function(){function e(e,t){this.c=G(),this.v=1,be.call(this,e,t)}return e.prototype.push=function(e,t){be.prototype.push.call(this,e,t)},e.prototype.p=function(e,t){this.c.p(e);var n=z(e,this.o,this.v&&2,t&&4,!t);this.v&&(he(n,this.o),this.v=0),t&&me(n,n.length-4,this.c.d()),this.ondata(n,t)},e})();d.Zlib=Ae;var Fe=(function(){function e(e,t){se([Z,ne,function(){return[le,be,Ae]}],this,Ce.call(this,e,t),function(e){var t=new Ae(e.data);onmessage=le(t)},10)}return e})();d.AsyncZlib=Fe;function Oe(e,t,n){if(n||(n=t,t={}),typeof n!="function")throw"no callback";return ie(e,t,[Z,ne,function(){return[Be]}],function(e){return oe(Be(e.data[0],e.data[1]))},4,n)}d.zlib=Oe;function Be(e,t){t||(t={});var n=G();n.p(e);var r=z(e,t,2,4);return he(r,t),me(r,r.length-4,n.d()),r}d.zlibSync=Be;var We=(function(){function e(e){this.v=1,Le.call(this,e)}return e.prototype.push=function(e,t){if(Le.prototype.e.call(this,e),this.v){if(this.p.length<2&&!t)return;this.p=this.p.subarray(2),this.v=0}if(t){if(this.p.length<4)throw"invalid zlib stream";this.p=this.p.subarray(0,-4)}Le.prototype.c.call(this,t)},e})();d.Unzlib=We;var qe=(function(){function e(e){this.ondata=e,se([J,re,function(){return[le,Le,We]}],this,0,function(){var e=new We;onmessage=le(e)},11)}return e})();d.AsyncUnzlib=qe;function Ue(e,t,n){if(n||(n=t,t={}),typeof n!="function")throw"no callback";return ie(e,t,[J,re,function(){return[Ve]}],function(e){return oe(Ve(e.data[0],ae(e.data[1])))},5,n)}d.unzlib=Ue;function Ve(e,t){return $((ye(e),e.subarray(2,-4)),t)}d.unzlibSync=Ve;var He=(function(){function e(e){this.G=Pe,this.I=Le,this.Z=We,this.ondata=e}return e.prototype.push=function(e,n){if(!this.ondata)throw"no stream handler";if(this.s)this.s.push(e,n);else{if(this.p&&this.p.length){var r=new t(this.p.length+e.length);r.set(this.p),r.set(e,this.p.length)}else this.p=e;if(this.p.length>2){var o=this,a=function(){o.ondata.apply(o,arguments)};this.s=this.p[0]==31&&this.p[1]==139&&this.p[2]==8?new this.G(a):(this.p[0]&15)!=8||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(a):new this.Z(a),this.s.push(this.p,n),this.p=null}}},e})();d.Decompress=He;var Ge=(function(){function e(e){this.G=Ne,this.I=Ee,this.Z=qe,this.ondata=e}return e.prototype.push=function(e,t){He.prototype.push.call(this,e,t)},e})();d.AsyncDecompress=Ge;function ze(e,t,n){if(n||(n=t,t={}),typeof n!="function")throw"no callback";return e[0]==31&&e[1]==139&&e[2]==8?Me(e,t,n):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?ke(e,t,n):Ue(e,t,n)}d.decompress=ze;function je(e,t){return e[0]==31&&e[1]==139&&e[2]==8?we(e,t):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?Ie(e,t):Ve(e,t)}d.decompressSync=je;var Ke=function(e,n,r,o){for(var a in e){var i=e[a],l=n+a;i instanceof t?r[l]=[i,o]:Array.isArray(i)?r[l]=[i[0],j(o,i[1])]:Ke(i,l+"/",r,o)}},Qe=typeof TextEncoder!="undefined"&&new TextEncoder,Xe=typeof TextDecoder!="undefined"&&new TextDecoder,Ye=0;try{Xe.decode(q,{stream:!0}),Ye=1}catch(e){}var Je=function(e){for(var t="",n=0;;){var r=e[n++],o=(r>127)+(r>223)+(r>239);if(n+o>e.length)return[t,x(e,n-1)];o?o==3?(r=((r&15)<<18|(e[n++]&63)<<12|(e[n++]&63)<<6|e[n++]&63)-65536,t+=String.fromCharCode(55296|r>>10,56320|r&1023)):o&1?t+=String.fromCharCode((r&31)<<6|e[n++]&63):t+=String.fromCharCode((r&15)<<12|(e[n++]&63)<<6|e[n++]&63):t+=String.fromCharCode(r)}},Ze=(function(){function e(e){this.ondata=e,Ye?this.t=new TextDecoder:this.p=q}return e.prototype.push=function(e,n){if(!this.ondata)throw"no callback";if(n=!!n,this.t){if(this.ondata(this.t.decode(e,{stream:!0}),n),n){if(this.t.decode().length)throw"invalid utf-8 data";this.t=null}return}if(!this.p)throw"stream finished";var r=new t(this.p.length+e.length);r.set(this.p),r.set(e,this.p.length);var o=Je(r),a=o[0],i=o[1];if(n){if(i.length)throw"invalid utf-8 data";this.p=null}else this.p=i;this.ondata(a,n)},e})();d.DecodeUTF8=Ze;var et=(function(){function e(e){this.ondata=e}return e.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(this.d)throw"stream finished";this.ondata(tt(e),this.d=t||!1)},e})();d.EncodeUTF8=et;function tt(e,n){if(n){for(var r=new t(e.length),o=0;o<e.length;++o)r[o]=e.charCodeAt(o);return r}if(Qe)return Qe.encode(e);for(var a=e.length,i=new t(e.length+(e.length>>1)),l=0,s=function(e){i[l++]=e},o=0;o<a;++o){if(l+5>i.length){var u=new t(l+8+(a-o<<1));u.set(i),i=u}var c=e.charCodeAt(o);c<128||n?s(c):c<2048?(s(192|c>>6),s(128|c&63)):c>55295&&c<57344?(c=65536+(c&1047552)|e.charCodeAt(++o)&1023,s(240|c>>18),s(128|c>>12&63),s(128|c>>6&63),s(128|c&63)):(s(224|c>>12),s(128|c>>6&63),s(128|c&63))}return x(i,0,l)}d.strToU8=tt;function nt(e,t){if(t){for(var n="",r=0;r<e.length;r+=16384)n+=String.fromCharCode.apply(null,e.subarray(r,r+16384));return n}else{if(Xe)return Xe.decode(e);var o=Je(e),a=o[0],i=o[1];if(i.length)throw"invalid utf-8 data";return a}}d.strFromU8=nt;var rt=function(e){return e==1?3:e<6?2:e==9?1:0},ot=function(e,t){return t+30+ue(e,t+26)+ue(e,t+28)},at=function(e,t,n){var r=ue(e,t+28),o=nt(e.subarray(t+46,t+46+r),!(ue(e,t+8)&2048)),a=t+46+r,i=ce(e,t+20),l=n&&i==4294967295?it(e,a):[i,ce(e,t+24),ce(e,t+42)],s=l[0],u=l[1],c=l[2];return[ue(e,t+10),s,u,o,a+ue(e,t+30)+ue(e,t+32),c]},it=function(e,t){for(;ue(e,t)!=1;t+=4+ue(e,t+2));return[de(e,t+12),de(e,t+4),de(e,t+20)]},lt=function(e){var t=0;if(e)for(var n in e){var r=e[n].length;if(r>65535)throw"extra field too long";t+=r+4}return t},st=function(e,t,n,r,o,a,i,l){var s=r.length,u=n.extra,c=l&&l.length,d=lt(u);me(e,t,i!=null?33639248:67324752),t+=4,i!=null&&(e[t++]=20,e[t++]=n.os),e[t]=20,t+=2,e[t++]=n.flag<<1|(a==null&&8),e[t++]=o&&8,e[t++]=n.compression&255,e[t++]=n.compression>>8;var m=new Date(n.mtime==null?Date.now():n.mtime),p=m.getFullYear()-1980;if(p<0||p>119)throw"date not in range 1980-2099";if(me(e,t,p<<25|m.getMonth()+1<<21|m.getDate()<<16|m.getHours()<<11|m.getMinutes()<<5|m.getSeconds()>>>1),t+=4,a!=null&&(me(e,t,n.crc),me(e,t+4,a),me(e,t+8,n.size)),me(e,t+12,s),me(e,t+14,d),t+=16,i!=null&&(me(e,t,c),me(e,t+6,n.attrs),me(e,t+10,i),t+=14),e.set(r,t),t+=s,d)for(var _ in u){var f=u[_],g=f.length;me(e,t,+_),me(e,t+2,g),e.set(f,t+4),t+=4+g}return c&&(e.set(l,t),t+=c),t},ut=function(e,t,n,r,o){me(e,t,101010256),me(e,t+8,n),me(e,t+10,n),me(e,t+12,r),me(e,t+16,o)},ct=(function(){function e(e){this.filename=e,this.c=H(),this.size=0,this.compression=0}return e.prototype.process=function(e,t){this.ondata(null,e,t)},e.prototype.push=function(e,t){if(!this.ondata)throw"no callback - add to ZIP archive before pushing";this.c.p(e),this.size+=e.length,t&&(this.crc=this.c.d()),this.process(e,t||!1)},e})();d.ZipPassThrough=ct;var dt=(function(){function e(e,t){var n=this;t||(t={}),ct.call(this,e),this.d=new be(t,function(e,t){n.ondata(null,e,t)}),this.compression=8,this.flag=rt(t.level)}return e.prototype.process=function(e,t){try{this.d.push(e,t)}catch(e){this.ondata(e,null,t)}},e.prototype.push=function(e,t){ct.prototype.push.call(this,e,t)},e})();d.ZipDeflate=dt;var mt=(function(){function e(e,t){var n=this;t||(t={}),ct.call(this,e),this.d=new ve(t,function(e,t,r){n.ondata(e,t,r)}),this.compression=8,this.flag=rt(t.level),this.terminate=this.d.terminate}return e.prototype.process=function(e,t){this.d.push(e,t)},e.prototype.push=function(e,t){ct.prototype.push.call(this,e,t)},e})();d.AsyncZipDeflate=mt;var pt=(function(){function e(e){this.ondata=e,this.u=[],this.d=1}return e.prototype.add=function(e){var n=this;if(this.d&2)throw"stream finished";var r=tt(e.filename),o=r.length,a=e.comment,i=a&&tt(a),l=o!=e.filename.length||i&&a.length!=i.length,s=o+lt(e.extra)+30;if(o>65535)throw"filename too long";var u=new t(s);st(u,0,e,r,l);var c=[u],d=function(){for(var e=0,t=c;e<t.length;e++){var r=t[e];n.ondata(null,r,!1)}c=[]},m=this.d;this.d=0;var p=this.u.length,_=j(e,{f:r,u:l,o:i,t:function(){e.terminate&&e.terminate()},r:function(){if(d(),m){var e=n.u[p+1];e?e.r():n.d=1}m=1}}),f=0;e.ondata=function(r,o,a){if(r)n.ondata(r,o,a),n.terminate();else if(f+=o.length,c.push(o),a){var i=new t(16);me(i,0,134695760),me(i,4,e.crc),me(i,8,f),me(i,12,e.size),c.push(i),_.c=f,_.b=s+f+16,_.crc=e.crc,_.size=e.size,m&&_.r(),m=1}else m&&d()},this.u.push(_)},e.prototype.end=function(){var e=this;if(this.d&2)throw this.d&1?"stream finishing":"stream finished";this.d?this.e():this.u.push({r:function(){e.d&1&&(e.u.splice(-1,1),e.e())},t:function(){}}),this.d=3},e.prototype.e=function(){for(var e=0,n=0,r=0,o=0,a=this.u;o<a.length;o++){var i=a[o];r+=46+i.f.length+lt(i.extra)+(i.o?i.o.length:0)}for(var l=new t(r+22),s=0,u=this.u;s<u.length;s++){var i=u[s];st(l,e,i,i.f,i.u,i.c,n,i.o),e+=46+i.f.length+lt(i.extra)+(i.o?i.o.length:0),n+=i.b}ut(l,e,this.u.length,r,n),this.ondata(null,l,!0),this.d=2},e.prototype.terminate=function(){for(var e=0,t=this.u;e<t.length;e++){var n=t[e];n.t()}this.d=2},e})();d.Zip=pt;function _t(e,n,r){if(r||(r=n,n={}),typeof r!="function")throw"no callback";var o={};Ke(e,"",o,n);var a=Object.keys(o),i=a.length,l=0,s=0,u=i,c=new Array(i),d=[],m=function(){for(var e=0;e<d.length;++e)d[e]()},p=function(){var e=new t(s+22),n=l,o=s-l;s=0;for(var a=0;a<u;++a){var i=c[a];try{var d=i.c.length;st(e,s,i,i.f,i.u,d);var m=30+i.f.length+lt(i.extra),p=s+m;e.set(i.c,p),st(e,l,i,i.f,i.u,d,s,i.m),l+=16+m+(i.m?i.m.length:0),s=p+d}catch(e){return r(e,null)}}ut(e,l,c.length,o,n),r(null,e)};i||p();for(var _=function(e){var t=a[e],n=o[t],u=n[0],_=n[1],f=H(),g=u.length;f.p(u);var h=tt(t),y=h.length,C=_.comment,b=C&&tt(C),v=b&&b.length,S=lt(_.extra),R=_.level==0?0:8,L=function(n,o){if(n)m(),r(n,null);else{var a=o.length;c[e]=j(_,{size:g,crc:f.d(),c:o,f:h,m:b,u:y!=t.length||b&&C.length!=v,compression:R}),l+=30+y+S+a,s+=76+2*(y+S)+(v||0)+a,--i||p()}};if(y>65535&&L("filename too long",null),!R)L(null,u);else if(g<16e4)try{L(null,Re(u,_))}catch(e){L(e,null)}else d.push(Se(u,_,L))},f=0;f<u;++f)_(f);return m}d.zip=_t;function ft(e,n){n||(n={});var r={},o=[];Ke(e,"",r,n);var a=0,i=0;for(var l in r){var s=r[l],u=s[0],c=s[1],d=c.level==0?0:8,m=tt(l),p=m.length,_=c.comment,f=_&&tt(_),g=f&&f.length,h=lt(c.extra);if(p>65535)throw"filename too long";var y=d?Re(u,c):u,C=y.length,b=H();b.p(u),o.push(j(c,{size:u.length,crc:b.d(),c:y,f:m,m:f,u:p!=l.length||f&&_.length!=g,o:a,compression:d})),a+=30+p+h+C,i+=76+2*(p+h)+(g||0)+C}for(var v=new t(i+22),S=a,R=i-a,L=0;L<o.length;++L){var m=o[L];st(v,m.o,m,m.f,m.u,m.c.length);var E=30+m.f.length+lt(m.extra);v.set(m.c,m.o+E),st(v,a,m,m.f,m.u,m.c.length,m.o,m.m),a+=16+E+(m.m?m.m.length:0)}return ut(v,a,o.length,R,S),v}d.zipSync=ft;var gt=(function(){function e(){}return e.prototype.push=function(e,t){this.ondata(null,e,t)},e.compression=0,e})();d.UnzipPassThrough=gt;var ht=(function(){function e(){var e=this;this.i=new Le(function(t,n){e.ondata(null,t,n)})}return e.prototype.push=function(e,t){try{this.i.push(e,t)}catch(n){this.ondata(n,e,t)}},e.compression=8,e})();d.UnzipInflate=ht;var yt=(function(){function e(e,t){var n=this;t<32e4?this.i=new Le(function(e,t){n.ondata(null,e,t)}):(this.i=new Ee(function(e,t,r){n.ondata(e,t,r)}),this.terminate=this.i.terminate)}return e.prototype.push=function(e,t){this.i.terminate&&(e=x(e,0)),this.i.push(e,t)},e.compression=8,e})();d.AsyncUnzipInflate=yt;var Ct=(function(){function e(e){this.onfile=e,this.k=[],this.o={0:gt},this.p=q}return e.prototype.push=function(e,n){var r=this;if(!this.onfile)throw"no callback";if(!this.p)throw"stream finished";if(this.c>0){var o=Math.min(this.c,e.length),a=e.subarray(0,o);if(this.c-=o,this.d?this.d.push(a,!this.c):this.k[0].push(a),e=e.subarray(o),e.length)return this.push(e,n)}else{var i=0,l=0,s=void 0,u=void 0;this.p.length?e.length?(u=new t(this.p.length+e.length),u.set(this.p),u.set(e,this.p.length)):u=this.p:u=e;for(var c=u.length,d=this.c,m=d&&this.d,p=function(){var e,t=ce(u,l);if(t==67324752){i=1,s=l,_.d=null,_.c=0;var n=ue(u,l+6),o=ue(u,l+8),a=n&2048,m=n&8,p=ue(u,l+26),f=ue(u,l+28);if(c>l+30+p+f){var g=[];_.k.unshift(g),i=2;var h=ce(u,l+18),y=ce(u,l+22),C=nt(u.subarray(l+30,l+=30+p),!a);h==4294967295?(e=m?[-2]:it(u,l),h=e[0],y=e[1]):m&&(h=-1),l+=f,_.c=h;var b,v={name:C,compression:o,start:function(){if(!v.ondata)throw"no callback";if(!h)v.ondata(null,q,!0);else{var e=r.o[o];if(!e)throw"unknown compression type "+o;b=h<0?new e(C):new e(C,h,y),b.ondata=function(e,t,n){v.ondata(e,t,n)};for(var t=0,n=g;t<n.length;t++){var a=n[t];b.push(a,!1)}r.k[0]==g&&r.c?r.d=b:b.push(q,!0)}},terminate:function(){b&&b.terminate&&b.terminate()}};h>=0&&(v.size=h,v.originalSize=y),_.onfile(v)}return"break"}else if(d){if(t==134695760)return s=l+=12+(d==-2&&8),i=3,_.c=0,"break";if(t==33639248)return s=l-=4,i=3,_.c=0,"break"}},_=this;l<c-4;++l){var f=p();if(f==="break")break}if(this.p=q,d<0){var g=i?u.subarray(0,s-12-(d==-2&&8)-(ce(u,s-16)==134695760&&4)):u.subarray(0,l);m?m.push(g,!!i):this.k[+(i==2)].push(g)}if(i&2)return this.push(u.subarray(l),n);this.p=u.subarray(l)}if(n){if(this.c)throw"invalid zip file";this.p=null}},e.prototype.register=function(e){this.o[e.compression]=e},e})();d.Unzip=Ct;function bt(e,n){if(typeof n!="function")throw"no callback";for(var r=[],o=function(){for(var e=0;e<r.length;++e)r[e]()},a={},i=e.length-22;ce(e,i)!=101010256;--i)if(!i||e.length-i>65558){n("invalid zip file",null);return}var l=ue(e,i+8);l||n(null,{});var s=l,u=ce(e,i+16),c=u==4294967295;if(c){if(i=ce(e,i-12),ce(e,i)!=101075792){n("invalid zip file",null);return}s=l=ce(e,i+32),u=ce(e,i+48)}for(var d=function(i){var s=at(e,u,c),d=s[0],m=s[1],p=s[2],_=s[3],f=s[4],g=s[5],h=ot(e,g);u=f;var y=function(e,t){e?(o(),n(e,null)):(a[_]=t,--l||n(null,a))};if(!d)y(null,x(e,h,h+m));else if(d==8){var C=e.subarray(h,h+m);if(m<32e4)try{y(null,Ie(C,new t(p)))}catch(e){y(e,null)}else r.push(ke(C,{size:p},y))}else y("unknown compression type "+d,null)},m=0;m<s;++m)d(m);return o}d.unzip=bt;function vt(e){for(var n={},r=e.length-22;ce(e,r)!=101010256;--r)if(!r||e.length-r>65558)throw"invalid zip file";var o=ue(e,r+8);if(!o)return{};var a=ce(e,r+16),i=a==4294967295;if(i){if(r=ce(e,r-12),ce(e,r)!=101075792)throw"invalid zip file";o=ce(e,r+32),a=ce(e,r+48)}for(var l=0;l<o;++l){var s=at(e,a,i),u=s[0],c=s[1],d=s[2],m=s[3],p=s[4],_=s[5],f=ot(e,_);if(a=p,!u)n[m]=x(e,f,f+c);else if(u==8)n[m]=Ie(e.subarray(f,f+c),new t(d));else throw"unknown compression type "+u}return n}d.unzipSync=vt}var _=!1;function f(){return _||(_=!0,p()),m.exports}function g(e){switch(e){case void 0:return f()}}a.exports=g}),null);
__d("fflate",["fflate-0.6.10"],(function(t,n,r,o,a,i){a.exports=n("fflate-0.6.10")()}),null);
__d("WAGzip",["Promise","err","fflate"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.$GzipWrapper$p_2=[],n.ondata=function(e,t){if(n.$GzipWrapper$p_2.push(e),!!t){var r=0;n.$GzipWrapper$p_2.forEach(function(e){r+=e.length});var o=new Uint8Array(r),a=0;n.$GzipWrapper$p_2.forEach(function(e){o.set(e,a),a+=e.length}),n.$GzipWrapper$p_1=o}},n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.push=function(n,a){if(this.$GzipWrapper$p_1!=null)throw r("err")("Tried to push chunk to compressor after final block");n instanceof Uint8Array?e.prototype.push.call(this,n,a):n instanceof ArrayBuffer?e.prototype.push.call(this,new Uint8Array(n),a):e.prototype.push.call(this,o("fflate").strToU8(n),a)},n.result=function(){if(this.$GzipWrapper$p_1==null)throw r("err")("Tried to access result before adding final block");return this.$GzipWrapper$p_1},t})(o("fflate").Gzip);function u(e){return e===void 0&&(e={}),new s(e)}function c(e){return o("fflate").decompressSync(e)}function d(t){return(e||(e=n("Promise"))).resolve(c(t))}l.GzipWrapper=s,l.createDeflate=u,l.inflate=c,l.gzipInflate=d}),98);
__d("WAJobRequirement",["Promise","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(function(){function t(e){var t=this;this.$1=(s||(s=n("Promise"))).resolve(),this.$2=!0,this.$3=null,this.$4=function(){var e=t.$3;if(e!=null)return t.$3=null,(s||(s=n("Promise"))).all(e).then(t.$4);t.$2=!0},this.name=e}var r=t.prototype;return r.addBlocker=function(r){var t=this,a=r.catch(function(n){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["JobRequirement[","] blocker errored ",""])),t.name,n).sendLogs("job-blocker-rejected")});if(this.$2)this.$2=!1,this.$1=(s||(s=n("Promise"))).all([this.$1,a]).then(this.$4);else{var i=this.$3;i!=null?i.push(a):this.$3=[a]}},r.waitUntilSatisfied=function(){return this.$1},r.isSatisfied=function(){return this.$2},r.isSatisfiable=function(){return!0},t})(),c=(function(e){function t(t){var r;return r=e.call(this,t)||this,e.prototype.addBlocker.call(r,new(s||(s=n("Promise")))(function(){})),r}babelHelpers.inheritsLoose(t,e);var r=t.prototype;return r.addBlocker=function(){},r.isSatisfiable=function(){return!1},t})(u);function d(e,t){var r=e.filter(function(e){return!e.isSatisfiable()});if(r.length>0){var o=r.map(function(e){return e.name});return function(e){return t==null||t("unsatisfiable",o,e),r[0].waitUntilSatisfied()}}var a=e.map(function(){return(s||(s=n("Promise"))).resolve()}),i=(s||(s=n("Promise"))).resolve(),l=null,u=function(){if(a.every(function(t,n){return t===e[n].waitUntilSatisfied()})){l=null;return}var t=[],r=e.map(function(e){var n=e.waitUntilSatisfied();return e.isSatisfied()||(t.push(e.name),n.then(function(){var n=t.indexOf(e.name);t.splice(n,1)})),n});return a=r,l=t,(s||(s=n("Promise"))).all(r).then(u)};return function(e){if(l==null){var n=u();n!=null&&(i=i.then(function(){return n}))}return t==null||t(l==null?"satisfied":"unsatisfied",l,e),i}}l.JobRequirement=u,l.UnsatisfiableJobRequirement=c,l.joinRequirements=d}),98);
__d("WALruCache",["WALogger","WAShiftTimer","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(t,n){this.key=t,this.value=n,this.prev=null,this.next=null},u=(function(){function t(e){var t=this,n;this.$2=new Map,this.purgeNow=function(){for(var e=t.$6.prev;t.$4>t.$3&&e!==t.$5;e=e?e.prev:null){if(e==null)throw r("err")("The linked list is not constructed properly.");var n=e,o=n.key,a=n.value;t.$9(o,a)&&(t.delete(o),t.$10&&t.$10(o,a))}t.$8&&t.$8(t.$2)},this.$3=e.sizeLimit,this.$7=e.getSize,this.$8=e.onPurge,this.$9=(n=e.shouldEvict)!=null?n:function(){return!0},this.$10=e.onEvict,this.$11=e.onAdd,this.$12=e.onDelete,this.$4=0,this.$5=new s("placeholder-head",null),this.$6=new s("placeholder-tail",null),this.$5.next=this.$6,this.$6.prev=this.$5,this.$1=new(o("WAShiftTimer")).ShiftTimer(function(){return t.purgeNow()})}var n=t.prototype;return n.get=function(t){if(!this.$2.has(t))return null;var e=this.$2.get(t);if(e==null)return null;var n=e.prev,o=e.next;n&&(n.next=o),o&&(o.prev=n);var a=this.$5.next;if(a==null)throw r("err")("The linked list is not constructed properly.");return this.$5.next=e,a.prev=e,e.prev=this.$5,e.next=a,e.value},n.has=function(t){return this.$2.has(t)},n.touch=function(t){this.get(t)},n.put=function(n,r){if(this.$3!==0){if(this.$7(r)>this.$3){o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Blob size is larger than the limit of the whole store."])));return}this.delete(n),this.$14(n,r),this.schedulePurge()}},n.$14=function(t,n){var e=new s(t,n);this.$2.set(t,e);var o=this.$5.next;if(o==null)throw r("err")("The linked list is not constructed properly.");this.$5.next=e,o.prev=e,e.prev=this.$5,e.next=o,this.$4+=this.$7(n),this.$11&&this.$11(t,n)},n.delete=function(t){if(this.$2.has(t)){var e=this.$2.get(t);if(e!=null){this.$4-=this.$7(e.value);var n=e.prev,r=e.next;n&&(n.next=r),r&&(r.prev=n),this.$2.delete(t),this.$12&&this.$12(t,e.value)}}},n.clear=function(){this.$2.clear(),this.$4=0,this.$5.next=this.$6,this.$6.prev=this.$5,this.$13&&this.$13()},n.schedulePurge=function(){this.$1.onOrBefore(1e3)},n.getCurrentSize=function(){return this.$4},n.getSizeLimit=function(){return this.$3},n.getPlaceholderHead=function(){return this.$5},n.forEach=function(t){if(this.$4!==0){var e=this.$6.prev;if(e==null)throw r("err")("The linked list is not constructed properly.");for(;e!=null&&e!==this.$5;)t(e.value),e=e.prev}},t})();l.LruCache=u}),98);
__d("WAMemoizeOne",["shallowEqual"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){t===void 0&&(t=r("shallowEqual"));var n=null,o=function(o){return n==null||!t(n.params,o)?n={params:o,result:e.call(this,o)}:n.params=o,n.result};return o.clear=function(){n=null},o}l.default=e}),98);
__d("WANoiseSocket",["Promise","WACryptoDependencies","WALogger","WAPromiseQueue","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=n("Promise"))).reject("UNINITIALIZED HANDSHAKE"),c=new Uint8Array(0);u.catch(function(){});var d=(function(){function t(t,n,r){var a=this;this.$4=[],this.$5=new(o("WAPromiseQueue")).PromiseQueue,this.$6=new(o("WAPromiseQueue")).PromiseQueue,this.$7=0,this.$8=0,this.$9=!1,this.$14=function(t){a.$1.closed?o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["NoiseSocket socket closed while encrypting frame"]))):a.$1.sendFrame(t)},this.$12=function(e){var t=a.$7++;a.$5.enqueueHandlers(_(a.$2,t,void 0,e),a.$15)},this.$13=function(){a.$9=!0,a.$5.wait().then(function(){a.$9=!1;var e=a.$11;e&&e()})},this.$15=function(e){a.$10?a.$10(e):a.$4.push(e)},this.$1=t,this.$3=n,this.$2=r,t.onFrame=this.$12,this.$1.onClose=this.$13,t.convertBufferedToFrames()}var r=t.prototype;return r.sendFrameAsync=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield this.sendFrame(e);return t});function t(t){return e.apply(this,arguments)}return t})(),r.sendFrame=function(t){if(this.$9)return(s||(s=n("Promise"))).resolve();this.$1.throwIfClosed();var e=this.$8++;return this.$6.enqueueHandlers(p(this.$3,e,void 0,t),this.$14)},r.setOnFrame=function(t){this.$10=t},r.setOnClose=function(t){this.$11=t},r.close=function(){this.$1.close()},t})();function m(e){var t=new ArrayBuffer(12),n=new DataView(t);return n.setUint32(8,e),new Uint8Array(t)}function p(e,t,n,r){return o("WACryptoDependencies").getCrypto().subtle.encrypt({name:"AES-GCM",iv:m(t),additionalData:n?new Uint8Array(n):c},e,r)}function _(e,t,n,r){return o("WACryptoDependencies").getCrypto().subtle.decrypt({name:"AES-GCM",iv:m(t),additionalData:n?new Uint8Array(n):c},e,r)}l.NoiseSocket=d}),98);
__d("WANoiseHandshake",["Promise","WABinary","WACryptoDependencies","WACryptoHkdf","WACryptoSha256","WAErrors","WANoiseSocket","WAResolvable","WATagsLogger","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=o("WATagsLogger").TAGS(["NoiseHandshake"]),m=(c||(c=n("Promise"))).reject("UNINITIALIZED HANDSHAKE"),p=new Uint8Array(0);m.catch(function(){});var _=(function(){function t(e){var t=this;this.$2=m,this.$3=m,this.$4=m,this.$5=0,this.$1=e,this.$6=new(o("WAResolvable")).Resolvable,e.onClose=function(){t.$6.reject(new(o("WAErrors")).Disconnected("NoiseHandshake: SocketClosed"))},b(this.$6.promise)}var r=t.prototype;return r.start=function(t,r){var e=o("WABinary").Binary.build(t).readBuffer(),a=e.byteLength===32?(c||(c=n("Promise"))).resolve(e):o("WACryptoSha256").sha256(e);this.$2=a,this.$3=a,this.$4=a.then(g),this.authenticate(r)},r.sendAndReceive=function(t){var e=this.$1,r=new(c||(c=n("Promise")))(function(n){e.onFrame=function(t){e.onFrame=null,n(t)},e.sendFrame(t)});return this.$7(r)},r.send=function(t){this.$1.sendFrame(t)},r.authenticate=function(t){this.$2=(c||(c=n("Promise"))).all([this.$2,t]).then(function(e){var t=e[0],n=e[1],r=o("WABinary").Binary.build(t,n).readByteArrayView();return o("WACryptoSha256").sha256(r)})},r.encrypt=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){try{var r=this.$5++,o=(c||(c=n("Promise"))).all([this.$4,this.$2,t]).then(function(e){var t=e[0],n=e[1],o=e[2];return h(t,r,n,o)});this.authenticate(o);var a=yield this.$7(o);return a}catch(t){throw d.ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Error on encrypt: ",""])),t),t}});function r(e){return t.apply(this,arguments)}return r})(),r.decrypt=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){try{var r=this.$5++,o=(c||(c=n("Promise"))).all([this.$4,this.$2]).then(function(t){var n=t[0],o=t[1];return y(n,r,o,e)});this.authenticate(e);var a=yield this.$7(o);return a}catch(e){throw d.ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Error on decrypt: "," reason: ",""])),e,t),e}});function t(t,n){return e.apply(this,arguments)}return t})(),r.finish=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=this;try{var t=this.$3.then(function(e){return C(e,new Uint8Array(0))}).then(function(e){var t=e[0],r=e[1];return(c||(c=n("Promise"))).all([g(t,["encrypt"]),g(r,["decrypt"])])}).then(function(t){var n=t[0],r=t[1];return new(o("WANoiseSocket")).NoiseSocket(e.$1,n,r)}),r=yield this.$7(t);return r}catch(e){throw d.ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Error on finish: ",""])),e),e}});function t(){return e.apply(this,arguments)}return t})(),r.mixIntoKey=function(t){this.$5=0;var e=(c||(c=n("Promise"))).all([this.$3,t]).then(function(e){var t=e[0],n=e[1];return C(t,new Uint8Array(n))});this.$3=e.then(function(e){return e[0]}),this.$4=e.then(function(e){return g(e[1])}),b(this.$3),b(this.$4)},r.$7=function(t){var e=this;return(c||(c=n("Promise"))).race([t,this.$6.promise]).then(function(t){return e.$6.resolveWasCalled()?e.$6.promise:t})},t})();function f(e){var t=new ArrayBuffer(12),n=new DataView(t);return n.setUint32(8,e),new Uint8Array(t)}function g(e,t){return t===void 0&&(t=["encrypt","decrypt"]),o("WACryptoDependencies").getCrypto().subtle.importKey("raw",new Uint8Array(e),"AES-GCM",!1,t)}function h(e,t,n,r){return o("WACryptoDependencies").getCrypto().subtle.encrypt({name:"AES-GCM",iv:f(t),additionalData:n?new Uint8Array(n):p},e,r)}function y(e,t,n,r){return o("WACryptoDependencies").getCrypto().subtle.decrypt({name:"AES-GCM",iv:f(t),additionalData:n?new Uint8Array(n):p},e,r)}function C(e,t){return o("WACryptoHkdf").extractWithSaltAndExpand(t,new Uint8Array(e),"",64).then(function(e){return[e.slice(0,32),e.slice(32)]})}function b(e){e.catch(function(){})}l.NoiseHandshake=_}),98);
__d("WAOnceWithReset",[],(function(t,n,r,o,a,i){"use strict";var e={};function l(t){var n=e,r=function(){if(n===e){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];n=t.call.apply(t,[this].concat(o))}return n};return r.reset=function(){n=e},r}i.default=l}),66);
__d("WAPersistedJobManager",["Promise","WAJobRequirement","WALogger","WAPromiseBackoffs","WATimeUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E,k,I,T,D,x,$,P,N,M,w=1,A=(function(){function e(e){this.feature=e}var t=e.prototype;return t.toString=function(){return"RequiresPage: "+this.feature},e})(),F=(function(){function e(e){this.backoffOptions=e}var t=e.prototype;return t.toString=function(){return"RetryOnBackoff"},e})(),O=(function(e){function t(){return e.apply(this,arguments)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.toString=function(){return"NonRetryableError"},t})(babelHelpers.wrapNativeSuper(Error)),B=function(t){this.result=t},W="$unstarted",q="$finished",U=(function(){function t(t){var r=this,a=t.accessors,i=t.isRestartAfterCrash,l=t.unfinishedJobEntries,u=new Map,c=l.then(function(t){var l=[],c=[];return t.forEach(function(e){e.stepHardStartCountAfterTimeout>=5?l.push(e):c.push(e)}),(M||(M=n("Promise"))).all(l.map(function(t){return o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["",": stuck on the step ",", aborting the job"])),H(t),t.step).sendLogs("job-stuck-"+t.type),a.deletePersistedJob(t.jobId)})).then(function(){c.forEach(function(e){u.has(e.jobId)||(o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["",": restarting"])),V(e)),u.set(e.jobId,r.$1(e,i)))})})});this.implementationLoaders=new Map,this.implementations=new Map,this.stepBlockers=new WeakMap,this.accessors=a,this.activeJobs=u,this.initialJobsPromise=c,this.listeners=t.listeners,this.deprecatedJobs=t.deprecatedJobs}var r=t.prototype;return r.loadAndRunJobFromId=function(t){var e=this.activeJobs.get(t);if(e!=null)return e;var n=this.$2(t);return this.activeJobs.set(t,n),n},r.$2=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=this.accessors,n=this.initialJobsPromise;yield n;var r=yield t.readPersistedJob(e);return r?this.$1(r,!1):(o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Persisted job missing for given ID"]))),null)});function t(t){return e.apply(this,arguments)}return t})(),r.$3=function(t){var e=this.implementationLoaders,n=this.implementations,r=n.get(t);if(r)return r;var o=e.get(t);if(!o)return null;var a=o();return n.set(t,a),a},r.$4=function(t,r){if(r==null||r.length===0)return(M||(M=n("Promise"))).resolve();var e=this.stepBlockers,a=e.get(r);return a==null&&(a=o("WAJobRequirement").joinRequirements(r.map(function(e){return e()}),z),e.set(r,a)),a(t)},r.$5=function(t,n,r,a){var e=this;r===void 0&&(r=!1);var i=t.step,l=n.findIndex(function(e){return e.stepName===i}),s=n[l].info(t.current,t.original,j(t,r)),u=s.code,m=s.requirements,p=this.$4(t,m);return a&&(p=p.then(a)),p.then(function(){return o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["",": running step"])),G(t)),u(t.current,t.original,j(t,r))}).then(function(a){if(a instanceof B)return o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["",": InterruptJob"])),G(t)),a.result;var i=l+1;if(i>=n.length)return a;var s=n[i];return t.step=s.stepName,t.current=a,t.stepHardStartCountAfterTimeout=0,t.stepFirstStartTime=o("WATimeUtils").unixTime(),t.stepUnexpectedErrorCount=0,t.waitUntil=null,t.backedOffCount=0,e.accessors.updatePersistedJob(t).then(function(){return e.$5(t,n,r)})})},r.$1=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var r,a=this,i=this.accessors,l=this.activeJobs,s=this.deprecatedJobs,u=this.listeners,c=u.onJobFinished,d=u.onJobStarted,D=yield this.$3(e.type),x=s[e.type];if(!D){if(x){if(x==="NOOP")return o("WALogger").WARN(p||(p=babelHelpers.taggedTemplateLiteralLoose(["No implementation for deprecated ",", job deleted"])),e.type),yield i.deletePersistedJob(e.jobId),null}else return o("WALogger").ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["No implementation for ",". Maybe it should have been put to the deprecated list?"])),e.type).sendLogs("missing-job-implementation"),yield i.deletePersistedJob(e.jobId),null;D=yield x()}var $=D;x&&o("WALogger").LOG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Running deprecated job ",""])),e.type);var P=(r=e.stepFirstStartTime)!=null?r:o("WATimeUtils").unixTime();if(e.stepFirstStartTime=P,e.stepUnexpectedErrorCount=e.stepUnexpectedErrorCount||0,e.backedOffCount=e.backedOffCount||0,e.step===q){var N=e.waitUntil,O=o("WATimeUtils").secondsUntil(P);return N!=null&&o("WATimeUtils").isInFuture(N)&&O>0&&(o("WALogger").LOG(f||(f=babelHelpers.taggedTemplateLiteralLoose(["",": skew detected, adjusting accordingly"])),V(e)),N=o("WATimeUtils").castToUnixTime(N-O),o("WATimeUtils").isInFuture(N)&&(e.stepFirstStartTime=o("WATimeUtils").castToUnixTime(P-O),e.waitUntil=N,yield this.accessors.updatePersistedJob(e))),(N==null||!o("WATimeUtils").isInFuture(N))&&(o("WALogger").LOG(g||(g=babelHelpers.taggedTemplateLiteralLoose(["",": removing completed, expired job from db"])),V(e)),yield i.deletePersistedJob(e.jobId)),l.delete(e.jobId),e.current}var B=e.step!==W?D.find(function(t){return t.stepName===e.step}):D[0];if(!B)return o("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["No implementation for ",".",""])),e.type,e.step).sendLogs("missing-job-step"),yield i.deletePersistedJob(e.jobId),null;e.step=B.stepName;var U=function(){var r=e.waitUntil,i=(M||(M=n("Promise"))).resolve();if(r!=null){var l=o("WATimeUtils").futureUnixTime(o("WATimeUtils").DAY_SECONDS);r>l?(o("WALogger").LOG(y||(y=babelHelpers.taggedTemplateLiteralLoose(["",": trim wait from "," to ",""])),G(e),r,l),e.waitUntil=l,i=a.accessors.updatePersistedJob(e).then(function(){return o("WATimeUtils").delayUntil(l)})):(o("WALogger").LOG(C||(C=babelHelpers.taggedTemplateLiteralLoose(["",": delaying until ",""])),G(e),r),i=o("WATimeUtils").delayUntil(r))}return i.then(function(){var r=function(){return e.waitUntil=null,o("WATimeUtils").happenedWithin(P,o("WATimeUtils").DAY_SECONDS)||e.stepHardStartCountAfterTimeout++,a.accessors.updatePersistedJob(e)};return a.$5(e,$,t,r).catch(function(t){if(t instanceof A)return o("WALogger").LOG(b||(b=babelHelpers.taggedTemplateLiteralLoose(["",": requires page"])),G(e)),e.stepHardStartCountAfterTimeout>0&&(--e.stepHardStartCountAfterTimeout,a.accessors.updatePersistedJob(e)),new(M||(M=n("Promise")))(function(){});if(t instanceof F){o("WALogger").LOG(v||(v=babelHelpers.taggedTemplateLiteralLoose(["",": RetryOnBackoff"])),G(e));var r=o("WAPromiseBackoffs").getDelay(++e.backedOffCount,t.backoffOptions);return e.waitUntil=o("WATimeUtils").futureUnixTime(Math.ceil(r/1e3)),e.stepHardStartCountAfterTimeout>0&&--e.stepHardStartCountAfterTimeout,a.accessors.updatePersistedJob(e).then(U)}else if(e.stepUnexpectedErrorCount<w)return o("WALogger").WARN(S||(S=babelHelpers.taggedTemplateLiteralLoose(["",": Unhandled exception. Tried "," times"])),G(e),e.stepUnexpectedErrorCount),o("WALogger").WARN(R||(R=babelHelpers.taggedTemplateLiteralLoose(["",": Unhandled exception: ",""])),G(e),t),e.stepUnexpectedErrorCount++,a.accessors.updatePersistedJob(e).then(U);throw t})})},H=U(),z=H.then((function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){o("WALogger").LOG(L||(L=babelHelpers.taggedTemplateLiteralLoose(["",": finished job"])),G(e));var n=null;try{n=c(e.jobId,e.type,e.original,t)}catch(t){o("WALogger").ERROR(E||(E=babelHelpers.taggedTemplateLiteralLoose(["onJobFinished for "," threw exception ",""])),e.type,t).sendLogs("onJobFinished-threw")}n!=null&&n>0?(e.waitUntil=o("WATimeUtils").futureUnixTime(Math.ceil(n/1e3)),e.step=q,e.current=t,e.stepFirstStartTime=o("WATimeUtils").unixTime(),yield a.accessors.updatePersistedJob(e)):(yield i.deletePersistedJob(e.jobId),l.delete(e.jobId))});return function(e){return t.apply(this,arguments)}})(),(function(){var r=n("asyncToGeneratorRuntime").asyncToGenerator(function*(n){o("WALogger").ERROR(k||(k=babelHelpers.taggedTemplateLiteralLoose([""," failed with error ",""])),e.type,n).sendLogs("job-threw-exception-"+e.type);var r=$.find(function(t){return t.stepName===e.step});if(!r)o("WALogger").ERROR(I||(I=babelHelpers.taggedTemplateLiteralLoose(["",": "," step not found"])),e.type,e.step);else{var a=r.info(e.current,e.original,j(e,t));a.stopRetryIf!=null&&(yield a.stopRetryIf.onStopRetry(e.current,e.original,j(e,t)))}yield i.deletePersistedJob(e.jobId),l.delete(e.jobId)});return function(e){return r.apply(this,arguments)}})());try{d(e.jobId,e.type,e.original)}catch(t){o("WALogger").ERROR(T||(T=babelHelpers.taggedTemplateLiteralLoose(["onJobStarted for "," threw exception ",""])),e.type,t).sendLogs("onJobStarted-threw")}return z.then(function(){return H})});function t(t,n){return e.apply(this,arguments)}return t})(),r.addPersistedJobImplementation=function(t,n){var e=this.deprecatedJobs,r=this.implementationLoaders;if(r.has(t)){o("WALogger").ERROR(D||(D=babelHelpers.taggedTemplateLiteralLoose(["addPersistedJobImplementation called twice for ",""])),t).sendLogs("repeat-job-loader");return}e&&e[t],r.set(t,n)},r.fireAndForget=function(t){var e=this;this.accessors.maybeCreateJob(t).then(function(t){var n=t.id;return e.loadAndRunJobFromId(n)})},r.waitUntilPersisted=function(t){var e=this;return this.accessors.maybeCreateJob(t).then(function(t){var n=t.id;e.loadAndRunJobFromId(n)})},r.waitUntilCompleted=function(t){var e=this;return this.accessors.maybeCreateJob(t).then(function(t){var n=t.id;return e.loadAndRunJobFromId(n)})},r.fireAndForgetNonPersisted=function(t){o("WALogger").LOG(x||(x=babelHelpers.taggedTemplateLiteralLoose(["fireAndForgetNonPersisted not implemented in PersistedJobManager"])))},r.waitUntilCompletedNonPersisted=function(t){return(M||(M=n("Promise"))).resolve(function(){return o("WALogger").LOG($||($=babelHelpers.taggedTemplateLiteralLoose(["waitUntilCompletedNonPersisted not implemented in PersistedJobManager"])))})},t})();function V(e){return"Job["+e.jobId+"] ("+e.type+")"}function H(e){return"[Job "+e.type+"] "}function G(e){return"Job["+e.jobId+"] ("+e.type+"."+e.step+")"}function z(e,t,n){e==="unsatisfiable"?o("WALogger").LOG(P||(P=babelHelpers.taggedTemplateLiteralLoose([""," halting because of ",""])),G(n),t):e==="unsatisfied"&&o("WALogger").LOG(N||(N=babelHelpers.taggedTemplateLiteralLoose([""," waiting on ",""])),G(n),t)}function j(e,t){return t===void 0&&(t=!1),{jobStartTime:e.startTime,afterCrash:t,interruptJob:K}}function K(e){return new B(e)}l.RequiresPage=A,l.RetryOnBackoff=F,l.NonRetryableError=O,l.InterruptJob=B,l.UNSTARTED_JOB=W,l.FINISHED_JOB=q,l.PersistedJobManager=U}),98);
__d("WAPromiseEach",["asyncToGeneratorRuntime"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){for(var n=[],r=0;r<e.length;r++)n.push(yield t(e[r],r));return n});return function(n,r){return e.apply(this,arguments)}})();i.promiseEach=e}),66);
__d("WAPromiseMap",["Promise"],(function(t,n,r,o,a,i){"use strict";var e;function l(t,r){return(e||(e=n("Promise"))).resolve(t).then(function(t){return(e||(e=n("Promise"))).all(t.map(function(e,t){return r(e,t)}))})}i.promiseMap=l}),66);
__d("WAPromiseReduce",["asyncToGeneratorRuntime"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){for(var r=n,o=e.length,a=0;a<o;a++)r=yield t(r,e[a],a);return r});return function(n,r,o){return e.apply(this,arguments)}})();i.promiseReduce=e}),66);
__d("WAQplUploader",["WALogger","WAPromiseDelays","WAPromiseRetryLoop","WAQplTypes","asyncToGeneratorRuntime","getErrorSafe"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m={minTimeout:1e3,maxTimeout:1e4,retries:5,type:"exponential"},p=100,_={MAX_COUNT:4,MIN_DELAY:1*1e3*60,MAX_DELAY:15*1e3*60},f=300,g=1440*60,h,y,C;function b(e,t){return v.apply(this,arguments)}function v(){return v=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n,r,a,i,l;h=t.healthLogger,y=t.storageApi,!C&&(C={sendEvents:e.sendEvents,isQplEnabled:e.isQplEnabled,startDelayInMs:1e3*((n=e.startDelayInSeconds)!=null?n:f),intervalInMs:1e3*((r=e.intervalInSeconds)!=null?r:g),minRetryDelayInMs:1e3*((a=e.minRetryDelayInSeconds)!=null?a:_.MIN_DELAY),maxRetryDelayInMs:1e3*((i=e.maxRetryDelayInSeconds)!=null?i:_.MAX_DELAY),maxRetryAttemptsCount:(l=e.maxRetryAttemptsCount)!=null?l:_.MAX_COUNT},yield o("WAPromiseDelays").delayMs(C.startDelayInMs),yield k(),R())}),v.apply(this,arguments)}function S(){return k()}function R(){setTimeout(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield k(),R()}),C.intervalInMs)}function L(){return E.apply(this,arguments)}function E(){return E=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=C.minRetryDelayInMs+Math.floor(Math.random()*(C.maxRetryDelayInMs-C.minRetryDelayInMs));yield o("WAPromiseDelays").delayMs(e)}),E.apply(this,arguments)}function k(e){return I.apply(this,arguments)}function I(){return I=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n;if(t===void 0&&(t=0),!!((n=C)!=null&&n.isQplEnabled()))try{for(var a=yield y.getRowCount(),i=0;i<a;){var l=yield y.getFromBottom(p);yield T(l);var s=l[0].id||0,u=l[l.length-1].id||0;yield y.deleteRange(s,u),i+=l.length}}catch(n){if(t<C.maxRetryAttemptsCount)yield L(),k(t+1);else{var c;o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["QPL Uploader, error during upload session, error: ",""])),n).verbose().sendLogs("QPL Uploader upload session failed"),(c=h)==null||c.errorUploadingChunk(r("getErrorSafe")(n).message)}}}),I.apply(this,arguments)}function T(e){return D.apply(this,arguments)}function D(){return D=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=new(o("WAPromiseRetryLoop")).PromiseRetryLoop({name:"QplUploadChunk",timer:{algo:{type:m.type,first:m.minTimeout},max:m.maxTimeout},code:function(n){var t=e[0].id,r=e[e.length-1].id;return o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["QPL Uploader, sending rows ","-",", count ",""])),t,r,e.length),C.sendEvents(e).then(function(){o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["QPL Uploader, sending rows ","-",": done"])),t,r),n()}).catch(function(e){if(o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["QPL Uploader, sending rows ","-",": error: ",""])),t,r,e),e instanceof o("WAQplTypes").QplServerStatusCodeError)switch(e.statusCode){case 500:o("WALogger").WARN(d||(d=babelHelpers.taggedTemplateLiteralLoose(["QPL Uploader uploadChunk, retriable error: ",""])),e.message);break;default:n();break}throw e})}});t.start(),yield t.promise()}),D.apply(this,arguments)}l.start=b,l.forceQplUpload=S}),98);
__d("WASemaphore",["Promise","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(e){e===void 0&&(e=1),this.$1=0,this.$3=[],this.$2=e}var o=t.prototype;return o.acquire=function(){var t=this;return new(e||(e=n("Promise")))(function(e,n){t.$4(e,n)})},o.availablePermits=function(){return this.$2-this.$1},o.$5=function(){this.$1--,this.$6()},o.$4=function(t,n){var e=this;if(this.$1<this.$2){this.$1++;var o=!1;t({release:function(){if(o)throw r("err")("Permit has already been released");o=!0,e.$5()}})}else this.$7(t,n)},o.$7=function(t,n){this.$3.push([t,n])},o.$6=function(){if(this.$3.length!==0){var e=this.$3.shift(),t=e[0],n=e[1];this.$4(t,n)}},t})();l.Semaphore=s}),98);
__d("WASmaxOutChatstateInternalTestMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.testConfig,n=o("WASmaxJsx").smax("smax$any",null,o("WASmaxJsx").smax("test",{config:o("WASmaxAttrs").OPTIONAL(o("WAWap").CUSTOM_STRING,t)}));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeInternalTestMixin=s}),98);
__d("WASmaxMixinGroupExhaustiveError",[],(function(t,n,r,o,a,i){"use strict";var e=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.name="SmaxMixinGroupExhaustiveError",babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.SmaxMixinGroupExhaustiveError=e}),66);
__d("WASmaxOutChatstateComposingMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(e){var t=e.hasComposingMediaAudio,n=o("WASmaxJsx").smax("chatstate",null,o("WASmaxJsx").smax("composing",{media:o("WASmaxAttrs").OPTIONAL_LITERAL("audio",t)}));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeComposingMixin=s}),98);
__d("WASmaxOutChatstatePausedMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("chatstate",null,o("WASmaxJsx").smax("paused",null));return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergePausedMixin=s}),98);
__d("WASmaxOutChatstateStateTypes",["WASmaxMixinGroupExhaustiveError","WASmaxOutChatstateComposingMixin","WASmaxOutChatstatePausedMixin"],(function(t,n,r,o,a,i,l){function e(e,t){if(t.composing)return o("WASmaxOutChatstateComposingMixin").mergeComposingMixin(e,t.composing);if(t.isPaused)return o("WASmaxOutChatstatePausedMixin").mergePausedMixin(e);throw new(o("WASmaxMixinGroupExhaustiveError")).SmaxMixinGroupExhaustiveError}l.mergeStateTypes=e}),98);
__d("WASmaxOutChatstateClientNotificationRequest",["WASmaxJsx","WASmaxMixins","WASmaxOutChatstateInternalTestMixin","WASmaxOutChatstateStateTypes","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.chatstateTo,n=e.internalTestMixinArgs,r=e.stateTypesArgs,a=o("WASmaxOutChatstateStateTypes").mergeStateTypes(o("WASmaxMixins").optionalMerge(o("WASmaxOutChatstateInternalTestMixin").mergeInternalTestMixin,o("WASmaxJsx").smax("chatstate",{to:o("WAWap").JID(t)}),n),r);return a}l.makeClientNotificationRequest=e}),98);
__d("WASmaxChatstateClientNotificationRPC",["WAComms","WASmaxOutChatstateClientNotificationRequest","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){function e(e){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=o("WASmaxOutChatstateClientNotificationRequest").makeClientNotificationRequest(e);yield o("WAComms").castSmaxStanza(t)}),s.apply(this,arguments)}l.sendClientNotificationRPC=e}),98);
__d("WASendChatStateProtocol",["WALogger","WASmaxChatstateClientNotificationRPC"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["sendChatStateProtocol Sending "," to ",""])),n,t);var r;return n==="idle"?r={isPaused:!0}:r={composing:{hasComposingMediaAudio:n==="recording_audio"}},o("WASmaxChatstateClientNotificationRPC").sendClientNotificationRPC({chatstateTo:t,stateTypesArgs:r})}l.sendChatStateProtocol=s}),98);
__d("WASmaxInPassiveModeActiveIQResponseSuccess",["WAResultOrError","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"active");if(!r.success)return r;var a=o("WASmaxParseReference").attrStringFromReference(t,["id"]);if(!a.success)return a;var i=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"id",a.value);if(!i.success)return i;var l=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"type","result");if(!l.success)return l;var s=o("WASmaxParseJid").literalJid(o("WASmaxParseJid").attrDomainJid,e,"from","s.whatsapp.net");return s.success?o("WAResultOrError").makeResult({type:l.value,from:s.value}):s}l.parseActiveIQResponseSuccess=e}),98);
__d("WASmaxOutPassiveModeActiveIQRequest",["WASmaxJsx","WAWap"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("iq",{id:o("WAWap").generateId(),type:"set",xmlns:"passive",to:o("WAWap").S_WHATSAPP_NET},o("WASmaxJsx").smax("active",null));return e}l.makeActiveIQRequest=e}),98);
__d("WASmaxPassiveModeActiveIQRPC",["WAComms","WASmaxInPassiveModeActiveIQResponseSuccess","WASmaxOutPassiveModeActiveIQRequest","WASmaxParsingFailure","WASmaxRpcUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){function e(e){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=o("WASmaxOutPassiveModeActiveIQRequest").makeActiveIQRequest(),n=yield o("WAComms").sendSmaxStanza(t,e),r=o("WASmaxInPassiveModeActiveIQResponseSuccess").parseActiveIQResponseSuccess(n,t);if(r.success)return{name:"ActiveIQResponseSuccess",value:r.value};throw new(o("WASmaxParsingFailure")).SmaxParsingFailure(o("WASmaxRpcUtils").errorMessageRpcParsing("ActiveIQ",{Success:r}))}),s.apply(this,arguments)}l.sendActiveIQRPC=e}),98);
__d("WASmaxInPassiveModePassiveIQResponseSuccess",["WAResultOrError","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"passive");if(!r.success)return r;var a=o("WASmaxParseReference").attrStringFromReference(t,["id"]);if(!a.success)return a;var i=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"id",a.value);if(!i.success)return i;var l=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"type","result");if(!l.success)return l;var s=o("WASmaxParseJid").literalJid(o("WASmaxParseJid").attrDomainJid,e,"from","s.whatsapp.net");return s.success?o("WAResultOrError").makeResult({type:l.value,from:s.value}):s}l.parsePassiveIQResponseSuccess=e}),98);
__d("WASmaxOutPassiveModePassiveIQRequest",["WASmaxJsx","WAWap"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("iq",{id:o("WAWap").generateId(),type:"set",xmlns:"passive",to:o("WAWap").S_WHATSAPP_NET},o("WASmaxJsx").smax("passive",null));return e}l.makePassiveIQRequest=e}),98);
__d("WASmaxPassiveModePassiveIQRPC",["WAComms","WASmaxInPassiveModePassiveIQResponseSuccess","WASmaxOutPassiveModePassiveIQRequest","WASmaxParsingFailure","WASmaxRpcUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){function e(e){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=o("WASmaxOutPassiveModePassiveIQRequest").makePassiveIQRequest(),n=yield o("WAComms").sendSmaxStanza(t,e),r=o("WASmaxInPassiveModePassiveIQResponseSuccess").parsePassiveIQResponseSuccess(n,t);if(r.success)return{name:"PassiveIQResponseSuccess",value:r.value};throw new(o("WASmaxParsingFailure")).SmaxParsingFailure(o("WASmaxRpcUtils").errorMessageRpcParsing("PassiveIQ",{Success:r}))}),s.apply(this,arguments)}l.sendPassiveIQRPC=e}),98);
__d("WASendPassiveModeProtocol",["WALogger","WASmaxPassiveModeActiveIQRPC","WASmaxPassiveModePassiveIQRPC","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){t==="active"?yield o("WASmaxPassiveModeActiveIQRPC").sendActiveIQRPC():yield o("WASmaxPassiveModePassiveIQRPC").sendPassiveIQRPC(),o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["sendPassiveModeIq: passive mode set to '","'"])),t)}),u.apply(this,arguments)}l.sendPassiveModeProtocol=s}),98);
__d("WASmaxInBizAccessTokenIQErrorResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseReference").attrStringFromReference(t,["id"]);if(!r.success)return r;var a=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"id",r.value);if(!a.success)return a;var i=o("WASmaxParseReference").attrStringFromReference(t,["to"]);if(!i.success)return i;var l=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"from",i.value);if(!l.success)return l;var s=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"type","error");return s.success?o("WAResultOrError").makeResult({type:s.value}):s}l.parseIQErrorResponseMixin=e}),98);
__d("WASmaxInBizAccessTokenHackBaseIQErrorResponseMixin",["WAResultOrError","WASmaxInBizAccessTokenIQErrorResponseMixin","WASmaxParseJid","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").optional(o("WASmaxParseJid").attrUserJid,e,"to");if(!r.success)return r;var a=o("WASmaxInBizAccessTokenIQErrorResponseMixin").parseIQErrorResponseMixin(e,t);return a.success?o("WAResultOrError").makeResult(babelHelpers.extends({to:r.value},a.value)):a}l.parseHackBaseIQErrorResponseMixin=e}),98);
__d("WASmaxInBizAccessTokenIQErrorBadRequestMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","bad-request");if(!n.success)return n;var r=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,e,"code",400);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorBadRequestMixin=e}),98);
__d("WASmaxInBizAccessTokenIQErrorForbiddenMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","forbidden");if(!n.success)return n;var r=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,e,"code",403);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorForbiddenMixin=e}),98);
__d("WASmaxInBizAccessTokenIQErrorInternalServerErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","internal-server-error");if(!n.success)return n;var r=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,e,"code",500);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorInternalServerErrorMixin=e}),98);
__d("WASmaxInBizAccessTokenIQErrorServiceUnavailableMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","service-unavailable");if(!n.success)return n;var r=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,e,"code",503);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorServiceUnavailableMixin=e}),98);
__d("WASmaxInBizAccessTokenRequestSilentNonceErrors",["WAResultOrError","WASmaxInBizAccessTokenIQErrorBadRequestMixin","WASmaxInBizAccessTokenIQErrorForbiddenMixin","WASmaxInBizAccessTokenIQErrorInternalServerErrorMixin","WASmaxInBizAccessTokenIQErrorServiceUnavailableMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxInBizAccessTokenIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(e);if(t.success)return o("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:t.value});var n=o("WASmaxInBizAccessTokenIQErrorForbiddenMixin").parseIQErrorForbiddenMixin(e);if(n.success)return o("WAResultOrError").makeResult({name:"IQErrorForbidden",value:n.value});var r=o("WASmaxInBizAccessTokenIQErrorInternalServerErrorMixin").parseIQErrorInternalServerErrorMixin(e);if(r.success)return o("WAResultOrError").makeResult({name:"IQErrorInternalServerError",value:r.value});var a=o("WASmaxInBizAccessTokenIQErrorServiceUnavailableMixin").parseIQErrorServiceUnavailableMixin(e);return a.success?o("WAResultOrError").makeResult({name:"IQErrorServiceUnavailable",value:a.value}):o("WASmaxParseUtils").errorMixinDisjunction(e,["IQErrorBadRequest","IQErrorForbidden","IQErrorInternalServerError","IQErrorServiceUnavailable"],[t,n,r,a])}l.parseRequestSilentNonceErrors=e}),98);
__d("WASmaxInBizAccessTokenRequestSilentNonceResponseError",["WAResultOrError","WASmaxInBizAccessTokenHackBaseIQErrorResponseMixin","WASmaxInBizAccessTokenRequestSilentNonceErrors","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"error");if(!r.success)return r;var a=o("WASmaxInBizAccessTokenHackBaseIQErrorResponseMixin").parseHackBaseIQErrorResponseMixin(e,t);if(!a.success)return a;var i=o("WASmaxInBizAccessTokenRequestSilentNonceErrors").parseRequestSilentNonceErrors(r.value);return i.success?o("WAResultOrError").makeResult(babelHelpers.extends({},a.value,{errorRequestSilentNonceErrors:i.value})):i}l.parseRequestSilentNonceResponseError=e}),98);
__d("WASmaxInBizAccessTokenIQResultResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseReference").attrStringFromReference(t,["id"]);if(!r.success)return r;var a=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"id",r.value);if(!a.success)return a;var i=o("WASmaxParseReference").attrStringFromReference(t,["to"]);if(!i.success)return i;var l=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"from",i.value);if(!l.success)return l;var s=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"type","result");return s.success?o("WAResultOrError").makeResult({type:s.value}):s}l.parseIQResultResponseMixin=e}),98);
__d("WASmaxInBizAccessTokenHackBaseIQResultResponseMixin",["WAResultOrError","WASmaxInBizAccessTokenIQResultResponseMixin","WASmaxParseJid","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").optional(o("WASmaxParseJid").attrUserJid,e,"to");if(!r.success)return r;var a=o("WASmaxInBizAccessTokenIQResultResponseMixin").parseIQResultResponseMixin(e,t);return a.success?o("WAResultOrError").makeResult(babelHelpers.extends({to:r.value},a.value)):a}l.parseHackBaseIQResultResponseMixin=e}),98);
__d("WASmaxInBizAccessTokenRequestSilentNonceResponseRecoveryRequired",["WAResultOrError","WASmaxInBizAccessTokenHackBaseIQResultResponseMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"result");if(!r.success)return r;var a=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,r.value,"status","RecoveryRequired");if(!a.success)return a;var i=o("WASmaxParseUtils").attrString(r.value,"email");if(!i.success)return i;var l=o("WASmaxInBizAccessTokenHackBaseIQResultResponseMixin").parseHackBaseIQResultResponseMixin(e,t);return l.success?o("WAResultOrError").makeResult(babelHelpers.extends({resultStatus:a.value,resultEmail:i.value},l.value)):l}l.parseRequestSilentNonceResponseRecoveryRequired=e}),98);
__d("WASmaxInBizAccessTokenRequestSilentNonceResponseSuccess",["WAResultOrError","WASmaxInBizAccessTokenHackBaseIQResultResponseMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"result");if(!r.success)return r;var a=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,r.value,"status","Success");if(!a.success)return a;var i=o("WASmaxInBizAccessTokenHackBaseIQResultResponseMixin").parseHackBaseIQResultResponseMixin(e,t);return i.success?o("WAResultOrError").makeResult(babelHelpers.extends({resultStatus:a.value},i.value)):i}l.parseRequestSilentNonceResponseSuccess=e}),98);
__d("WASmaxOutBizAccessTokenBaseIQGetRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("iq",{id:o("WAWap").generateId(),type:"get"});return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeBaseIQGetRequestMixin=s}),98);
__d("WASmaxOutBizAccessTokenHackBaseIQGetRequestMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WASmaxOutBizAccessTokenBaseIQGetRequestMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.iqFrom,n=o("WASmaxOutBizAccessTokenBaseIQGetRequestMixin").mergeBaseIQGetRequestMixin(o("WASmaxJsx").smax("iq",{from:o("WASmaxAttrs").OPTIONAL(o("WAWap").USER_JID,t),to:o("WAWap").S_WHATSAPP_NET}));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeHackBaseIQGetRequestMixin=s}),98);
__d("WASmaxOutBizAccessTokenRequestSilentNonceRequest",["WASmaxJsx","WASmaxOutBizAccessTokenHackBaseIQGetRequestMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxOutBizAccessTokenHackBaseIQGetRequestMixin").mergeHackBaseIQGetRequestMixin(o("WASmaxJsx").smax("iq",{xmlns:"fb:thrift_iq",smax_id:o("WAWap").INT(118)}),e);return t}l.makeRequestSilentNonceRequest=e}),98);
__d("WASmaxBizAccessTokenRequestSilentNonceRPC",["WAComms","WASmaxInBizAccessTokenRequestSilentNonceResponseError","WASmaxInBizAccessTokenRequestSilentNonceResponseRecoveryRequired","WASmaxInBizAccessTokenRequestSilentNonceResponseSuccess","WASmaxOutBizAccessTokenRequestSilentNonceRequest","WASmaxParsingFailure","WASmaxRpcUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){function e(e,t){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=o("WASmaxOutBizAccessTokenRequestSilentNonceRequest").makeRequestSilentNonceRequest(e),r=yield o("WAComms").sendSmaxStanza(n,t),a=o("WASmaxInBizAccessTokenRequestSilentNonceResponseSuccess").parseRequestSilentNonceResponseSuccess(r,n);if(a.success)return{name:"RequestSilentNonceResponseSuccess",value:a.value};var i=o("WASmaxInBizAccessTokenRequestSilentNonceResponseRecoveryRequired").parseRequestSilentNonceResponseRecoveryRequired(r,n);if(i.success)return{name:"RequestSilentNonceResponseRecoveryRequired",value:i.value};var l=o("WASmaxInBizAccessTokenRequestSilentNonceResponseError").parseRequestSilentNonceResponseError(r,n);if(l.success)return{name:"RequestSilentNonceResponseError",value:l.value};throw new(o("WASmaxParsingFailure")).SmaxParsingFailure(o("WASmaxRpcUtils").errorMessageRpcParsing("RequestSilentNonce",{Success:a,RecoveryRequired:i,Error:l}))}),s.apply(this,arguments)}l.sendRequestSilentNonceRPC=e}),98);
__d("WASmaxInBizCtwaAdAccountIQErrorBadRequestMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","bad-request");if(!n.success)return n;var r=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,e,"code",400);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorBadRequestMixin=e}),98);
__d("WASmaxInBizCtwaAdAccountIQErrorForbiddenMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","forbidden");if(!n.success)return n;var r=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,e,"code",403);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorForbiddenMixin=e}),98);
__d("WASmaxInBizCtwaAdAccountIQErrorInternalServerErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","internal-server-error");if(!n.success)return n;var r=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,e,"code",500);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorInternalServerErrorMixin=e}),98);
__d("WASmaxInBizCtwaAdAccountIQErrorServiceUnavailableMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","service-unavailable");if(!n.success)return n;var r=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,e,"code",503);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorServiceUnavailableMixin=e}),98);
__d("WASmaxInBizCtwaAdAccountCommonAdAccountErrors",["WAResultOrError","WASmaxInBizCtwaAdAccountIQErrorBadRequestMixin","WASmaxInBizCtwaAdAccountIQErrorForbiddenMixin","WASmaxInBizCtwaAdAccountIQErrorInternalServerErrorMixin","WASmaxInBizCtwaAdAccountIQErrorServiceUnavailableMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxInBizCtwaAdAccountIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(e);if(t.success)return o("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:t.value});var n=o("WASmaxInBizCtwaAdAccountIQErrorForbiddenMixin").parseIQErrorForbiddenMixin(e);if(n.success)return o("WAResultOrError").makeResult({name:"IQErrorForbidden",value:n.value});var r=o("WASmaxInBizCtwaAdAccountIQErrorInternalServerErrorMixin").parseIQErrorInternalServerErrorMixin(e);if(r.success)return o("WAResultOrError").makeResult({name:"IQErrorInternalServerError",value:r.value});var a=o("WASmaxInBizCtwaAdAccountIQErrorServiceUnavailableMixin").parseIQErrorServiceUnavailableMixin(e);return a.success?o("WAResultOrError").makeResult({name:"IQErrorServiceUnavailable",value:a.value}):o("WASmaxParseUtils").errorMixinDisjunction(e,["IQErrorBadRequest","IQErrorForbidden","IQErrorInternalServerError","IQErrorServiceUnavailable"],[t,n,r,a])}l.parseCommonAdAccountErrors=e}),98);
__d("WASmaxInBizCtwaAdAccountIQErrorResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseReference").attrStringFromReference(t,["id"]);if(!r.success)return r;var a=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"id",r.value);if(!a.success)return a;var i=o("WASmaxParseReference").attrStringFromReference(t,["to"]);if(!i.success)return i;var l=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"from",i.value);if(!l.success)return l;var s=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"type","error");return s.success?o("WAResultOrError").makeResult({type:s.value}):s}l.parseIQErrorResponseMixin=e}),98);
__d("WASmaxInBizCtwaAdAccountHackBaseIQErrorResponseMixin",["WAResultOrError","WASmaxInBizCtwaAdAccountIQErrorResponseMixin","WASmaxParseJid","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").optional(o("WASmaxParseJid").attrUserJid,e,"to");if(!r.success)return r;var a=o("WASmaxInBizCtwaAdAccountIQErrorResponseMixin").parseIQErrorResponseMixin(e,t);return a.success?o("WAResultOrError").makeResult(babelHelpers.extends({to:r.value},a.value)):a}l.parseHackBaseIQErrorResponseMixin=e}),98);
__d("WASmaxInBizCtwaAdAccountGetAccessTokenAndSessionCookiesResponseError",["WAResultOrError","WASmaxInBizCtwaAdAccountCommonAdAccountErrors","WASmaxInBizCtwaAdAccountHackBaseIQErrorResponseMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"error");if(!r.success)return r;var a=o("WASmaxInBizCtwaAdAccountHackBaseIQErrorResponseMixin").parseHackBaseIQErrorResponseMixin(e,t);if(!a.success)return a;var i=o("WASmaxInBizCtwaAdAccountCommonAdAccountErrors").parseCommonAdAccountErrors(r.value);return i.success?o("WAResultOrError").makeResult(babelHelpers.extends({},a.value,{errorCommonAdAccountErrors:i.value})):i}l.parseGetAccessTokenAndSessionCookiesResponseError=e}),98);
__d("WASmaxInBizCtwaAdAccountGetAccessTokenAndSessionCookiesResponseIncorrectNonce",["WAResultOrError","WASmaxInBizCtwaAdAccountHackBaseIQErrorResponseMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"error");if(!r.success)return r;var a=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,r.value,"code","432");if(!a.success)return a;var i=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,r.value,"text","INCORRECT_NONCE");if(!i.success)return i;var l=o("WASmaxInBizCtwaAdAccountHackBaseIQErrorResponseMixin").parseHackBaseIQErrorResponseMixin(e,t);return l.success?o("WAResultOrError").makeResult(babelHelpers.extends({errorCode:a.value,errorText:i.value},l.value)):l}l.parseGetAccessTokenAndSessionCookiesResponseIncorrectNonce=e}),98);
__d("WASmaxInBizCtwaAdAccountEnums",[],(function(t,n,r,o,a,i){var e={allow:"allow",deny:"deny",skip:"skip"},l={Fail:"Fail",Success:"Success"},s={false:"false",true:"true"},u={Ineligible:"Ineligible",RecoveryRequired:"RecoveryRequired"},c={Strong:"Strong",Weak:"Weak"};i.ENUM_ALLOW_DENY_SKIP=e,i.ENUM_FAIL_SUCCESS=l,i.ENUM_FALSE_TRUE=s,i.ENUM_INELIGIBLE_RECOVERYREQUIRED=u,i.ENUM_STRONG_WEAK=c}),66);
__d("WASmaxInBizCtwaAdAccountIQResultResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseReference").attrStringFromReference(t,["id"]);if(!r.success)return r;var a=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"id",r.value);if(!a.success)return a;var i=o("WASmaxParseReference").attrStringFromReference(t,["to"]);if(!i.success)return i;var l=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"from",i.value);if(!l.success)return l;var s=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"type","result");return s.success?o("WAResultOrError").makeResult({type:s.value}):s}l.parseIQResultResponseMixin=e}),98);
__d("WASmaxInBizCtwaAdAccountHackBaseIQResultResponseMixin",["WAResultOrError","WASmaxInBizCtwaAdAccountIQResultResponseMixin","WASmaxParseJid","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").optional(o("WASmaxParseJid").attrUserJid,e,"to");if(!r.success)return r;var a=o("WASmaxInBizCtwaAdAccountIQResultResponseMixin").parseIQResultResponseMixin(e,t);return a.success?o("WAResultOrError").makeResult(babelHelpers.extends({to:r.value},a.value)):a}l.parseHackBaseIQResultResponseMixin=e}),98);
__d("WASmaxInBizCtwaAdAccountGetAccessTokenAndSessionCookiesResponseSuccess",["WAResultOrError","WASmaxInBizCtwaAdAccountEnums","WASmaxInBizCtwaAdAccountHackBaseIQResultResponseMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"token_type");if(!t.success)return t;var n=o("WASmaxParseUtils").contentStringEnum(e,o("WASmaxInBizCtwaAdAccountEnums").ENUM_STRONG_WEAK);return n.success?o("WAResultOrError").makeResult({elementValue:n.value}):n}function s(t,n){var r=o("WASmaxParseUtils").assertTag(t,"iq");if(!r.success)return r;var a=o("WASmaxParseUtils").flattenedChildWithTag(t,"access_token");if(!a.success)return a;var i=o("WASmaxParseUtils").flattenedChildWithTag(t,"session_cookies");if(!i.success)return i;var l=o("WASmaxParseUtils").flattenedChildWithTag(t,"business_person");if(!l.success)return l;var s=o("WASmaxParseUtils").optionalChildWithTag(t,"token_type",e);if(!s.success)return s;var u=o("WASmaxParseUtils").contentString(a.value);if(!u.success)return u;var c=o("WASmaxParseUtils").contentString(i.value);if(!c.success)return c;var d=o("WASmaxParseUtils").attrString(l.value,"id");if(!d.success)return d;var m=o("WASmaxInBizCtwaAdAccountHackBaseIQResultResponseMixin").parseHackBaseIQResultResponseMixin(t,n);return m.success?o("WAResultOrError").makeResult(babelHelpers.extends({accessTokenElementValue:u.value,sessionCookiesElementValue:c.value,businessPersonId:d.value},m.value,{tokenType:s.value})):m}l.parseGetAccessTokenAndSessionCookiesResponseSuccessTokenType=e,l.parseGetAccessTokenAndSessionCookiesResponseSuccess=s}),98);
__d("WASmaxInBizCtwaAdAccountGetAccessTokenAndSessionCookiesResponseTooManyAttempts",["WAResultOrError","WASmaxInBizCtwaAdAccountHackBaseIQErrorResponseMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"error");if(!r.success)return r;var a=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,r.value,"code","431");if(!a.success)return a;var i=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,r.value,"text","TOO_MANY_ATTEMPTS");if(!i.success)return i;var l=o("WASmaxInBizCtwaAdAccountHackBaseIQErrorResponseMixin").parseHackBaseIQErrorResponseMixin(e,t);return l.success?o("WAResultOrError").makeResult(babelHelpers.extends({errorCode:a.value,errorText:i.value},l.value)):l}l.parseGetAccessTokenAndSessionCookiesResponseTooManyAttempts=e}),98);
__d("WASmaxOutBizCtwaAdAccountBaseIQGetRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("iq",{id:o("WAWap").generateId(),type:"get"});return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeBaseIQGetRequestMixin=s}),98);
__d("WASmaxOutBizCtwaAdAccountHackBaseIQGetRequestMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WASmaxOutBizCtwaAdAccountBaseIQGetRequestMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.iqFrom,n=o("WASmaxOutBizCtwaAdAccountBaseIQGetRequestMixin").mergeBaseIQGetRequestMixin(o("WASmaxJsx").smax("iq",{from:o("WASmaxAttrs").OPTIONAL(o("WAWap").USER_JID,t),to:o("WAWap").S_WHATSAPP_NET}));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeHackBaseIQGetRequestMixin=s}),98);
__d("WASmaxOutBizCtwaAdAccountGetAccessTokenAndSessionCookiesRequest",["WASmaxJsx","WASmaxOutBizCtwaAdAccountHackBaseIQGetRequestMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.codeElementValue,n=o("WASmaxOutBizCtwaAdAccountHackBaseIQGetRequestMixin").mergeHackBaseIQGetRequestMixin(o("WASmaxJsx").smax("iq",{xmlns:"fb:thrift_iq",smax_id:o("WAWap").INT(104)},o("WASmaxJsx").smax("parameters",null,o("WASmaxJsx").smax("code",null,t))),e);return n}l.makeGetAccessTokenAndSessionCookiesRequest=e}),98);
__d("WASmaxBizCtwaAdAccountGetAccessTokenAndSessionCookiesRPC",["WAComms","WASmaxInBizCtwaAdAccountGetAccessTokenAndSessionCookiesResponseError","WASmaxInBizCtwaAdAccountGetAccessTokenAndSessionCookiesResponseIncorrectNonce","WASmaxInBizCtwaAdAccountGetAccessTokenAndSessionCookiesResponseSuccess","WASmaxInBizCtwaAdAccountGetAccessTokenAndSessionCookiesResponseTooManyAttempts","WASmaxOutBizCtwaAdAccountGetAccessTokenAndSessionCookiesRequest","WASmaxParsingFailure","WASmaxRpcUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){function e(e,t){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=o("WASmaxOutBizCtwaAdAccountGetAccessTokenAndSessionCookiesRequest").makeGetAccessTokenAndSessionCookiesRequest(e),r=yield o("WAComms").sendSmaxStanza(n,t),a=o("WASmaxInBizCtwaAdAccountGetAccessTokenAndSessionCookiesResponseSuccess").parseGetAccessTokenAndSessionCookiesResponseSuccess(r,n);if(a.success)return{name:"GetAccessTokenAndSessionCookiesResponseSuccess",value:a.value};var i=o("WASmaxInBizCtwaAdAccountGetAccessTokenAndSessionCookiesResponseTooManyAttempts").parseGetAccessTokenAndSessionCookiesResponseTooManyAttempts(r,n);if(i.success)return{name:"GetAccessTokenAndSessionCookiesResponseTooManyAttempts",value:i.value};var l=o("WASmaxInBizCtwaAdAccountGetAccessTokenAndSessionCookiesResponseIncorrectNonce").parseGetAccessTokenAndSessionCookiesResponseIncorrectNonce(r,n);if(l.success)return{name:"GetAccessTokenAndSessionCookiesResponseIncorrectNonce",value:l.value};var s=o("WASmaxInBizCtwaAdAccountGetAccessTokenAndSessionCookiesResponseError").parseGetAccessTokenAndSessionCookiesResponseError(r,n);if(s.success)return{name:"GetAccessTokenAndSessionCookiesResponseError",value:s.value};throw new(o("WASmaxParsingFailure")).SmaxParsingFailure(o("WASmaxRpcUtils").errorMessageRpcParsing("GetAccessTokenAndSessionCookies",{Success:a,TooManyAttempts:i,IncorrectNonce:l,Error:s}))}),s.apply(this,arguments)}l.sendGetAccessTokenAndSessionCookiesRPC=e}),98);
__d("WASmaxInMdCountryCodeErrors",["WAResultOrError","WASmaxInMdIQErrorBadRequestMixin","WASmaxInMdIQErrorInternalServerErrorMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxInMdIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(e);if(t.success)return o("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:t.value});var n=o("WASmaxInMdIQErrorInternalServerErrorMixin").parseIQErrorInternalServerErrorMixin(e);return n.success?o("WAResultOrError").makeResult({name:"IQErrorInternalServerError",value:n.value}):o("WASmaxParseUtils").errorMixinDisjunction(e,["IQErrorBadRequest","IQErrorInternalServerError"],[t,n])}l.parseCountryCodeErrors=e}),98);
__d("WASmaxInMdGetCountryCodeResponseError",["WAResultOrError","WASmaxInMdCountryCodeErrors","WASmaxInMdIQErrorResponseMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"error");if(!r.success)return r;var a=o("WASmaxInMdIQErrorResponseMixin").parseIQErrorResponseMixin(e,t);if(!a.success)return a;var i=o("WASmaxInMdCountryCodeErrors").parseCountryCodeErrors(r.value);return i.success?o("WAResultOrError").makeResult(babelHelpers.extends({},a.value,{errorCountryCodeErrors:i.value})):i}l.parseGetCountryCodeResponseError=e}),98);
__d("WASmaxInMdGetCountryCodeResponseGetCountryCodeResponse",["WAResultOrError","WASmaxInMdIQResultResponseMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"country_code");if(!r.success)return r;var a=o("WASmaxParseUtils").attrString(r.value,"iso");if(!a.success)return a;var i=o("WASmaxInMdIQResultResponseMixin").parseIQResultResponseMixin(e,t);return i.success?o("WAResultOrError").makeResult(babelHelpers.extends({countryCodeIso:a.value},i.value)):i}l.parseGetCountryCodeResponseGetCountryCodeResponse=e}),98);
__d("WASmaxInMessagePublishAckAdminEditMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"ack");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"edit","3");return n.success?o("WAResultOrError").makeResult({edit:n.value}):n}l.parseAckAdminEditMixin=e}),98);
__d("WASmaxInMessagePublishAckAdminRevokeMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"ack");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"edit","8");return n.success?o("WAResultOrError").makeResult({edit:n.value}):n}l.parseAckAdminRevokeMixin=e}),98);
__d("WASmaxInMessagePublishAckMessageEditMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"ack");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"edit","1");return n.success?o("WAResultOrError").makeResult({edit:n.value}):n}l.parseAckMessageEditMixin=e}),98);
__d("WASmaxInMessagePublishAckMessagePinMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"ack");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"edit","2");return n.success?o("WAResultOrError").makeResult({edit:n.value}):n}l.parseAckMessagePinMixin=e}),98);
__d("WASmaxInMessagePublishEnums",["WAJids"],(function(t,n,r,o,a,i,l){var e,s={CBP:"CBP",NBP:"NBP",PMP:"PMP"},u={delivery:"delivery",no_optimization:"no_optimization"},c={false:"false",true:"true"},d={free_customer_service:"free_customer_service",free_entry_point:"free_entry_point",regular:"regular"},m={lid:"lid",pn:"pn"},p={validators:[(e=o("WAJids")).validateDeviceJid,e.validateDeviceJid,e.validateUserJid,e.validateUserJid],typeName:"DeviceJid|DeviceJid|UserJid|UserJid"},_={validators:[e.validateUserJid,e.validateUserJid],typeName:"UserJid|UserJid"};l.ENUM_CBP_NBP_PMP=s,l.ENUM_DELIVERY_NOOPTIMIZATION=u,l.ENUM_FALSE_TRUE=c,l.ENUM_FREECUSTOMERSERVICE_FREEENTRYPOINT_REGULAR=d,l.ENUM_LID_PN=m,l.DEVICEJID_DEVICEJID_USERJID_USERJID=p,l.USERJID_USERJID=_}),98);
__d("WASmaxInMessagePublishAckPaidConversationMixin",["WAResultOrError","WASmaxInMessagePublishEnums","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"delivery_context");if(!t.success)return t;var n=o("WASmaxParseUtils").attrStringEnum(e,"optimization_goal",o("WASmaxInMessagePublishEnums").ENUM_DELIVERY_NOOPTIMIZATION);return n.success?o("WAResultOrError").makeResult({optimizationGoal:n.value}):n}function s(e){var t=o("WASmaxParseUtils").assertTag(e,"source_url");if(!t.success)return t;var n=o("WASmaxParseUtils").contentString(e);return n.success?o("WAResultOrError").makeResult({elementValue:n.value}):n}function u(e){var t=o("WASmaxParseUtils").assertTag(e,"referral");if(!t.success)return t;var n=o("WASmaxParseUtils").optionalChildWithTag(e,"source_url",s);if(!n.success)return n;var r=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrString,e,"source_type");return r.success?o("WAResultOrError").makeResult({sourceType:r.value,sourceUrl:n.value}):r}function c(e){var t=o("WASmaxParseUtils").assertTag(e,"origin");if(!t.success)return t;var n=o("WASmaxParseUtils").optionalChildWithTag(e,"referral",u);if(!n.success)return n;var r=o("WASmaxParseUtils").attrString(e,"type");return r.success?o("WAResultOrError").makeResult({type:r.value,referral:n.value}):r}function d(e){var t=o("WASmaxParseUtils").assertTag(e,"pricing");if(!t.success)return t;var n=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrString,e,"consumer_country_code");if(!n.success)return n;var r=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrString,e,"business_country_code");if(!r.success)return r;var a=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrIntRange,e,"conversation_status",0,void 0);if(!a.success)return a;var i=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrIntRange,e,"latest_c2b_timestamp",0,void 0);if(!i.success)return i;var l=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrString,e,"analytics_conversation_id");if(!l.success)return l;var s=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrIntRange,e,"b2c_timestamp",0,void 0);return s.success?o("WAResultOrError").makeResult({consumerCountryCode:n.value,businessCountryCode:r.value,conversationStatus:a.value,latestC2bTimestamp:i.value,analyticsConversationId:l.value,b2cTimestamp:s.value}):s}function m(t){var n=o("WASmaxParseUtils").assertTag(t,"ack");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(t,"biz");if(!r.success)return r;var a=o("WASmaxParseUtils").optionalChildWithTag(r.value,"delivery_context",e);if(!a.success)return a;var i=o("WASmaxParseUtils").optionalChildWithTag(r.value,"origin",c);if(!i.success)return i;var l=o("WASmaxParseUtils").optionalChildWithTag(r.value,"pricing",d);if(!l.success)return l;var s=o("WASmaxParseUtils").attrString(r.value,"paid_convo_id");if(!s.success)return s;var u=o("WASmaxParseUtils").attrStringEnum(r.value,"pricing_model",o("WASmaxInMessagePublishEnums").ENUM_CBP_NBP_PMP);if(!u.success)return u;var m=o("WASmaxParseUtils").attrStringEnum(r.value,"billable",o("WASmaxInMessagePublishEnums").ENUM_FALSE_TRUE);if(!m.success)return m;var p=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrIntRange,r.value,"expiration_timestamp",0,void 0);if(!p.success)return p;var _=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrString,r.value,"pricing_category");if(!_.success)return _;var f=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrStringEnum,r.value,"pricing_type",o("WASmaxInMessagePublishEnums").ENUM_FREECUSTOMERSERVICE_FREEENTRYPOINT_REGULAR);return f.success?o("WAResultOrError").makeResult({bizPaidConvoId:s.value,bizPricingModel:u.value,bizBillable:m.value,bizExpirationTimestamp:p.value,bizPricingCategory:_.value,bizPricingType:f.value,bizDeliveryContext:a.value,bizOrigin:i.value,bizPricing:l.value}):f}l.parseAckPaidConversationBizDeliveryContext=e,l.parseAckPaidConversationBizOriginReferralSourceUrl=s,l.parseAckPaidConversationBizOriginReferral=u,l.parseAckPaidConversationBizOrigin=c,l.parseAckPaidConversationBizPricing=d,l.parseAckPaidConversationMixin=m}),98);
__d("WASmaxInMessagePublishAckPaidGroupConversationMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"ack");if(!t.success)return t;var n=o("WASmaxParseUtils").flattenedChildWithTag(e,"biz");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(n.value,"pricing");if(!r.success)return r;var a=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrString,r.value,"business_country_code");return a.success?o("WAResultOrError").makeResult({bizPricingBusinessCountryCode:a.value}):a}l.parseAckPaidGroupConversationMixin=e}),98);
__d("WASmaxInMessagePublishAckPaidAckPaidConversationOrAckPaidGroupConversationConversationMixinGroup",["WAResultOrError","WASmaxInMessagePublishAckPaidConversationMixin","WASmaxInMessagePublishAckPaidGroupConversationMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxInMessagePublishAckPaidConversationMixin").parseAckPaidConversationMixin(e);if(t.success)return o("WAResultOrError").makeResult({name:"AckPaidConversation",value:t.value});var n=o("WASmaxInMessagePublishAckPaidGroupConversationMixin").parseAckPaidGroupConversationMixin(e);return n.success?o("WAResultOrError").makeResult({name:"AckPaidGroupConversation",value:n.value}):o("WASmaxParseUtils").errorMixinDisjunction(e,["AckPaidConversation","AckPaidGroupConversation"],[t,n])}l.parseAckPaidAckPaidConversationOrAckPaidGroupConversationConversationMixinGroup=e}),98);
__d("WASmaxInMessagePublishAckRevokeMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"ack");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"edit","7");return n.success?o("WAResultOrError").makeResult({edit:n.value}):n}l.parseAckRevokeMixin=e}),98);
__d("WASmaxInMessagePublishServerFrankingTagMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").flattenedChildWithTag(e,"franking");if(!t.success)return t;var n=o("WASmaxParseUtils").flattenedChildWithTag(t.value,"reporting_tag");if(!n.success)return n;var r=o("WASmaxParseUtils").contentBytesRange(n.value,9,128);return r.success?o("WAResultOrError").makeResult({frankingReportingTagElementValue:r.value}):r}l.parseServerFrankingTagMixin=e}),98);
__d("WASmaxInMessagePublishAckMixin",["WAResultOrError","WASmaxInMessagePublishAckAdminEditMixin","WASmaxInMessagePublishAckAdminRevokeMixin","WASmaxInMessagePublishAckMessageEditMixin","WASmaxInMessagePublishAckMessagePinMixin","WASmaxInMessagePublishAckPaidAckPaidConversationOrAckPaidGroupConversationConversationMixinGroup","WASmaxInMessagePublishAckRevokeMixin","WASmaxInMessagePublishServerFrankingTagMixin","WASmaxParseReference","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"ack");if(!n.success)return n;var r=o("WASmaxParseReference").attrStringFromReference(t,["to"]);if(!r.success)return r;var a=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"from",r.value);if(!a.success)return a;var i=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"class","message");if(!i.success)return i;var l=o("WASmaxParseReference").attrStringFromReference(t,["id"]);if(!l.success)return l;var s=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"id",l.value);if(!s.success)return s;var u=o("WASmaxParseUtils").attrIntRange(e,"t",0,void 0);if(!u.success)return u;var c=o("WASmaxInMessagePublishAckMessageEditMixin").parseAckMessageEditMixin(e),d=o("WASmaxInMessagePublishAckAdminEditMixin").parseAckAdminEditMixin(e),m=o("WASmaxInMessagePublishAckMessagePinMixin").parseAckMessagePinMixin(e),p=o("WASmaxInMessagePublishAckAdminRevokeMixin").parseAckAdminRevokeMixin(e),_=o("WASmaxInMessagePublishAckRevokeMixin").parseAckRevokeMixin(e),f=o("WASmaxInMessagePublishServerFrankingTagMixin").parseServerFrankingTagMixin(e),g=o("WASmaxInMessagePublishAckPaidAckPaidConversationOrAckPaidGroupConversationConversationMixinGroup").parseAckPaidAckPaidConversationOrAckPaidGroupConversationConversationMixinGroup(e);return o("WAResultOrError").makeResult({class:i.value,t:u.value,ackMessageEditMixin:c.success?c.value:null,ackAdminEditMixin:d.success?d.value:null,ackMessagePinMixin:m.success?m.value:null,ackAdminRevokeMixin:p.success?p.value:null,ackRevokeMixin:_.success?_.value:null,serverFrankingTagMixin:f.success?f.value:null,ackPaidAckPaidConversationOrAckPaidGroupConversationConversationMixinGroup:g.success?g.value:null})}l.parseAckMixin=e}),98);
__d("WASmaxInMessagePublishApplicationNegativeAckMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"ack");if(!t.success)return t;var n=o("WASmaxParseUtils").attrIntRange(e,"application_error",0,void 0);return n.success?o("WAResultOrError").makeResult({applicationError:n.value}):n}l.parseApplicationNegativeAckMixin=e}),98);
__d("WASmaxInMessagePublishMessageNackRetryAttributesMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"ack");if(!t.success)return t;var n=o("WASmaxParseUtils").attrIntRange(e,"backoff",0,86400);return n.success?o("WAResultOrError").makeResult({backoff:n.value}):n}l.parseMessageNackRetryAttributesMixin=e}),98);
__d("WASmaxInMessagePublishNegativeAckMixin",["WAResultOrError","WASmaxInMessagePublishAckMixin","WASmaxInMessagePublishApplicationNegativeAckMixin","WASmaxInMessagePublishMessageNackRetryAttributesMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"ack");if(!n.success)return n;var r=o("WASmaxParseUtils").attrString(e,"error");if(!r.success)return r;var a=o("WASmaxInMessagePublishAckMixin").parseAckMixin(e,t);if(!a.success)return a;var i=o("WASmaxInMessagePublishApplicationNegativeAckMixin").parseApplicationNegativeAckMixin(e),l=o("WASmaxInMessagePublishMessageNackRetryAttributesMixin").parseMessageNackRetryAttributesMixin(e);return o("WAResultOrError").makeResult(babelHelpers.extends({error:r.value},a.value,{applicationNegativeAckMixin:i.success?i.value:null,messageNackRetryAttributesMixin:l.success?l.value:null}))}l.parseNegativeAckMixin=e}),98);
__d("WASmaxInPreKeysDeviceIdentityMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").flattenedChildWithTag(e,"device-identity");if(!t.success)return t;var n=o("WASmaxParseUtils").contentBytes(t.value);return n.success?o("WAResultOrError").makeResult({deviceIdentityElementValue:n.value}):n}l.parseDeviceIdentityMixin=e}),98);
__d("WASmaxInPreKeysEnums",["WAJids"],(function(t,n,r,o,a,i,l){var e,s={validators:[(e=o("WAJids")).validateDeviceJid,e.validateDeviceJid],typeName:"DeviceJid|DeviceJid"},u={validators:[e.validateDeviceJid,e.validateDeviceJid,e.validateInteropDeviceJid,e.validateInteropDeviceJid],typeName:"DeviceJid|DeviceJid|InteropDeviceJid|InteropDeviceJid"},c={validators:[e.validateDeviceJid,e.validateDomainJid],typeName:"DeviceJid|DomainJid"},d={validators:[e.validateUserJid,e.validateUserJid],typeName:"UserJid|UserJid"};l.DEVICEJID_DEVICEJID=s,l.DEVICEJID_DEVICEJID_INTEROPDEVICEJID_INTEROPDEVICEJID=u,l.DEVICEJID_DOMAINJID=c,l.USERJID_USERJID=d}),98);
__d("WASmaxInPreKeysIQErrorResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseReference").attrStringFromReference(t,["id"]);if(!r.success)return r;var a=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"id",r.value);if(!a.success)return a;var i=o("WASmaxParseReference").attrStringFromReference(t,["to"]);if(!i.success)return i;var l=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"from",i.value);if(!l.success)return l;var s=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"type","error");return s.success?o("WAResultOrError").makeResult({type:s.value}):s}l.parseIQErrorResponseMixin=e}),98);
__d("WASmaxInPreKeysIQErrorBadRequestMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","bad-request");if(!n.success)return n;var r=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,e,"code",400);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorBadRequestMixin=e}),98);
__d("WASmaxInPreKeysIQErrorFallbackClientMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").attrString(e,"text");if(!n.success)return n;var r=o("WASmaxParseUtils").attrIntRange(e,"code",400,499);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorFallbackClientMixin=e}),98);
__d("WASmaxInPreKeysIQErrorNoValidJIDMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","not-acceptable");if(!n.success)return n;var r=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,e,"code",406);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorNoValidJIDMixin=e}),98);
__d("WASmaxInPreKeysRequestErrorsFetch",["WAResultOrError","WASmaxInPreKeysIQErrorBadRequestMixin","WASmaxInPreKeysIQErrorFallbackClientMixin","WASmaxInPreKeysIQErrorNoValidJIDMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxInPreKeysIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(e);if(t.success)return o("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:t.value});var n=o("WASmaxInPreKeysIQErrorNoValidJIDMixin").parseIQErrorNoValidJIDMixin(e);if(n.success)return o("WAResultOrError").makeResult({name:"IQErrorNoValidJID",value:n.value});var r=o("WASmaxInPreKeysIQErrorFallbackClientMixin").parseIQErrorFallbackClientMixin(e);return r.success?o("WAResultOrError").makeResult({name:"IQErrorFallbackClient",value:r.value}):o("WASmaxParseUtils").errorMixinDisjunction(e,["IQErrorBadRequest","IQErrorNoValidJID","IQErrorFallbackClient"],[t,n,r])}l.parseRequestErrorsFetch=e}),98);
__d("WASmaxInPreKeysFetchKeyBundlesResponseRequestError",["WAResultOrError","WASmaxInPreKeysIQErrorResponseMixin","WASmaxInPreKeysRequestErrorsFetch","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"error");if(!r.success)return r;var a=o("WASmaxInPreKeysIQErrorResponseMixin").parseIQErrorResponseMixin(e,t);if(!a.success)return a;var i=o("WASmaxInPreKeysRequestErrorsFetch").parseRequestErrorsFetch(r.value);return i.success?o("WAResultOrError").makeResult(babelHelpers.extends({},a.value,{errorRequestErrorsFetch:i.value})):i}l.parseFetchKeyBundlesResponseRequestError=e}),98);
__d("WASmaxInPreKeysIQErrorFallbackServerMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").attrString(e,"text");if(!n.success)return n;var r=o("WASmaxParseUtils").attrIntRange(e,"code",500,599);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorFallbackServerMixin=e}),98);
__d("WASmaxInPreKeysIQErrorServiceUnavailableMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","service-unavailable");if(!n.success)return n;var r=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,e,"code",503);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorServiceUnavailableMixin=e}),98);
__d("WASmaxInPreKeysServerErrors",["WAResultOrError","WASmaxInPreKeysIQErrorFallbackServerMixin","WASmaxInPreKeysIQErrorServiceUnavailableMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxInPreKeysIQErrorServiceUnavailableMixin").parseIQErrorServiceUnavailableMixin(e);if(t.success)return o("WAResultOrError").makeResult({name:"IQErrorServiceUnavailable",value:t.value});var n=o("WASmaxInPreKeysIQErrorFallbackServerMixin").parseIQErrorFallbackServerMixin(e);return n.success?o("WAResultOrError").makeResult({name:"IQErrorFallbackServer",value:n.value}):o("WASmaxParseUtils").errorMixinDisjunction(e,["IQErrorServiceUnavailable","IQErrorFallbackServer"],[t,n])}l.parseServerErrors=e}),98);
__d("WASmaxInPreKeysFetchKeyBundlesResponseServerError",["WAResultOrError","WASmaxInPreKeysIQErrorResponseMixin","WASmaxInPreKeysServerErrors","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"error");if(!r.success)return r;var a=o("WASmaxInPreKeysIQErrorResponseMixin").parseIQErrorResponseMixin(e,t);if(!a.success)return a;var i=o("WASmaxInPreKeysServerErrors").parseServerErrors(r.value);return i.success?o("WAResultOrError").makeResult(babelHelpers.extends({},a.value,{errorServerErrors:i.value})):i}l.parseFetchKeyBundlesResponseServerError=e}),98);
__d("WASmaxInPreKeysIQResultResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseReference").attrStringFromReference(t,["id"]);if(!r.success)return r;var a=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"id",r.value);if(!a.success)return a;var i=o("WASmaxParseReference").attrStringFromReference(t,["to"]);if(!i.success)return i;var l=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"from",i.value);if(!l.success)return l;var s=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"type","result");return s.success?o("WAResultOrError").makeResult({type:s.value}):s}l.parseIQResultResponseMixin=e}),98);
__d("WASmaxInPreKeysResponsePaddingMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"iq");if(!t.success)return t;var n=o("WASmaxParseUtils").flattenedChildWithTag(e,"padding");if(!n.success)return n;var r=o("WASmaxParseUtils").contentBytesRange(n.value,0,524288);return r.success?o("WAResultOrError").makeResult({paddingElementValue:r.value}):r}l.parseResponsePaddingMixin=e}),98);
__d("WASmaxInPreKeysFetchKeyBundlesUserErrorFallbackMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"user");if(!t.success)return t;var n=o("WASmaxParseUtils").flattenedChildWithTag(e,"error");if(!n.success)return n;var r=o("WASmaxParseUtils").attrString(n.value,"text");if(!r.success)return r;var a=o("WASmaxParseUtils").attrIntRange(n.value,"code",500,599);return a.success?o("WAResultOrError").makeResult({errorText:r.value,errorCode:a.value}):a}l.parseFetchKeyBundlesUserErrorFallbackMixin=e}),98);
__d("WASmaxInPreKeysFetchKeyBundlesUserErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"user");if(!t.success)return t;var n=o("WASmaxParseUtils").flattenedChildWithTag(e,"error");if(!n.success)return n;var r=o("WASmaxParseUtils").attrString(n.value,"text");if(!r.success)return r;var a=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,n.value,"code",500);return a.success?o("WAResultOrError").makeResult({errorText:r.value,errorCode:a.value}):a}l.parseFetchKeyBundlesUserErrorMixin=e}),98);
__d("WASmaxInPreKeysKeyDataMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").contentBytesRange(e,32,32);return t.success?o("WAResultOrError").makeResult({elementValue:t.value}):t}l.parseKeyDataMixin=e}),98);
__d("WASmaxInPreKeysIdentityKeyMixin",["WASmaxInPreKeysKeyDataMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").flattenedChildWithTag(e,"identity");if(!t.success)return t;var n=o("WASmaxInPreKeysKeyDataMixin").parseKeyDataMixin(t.value);return n.success,n}l.parseIdentityKeyMixin=e}),98);
__d("WASmaxInPreKeysKeyTypeMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").flattenedChildWithTag(e,"type");if(!t.success)return t;var n=o("WASmaxParseUtils").contentLiteralBytes(t.value,new Uint8Array([5]));return n.success?o("WAResultOrError").makeResult({typeElementValue:n.value}):n}l.parseKeyTypeMixin=e}),98);
__d("WASmaxInPreKeysKeyIDMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"id");if(!t.success)return t;var n=o("WASmaxParseUtils").contentBytesRange(e,3,3);return n.success?o("WAResultOrError").makeResult({elementValue:n.value}):n}l.parseKeyIDMixin=e}),98);
__d("WASmaxInPreKeysPreKeyMixin",["WAResultOrError","WASmaxInPreKeysKeyDataMixin","WASmaxInPreKeysKeyIDMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").flattenedChildWithTag(e,"key");if(!t.success)return t;var n=o("WASmaxParseUtils").flattenedChildWithTag(t.value,"id");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(t.value,"value");if(!r.success)return r;var a=o("WASmaxInPreKeysKeyIDMixin").parseKeyIDMixin(n.value);if(!a.success)return a;var i=o("WASmaxInPreKeysKeyDataMixin").parseKeyDataMixin(r.value);return i.success?o("WAResultOrError").makeResult({keyIdKeyIDMixin:a.value,keyValueKeyDataMixin:i.value}):i}l.parsePreKeyMixin=e}),98);
__d("WASmaxInPreKeysRegistrationIDMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").flattenedChildWithTag(e,"registration");if(!t.success)return t;var n=o("WASmaxParseUtils").contentBytesRange(t.value,4,4);return n.success?o("WAResultOrError").makeResult({registrationElementValue:n.value}):n}l.parseRegistrationIDMixin=e}),98);
__d("WASmaxInPreKeysSignedPreKeyMixin",["WAResultOrError","WASmaxInPreKeysKeyDataMixin","WASmaxInPreKeysKeyIDMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").flattenedChildWithTag(e,"skey");if(!t.success)return t;var n=o("WASmaxParseUtils").flattenedChildWithTag(t.value,"id");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(t.value,"value");if(!r.success)return r;var a=o("WASmaxParseUtils").flattenedChildWithTag(t.value,"signature");if(!a.success)return a;var i=o("WASmaxParseUtils").contentBytesRange(a.value,64,64);if(!i.success)return i;var l=o("WASmaxInPreKeysKeyIDMixin").parseKeyIDMixin(n.value);if(!l.success)return l;var s=o("WASmaxInPreKeysKeyDataMixin").parseKeyDataMixin(r.value);return s.success?o("WAResultOrError").makeResult({skeySignatureElementValue:i.value,skeyIdKeyIDMixin:l.value,skeyValueKeyDataMixin:s.value}):s}l.parseSignedPreKeyMixin=e}),98);
__d("WASmaxInPreKeysFetchKeyBundlesUserSuccessMixin",["WAResultOrError","WASmaxInPreKeysDeviceIdentityMixin","WASmaxInPreKeysIdentityKeyMixin","WASmaxInPreKeysKeyTypeMixin","WASmaxInPreKeysPreKeyMixin","WASmaxInPreKeysRegistrationIDMixin","WASmaxInPreKeysSignedPreKeyMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"user");if(!t.success)return t;var n=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrIntRange,e,"t",0,void 0);if(!n.success)return n;var r=o("WASmaxParseUtils").optionalLiteral(o("WASmaxParseUtils").attrString,e,"is_cloud_api","true");if(!r.success)return r;var a=o("WASmaxInPreKeysRegistrationIDMixin").parseRegistrationIDMixin(e);if(!a.success)return a;var i=o("WASmaxInPreKeysKeyTypeMixin").parseKeyTypeMixin(e),l=o("WASmaxInPreKeysIdentityKeyMixin").parseIdentityKeyMixin(e);if(!l.success)return l;var s=o("WASmaxInPreKeysPreKeyMixin").parsePreKeyMixin(e),u=o("WASmaxInPreKeysSignedPreKeyMixin").parseSignedPreKeyMixin(e);if(!u.success)return u;var c=o("WASmaxInPreKeysDeviceIdentityMixin").parseDeviceIdentityMixin(e);return o("WAResultOrError").makeResult(babelHelpers.extends({t:n.value,isCloudApi:r.value},a.value,{keyTypeMixin:i.success?i.value:null},l.value,{preKeyMixin:s.success?s.value:null},u.value,{deviceIdentityMixin:c.success?c.value:null}))}l.parseFetchKeyBundlesUserSuccessMixin=e}),98);
__d("WASmaxInPreKeysUserFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup",["WAResultOrError","WASmaxInPreKeysFetchKeyBundlesUserErrorFallbackMixin","WASmaxInPreKeysFetchKeyBundlesUserErrorMixin","WASmaxInPreKeysFetchKeyBundlesUserSuccessMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxInPreKeysFetchKeyBundlesUserSuccessMixin").parseFetchKeyBundlesUserSuccessMixin(e);if(t.success)return o("WAResultOrError").makeResult({name:"FetchKeyBundlesUserSuccess",value:t.value});var n=o("WASmaxInPreKeysFetchKeyBundlesUserErrorMixin").parseFetchKeyBundlesUserErrorMixin(e);if(n.success)return o("WAResultOrError").makeResult({name:"FetchKeyBundlesUserError",value:n.value});var r=o("WASmaxInPreKeysFetchKeyBundlesUserErrorFallbackMixin").parseFetchKeyBundlesUserErrorFallbackMixin(e);return r.success?o("WAResultOrError").makeResult({name:"FetchKeyBundlesUserErrorFallback",value:r.value}):o("WASmaxParseUtils").errorMixinDisjunction(e,["UserSuccess","UserError","UserErrorFallback"],[t,n,r])}l.parseUserFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup=e}),98);
__d("WASmaxInPreKeysFetchKeyBundlesResponseSuccess",["WAResultOrError","WASmaxInPreKeysEnums","WASmaxInPreKeysIQResultResponseMixin","WASmaxInPreKeysResponsePaddingMixin","WASmaxInPreKeysUserFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup","WASmaxParseJid","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"user");if(!t.success)return t;var n=o("WASmaxParseJid").attrJidEnum(e,"jid",o("WASmaxInPreKeysEnums").DEVICEJID_DEVICEJID);if(!n.success)return n;var r=o("WASmaxInPreKeysUserFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup").parseUserFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup(e);return r.success?o("WAResultOrError").makeResult({jid:n.value,userFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup:r.value}):r}function s(t,n){var r=o("WASmaxParseUtils").assertTag(t,"iq");if(!r.success)return r;var a=o("WASmaxParseUtils").flattenedChildWithTag(t,"list");if(!a.success)return a;var i=o("WASmaxInPreKeysIQResultResponseMixin").parseIQResultResponseMixin(t,n);if(!i.success)return i;var l=o("WASmaxInPreKeysResponsePaddingMixin").parseResponsePaddingMixin(t),s=o("WASmaxParseUtils").mapChildrenWithTag(a.value,"user",0,1e5,e);return s.success?o("WAResultOrError").makeResult(babelHelpers.extends({},i.value,{responsePaddingMixin:l.success?l.value:null,listUser:s.value})):s}l.parseFetchKeyBundlesResponseSuccessListUser=e,l.parseFetchKeyBundlesResponseSuccess=s}),98);
__d("WASmaxInStatsIQErrorBadRequestMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","bad-request");if(!n.success)return n;var r=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,e,"code",400);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorBadRequestMixin=e}),98);
__d("WASmaxInStatsIQErrorFeatureNotImplementedMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","feature-not-implemented");if(!n.success)return n;var r=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,e,"code",501);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorFeatureNotImplementedMixin=e}),98);
__d("WASmaxInStatsIQErrorNotAcceptableMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"field");if(!t.success)return t;var n=o("WASmaxParseUtils").attrString(e,"name");if(!n.success)return n;var r=o("WASmaxParseUtils").attrString(e,"reason");return r.success?o("WAResultOrError").makeResult({name:n.value,reason:r.value}):r}function s(t){var n=o("WASmaxParseUtils").assertTag(t,"error");if(!n.success)return n;var r=o("WASmaxParseUtils").optionalChildWithTag(t,"field",e);if(!r.success)return r;var a=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,t,"text","not-acceptable");if(!a.success)return a;var i=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,t,"code",406);return i.success?o("WAResultOrError").makeResult({text:a.value,code:i.value,field:r.value}):i}l.parseIQErrorNotAcceptableField=e,l.parseIQErrorNotAcceptableMixin=s}),98);
__d("WASmaxInStatsIQErrorResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseReference").attrStringFromReference(t,["id"]);if(!r.success)return r;var a=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"id",r.value);if(!a.success)return a;var i=o("WASmaxParseReference").attrStringFromReference(t,["to"]);if(!i.success)return i;var l=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"from",i.value);if(!l.success)return l;var s=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"type","error");return s.success?o("WAResultOrError").makeResult({type:s.value}):s}l.parseIQErrorResponseMixin=e}),98);
__d("WASmaxInStatsIQErrorServiceUnavailableMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","service-unavailable");if(!n.success)return n;var r=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,e,"code",503);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorServiceUnavailableMixin=e}),98);
__d("WASmaxInStatsIQResultResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseReference").attrStringFromReference(t,["id"]);if(!r.success)return r;var a=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"id",r.value);if(!a.success)return a;var i=o("WASmaxParseReference").attrStringFromReference(t,["to"]);if(!i.success)return i;var l=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"from",i.value);if(!l.success)return l;var s=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"type","result");return s.success?o("WAResultOrError").makeResult({type:s.value}):s}l.parseIQResultResponseMixin=e}),98);
__d("WASmaxInStatsSendBufferNoRetryError",["WAResultOrError","WASmaxInStatsIQErrorBadRequestMixin","WASmaxInStatsIQErrorFeatureNotImplementedMixin","WASmaxInStatsIQErrorNotAcceptableMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxInStatsIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(e);if(t.success)return o("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:t.value});var n=o("WASmaxInStatsIQErrorNotAcceptableMixin").parseIQErrorNotAcceptableMixin(e);if(n.success)return o("WAResultOrError").makeResult({name:"IQErrorNotAcceptable",value:n.value});var r=o("WASmaxInStatsIQErrorFeatureNotImplementedMixin").parseIQErrorFeatureNotImplementedMixin(e);return r.success?o("WAResultOrError").makeResult({name:"IQErrorFeatureNotImplemented",value:r.value}):o("WASmaxParseUtils").errorMixinDisjunction(e,["IQErrorBadRequest","IQErrorNotAcceptable","IQErrorFeatureNotImplemented"],[t,n,r])}l.parseSendBufferNoRetryError=e}),98);
__d("WASmaxInStatsSendBufferResponseErrorNoRetry",["WAResultOrError","WASmaxInStatsIQErrorResponseMixin","WASmaxInStatsSendBufferNoRetryError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"error");if(!r.success)return r;var a=o("WASmaxInStatsIQErrorResponseMixin").parseIQErrorResponseMixin(e,t);if(!a.success)return a;var i=o("WASmaxInStatsSendBufferNoRetryError").parseSendBufferNoRetryError(r.value);return i.success?o("WAResultOrError").makeResult(babelHelpers.extends({},a.value,{errorSendBufferNoRetryError:i.value})):i}l.parseSendBufferResponseErrorNoRetry=e}),98);
__d("WASmaxInStatsSendBufferResponseErrorRetry",["WAResultOrError","WASmaxInStatsIQErrorResponseMixin","WASmaxInStatsIQErrorServiceUnavailableMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"error");if(!r.success)return r;var a=o("WASmaxInStatsIQErrorServiceUnavailableMixin").parseIQErrorServiceUnavailableMixin(r.value);if(!a.success)return a;var i=o("WASmaxInStatsIQErrorResponseMixin").parseIQErrorResponseMixin(e,t);return i.success?o("WAResultOrError").makeResult(babelHelpers.extends({errorIQErrorServiceUnavailableMixin:a.value},i.value)):i}l.parseSendBufferResponseErrorRetry=e}),98);
__d("WASmaxInStatsSendBufferResponseSuccess",["WASmaxInStatsIQResultResponseMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxInStatsIQResultResponseMixin").parseIQResultResponseMixin(e,t);return r.success,r}l.parseSendBufferResponseSuccess=e}),98);
__d("WASmaxOutMdBaseIQGetRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("iq",{id:o("WAWap").generateId(),type:"get"});return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeBaseIQGetRequestMixin=s}),98);
__d("WASmaxOutMdGetCountryCodeRequest",["WASmaxJsx","WASmaxOutMdBaseIQGetRequestMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxOutMdBaseIQGetRequestMixin").mergeBaseIQGetRequestMixin(o("WASmaxJsx").smax("iq",{to:o("WAWap").S_WHATSAPP_NET,xmlns:"md"},o("WASmaxJsx").smax("link_code_companion_reg",{stage:"get_country_code"})));return e}l.makeGetCountryCodeRequest=e}),98);
__d("WASmaxMdGetCountryCodeRPC",["WAComms","WASmaxInMdGetCountryCodeResponseError","WASmaxInMdGetCountryCodeResponseGetCountryCodeResponse","WASmaxOutMdGetCountryCodeRequest","WASmaxParsingFailure","WASmaxRpcUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){function e(e){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=o("WASmaxOutMdGetCountryCodeRequest").makeGetCountryCodeRequest(),n=yield o("WAComms").sendSmaxStanza(t,e),r=o("WASmaxInMdGetCountryCodeResponseGetCountryCodeResponse").parseGetCountryCodeResponseGetCountryCodeResponse(n,t);if(r.success)return{name:"GetCountryCodeResponseGetCountryCodeResponse",value:r.value};var a=o("WASmaxInMdGetCountryCodeResponseError").parseGetCountryCodeResponseError(n,t);if(a.success)return{name:"GetCountryCodeResponseError",value:a.value};throw new(o("WASmaxParsingFailure")).SmaxParsingFailure(o("WASmaxRpcUtils").errorMessageRpcParsing("GetCountryCode",{GetCountryCodeResponse:r,Error:a}))}),s.apply(this,arguments)}l.sendGetCountryCodeRPC=e}),98);
__d("WASmaxOutMessagePublishClickToWhatsAppAttributionMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(e){var t=e.ctwaAttributionElementValue,n=o("WASmaxJsx").smax("ctwa_attribution",null,t);return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeClickToWhatsAppAttributionMixin=s}),98);
__d("WASmaxOutMessagePublishContentTypeMediaMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("message",{type:"media"});return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeContentTypeMediaMixin=s}),98);
__d("WASmaxOutMessagePublishContentTypePollCreationMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.metaContenttype,n=o("WASmaxJsx").smax("message",{type:"poll"},o("WASmaxJsx").smax("meta",{polltype:"creation",contenttype:o("WASmaxAttrs").OPTIONAL(o("WAWap").CUSTOM_STRING,t)}));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeContentTypePollCreationMixin=s}),98);
__d("WASmaxOutMessagePublishContentTypePollResultSnapshotMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("message",{type:"poll"},o("WASmaxJsx").smax("meta",{polltype:"result_snapshot"}));return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeContentTypePollResultSnapshotMixin=s}),98);
__d("WASmaxOutMessagePublishContentTypePollVoteMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.metaContenttype,n=o("WASmaxJsx").smax("message",{type:"poll"},o("WASmaxJsx").smax("meta",{polltype:"vote",contenttype:o("WASmaxAttrs").OPTIONAL(o("WAWap").CUSTOM_STRING,t)}));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeContentTypePollVoteMixin=s}),98);
__d("WASmaxOutMessagePublishContentTypeReactionMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("message",{type:"reaction"});return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeContentTypeReactionMixin=s}),98);
__d("WASmaxOutMessagePublishContentTypeTextMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("message",{type:"text"});return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeContentTypeTextMixin=s}),98);
__d("WASmaxOutMessagePublishCtwaAttributionMixin",["WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishClickToWhatsAppAttributionMixin"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxOutMessagePublishClickToWhatsAppAttributionMixin").mergeClickToWhatsAppAttributionMixin(o("WASmaxJsx").smax("ctwa_attribution",null),e);return t}function s(t){var n=t.ctwaAttributionArgs,r=o("WASmaxJsx").smax("message",null,o("WASmaxChildren").OPTIONAL_CHILD(e,n));return r}function u(e,t){var n=s(t);return o("WASmaxMixins").mergeStanzas(e,n)}l.makeCtwaAttributionCtwaAttribution=e,l.mergeCtwaAttributionMixin=u}),98);
__d("WASmaxOutMessagePublishMessageAssociationTypeMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.metaMessageAssociationType,n=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("meta",{message_association_type:o("WAWap").CUSTOM_STRING(t)}));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeMessageAssociationTypeMixin=s}),98);
__d("WASmaxOutMessagePublishMsgMetaOriginMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.metaOrigin,n=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("meta",{origin:o("WAWap").CUSTOM_STRING(t)}));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeMsgMetaOriginMixin=s}),98);
__d("WASmaxOutMessagePublishRevokeMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("message",{edit:"7"});return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeRevokeMixin=s}),98);
__d("WASmaxOutPreKeysClientRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("iq",{id:o("WAWap").generateId(),xmlns:"encrypt",to:o("WAWap").S_WHATSAPP_NET});return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeClientRequestMixin=s}),98);
__d("WASmaxOutPreKeysFetchKeyBundlesRequest",["WASmaxAttrs","WASmaxChildren","WASmaxJsx","WASmaxOutPreKeysClientRequestMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.userJid,n=e.hasUserReasonIdentity,r=o("WASmaxJsx").smax("user",{jid:o("WAWap").JID(t),reason:o("WASmaxAttrs").OPTIONAL_LITERAL("identity",n)});return r}function s(t){var n=t.userArgs,r=o("WASmaxOutPreKeysClientRequestMixin").mergeClientRequestMixin(o("WASmaxJsx").smax("iq",{type:"get"},o("WASmaxJsx").smax("key",null,o("WASmaxChildren").REPEATED_CHILD(e,n,1,1e5))));return r}l.makeFetchKeyBundlesRequestKeyUser=e,l.makeFetchKeyBundlesRequest=s}),98);
__d("WASmaxOutStatsBaseIQSetRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("iq",{id:o("WAWap").generateId(),type:"set"});return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeBaseIQSetRequestMixin=s}),98);
__d("WASmaxOutStatsSendBufferRequest",["WASmaxJsx","WASmaxOutStatsBaseIQSetRequestMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.addT,n=e.addElementValue,r=o("WASmaxOutStatsBaseIQSetRequestMixin").mergeBaseIQSetRequestMixin(o("WASmaxJsx").smax("iq",{xmlns:"w:stats",to:o("WAWap").S_WHATSAPP_NET},o("WASmaxJsx").smax("add",{t:o("WAWap").INT(t)},n)));return r}l.makeSendBufferRequest=e}),98);
__d("WASmaxOutUnifiedSessionShareRequest",["WASmaxJsx","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.unifiedSessionId,n=o("WASmaxJsx").smax("ib",null,o("WASmaxJsx").smax("unified_session",{id:o("WAWap").CUSTOM_STRING(t)}));return n}l.makeShareRequest=e}),98);
__d("WASmaxPreKeysFetchKeyBundlesRPC",["WAComms","WASmaxInPreKeysFetchKeyBundlesResponseRequestError","WASmaxInPreKeysFetchKeyBundlesResponseServerError","WASmaxInPreKeysFetchKeyBundlesResponseSuccess","WASmaxOutPreKeysFetchKeyBundlesRequest","WASmaxParsingFailure","WASmaxRpcUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){function e(e,t){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=o("WASmaxOutPreKeysFetchKeyBundlesRequest").makeFetchKeyBundlesRequest(e),r=yield o("WAComms").sendSmaxStanza(n,t),a=o("WASmaxInPreKeysFetchKeyBundlesResponseSuccess").parseFetchKeyBundlesResponseSuccess(r,n);if(a.success)return{name:"FetchKeyBundlesResponseSuccess",value:a.value};var i=o("WASmaxInPreKeysFetchKeyBundlesResponseRequestError").parseFetchKeyBundlesResponseRequestError(r,n);if(i.success)return{name:"FetchKeyBundlesResponseRequestError",value:i.value};var l=o("WASmaxInPreKeysFetchKeyBundlesResponseServerError").parseFetchKeyBundlesResponseServerError(r,n);if(l.success)return{name:"FetchKeyBundlesResponseServerError",value:l.value};throw new(o("WASmaxParsingFailure")).SmaxParsingFailure(o("WASmaxRpcUtils").errorMessageRpcParsing("FetchKeyBundles",{Success:a,RequestError:i,ServerError:l}))}),s.apply(this,arguments)}l.sendFetchKeyBundlesRPC=e}),98);
__d("WASmaxStatsSendBufferRPC",["WAComms","WASmaxInStatsSendBufferResponseErrorNoRetry","WASmaxInStatsSendBufferResponseErrorRetry","WASmaxInStatsSendBufferResponseSuccess","WASmaxOutStatsSendBufferRequest","WASmaxParsingFailure","WASmaxRpcUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){function e(e,t){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=o("WASmaxOutStatsSendBufferRequest").makeSendBufferRequest(e),r=yield o("WAComms").sendSmaxStanza(n,t),a=o("WASmaxInStatsSendBufferResponseSuccess").parseSendBufferResponseSuccess(r,n);if(a.success)return{name:"SendBufferResponseSuccess",value:a.value};var i=o("WASmaxInStatsSendBufferResponseErrorNoRetry").parseSendBufferResponseErrorNoRetry(r,n);if(i.success)return{name:"SendBufferResponseErrorNoRetry",value:i.value};var l=o("WASmaxInStatsSendBufferResponseErrorRetry").parseSendBufferResponseErrorRetry(r,n);if(l.success)return{name:"SendBufferResponseErrorRetry",value:l.value};throw new(o("WASmaxParsingFailure")).SmaxParsingFailure(o("WASmaxRpcUtils").errorMessageRpcParsing("SendBuffer",{Success:a,ErrorNoRetry:i,ErrorRetry:l}))}),s.apply(this,arguments)}l.sendSendBufferRPC=e}),98);
__d("WASmaxUnifiedSessionShareRPC",["WAComms","WASmaxOutUnifiedSessionShareRequest","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){function e(e){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=o("WASmaxOutUnifiedSessionShareRequest").makeShareRequest(e);yield o("WAComms").castSmaxStanza(t)}),s.apply(this,arguments)}l.sendShareRPC=e}),98);
__d("WASocketTransport",["Promise","WABinary","WALogger","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=1,d=(function(){function t(t){var n=this;this.$2=!1,this.onData=null,this.onClose=null,this.onError=null,this.dataToSend=new(o("WABinary")).Binary,this.$3=function(t){if(!n.$2){var r=new Uint8Array(t.data);n.onData?n.onData(r):o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["WebSocket #"," dropped "," bytes"])),n.id,r.length)}},this.$4=function(e){n.$2||n.$6(e)},this.$5=function(e){if(!n.$2){var t=n.onError;t&&t(String(e))}};var r=c++;this.id=r,this.$1=t,t.onmessage=this.$3,t.onclose=this.$4,t.onerror=this.$5}var n=t.prototype;return n.close=function(){this.$2||(this.$1.close(),this.$6())},n.requestSend=function(){if(this.$2){o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["WebSocket #"," not opened"])),this.id);return}this.dataToSend.size()&&this.$1.send(this.dataToSend.readBuffer())},n.$6=function(t){this.$2=!0,this.onClose&&this.onClose(t)},t})();function m(e,t,o,a){var i=new WebSocket(e);return i.binaryType="arraybuffer",new(u||(u=n("Promise")))(function(e,n){i.onopen=function(){a==null||a(),e()},i.onclose=function(e){t==null||t(e),o==null||o(null,e),n(r("err")("WebSocket closed after microtask delay}: "+e.reason+" "+e.code))}}).then(function(){var e=new d(i);return o!=null&&(e.onClose=function(t){t!=null&&o(e.id,t)}),e})}l.WebSocketTransport=d,l.openWebSocket=m}),98);
__d("WASyncdKeyTypes",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e}function l(e){return e}function s(e){return e}function u(e){return e}i.toSyncKeyId=e,i.fromSyncKeyId=l,i.toSyncKeyData=s,i.fromSyncKeyData=u}),66);
__d("WATaskScheduler",["Promise","WALogger","WAPromiseBackoffs","WAResolvable","WATimeUtils","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h,y="no_reschedule",C=(function(){function t(e){this.$1=!1,this.$2={},this.$3={},this.$4={},this.$5=new Map,this.$6=e.scheduledTimeResolver}var r=t.prototype;return r.$7=function(r){var t=this,a=this.$5.get(r);if(a==null){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Tried to start task "," before registering its implementation"])),r);return}this.$6.get(r).then(function(e){var i=e==null,l=!i&&e===o("WATimeUtils").DEFAULT_UNIXTIME;if(l){o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Task "," deactivated"])),r);return}var f=e==null?0:e*1e3-o("WATimeUtils").unixTimeMs();f=Math.max(0,f),f=Math.min(f,2147483647),o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Scheduling task "," in ","ms"])),r,f),t.$4[r]=setTimeout(function(){delete t.$4[r],o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Firing task ",""])),r),a(i).then(function(e){if(e==="no_reschedule")return new(h||(h=n("Promise")))(function(){});var a;return e===o("WATimeUtils").DEFAULT_UNIXTIME?(o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Task "," complete, deactivating"])),r),delete t.$3[r],a=o("WATimeUtils").DEFAULT_UNIXTIME):e>=0?(o("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Task "," complete, waiting ",""])),r,e),delete t.$3[r],a=o("WATimeUtils").futureUnixTime(e)):(o("WALogger").LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Task "," will try again later"])),r),a=t.$8(r)),t.$6.set(r,a)}).then(function(){t.$7(r),t.$2[r]&&(t.$2[r].forEach(function(e){return e()}),delete t.$2[r])}).catch(function(e){return o("WALogger").LOG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Task "," failed, try again later: ",""])),r,e),t.$6.set(r,t.$8(r)).then(function(){t.$7(r)})})},f)})},r.$8=function(t){return this.$3[t]||(this.$3[t]=o("WAPromiseBackoffs").createTimer({jitter:.1,max:o("WATimeUtils").HOUR_SECONDS*1e3,algo:{type:"fibonacci",first:1e3,second:2e3}})),o("WATimeUtils").futureUnixTime(Math.round(this.$3[t]()/1e3))},r.$9=function(t,n){this.$2[t]||(this.$2[t]=[]),this.$2[t].push(n)},r.awaitTaskPromise=function(t){var e=this;return new(h||(h=n("Promise")))(function(n){e.$9(t,n)})},r.reschedule=function(t,n){this.$1?(this.$6.set(t,n),this.$4[t]!=null&&clearTimeout(this.$4[t]),this.$7(t)):this.$6.set(t,n)},r.registerTask=function(t,n){this.$1||(this.$1=!0),this.$5.set(t,n),this.$7(t)},r.getScheduledTime=function(t){return this.$6.get(t)},t})(),b=null,v=new(o("WAResolvable")).Resolvable;function S(e){o("WALogger").LOG(f||(f=babelHelpers.taggedTemplateLiteralLoose(["startScheduler invoked"]))),b||(b=new C(e),v.resolve())}function R(e){var t=x("awaitTaskPromise");return t.awaitTaskPromise(e)}function L(e,t){var n=x("reschedule");n.reschedule(e,t)}function E(e,t){v.resolveWasCalled()?L(e,t):v.promise.then(function(){L(e,t)}).catch(function(t){o("WALogger").ERROR(g||(g=babelHelpers.taggedTemplateLiteralLoose(["taskScheduler: reschedule eventually failed for task ",""])),e).sendLogs("task-scheduler-reschedule-failed")})}function k(e){E(e,o("WATimeUtils").unixTime())}function I(e){E(e,o("WATimeUtils").DEFAULT_UNIXTIME)}function T(e){var t=x("getScheduledTime");return t.getScheduledTime(e)}function D(e,t){var n=x("registerTask");n.registerTask(e,t)}function x(e){if(b)return b;throw r("err")("TaskScheduler::"+e+" called before startScheduler")}l.DO_NOT_RESCHEDULE=y,l.startScheduler=S,l.awaitTaskPromise=R,l._doReschedule=L,l.reschedule=E,l.rescheduleNow=k,l.deactivate=I,l.getScheduledTime=T,l.registerTask=D}),98);
__d("WATrie",["WANullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this._children={},this._indices=[],e&&(this._data=e)}e.fromBackwardsStrings=function(n,r){return n.reduce(function(e,t,n){return e.addBackwardsString(t,n)},new e(r))._optimize()};var t=e.prototype;return t.addBackwardsString=function(n,r){for(var t=n.length-1,o=this;t>=0;){var a=n.charAt(t);o._addIndex(r),o=o.get(a)||o.set(a,new e),t--}return o._addIndex(r),this},e.fromForwardsStrings=function(n,r){return n.reduce(function(e,t,n){return e.addForwardsString(t,n)},new e(r))._optimize()},t.addForwardsString=function(n,r){for(var t=0,o=this;t<n.length;){var a=n.charAt(t);o._addIndex(r),o=o.get(a)||o.set(a,new e),t++}return o._addIndex(r),this},t.set=function(t,n){return this._children[t]=n,n},t.get=function(t){return this._children[t]},t.getChildren=function(){var e=this;return Object.keys(this._children).map(function(t){return{prefix:t,node:r("WANullthrows")(e.get(t))}})},t.hasChildren=function(){return!s(this._children)},t.search=function(t){var e=this._data;if(!e)return[];for(var n=this,r=0;r<t.length&&n;r++){var o=t[r];n=n.get(o)}if(!n)return[];var a=n.getIndices();return a.map(function(t){return e[t]})},t._addIndex=function(t){this._indices.push(t)},t.getIndices=function(){var e=this._indices,t=Object.keys(this._children);return t.length===1&&this._indices.length===0?this._children[t[0]].getIndices():e},t._optimize=function(){var e=this;if(!this.hasChildren())return this;var t=Object.keys(this._children),n=this._children[t[0]]._indices;return t.forEach(function(t){e._children[t]._optimize()}),t.length===1&&this._indices.length===n.length&&(this._indices=[]),this},t.testOnlyGetChildrenProperty=function(){return this._children},t.testOnlyGetIndicesProperty=function(){return this._indices},e})();function s(e){for(var t in e)return!1;return!0}l.default=e}),98);
__d("WAUseCaseSecret",["$InternalEnum","WABinary","WACryptoHkdf"],(function(t,n,r,o,a,i,l){"use strict";var e=n("$InternalEnum")({POLL_VOTE:"Poll Vote",ENC_REACTION:"Enc Reaction",ENC_COMMENT:"Enc Comment",REPORT_TOKEN:"Report Token",EVENT_RESPONSE:"Event Response",EVENT_EDIT_ENCRYPTED:"Event Edit",MESSAGE_EDIT:"Message Edit"}),s=32;function u(e){var t=e.messageSecret,n=e.modificationSender,r=e.modificationType,a=e.parentMsgOriginalSender,i=e.stanzaId,l=o("WABinary").Binary.build(i,a,n,r).readBuffer();return o("WACryptoHkdf").extractAndExpand(t instanceof ArrayBuffer?new Uint8Array(t):t,l,s)}l.UseCaseSecretModificationType=e,l.createUseCaseSecret=u}),98);
__d("WAVerifyChainCertificateWA6",["WACert.pb","WACryptoUtils","WAHex","WALogger","WAResultOrError","WASignalKeys","WASignalOther","WASignalSignatures","decodeProtobuf"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R="142375574d0a587166aae71ebe516437c4a28b73e3695c6ce1f7f9545da8ee6b",L={SERIAL:0,ISSUER:"WhatsAppLongTerm1",PUBLIC_KEY:o("WASignalKeys").serializeIdentity(new Uint8Array(o("WAHex").parseHex(R)))};function E(t,n){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["verifyChainCertificateWA6: extract leaf and intermediate certificate"])));var r=o("decodeProtobuf").decodeProtobuf(o("WACert.pb").CertChainSpec,t),a=r.intermediate,i=r.leaf;if(a==null||i==null)return o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["verifyChainCertificateWA6: missing leaf and/or intermediate certificate"]))),o("WAResultOrError").makeError("missing-certificate");o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["verifying intermediate certificate"])));var l=k(a);if(!l.success)return o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["verifyChainCertificateWA6: invalid intermediate certificate"]))),o("WAResultOrError").makeError("invalid-certificate");if(l.value.issuerSerial!==L.SERIAL)return o("WALogger").ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["verifyChainCertificateWA6 intermediate certificate was not issued by RootCA"]))),o("WAResultOrError").makeError("invalid-certificate");if(!I(l.value,L.PUBLIC_KEY))return o("WALogger").ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["verifyChainCertificateWA6: intermediate certificate is poorly signed"]))),o("WAResultOrError").makeError("invalid-certificate");o("WALogger").LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["verifying leaf certificate"])));var y=k(i);if(!y.success)return o("WALogger").ERROR(_||(_=babelHelpers.taggedTemplateLiteralLoose(["verifyChainCertificateWA6: invalid leaf certificate"]))),o("WAResultOrError").makeError("invalid-certificate");if(y.value.issuerSerial!==l.value.serial)return o("WALogger").ERROR(f||(f=babelHelpers.taggedTemplateLiteralLoose(["verifyChainCertificateWA6 leaf certificate was not issued by RootCA"]))),o("WAResultOrError").makeError("invalid-certificate");var C=o("WASignalKeys").serializeIdentity(new Uint8Array(l.value.key));return I(y.value,C)?o("WACryptoUtils").arrayBuffersEqual(y.value.key,n)?o("WAResultOrError").makeResult({leaf:y.value,intermediate:l.value}):(o("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["verifyChainCertificateWA6 leafCert.key does not match handshake server.hello.static"]))),o("WAResultOrError").makeError("invalid-certificate")):(o("WALogger").ERROR(g||(g=babelHelpers.taggedTemplateLiteralLoose(["verifyChainCertificateWA6: leaf certificate is poorly signed"]))),o("WAResultOrError").makeError("invalid-certificate"))}function k(e){var t=e.details,n=e.signature;if(!t)return o("WALogger").ERROR(y||(y=babelHelpers.taggedTemplateLiteralLoose(['parseCertificateWA6 certificate is missing "details"']))),o("WAResultOrError").makeError("invalid-certificate");if(!n)return o("WALogger").ERROR(C||(C=babelHelpers.taggedTemplateLiteralLoose(['parseCertificateWA6 certificate is missing "signature"']))),o("WAResultOrError").makeError("invalid-certificate");var r=o("decodeProtobuf").decodeProtobuf(o("WACert.pb").CertChain$NoiseCertificate$DetailsSpec,t),a=r.issuerSerial,i=r.key,l=r.notAfter,s=r.notBefore,u=r.serial;if(a==null)return o("WALogger").ERROR(b||(b=babelHelpers.taggedTemplateLiteralLoose(['parseCertificateWA6 certificate is missing "issuer_serial"']))),o("WAResultOrError").makeError("invalid-certificate");if(u==null)return o("WALogger").ERROR(v||(v=babelHelpers.taggedTemplateLiteralLoose(['parseCertificateWA6 certificate is missing "serial"']))),o("WAResultOrError").makeError("invalid-certificate");if(i==null)return o("WALogger").ERROR(S||(S=babelHelpers.taggedTemplateLiteralLoose(['parseCertificateWA6 certificate is missing "key"']))),o("WAResultOrError").makeError("invalid-certificate");var c=o("WASignalOther").ensureSize(new Uint8Array(n),64);return o("WAResultOrError").makeResult({serial:u,issuerSerial:a,key:i,notBefore:s,notAfter:l,details:t,signature:c})}function I(e,t){return o("WASignalSignatures").verifyMsgSignalVariant(t,new Uint8Array(e.details),e.signature)}l.ROOT_CA=L,l.verifyChainCertificateWA6=E,l.parseCertificateWA6=k}),98);
__d("WAWamTypes",[],(function(t,n,r,o,a,i){"use strict";var e={INT:0,BOOL:1,STRING:2,FLOAT:3};i.TYPES=e}),66);
__d("WAWamBuffer",["WABinary","WAWamTypes","err"],(function(t,n,r,o,a,i,l){"use strict";var e=5,s=47,u=0,c=1,d=2,m=1,p=2,_=0,f=4,g=8,h=(function(){function t(t,n,r,a){var i=this;this.$5=!1,this.$6=!1;var l=new(o("WABinary")).Binary(void 0,!0);switch(l.writeString("WAM"),l.writeUint8(e),l.writeUint8(n),l.writeUint16(r),t){case"regular":l.writeUint8(u);break;case"realtime":l.writeUint8(c);break;default:l.writeUint8(d)}this.$1=t,this.$2=l,this.$3=r,this.$4=n,a.forEach(function(e,t){return void i.writeGlobal(t,e)})}var n=t.prototype;return n.writeGlobal=function(t,n){if(n==null){v(this.$2,t,_);return}if(typeof n=="string")b(this.$2,t,_,n);else if(typeof n=="number")y(this.$2,t,_,n);else if(typeof n=="boolean")y(this.$2,t,_,n?1:0);else throw r("err")("Incorrect value type "+typeof n)},n.writeEvent=function(t,n,r,a){var e=this.$2;y(e,s,_,Math.floor(t/1e3));var i=S(r),l=i===-1?m|f:m;y(e,n,l,a);for(var u=0;u<=i;u+=3){var c=r[u+2];if(c!=null){var d=r[u],g=r[u+1],h=u===i?p|f:p;g===o("WAWamTypes").TYPES.INT?y(e,d,h,c):g===o("WAWamTypes").TYPES.BOOL?y(e,d,h,c?1:0):g===o("WAWamTypes").TYPES.STRING?b(e,d,h,c):C(e,d,h,c)}}this.$6=!0},n.getKey=function(){return{streamId:this.$4,sequenceNumber:this.$3,channel:this.$1}},n.getSize=function(){return this.$2.size()},n.peek=function(){return this.$2.peek(function(e){return e.readByteArrayView()})},n.getBuffer__INTERNAL=function(){return this.$2},n.isFinalized=function(){return this.$5},n.finalize=function(){this.$5=!0},n.hasEvents=function(){return this.$6},t})();function y(e,t,n,r){r===0?v(e,t,n|16):r===1?v(e,t,n|32):-128<=r&&r<128?(v(e,t,n|48),e.writeInt8(r)):-32768<=r&&r<32768?(v(e,t,n|64),e.writeInt16(r)):-2147483648<=r&&r<2147483648?(v(e,t,n|80),e.writeInt32(r)):(v(e,t,n|96),e.writeInt64(r))}function C(e,t,n,r){v(e,t,n|112),e.writeFloat64(r)}function b(e,t,n,r){var a=o("WABinary").numUtf8Bytes(r);a<256?(v(e,t,n|128),e.writeUint8(a)):a<65536?(v(e,t,n|144),e.writeUint16(a)):(v(e,t,n|160),e.writeUint32(a)),e.writeString(r)}function v(e,t,n){t<256?(e.writeUint8(n),e.writeUint8(t)):(e.writeUint8(n|g),e.writeUint16(t))}function S(e){for(var t=-1,n=0;n<e.length;n+=3)e[n+2]!=null&&(t=n);return t}function R(e){for(var t=S(e),n=0;n<=t;n+=3){var r=e[n+2];if(r!=null){var a=e[n+1];if(a===o("WAWamTypes").TYPES.INT&&isNaN(r))return!1}}return!0}function L(e){return typeof e=="number"?!isNaN(e):!0}l.WamBuffer=h,l.canWriteEvent=R,l.canWriteGlobal=L}),98);
__d("WAWam",["Promise","WALogger","WAPromiseEach","WAShiftTimer","WAWamBuffer"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h,y=65536,C=300*1e3,b=3e3,v=1,S=2,R=6005,L=113760892,E=0,k="none",I={putBuffer:function(t,r,o){return(h||(h=n("Promise"))).resolve()}},T=(function(){function t(t){var n=this;this.$2=[],this.$3=new Map,this.$4=!1,this.$5=new Map,this.$8=-1,this.$9=I,this.$10=null,this.deinitialize=function(){n.$4=!1,n.$2=[],n.$3.clear(),n.$5=new Map,n.$8=-1,n.$9=I,n.serializePending.cancel(),n.finalizeBuffers.cancel()},this.enqueueEvent=function(e,t,r,o,a,i){var l=v;n.$2.push({type:l,id:e,commitTime:t,psIdIntValue:r,weight:a,fields:o,resolve:i}),n.$4&&n.serializePending.onOrBefore(b)},this.enqueueAttributesUpdate=function(t){var r={type:S,delta:[]};t.forEach(function(e,t){e!==void 0&&r.delta.push([t,e])}),r.delta.length>0&&(o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["WAM: Enqueued "," attribute keys for update"])),r.delta.length),n.$2.push(r))},this.finalizeBuffers=new(o("WAShiftTimer")).ShiftTimer(function(){n.finalizeBuffers__INTERNAL()}),this.serializePending=new(o("WAShiftTimer")).ShiftTimer(function(){n.serializePending__INTERNAL()}),this.forceSerializePending=function(){n.$4&&n.$11()&&n.serializePending.forceRunNow()},this.$1=t}var n=t.prototype;return n.initialize=function(t,n,r,a){if(this.$4){o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["WAM: Failed to initialize already initialized WAM"]))).sendLogs("wam-initialize");return}this.$7=a,this.$8=t,this.$9=r,this.$10=n,this.$11()&&this.serializePending.forceRunNow(),this.$4=!0,o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["WAM: Initialized with stream id ",""])),this.$8)},n.finalizeBuffers__INTERNAL=function(){this.$5.forEach(function(e){e.finalize()}),this.$5.size>0&&this.serializePending.onOrBefore(b)},n.$12=function(t){var e;return(e=this.$7)!=null&&e.multipleSequences?t===E?"null-psid":t:"regular"},n.$13=function(t){var e=this.$5.get(t);if(e)return e;var n=this.$12(t);if(this.$10==null){o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["WAM: Sequence number generator not initialised for channel ",""])),this.$1).sendLogs("wam-serializePending");return}var r=this.$10(n);if(e=new(o("WAWamBuffer")).WamBuffer(this.$1,this.$8,r,this.$3),this.$5.set(t,e),t!=="regular")if(this.$6==null)o("WALogger").ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["WAM: Tried to create a private buffer without setting private stats ids"]))).sendLogs("wam-serializePending");else{var a=t===E?k:this.$6.get(t);a==null?o("WALogger").ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["WAM: Tried to create a private buffer without setting private stats id"]))).sendLogs("wam-serializePending"):e.writeGlobal(R,a)}return e},n.serializePending__INTERNAL=function(){var e=this,t=[];this.finalizeBuffers.onOrBefore(C);var n=new Map,r=-1;this.$2.forEach(function(a,i){if(a.type===v){var l=!0;n.forEach(function(e){o("WAWamBuffer").canWriteGlobal(e)||(l=!1)});var s=o("WAWamBuffer").canWriteEvent(a.fields);if(s&&l){var u;switch(e.$1){case"regular":case"realtime":{u=e.$13("regular");break}default:e.$1,a.psIdIntValue==null?o("WALogger").ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["A WAM event in channel private was dropped before serialization. Reason: missing psIdIntValue in the event payload"]))).sendLogs("wam-serializePending"):u=e.$13(a.psIdIntValue)}u!=null&&(n.forEach(function(t,n){var r=e.$3.get(n);(r===void 0||r!==t)&&(e.$5.forEach(function(e){return e.writeGlobal(n,t)}),e.$3.set(n,t))}),n.clear(),u.writeEvent(a.commitTime,a.id,a.fields,a.weight))}else o("WALogger").WARN(_||(_=babelHelpers.taggedTemplateLiteralLoose(["A WAM event in channel "," was dropped before serialization. Event correct: ",", pending attributes correct: ",""])),e.$1,s,l);a.resolve!=null&&t.push(a.resolve),r=i}else{a.type;for(var c=0;c<a.delta.length;++c){var d=a.delta[c],m=d[0],f=d[1];n.set(m,f)}}});var a=!1;this.$5.forEach(function(e){(e.isFinalized()||e.getSize()>y)&&(a=!0)});var i=[];this.$5.forEach(function(t,n){t.hasEvents()?i.push([t.getKey(),t.peek(),e.$12(n)]):o("WALogger").WARN(f||(f=babelHelpers.taggedTemplateLiteralLoose(["Skipping putting buffer to sink, as it does not contain any events"])))});var l=o("WAPromiseEach").promiseEach(i,function(t){var n=t[0],r=t[1],o=t[2];return e.$9.putBuffer(n,r,a,o)}).then(function(){t.forEach(function(e){return void e()})});return this.$2=this.$2.slice(r+1),a&&(this.$5=new Map,this.finalizeBuffers.cancel()),l},n.$11=function(){return this.$2.length>0&&this.$2.some(function(e){return e.type===v})},n.isInitialized=function(){return this.$4},n.getStreamId=function(){return this.$8},n.getPendingActions=function(){return this.$2},n.getBuffers__INTERNAL=function(){return this.$5},n.getGlobals__INTERNAL=function(){return this.$3},n.setGlobals__INTERNAL=function(t){this.$3=t},n.getSink__INTERNAL=function(){return this.$9},n.updatePrivateStatsIds=function(t){if(this.$1!=="private"){o("WALogger").ERROR(g||(g=babelHelpers.taggedTemplateLiteralLoose(["WAM: Tried to set private stats ids on a non-private channel"]))).sendLogs("wam-updatePrivateStatsIds");return}this.$6=t},t})();l.PRIVATE_STATS_DEFAULT_PS_ID_KEY_HASH_INT=L,l.Wam=T}),98);
__d("WAWamChannelManager",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(){this.$1=new Map,this.$2=new Map}var t=e.prototype;return t.getChannelInitialized=function(t){return this.$2.get(t)||!1},t.setChannelInitialized=function(t){this.$2.set(t,!0)},t.isSinkBusy=function(t){return this.$1.get(t)||!1},t.setSinkBusy=function(t,n){this.$1.set(t,n)},t.close=function(){var e=this;this.$1.forEach(function(t,n){e.$1.set(n,!1)}),this.$2.forEach(function(t,n){e.$2.set(n,!1)})},e})(),l;function s(){return l==null&&(l=new e),l}function u(){l!=null&&l.close()}i.getChannelManager=s,i.closeChannelManager=u}),66);
__d("WAWamManager",["WALogger","WAWam"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=65535,d=(function(){function t(e){this.$1=new Map,this.$2=e}var n=t.prototype;return n.$3=function(t,n){n==null||n===0?this.$1.set(t,"uninitialized"):n<0?this.$1.set(t,"uninitialized"):this.$1.set(t,n)},n.getSequenceNumber__INTERNAL=function(){return this.$1},n.initializeForChannel=function(n,r){var t=this;r.forEach(function(r,a){var i;if(n==="regular"&&a==="regular")t.$3(a,r);else if(n==="realtime"&&a==="realtime")t.$3(a,r);else if(n==="private"&&a!=="regular"&&a!=="realtime")t.$3(a,r);else if(n==="private"&&!((i=t.$2)!=null&&i.multipleSequences))t.$3(a,r);else{var l;o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["SequenceNumberGenerator::initializeForChannel: Incorrect combination of parameters: "," "," ",""])),n,a,(l=t.$2)==null?void 0:l.multipleSequences)}})},n.next=function(t){var e=this.$1.get(t),n;return e==null||e==="uninitialized"?n=1:(n=e+1,n>c&&(n=1)),this.$1.set(t,n),n},t})(),m=(function(){function e(){this.$1=new Map,this.$2=null}var t=e.prototype;return t.getWamInstance=function(t){var e=this.$1.get(t);return e||(e=new(o("WAWam")).Wam(t),this.$1.set(t,e)),e},t.initialize=function(t,n,r,a,i){var e=this.getWamInstance(t);if(e.isInitialized()){o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["WAM instance for channel "," has already been initialized"])),t);return}this.$2==null&&(this.$2=new d(i));var l=this.$2;this.$2.initializeForChannel(t,r),e.initialize(n,function(e){return l.next(e)},a,i)},t.deinitialize=function(){this.$1.forEach(function(e,t){e.isInitialized()&&(o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["WamManager: Deinitializing WAM Channel ",""])),t),e.deinitialize())}),this.$2=null},t.enqueueEvent=function(t,n,r,o,a,i,l){var e=this.getWamInstance(t);e.enqueueEvent(n,r,o,a,i,l)},t.enqueueAttributesUpdate=function(t,n){var e=this.getWamInstance(t);e.enqueueAttributesUpdate(n)},t.updatePrivateStatsIds=function(t){var e=this.getWamInstance("private");e.updatePrivateStatsIds(t)},t.forceFlushBuffers=function(){this.$1.forEach(function(e){e.forceSerializePending()})},t.rotateBuffers=function(){this.$1.forEach(function(e){e.finalizeBuffers.forceRunNow()})},t.getSequenceNumberGenerator__INTERNAL=function(){return this.$2},e})();l.WamManager=m}),98);
__d("WAWamUtils",["WABase64","WALogger","WAWamTypes","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=(e={},e[(u=o("WAWamTypes")).TYPES.INT]="number",e[u.TYPES.FLOAT]="number",e[u.TYPES.STRING]="string",e[u.TYPES.BOOL]="boolean",e);function d(e,t){if(t==null||t.length===0)return e;for(var n=new Map,r=0;r<e.length;r+=3){var o=e[r];n.set(o,r)}for(var a=0;a<t.length;++a){var i=t[a],l=i[0],s=i[1],u=i[2];if(u!=null){var d=n.get(l);if(d!=null){var m=e[d+2];if(m!==void 0)continue}var p=c[s];p===typeof u&&(d==null?(n.set(l,e.length),e.push(l,s,u)):e[d+2]=u)}}return e}function m(e){for(var t=new Map,n=new Map,a=0;a<e.length;a+=4){var i=e[a],l=e[a+1],u=e[a+2],c=e[a+3];if(u===o("WAWamTypes").TYPES.FLOAT)throw r("err")("Float attributes are currently not supported in runtime");if(!Array.isArray(i)){o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["logAttributes WAM channel is not an array"]))).sendLogs("wam-log-attributes");return}i.includes("regular")&&t.set(l,c),i.includes("private")&&n.set(l,c)}return{deltaRegular:t,deltaPrivate:n}}function p(e,t){var n=[];return t.forEach(function(t){var r=t.channel;if(r==null){if(e!=="regular")return}else if(r!==e)return;if(t.finished){var a=new Uint8Array(o("WABase64").decodeB64(t.buffer)),i=t.key;n.push({key:i,content:a})}}),n}function _(e){return JSON.stringify([e.streamId,e.sequenceNumber,e.channel])}function f(e,t,n,r,a){var i=_(e);return{bufferKey:i,meta:{streamId:e.streamId,sequenceNumber:e.sequenceNumber},bufferRow:{key:i,channel:t,streamId:n,buffer:o("WABase64").encodeB64(r),finished:a}}}function g(e){var t=null;return e&&(t=e.sequenceNumber),t}l.appendRawFields=d,l.getDeltaFromAttributes=m,l.getFinishedBuffers=p,l.asBufferEntry=f,l.getSequenceNumber=g}),98);
__d("WAWamEntrypoint",["Promise","WAWamManager","WAWamUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s=1,u=!1,c=null;function d(){return c||(c=new(o("WAWamManager")).WamManager),c}function m(){u=!0}function p(e,t,n,r,o){d().initialize(n,e,t,r,o)}function _(){d().deinitialize()}function f(e,t,n,r,a,i,l){i===void 0&&(i=s);var c=Date.now();u&&l!=null,d().enqueueEvent(e,t,c,n,o("WAWamUtils").appendRawFields(r,a),i)}function g(t,r,a,i,l,c,m){c===void 0&&(c=s);var p=Date.now();return u&&m!=null,new(e||(e=n("Promise")))(function(e){d().enqueueEvent(t,r,p,a,o("WAWamUtils").appendRawFields(i,l),c,e)})}function h(e,t){var n=o("WAWamUtils").getDeltaFromAttributes(e);if(n!=null){var r=n.deltaPrivate,a=n.deltaRegular;u&&t!=null,a.size>0&&d().enqueueAttributesUpdate("regular",a),r.size>0&&d().enqueueAttributesUpdate("private",r)}}function y(e){d().updatePrivateStatsIds(e)}function C(){d().forceFlushBuffers()}function b(){d().rotateBuffers()}l.enableDebugMode=m,l.initializeWAM=p,l.deinitializeWAM=_,l.log=f,l.logAsync=g,l.logAttributes=h,l.updatePrivateStatsIds=y,l.forceFlushBuffers=C,l.rotateBuffers=b}),98);
__d("WAWamStorage",["Promise","WALogger","WATimeUtils","WAWamChannelManager","WAWamEntrypoint","WAWamUtils","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_=null,f=null;function g(e){if(f)return f;throw r("err")("WamStorage::"+e+" called before startWamStorage")}function h(t){f==null?f=t:o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[wam] startWamStorage: called again"]))).sendLogs("startWamStorage")}function y(){o("WAWamEntrypoint").deinitializeWAM(),o("WAWamChannelManager").closeChannelManager(),f=null,_=null}function C(e,t,a,i){var l=g("initializeWAMSink"),d=o("WAWamChannelManager").getChannelManager();if(d.getChannelInitialized(t))return(p||(p=n("Promise"))).resolve();d.setChannelInitialized(t);var m=l.getStreamId(e),f={putBuffer:function(r,i,_,f){if(d.isSinkBusy(t))return o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["WamStorage: Sink flush did not happen within timeout, buffer is not saved"]))),(p||(p=n("Promise"))).resolve();d.setSinkBusy(t,!0);var e=o("WAWamUtils").asBufferEntry(r,t,m,i,_),g=e.bufferKey,h=e.bufferRow,y=e.meta;return l.saveBuffer(y,h,f).then(function(){var e=[r.streamId,r.sequenceNumber];o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["WamStorage: Successfully put buffer "," to sink"])),e),_&&(a(),o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["WamStorage: Buffer "," is scheduled for send"])),g))}).finally(function(){d.setSinkBusy(t,!1)})}};return _==null&&(_=l.finishBuffer(m)),_.then(function(){if(l.getStartingSequenceNumbers)return l.getStartingSequenceRow,l.getStartingSequenceNumbers(t,m);if(l.getStartingSequenceRow,i!=null&&i.multipleSequences)throw r("err")("getStartingSequenceRow must not used when enabling support for multiple sequences");return l.getStartingSequenceRow(m).then(function(e){var t=o("WAWamUtils").getSequenceNumber(e),n=new Map;return n.set("regular",t),n})}).then(function(e){o("WAWamEntrypoint").initializeWAM(m,e,t,f,i),t==="private"&&l.updatePrivateStatsIds&&l.updatePrivateStatsIds().then(o("WAWamEntrypoint").updatePrivateStatsIds)})}function b(e){return g("getFinishedStreamBuffers").getBuffers().then(function(t){return o("WAWamUtils").getFinishedBuffers(e,t)})}var v=64,S=function(t,n){var e=(n==null?void 0:n.maxRedeemCount)!=null&&n.maxRedeemCount!==0?n.maxRedeemCount:v,r=(n==null?void 0:n.maxExpirySeconds)!=null&&n.maxExpirySeconds!==0?n.maxExpirySeconds:o("WATimeUtils").DAY_SECONDS,a={maxRedeemCount:e,maxExpirySeconds:r};return o("WATimeUtils").happenedWithin(t.creationTs,a.maxExpirySeconds)?t.redeemCount>=a.maxRedeemCount?(o("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["The private stats token was redeemed maximum number of time. The client shall re-issue a new one"]))),!1):!0:(o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["The private stats token expired. The client shall re-issue a new one"]))),!1)};function R(){var e=g("getPrivateStatsToken");if(!e.redeemPrivateStatsToken)throw r("err")("redeemPrivateStatsToken not implemented for WAM DB");return e.redeemPrivateStatsToken(S)}function L(e){var t=g("savePrivateStatsToken");if(!t.savePrivateStatsToken)throw r("err")("savePrivateStatsToken not implemented for WAM DB");return t.savePrivateStatsToken(e)}function E(){var e=g("privateStatsKillSwitchGetBlockedToken");if(!e.privateStatsKillSwitchGetBlockedToken)throw r("err")("privateStatsKillSwitchGetBlockedToken not implemented for WAM DB");return e.privateStatsKillSwitchGetBlockedToken()}function k(e){var t=g("privateStatsKillSwitchSet");if(!t.privateStatsKillSwitchSet)throw r("err")("privateStatsKillSwitchSet not implemented for WAM DB");return t.privateStatsKillSwitchSet(e)}function I(e){return g("removeBufferByKey").removeBufferByKey(e)}function T(){return g("nukeMetrics").nukeMetrics()}l.startWamStorage=h,l.closeWamStorage=y,l.initializeWAMSink=C,l.getFinishedStreamBuffers=b,l.redeemPrivateStatsToken=R,l.savePrivateStatsToken=L,l.privateStatsKillSwitchGetBlockedToken=E,l.privateStatsKillSwitchSet=k,l.removeBufferByKey=I,l.nukeMetrics=T}),98);
__d("WAWebClientExposureGatingUtils",["WAWebABProps"],(function(t,n,r,o,a,i,l){"use strict";function e(){return o("WAWebABProps").getABPropConfigValue("enable_wefr_client_expo_pulse")}l.clientExposurePulseLoggingEnabled=e}),98);
__d("WAWebWefrClientExposureWamEvent",["WAWebWamCodegenUtils"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({WefrClientExposure:[5504,{canonicalEntLastValidationTsMs:[8,e.TYPES.INTEGER],deviceExpId:[5,e.TYPES.STRING],exposureKey:[1,e.TYPES.STRING],guestId:[7,e.TYPES.STRING],isCanonicalEntPresent:[6,e.TYPES.BOOLEAN],sentWithDaily:[3,e.TYPES.BOOLEAN],userLid:[4,e.TYPES.INTEGER]},[1,1,1],"realtime"]},{WefrClientExposure:[]});l.WefrClientExposureWamEvent=s}),98);
__d("WAWebABPropsGlobals",["WAWebABProps","WAWebClientExposureGatingUtils","WAWebDebounce","WAWebNetworkStatus","WAWebWamGlobals","WAWebWefrClientExposureWamEvent","justknobx"],(function(t,n,r,o,a,i,l){var e=1e3,s=new Set,u=new Set,c="";function d(){if(o("WAWebABProps").getABPropConfigValue("wam_disable_expokey_attribute"))o("WAWebWamGlobals").Global.set({expoKey:null});else{var e=g();c!==e&&o("WAWebClientExposureGatingUtils").clientExposurePulseLoggingEnabled()&&(f(e),c=e),o("WAWebWamGlobals").Global.set({expoKey:e})}}function m(e){o("WAWebABProps").getABPropConfigValue("wam_disable_abkey_attribute")?o("WAWebWamGlobals").Global.set({abKey2:null}):e!=null&&o("WAWebWamGlobals").Global.set({abKey2:e})}function p(e){r("justknobx")._("1964")?r("WAWebNetworkStatus").waitIfOffline().then(function(){new(o("WAWebWefrClientExposureWamEvent")).WefrClientExposureWamEvent(e).commit()}):new(o("WAWebWefrClientExposureWamEvent")).WefrClientExposureWamEvent(e).commit()}function _(){if(o("WAWebClientExposureGatingUtils").clientExposurePulseLoggingEnabled()){var e=g();p({exposureKey:e,sentWithDaily:!0})}}var f=r("WAWebDebounce")(function(e){p({exposureKey:e,sentWithDaily:!1})},e);function g(){return Array.from(u).join(",")}l.CLIENT_EXPOSURE_PULSE_DEBOUNCE_MS=e,l.accessedConfigs=s,l.exposureKeys=u,l.updateGlobalExpoKey=d,l.updateGlobalABKey=m,l.logClientExposurePulseEventFromDailyStatsTask=_,l.combineExposuresIntoExpoKey=g}),98);
__d("WAWebSchemaFtsIndexingQueue",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(t,n,r,o,a,i,l){function e(){var e=o("WAWebModelStorageUtils").getStorage(),t=o("WAWebStorageMutationBuilder").columnBuilder(e.config),n=t.addUserDefinedPrimaryKey;e.add("fts-indexing-queue").version(o("WAWebModelStorageVersions").ftsIndexingQueueCreateTable(),[n("id")]).view(function(e){return e})}function s(){return o("WAWebModelStorageUtils").getStorage().table("fts-indexing-queue")}l.addTable=e,l.getFtsIndexingQueueTable=s}),98);
__d("WAWebApiAbPropConfig",["Promise","WALogger","WAWebABPropsConfigs","WAWebABPropsGlobals","WAWebModelStorageInitialize","WAWebModelStorageUtils","WAWebSchemaAbPropConfig","asyncToGeneratorRuntime","cr:21223","err"],(function(t,n,r,o,a,i,l){var e,s,u;function c(){return o("WAWebModelStorageInitialize").initializeWithoutGKs().then(function(){return o("WAWebSchemaAbPropConfig").getAbpropConfigsTable().all().then(function(e){return e})})}function d(e,t,n){return e==null||t==null?n:t==="bool"?e==="1"||e==="True"||e==="true":t==="int"?parseInt(e,10):t==="float"?parseFloat(e):e}function m(t){var a=o("WAWebABPropsConfigs").ABPropConfigs[t];if(a==null)return o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["invalid ABProps config name"]))).verbose().sendLogs("invalid ABProps config name: "+t),(u||(u=n("Promise"))).reject(r("err")("invalid ABProps config name"));var i=a[0],l=a[1],s=a[2],c=a[3],m=s;return o("WAWebModelStorageInitialize").initializeWithoutGKs().then(function(){return o("WAWebSchemaAbPropConfig").getAbpropConfigsTable().get(String(i)).then(function(e){var t=e?d(e.configValue,l,m):m;return t})})}function p(e,t){return o("WAWebModelStorageUtils").getStorage().lock(["abpropConfigs"],(function(){var r=n("asyncToGeneratorRuntime").asyncToGenerator(function*(n){var r=n[0],a=yield r.all(),i=new Map;a.forEach(function(e){(e.configExpoKey!=null||e.overriddenConfigValue!=null)&&i.set(e.configCode,{configCode:e.configCode,configValue:e.configValue,configExpoKey:e.configExpoKey,hasAccessed:e.hasAccessed,overriddenConfigValue:e.overriddenConfigValue})});var l=!1,s=[];return e.forEach(function(e,t){var n=!1,r=i.get(String(t));if(r){var a=r.configExpoKey;a!=null&&e.configExpoKey!==a?(o("WAWebABPropsGlobals").exposureKeys.delete(a),l=!0,o("WAWebABPropsGlobals").accessedConfigs.delete(t)):a!=null&&(n=r.hasAccessed)}s.push({configCode:String(t),configValue:e.configValue,configExpoKey:e.configExpoKey,hasAccessed:n,overriddenConfigValue:r==null?void 0:r.overriddenConfigValue})}),l&&o("WAWebABPropsGlobals").updateGlobalExpoKey(),t?yield r.bulkCreateOrReplace(s):(yield r.clear(),yield r.bulkCreate(s)),a});return function(e){return r.apply(this,arguments)}})()).then((function(){var r=n("asyncToGeneratorRuntime").asyncToGenerator(function*(r){if(n("cr:21223")&&!t)try{yield n("cr:21223")==null?void 0:n("cr:21223").processAbpropChangelog(r,e)}catch(e){o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Failed to record ABProp diff ",""])),e)}});return function(e){return r.apply(this,arguments)}})())}function _(e){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield o("WAWebSchemaAbPropConfig").getAbpropConfigsTable().get(String(e));t==null||(t==null?void 0:t.hasAccessed)===!0||(yield o("WAWebSchemaAbPropConfig").getAbpropConfigsTable().merge(String(e),{hasAccessed:!0}))}),f.apply(this,arguments)}l.getABPropConfigs=c,l.parseConfigValue=d,l.getConfigValue=m,l.updateABPropConfigs=p,l.setConfigAccessed=_}),98);
__d("WAWebABPropsCache",["WALogger","WAResolvable","WAWebABProps","WAWebABPropsConfigs","WAWebABPropsGlobals","WAWebApiAbPropConfig","WAWebRuntimeEnvironmentUtils","cr:4941","gkx"],(function(t,n,r,o,a,i,l){var e,s=new Map,u=new(o("WAResolvable")).Resolvable,c;function d(e){return c==null&&(c={},Object.keys(o("WAWebABPropsConfigs").ABPropConfigs).forEach(function(e){var t=o("WAWebABPropsConfigs").ABPropConfigs[e],n=t[0];c[n]=e}),Object.freeze(c)),c[e]}function m(){o("WAWebABProps").setGetABPropConfigValueImpl(p)}function p(t){var a=o("WAWebABPropsConfigs").ABPropConfigs[t],i=a[0],l=a[1],s=a[2],c=a[3],d=s;if(!r("gkx")("26258")&&!o("WAWebRuntimeEnvironmentUtils").isWorker()&&n("cr:4941")){var m=new(n("cr:4941"))(window.location.search),p=m.get(t);if(p!=null&&p!=="")return o("WAWebApiAbPropConfig").parseConfigValue(p,l,d)}return u.resolveWasCalled()?f(i):(o("WAWebABProps").usedBeforeInitializationConfigs.includes(t)||o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[abprops] configs need to be initialized before its first access, config name: ",""])),t),d)}function _(e){if(s.get(e)&&!o("WAWebABPropsGlobals").accessedConfigs.has(e)){var t,n=(t=s.get(e))==null?void 0:t.configExpoKey;n!=null&&!o("WAWebABPropsGlobals").exposureKeys.has(n)&&(o("WAWebABPropsGlobals").exposureKeys.add(n),o("WAWebABPropsGlobals").updateGlobalExpoKey()),o("WAWebABPropsGlobals").accessedConfigs.add(e),self.setTimeout(function(){return o("WAWebApiAbPropConfig").setConfigAccessed(e)},0)}}function f(e){_(e);var t=s.get(e);return!r("gkx")("26258")&&(t==null?void 0:t.overriddenConfigValue)!=null?t.overriddenConfigValue:t==null?void 0:t.configValue}function g(){return Array.from(s.values())}function h(){return s}function y(e){var t=!1;e.forEach(function(e){s.set(e.configCode,e),e.hasAccessed===!0&&(o("WAWebABPropsGlobals").accessedConfigs.add(e.configCode),e.configExpoKey!=null&&(o("WAWebABPropsGlobals").exposureKeys.add(e.configExpoKey),t=!0))}),t&&o("WAWebABPropsGlobals").updateGlobalExpoKey(),u.resolve()}function C(){return u.promise}function b(){s.clear(),o("WAWebABPropsGlobals").accessedConfigs.clear(),o("WAWebABPropsGlobals").exposureKeys.clear(),u=new(o("WAResolvable")).Resolvable}l.getABPropConfigNameFromCode=d,l.initializeABPropsCache=m,l.saveExposure=_,l.getAllABPropConfigs=g,l.getAllABPropsMap=h,l.bulkCreateOrReplaceABPropConfigs=y,l.waitForABPropConfigsReady=C,l.clearABPropConfigs=b}),98);
__d("WAWebABPropsSaga",["WAWebABProps"],(function(t,n,r,o,a,i,l){function e(){return o("WAWebABProps").getABPropConfigValue("saga_v1_enabled")}function s(){return o("WAWebABProps").getABPropConfigValue("saga_v1_reengagement_enabled")}function u(){return o("WAWebABProps").getABPropConfigValue("saga_v1_carousel")}function c(){return o("WAWebABProps").getABPropConfigValue("saga_protobuf_show_sysmsg_web")}function d(){return o("WAWebABProps").getABPropConfigValue("saga_protobuf_ai_stardust_web")}function m(){return o("WAWebABProps").getABPropConfigValue("saga_v1_nux_enabled")}function p(){return o("WAWebABProps").getABPropConfigValue("support_message_feedback_enabled")}l.getIsSagaV1Enabled=e,l.getIsSagaV1ReengagementEnabled=s,l.getIsSagaV1CarouselEnabled=u,l.getIsSagaProtobufSystemMessageEnabled=c,l.getIsSagaProtobufAIStardustEnabled=d,l.getIsSagaV1NuxEnabled=m,l.getSagaFeedbackEnabled=p}),98);
__d("WAWebABPropsUpdateFromStorage",["WALogger","WAWebABPropsCache","WAWebABPropsConfigs","WAWebABPropsGlobals","WAWebApiAbPropConfig","WAWebUserPrefsGeneral","asyncToGeneratorRuntime","compactMap","gkx"],(function(t,n,r,o,a,i,l){var e,s,u,c;function d(){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var t=!1,n=t;if(!r("gkx")("26258")){var a=yield o("WAWebUserPrefsGeneral").getWhatsAppWebExternalBetaJoinedIdb();r("gkx")("26259")&&a?(o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[abprops][intern] Web Beta joined, using DEBUG default AB prop values"]))),n=!0):t&&a&&(o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[abprops][dev] Web Beta joined, using NON-DEBUG default AB prop values (to simulate intern env)"]))),n=!1)}var i=yield o("WAWebApiAbPropConfig").getABPropConfigs(),l=r("compactMap")(i,function(e){var t=o("WAWebABPropsCache").getABPropConfigNameFromCode(Number(e.configCode));if(t==null)o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[abprops] ABProp (code: ",") exists in storage but no longer available for this client version"])),e.configCode);else{var a=o("WAWebABPropsConfigs").ABPropConfigs[t],i=a[0],l=a[1],s=a[2],c=a[3],d=n?c:s,m=o("WAWebApiAbPropConfig").parseConfigValue(e.configValue,l,d),p;return!r("gkx")("26258")&&e.overriddenConfigValue!=null&&(p=o("WAWebApiAbPropConfig").parseConfigValue(e.overriddenConfigValue,l,d)),{configCode:i,configValue:m,configExpoKey:e.configExpoKey,hasAccessed:e.hasAccessed,overriddenConfigValue:p}}});o("WAWebABPropsCache").bulkCreateOrReplaceABPropConfigs(l),o("WAWebABPropsGlobals").updateGlobalExpoKey(),o("WAWebABPropsGlobals").updateGlobalABKey()}catch(e){o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[abprops] Failed to update ABProps configs cache from storage: ",""])),e).verbose().sendLogs("[abprops] Failed to update ABProps configs cache from storage: "+e)}}),m.apply(this,arguments)}l.updateABPropsFromStorage=d}),98);
__d("WAWebABPropsWamGlobals",["WAWebABProps","WAWebWamGlobals"],(function(t,n,r,o,a,i,l){function e(){o("WAWebWamGlobals").Global.set({serviceImprovementOptOut:o("WAWebABProps").getABPropConfigValue("service_improvement_opt_out_flag")})}l.setAbPropDependingGlobalWamAttributes=e}),98);
__d("WAWebAbPropsParsingJob",["WAWebABPropsConfigs"],(function(t,n,r,o,a,i,l){function e(e,t){var n=new Map;e.forEach(function(e){var t=e.configCode,r=e.configExpoKey,o=e.configValue;n.set(t,{configValue:o,configExpoKey:r})});var r=new Map;return Object.keys(o("WAWebABPropsConfigs").ABPropConfigs).map(function(e){var a=o("WAWebABPropsConfigs").ABPropConfigs[e][0],i=n.get(a);if(!(i==null&&t)){var l=i==null?void 0:i.configValue,s=i==null?void 0:i.configExpoKey;r.set(a,{configValue:l,configExpoKey:s==null?null:s.toString()})}}),r}l.parseABProps=e}),98);
__d("WAWebApiAbPropEventSamplingConfig",["Promise","WAWebBoolFunc","WAWebModelStorageInitialize","WAWebModelStorageUtils","WAWebSchemaAbPropEventSamplingConfig"],(function(t,n,r,o,a,i,l){var e;function s(){return o("WAWebModelStorageInitialize").initializeWithoutGKs().then(function(){return o("WAWebSchemaAbPropEventSamplingConfig").getAbpropEventSamplingConfigsTable().all().then(function(e){return e})})}function u(e){return o("WAWebModelStorageInitialize").initializeWithoutGKs().then(function(){return o("WAWebSchemaAbPropEventSamplingConfig").getAbpropEventSamplingConfigsTable().get(e).then(function(e){return e==null?void 0:e.samplingWeight})})}function c(t){if(t==null||t.length===0)return(e||(e=n("Promise"))).resolve(!1);var r=[];return t.forEach(function(e){r.push({eventCode:e.eventCode,samplingWeight:e.samplingWeight})}),o("WAWebModelStorageUtils").getStorage().lock(["abprop-event-sampling-configs"],function(e){var t=e[0];return t.clear().then(function(){return t.bulkCreate(r).then(o("WAWebBoolFunc").returnTrue)})})}l.getEventSamplingConfigs=s,l.getEventSamplingWeight=u,l.updateEventSamplingConfigs=c}),98);
__d("WAWebEncryptedRid",["WABase64","WAWebUserPrefsIndexedDBStorage","WAWebUserPrefsMultiDevice"],(function(t,n,r,o,a,i,l){function e(e){return o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set("WAWebEncryptedRid",o("WABase64").encodeB64(e))}function s(){return o("WAWebUserPrefsMultiDevice").isRegistered()?o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get("WAWebEncryptedRid"):null}l.setEncryptedRid=e,l.getEncryptedRid=s}),98);
__d("WAWebEventSampling",[],(function(t,n,r,o,a,i,l){"use strict";var e=null;function s(t){return e==null?null:e(t)}function u(e){var t=s(e);return t!=null?Math.abs(t):null}function c(t){e=t}l.getClientEventSamplingWeight=u,l.setGetEventSamplingConfigValueImpl=c}),98);
__d("WAWebEventSamplingCache",["WAWebApiAbPropEventSamplingConfig","WAWebEventSampling","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e=new Map,s=!1;function u(t){return s?e.get(t):null}function c(){o("WAWebEventSampling").setGetEventSamplingConfigValueImpl(u)}function d(){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=yield o("WAWebApiAbPropEventSamplingConfig").getEventSamplingConfigs();t.forEach(function(t){e.set(t.eventCode,t.samplingWeight)}),s=!0}),m.apply(this,arguments)}l.initializeEventSamplingCache=c,l.updateEventSamplingFromStorage=d}),98);
__d("WAWebStoreSpecialAbProps",["WALogger","WAWebABProps","WAWebLocalStorage","asyncToGeneratorRuntime","getErrorSafe"],(function(t,n,r,o,a,i,l){var e,s=["wa_web_favicons_update_m1","web_ui_refresh_m1","web_retry_quota_exceeded_idb_writes","web_hybrid_apply_latest_db_schema_optimization_enabled"],u="abprops_needed_early";function c(){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var t=s.reduce(function(e,t){var n=o("WAWebABProps").getABPropConfigValue(t);return n!=null&&(e[t]=n),e},{});r("WAWebLocalStorage")==null||r("WAWebLocalStorage").setItem(u,JSON.stringify(t))}catch(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Failed to store special early abprops"]))).sendLogs(r("getErrorSafe")(t).message)}}),d.apply(this,arguments)}l.storeSpecialAbProps=c}),98);
__d("WAWebUserPrefsAppStateSync",["WAWebUserPrefsIndexedDBStorage","WAWebUserPrefsKeys","WAWebUserPrefsStore","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){function e(){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(o("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.CRITICAL_DATA_SYNCED,!0)}),s.apply(this,arguments)}function u(){var e=o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(o("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.CRITICAL_DATA_SYNCED);return e===!0}function c(e){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){yield o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(o("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.LAST_PERIODIC_APP_STATE_SYNC_TS,e)}),d.apply(this,arguments)}function m(){var e=o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(o("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.LAST_PERIODIC_APP_STATE_SYNC_TS);return e}function p(){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(o("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.SHOULD_CHECK_CONTACT_SYNC_STATUS,!0)}),_.apply(this,arguments)}function f(){var e=o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(o("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.MD_SYNC_ACTIONS_ACTION_SANITIZED);return e===!0}function g(e){return h.apply(this,arguments)}function h(){return h=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){yield o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(o("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.MD_SYNC_ACTIONS_ACTION_SANITIZED,e)}),h.apply(this,arguments)}function y(){return r("WAWebUserPrefsStore").set(o("WAWebUserPrefsKeys").MD_KEYS.SYNCD_PRIMARY_ALLOWS_ALL_MUTATIONS,!0)}function C(){return!!r("WAWebUserPrefsStore").get(o("WAWebUserPrefsKeys").MD_KEYS.SYNCD_PRIMARY_ALLOWS_ALL_MUTATIONS)}function b(){return o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(o("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.NON_CRITICAL_DATA_SYNC_STATUS)}function v(e){return S.apply(this,arguments)}function S(){return S=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t,n=(t=yield b())!=null?t:{};yield o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(o("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.NON_CRITICAL_DATA_SYNC_STATUS,babelHelpers.extends({},n,e))}),S.apply(this,arguments)}l.setAllCriticalDataSynced=e,l.getAllCriticalDataSynced=u,l.setLastPeriodicAppStateSyncTs=c,l.getLastPeriodicAppStateSyncTs=m,l.setShouldCheckContactSyncStatus=p,l.getMdSyncActionsActionSanitized=f,l.setMdSyncActionsActionSanitized=g,l.setPrimaryAllowsAllMutations=y,l.getPrimaryAllowsAllMutations=C,l.getNonCriticalDataSyncStatus=b,l.setNonCriticalDataSyncStatus=v}),98);
__d("WAWebCTWAConstants",[],(function(t,n,r,o,a,i){var e="11478",l="11525",s="11522",u="12015",c="12502",d="12503",m=new Map([[e,"WHATSAPP_FOR_SMB_WEB_WHATSAPP_SMB_WEB_CHATLIST_BANNER_QP"],[l,"WHATSAPP_FOR_WEB_GROUPSBANNER_QP"],[s,"WHATSAPP_FOR_WEB_PROFILEBANNER_QP"],[u,"WHATSAPP_FOR_SMB_WEB_BUSINESS_HOME_CARD_QP"],[d,"WHATSAPP_FOR_SMB_WEB_UPDATES_TAB_FOOTER_NOTICE_QP"],[c,"WHATSAPP_FOR_WEB_UPDATES_TAB_FOOTER_NOTICE_QP"]]),p=20*1e3,_=20*1e3,f=20*1e3,g=20*1e3,h=Object.freeze({NEW_CUSTOMER:1,NEW_ORDER:2,PENDING_PAYMENT:3,PAID:4,ORDER_COMPLETE:5,FOLLOW_UP:7,LEAD:8}),y=new Set(Object.keys(h).map(function(e){return h[e]})),C=7,b=8,v=6,S=2,R=9,L=10;i.QP_SURFACE_ID_CHAT_LIST_TOP=e,i.QP_SURFACE_ID_EXITED_GROUP=l,i.QP_SURFACE_ID_PROFILE=s,i.QP_SURFACE_BUSINESS_HOME_TOP_CARD=u,i.QP_SURFACE_UPDATES_TAB_PRIVACY_FOOTER=c,i.QP_SURFACE_BUSINESS_UPDATES_TAB_PRIVACY_FOOTER=d,i.KNOWN_QP_SURFACES=m,i.QP_FETCH_TIMEOUT_MS=p,i.QP_ACTION_MUTATION_TIMEOUT_MS=_,i.MANAGE_ADS_FETCH_TIMEOUT_MS=f,i.AD_ENTRY_POINTS_FETCH_TIMEOUT_MS=g,i.ALLOWED_PREDEFINED_LABEL_IDS=h,i.ALLOWED_PREDEFINED_LABEL_IDS_SET=y,i.FOLLOW_UP_PREDEFINED_ID=C,i.LEAD_PREDEFINED_ID=b,i.IMPORTANT_PREDEFINED_ID=v,i.NEW_ORDER_PREDEFINED_ID=S,i.DETECTED_OUTCOME_NEW_ORDER_PREDEFINED_ID=R,i.DETECTED_OUTCOME_LEAD_PREDEFINED_ID=L}),66);
__d("WAWebClientFeatureFlags",["WAWebEnvironment","gkx"],(function(t,n,r,o,a,i,l){var e=!1,s={lid_debug:!1,youtube_video_preview_without_blur:!r("gkx")("26258"),message_add_ons:!1,reactions_filter_problematic_flags:!0,skip_compliance_phone_check:!1,debug_commands:e,debug_1_year_history_sync:r("WAWebEnvironment").isWindows};function u(e){return s[e]}function c(e){s[e]=!0}function d(e){s[e]=!1}function m(){if(!r("gkx")("26258")){var e,t=new URLSearchParams(((e=location.search)!=null?e:"").toLowerCase());p(t,"feature_enable",c),p(t,"feature_disable",d)}}function p(e,t,n){var r=e.get(t);if(r!=null){var o=r.split(",");o.forEach(function(e){e in s?n(e):""+e})}}l.isFeatureEnabled=u,l.debugEnableFeatureFlag=c,l.debugDisableFeatureFlag=d,l.overwriteDebugFeatures=m}),98);
__d("WAWebComplianceConstants",[],(function(t,n,r,o,a,i){var e={INDIA:"IN"},l={ENTITY_NAME:1024,ENTITY_TYPE_CUSTOM:1024,EMAIL:256,GRIEVANCE_OFFICER_NAME:256,LANDLINE_NUMBER:20,MOBILE_NUMBER:20,IMPORTER_NAME:1024,STREET1:1024,STREET2:1024,CITY:1024,REGION:1024,POSTAL_CODE:12};i.COMPLIANCE_INFO_CODES=e,i.COMPLIANCE_INFO_LENGTH=l}),66);
__d("WAWebListsGatingUtils",["WAWebABProps","WAWebMobilePlatforms"],(function(t,n,r,o,a,i,l){function e(){return o("WAWebMobilePlatforms").isSMB()?o("WAWebABProps").getABPropConfigValue("lists_smb_enabled"):o("WAWebABProps").getABPropConfigValue("wa_web_lists_m1_enabled")}function s(){return e()&&o("WAWebABProps").getABPropConfigValue("wa_web_lists_m2_enabled")}l.isListsEnabled=e,l.isListsM2Enabled=s}),98);
__d("WAWebBizGatingUtils",["$InternalEnum","WALogger","WAWebABProps","WAWebBoolFunc","WAWebBusinessProfileTypes","WAWebCTWAConstants","WAWebChatGetters","WAWebClientFeatureFlags","WAWebComplianceConstants","WAWebL10NCountryCodes","WAWebLidMigrationUtils","WAWebListsGatingUtils","WAWebMobilePlatforms","WAWebPrimaryFeatures","WAWebUserPrefsMeUser"],(function(t,n,r,o,a,i,l){var e,s;function u(){return o("WAWebMobilePlatforms").isSMB()}function c(){return o("WAWebMobilePlatforms").isSMB()}function d(){return o("WAWebMobilePlatforms").isSMB()}function m(e){var t;return!o("WAWebChatGetters").getIsNewsletter(e)&&!o("WAWebChatGetters").getIsBroadcast(e)&&d()&&!((t=e.contact.businessProfile)!=null&&t.isBizBot3p)}function p(){return o("WAWebABProps").getABPropConfigValue("web_biz_profile_options")}function _(){return o("WAWebABProps").getABPropConfigValue("smb_collections_enabled")}function f(){return o("WAWebABProps").getABPropConfigValue("smb_collections_appeal_flow_enabled")}function g(){return o("WAWebABProps").getABPropConfigValue("nfm_rendering_enabled")}function h(){return!o("WAWebABProps").getABPropConfigValue("interactive_message_native_flow_killswitch")}function y(){return!o("WAWebABProps").getABPropConfigValue("interactive_response_message_killswitch")}function C(){return!o("WAWebABProps").getABPropConfigValue("interactive_response_message_native_flow_killswitch")}function b(e){var t;if(e!=null){var n;if(t=(n=o("WAWebLidMigrationUtils").toPn(e))==null?void 0:n.user,t==null)return!0}return L(t)}function v(e){return T(e,function(){return o("WAWebABProps").getABPropConfigValue("smb_ecommerce_compliance_india_m4")})}function S(e){return T(e,function(){return o("WAWebABProps").getABPropConfigValue("smb_ecommerce_compliance_india_m4_5")})}function R(e){var t,n=T(e==null?void 0:e.id,function(){return o("WAWebABProps").getABPropConfigValue("web_abprop_block_catalog_creation_ecommerce_compliance_india")});return n&&(e==null||(t=e.profileOptions)==null?void 0:t.commerceExperience)===o("WAWebBusinessProfileTypes").CommerceExperienceTypes.NONE}function L(e){var t=o("WAWebL10NCountryCodes").getCountryShortcodeByPhone(e||""),n=o("WAWebComplianceConstants").COMPLIANCE_INFO_CODES.INDIA;return t===n||o("WAWebClientFeatureFlags").isFeatureEnabled("skip_compliance_phone_check")}function E(e){var t=o("WAWebL10NCountryCodes").getCountryShortcodeByPhone(e);return t==="BR"}function k(e){var t;if(!e)return!1;var n=(t=o("WAWebLidMigrationUtils").toPn(e))==null?void 0:t.user;return n==null?!1:L(n)||E(n)}function I(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("web_business_tools_drawer_enabled")}function T(e,t){t===void 0&&(t=o("WAWebBoolFunc").returnFalse);var n;if(e!=null){var r;if(n=(r=o("WAWebLidMigrationUtils").toPn(e))==null?void 0:r.user,n==null)return!0}return L(n)?t():!1}function D(){return o("WAWebMobilePlatforms").isSMB()?!1:o("WAWebABProps").getABPropConfigValue("tos_3_client_gating_enabled")}function x(){return o("WAWebABProps").getABPropConfigValue("tos_client_state_fetch_iteration")}function $(){return o("WAWebMobilePlatforms").isSMB()?!1:o("WAWebABProps").getABPropConfigValue("tos_client_state_fetch_enabled")}function P(){return o("WAWebABProps").getABPropConfigValue("web_shop_storefront_message")}function N(){return o("WAWebABProps").getABPropConfigValue("banned_shops_ux_enabled")}function M(){return o("WAWebMobilePlatforms").isSMB()?o("WAWebABProps").getABPropConfigValue("smb_click_to_chat_logging_enabled"):!1}function w(){return o("WAWebMobilePlatforms").isSMB()?o("WAWebABProps").getABPropConfigValue("smb_biz_profile_logging_enabled"):!1}function A(){return o("WAWebABProps").getABPropConfigValue("web_abprop_business_profile_refresh_linked_accounts_killswitch")}function F(){return o("WAWebABProps").getABPropConfigValue("web_abprop_business_profile_refresh_linked_account_enabled")}function O(){return o("WAWebABProps").getABPropConfigValue("commerce_sanctioned")}function B(){return o("WAWebABProps").getABPropConfigValue("catalog_categories_enabled")}var W=n("$InternalEnum")({DIGITAL_GOODS:"digital-goods",PHYSICAL_GOODS:"physical-goods",ANY:"any",NONE:"none"});function q(t){t===void 0&&(t=W.NONE);try{var n=JSON.parse(o("WAWebABProps").getABPropConfigValue("order_details_quick_pay")),r=n.allowed_product_type;if(r&&r!==W.NONE)return r===W.ANY||r===t}catch(t){o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["isOrderDetailsQuickPayEnabled failed to parse config json: error ",""])),t)}return!1}function U(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("smb_billing_enabled")}function V(){return o("WAWebABProps").getABPropConfigValue("web_enable_biz_catalog_view_ps_logging")}function H(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("smart_filters_enabled")||!o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("smart_filters_enabled_consumer")}function G(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("smb_multi_device_message_attribution_enabled")}var z=function(){return o("WAWebABProps").getABPropConfigValue("order_messages_ephemeral_exception_enabled")};function j(){return G()&&o("WAWebABProps").getABPropConfigValue("smb_multi_device_agents_logging_V2_enabled")}function K(){return o("WAWebMobilePlatforms").isSMB()?Q()||X():!1}function Q(){return o("WAWebMobilePlatforms").isSMB()?o("WAWebABProps").getABPropConfigValue("premium_blue_enabled"):!1}function X(){return o("WAWebMobilePlatforms").isSMB()?o("WAWebABProps").getABPropConfigValue("smb_billing_enabled")||o("WAWebABProps").getABPropConfigValue("smb_ctwa_billing_enabled"):!1}function Y(){return o("WAWebABProps").getABPropConfigValue("native_commerce_threads_logging_enabled")}function J(){return o("WAWebABProps").getABPropConfigValue("smb_biz_profile_custom_url")}function Z(){return o("WAWebABProps").getABPropConfigValue("wa_web_fmx_agm_enabled")}function ee(){return o("WAWebABProps").getABPropConfigValue("wa_ctwa_log_user_journey_enabled")}function te(){return o("WAWebABProps").getABPropConfigValue("wamo_agm_enabled")}function ne(){return o("WAWebABProps").getABPropConfigValue("web_quantity_controls_enabled")}function re(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebPrimaryFeatures").primaryFeatureEnabled("companion_biz_quick_reply_sync_support")}function oe(){return o("WAWebABProps").getABPropConfigValue("smb_temp_cover_photo_privacy_messaging")}function ae(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("smb_md_agent_chat_assignment_enabled")}function ie(){return ae()&&o("WAWebABProps").getABPropConfigValue("smb_md_agent_chat_assignment_system_messages_enabled")}function le(){return ae()?o("WAWebABProps").getABPropConfigValue("smb_md_agent_chat_assignment_nux_impressions"):0}function se(){return o("WAWebABProps").getABPropConfigValue("smb_hide_unsupported_currency_price")}function ue(){return o("WAWebABProps").getABPropConfigValue("graphql_privacy_imp_m2")}function ce(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("smb_catalog_graphql_create_product_catalog")}function de(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("smb_catalog_graphql_get_product_catalog")}function me(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("smb_catalog_graphql_add_product")}function pe(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("smb_catalog_graphql_edit_product")}function _e(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("smb_catalog_graphql_delete_product")}function fe(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("smb_catalog_graphql_get_product")}function ge(){return o("WAWebABProps").getABPropConfigValue("smb_catalog_graphql_report_product")}function he(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("smb_catalog_graphql_appeal_product")}function ye(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("smb_catalog_graphql_update_collection_list")}function Ce(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("smb_catalog_graphql_delete_collection")}function be(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("smb_catalog_graphql_appeal_collection")}function ve(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("smb_catalog_graphql_get_collection")}function Se(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("smb_catalog_graphql_get_single_collection")}function Re(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("smb_catalog_graphql_get_product_list")}function Le(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("smb_catalog_graphql_update_product_visibility")}function Ee(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("smb_catalog_graphql_commerce_settings")}function ke(){return o("WAWebABProps").getABPropConfigValue("smb_catalog_graphql_verify_postcode")}function Ie(){return o("WAWebABProps").getABPropConfigValue("smb_catalog_graphql_get_public_key")}function Te(){return o("WAWebABProps").getABPropConfigValue("smb_orders_graphql_refresh_cart")}function De(){return o("WAWebABProps").getABPropConfigValue("smb_orders_graphql_get_order_info")}function xe(){return o("WAWebABProps").getABPropConfigValue("smb_orders_graphql_place_order")}function $e(){return o("WAWebABProps").getABPropConfigValue("smb_graphql_merchant_info_get_compliance")}function Pe(){return o("WAWebABProps").getABPropConfigValue("smb_graphql_merchant_info_set_compliance")}function Ne(){return o("WAWebMobilePlatforms").isSMB()?o("WAWebABProps").getABPropConfigValue("smb_billing_premium_access_config"):"{}"}function Me(){return o("WAWebABProps").getABPropConfigValue("country_client_gating_enabled")}function we(){return o("WAWebABProps").getABPropConfigValue("order_details_custom_item_enabled")}function Ae(){return o("WAWebABProps").getABPropConfigValue("order_details_from_catalog_enabled")}function Fe(){return o("WAWebABProps").getABPropConfigValue("order_details_from_cart_enabled")}function Oe(){return o("WAWebABProps").getABPropConfigValue("order_details_total_order_minimum_value")}function Be(e){return jt(e)?5e3:o("WAWebABProps").getABPropConfigValue("order_details_total_maximum_value")}function We(){return o("WAWebABProps").getABPropConfigValue("order_management_enabled")}function qe(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("br_smb_paymentshome_enabled")}function Ue(){return o("WAWebABProps").getABPropConfigValue("btm_threads_logging_enabled")}function Ve(e){return e?o("WAWebABProps").getABPropConfigValue("smb_md_agent_chat_assignment_chats_reorder_on_chat_unassignment_enabled"):o("WAWebABProps").getABPropConfigValue("smb_md_agent_chat_assignment_chats_reorder_on_chat_assignment_enabled")}function He(){return o("WAWebABProps").getABPropConfigValue("utm_tracking_expiration_hours")}function Ge(){return o("WAWebABProps").getABPropConfigValue("utm_tracking_enabled")}function ze(){return!o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("wa_ctwa_web_thread_ad_attribution_enabled")||o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("wa_web_parse_always_show_ad_attribution")}function je(){return o("WAWebABProps").getABPropConfigValue("wa_ctwa_web_hide_ad_context_if_soft_dismissed_in_primary")}function Ke(){return o("WAWebABProps").getABPropConfigValue("biz_ai_tos_variant")===0}function Qe(){return o("WAWebABProps").getABPropConfigValue("biz_ai_tos_variant")===1}function Xe(){return o("WAWebABProps").getABPropConfigValue("biz_ai_tos_variant")===2}function Ye(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("ctwa_smb_data_sharing_consent")}function Je(){return o("WAWebABProps").getABPropConfigValue("ctwa_smb_data_sharing_opt_in_cool_off_period")}function Ze(){return o("WAWebABProps").getABPropConfigValue("smb_md_agent_chat_assignment_notifications_enabled")}function et(){return o("WAWebABProps").getABPropConfigValue("biz_ai_consumer_tos_update_enabled")}function tt(){return o("WAWebMobilePlatforms").isSMB()}function nt(){return o("WAWebMobilePlatforms").isSMB()}function rt(){return tt()&&o("WAWebABProps").getABPropConfigValue("in_app_comms_manage_ads_web_banner_campaign_enabled")}function ot(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("qp_campaign_client_enabled")}function at(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("smb_graphql_to_fetch_qp_enabled")}function it(){return o("WAWebABProps").getABPropConfigValue("smb_graphql_to_fetch_qp_frequency_mins")}function lt(){var e=o("WAWebABProps").getABPropConfigValue("smb_graphql_to_fetch_qp_surface_ids"),t=new Map(Array.from(o("WAWebCTWAConstants").KNOWN_QP_SURFACES.values(),function(e){return[e,e]})),n=new Set;return e.split(",").forEach(function(e){var r=t.get(e);r!=null?n.add(r):o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["qpSurfaceIdsUsingGraphQL: unknown surface ID ",""])),e)}),n}var st=function(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("wa_ctwa_web_entrypoint_home_header_enabled")},ut=function(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("wa_ctwa_web_entrypoint_home_header_dropdown_enabled")},ct=function(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("ctwa_ad_creation_entry_point_catalog_web")},dt=function(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("ctwa_ad_creation_entry_point_catalog_product_web")};function mt(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("kill_switch_ctwa_ml_entry_point_config")===!1}function pt(){return o("WAWebABProps").getABPropConfigValue("ctwa_entry_point_config_fetch_threshhold")}function _t(){return mt()&&o("WAWebABProps").getABPropConfigValue("ctwa_long_term_holdout_content_enabled")}function ft(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("ctwa_long_term_holdout_client_side_check")}var gt=function(t){return o("WAWebMobilePlatforms").isSMB()&&(t==null?void 0:t.hasCreatedAd)===!0&&o("WAWebABProps").getABPropConfigValue("wa_ctwa_web_entrypoint_manage_ads_home_header_dropdown_enabled")&&!Ct()},ht=function(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("wa_ctwa_web_fetch_linked_accounts_enabled")};function yt(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("ctwa_native_ads_creation_web_enabled")}function Ct(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("ctwa_native_ads_creation_web_enabled_no_exposure")}function bt(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("ctwa_native_ads_creation_web_hawk_tool_enabled")}function vt(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("ctwa_native_ads_creation_web_targeting_modal_hawk_tool_enabled")}function St(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("smb_core_biz_profile_ux_refreshed")}function Rt(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("smb_core_biz_profile_ux_refreshed_v2")}function Lt(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("ctwa_manage_ads_tab_web")}function Et(){return Lt()&&o("WAWebABProps").getABPropConfigValue("ctwa_manage_ads_tab_web_ad_actions_menu")}function kt(){return Lt()&&o("WAWebABProps").getABPropConfigValue("ctwa_manage_ads_tab_web_ad_metrics")}function It(){return Lt()&&o("WAWebABProps").getABPropConfigValue("ctwa_manage_ads_tab_web_recovery_flow")}function Tt(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("ctwa_ad_account_token_storage_kill_switch_web")===!1}function Dt(){return o("WAWebABProps").getABPropConfigValue("ctwa_ad_account_nonce_push_wait_timeout_web")}function xt(){return o("WAWebABProps").getABPropConfigValue("ctwa_ad_account_nonce_retries_max_web")}function $t(){return It()&&o("WAWebABProps").getABPropConfigValue("smb_graphql_token_recovery_during_account_recovery_enabled")}function Pt(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("business_tool_enhanced_logging")}function Nt(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("smb_labels_ctwa_data_sharing")}function Mt(){return o("WAWebMobilePlatforms").isSMB()&&wt()}function wt(){return o("WAWebABProps").getABPropConfigValue("payments_br_content_optimization_variant")!==0}function At(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("ctwa_smb_data_sharing_settings_killswitch")===!1}function Ft(){return o("WAWebABProps").getABPropConfigValue("ctwa_enable_biz_data_sharing_after_nux_dismiss")}function Ot(){return o("WAWebABProps").getABPropConfigValue("ctwa_show_ads_data_sharing_after_message")}function Bt(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("smb_message_labels_ctwa_data_sharing")}function Wt(){return o("WAWebABProps").getABPropConfigValue("payments_link_to_lite_consumer_enabled")}function qt(){return o("WAWebABProps").getABPropConfigValue("smb_premium_messages_click_logging_enabled")}function Ut(){return o("WAWebABProps").getABPropConfigValue("row_buyer_order_revamp_m0_enabled")}function Vt(){return o("WAWebABProps").getABPropConfigValue("seller_orders_management_revamp")}function Ht(){return Ut()&&o("WAWebABProps").getABPropConfigValue("buyer_initiated_order_request_variant_enabled")}function Gt(){return o("WAWebABProps").getABPropConfigValue("order_statuses_revamp_m1_enabled")}function zt(){return o("WAWebABProps").getABPropConfigValue("smb_premium_messages_url_cta_alert_dialog_enabled")}function jt(e){var t=o("WAWebLidMigrationUtils").toPn(o("WAWebUserPrefsMeUser").getMePnUserOrThrow()),n=o("WAWebL10NCountryCodes").getCountryShortcodeByPhone(t==null?void 0:t.user),r=o("WAWebLidMigrationUtils").toPn(e.contact.id),a=o("WAWebL10NCountryCodes").getCountryShortcodeByPhone(r==null?void 0:r.user);return n==="BR"&&a==="BR"}function Kt(){return o("WAWebABProps").getABPropConfigValue("carousel_message_client_enabled")}function Qt(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebPrimaryFeatures").primaryFeatureEnabled("companion_biz_label_sync_support")||o("WAWebListsGatingUtils").isListsEnabled()}function Xt(){return(o("WAWebMobilePlatforms").isSMB()||o("WAWebListsGatingUtils").isListsEnabled())&&o("WAWebABProps").getABPropConfigValue("smb_label_improvements_reordering")}function Yt(){return(o("WAWebMobilePlatforms").isSMB()||o("WAWebListsGatingUtils").isListsEnabled())&&o("WAWebABProps").getABPropConfigValue("smb_label_improvements_reordering")&&o("WAWebABProps").getABPropConfigValue("web_smb_label_reordering_m2_two_way")}function Jt(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("ctwa_important_label_sends_signals")}function Zt(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("smba_premium_messages_leaving_wa_content")}function en(){return o("WAWebABProps").getABPropConfigValue("smba_premium_messages_insights_v2_trackable_link_domain")}function tn(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("smb_notes_v1_enabled")}function nn(){return o("WAWebABProps").getABPropConfigValue("smb_notes_privacy_string")}function rn(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("wa_web_business_tools_top_card_enabled")}function on(){return o("WAWebABProps").getABPropConfigValue("smb_meta_verified_context_card")}function an(){return o("WAWebPrimaryFeatures").primaryFeatureEnabled("profile_edit_for_mv_users_enabled")}function ln(){return o("WAWebABProps").getABPropConfigValue("web_catalog_video_view_fallback_enabled")}function sn(){return o("WAWebABProps").getABPropConfigValue("web_catalog_video_view_enabled")}function un(){return o("WAWebABProps").getABPropConfigValue("smb_custom_url_get_user_graphql_migration_enabled")}function cn(){return o("WAWebABProps").getABPropConfigValue("web_biz_ai_chat_assignment_hiding_enabled")}function dn(){return o("WAWebABProps").getABPropConfigValue("smb_ai_agents_web_chat_assignment_interop_enabled")}function mn(){return o("WAWebABProps").getABPropConfigValue("lid_migration_for_vname_enabled")}function pn(){return o("WAWebABProps").getABPropConfigValue("use_signed_shimmed_url_link")}function _n(){return o("WAWebABProps").getABPropConfigValue("lid_migration_for_biz_profile_enabled")}function fn(){return o("WAWebABProps").getABPropConfigValue("catalog_product_sale_price_enabled")}function gn(){return o("WAWebABProps").getABPropConfigValue("catalog_lid_migration_enabled")}function hn(){return o("WAWebABProps").getABPropConfigValue("ctwa_signal_decoupling_enabled")}function yn(){return o("WAWebABProps").getABPropConfigValue("smb_product_country_of_origin_m1")}function Cn(){return o("WAWebABProps").getABPropConfigValue("ctwa_download_3pd_signals")}function bn(e){return b(e)||yn()}function vn(){return b(o("WAWebUserPrefsMeUser").getMePnUserOrThrow())}function Sn(){return o("WAWebABProps").getABPropConfigValue("web_catalog_recovery_flow_enabled")}function Rn(e){var t=te(),n=Z();return e!=null&&(t||n&&e.sourceApp!=="whatsapp")}function Ln(){return o("WAWebABProps").getABPropConfigValue("web_catalog_viewing_variants_enabled")}function En(){return o("WAWebABProps").getABPropConfigValue("ctwa_smb_detected_outcome_labels_soak_enabled")}function kn(){return o("WAWebABProps").getABPropConfigValue("ctwa_smb_detected_outcome_labels_enabled")}function In(){return o("WAWebABProps").getABPropConfigValue("ctwa_smb_detected_outcome_labels_merger_enabled")}function Tn(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("premium_broadcast_smb_capping_enabled")&&o("WAWebABProps").getABPropConfigValue("smb_business_broadcast_import_contact")}function Dn(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("smb_business_broadcast_send_web")}function xn(){return o("WAWebABProps").getABPropConfigValue("ctwa_smb_detected_outcome_labels_banners_enabled")}function $n(){return o("WAWebABProps").getABPropConfigValue("web_linked_catalog_consumer_cart_enabled")}function Pn(){return o("WAWebABProps").getABPropConfigValue("ctwa_custom_label_signals_enabled")}function Nn(){return o("WAWebABProps").getABPropConfigValue("ctwa_web_custom_label_signals_enabled")}function Mn(){return o("WAWebABProps").getABPropConfigValue("ctwa_custom_label_algorithm")}function wn(){return o("WAWebABProps").getABPropConfigValue("ctwa_3pd_data_sharing_cooldown_for_opted_out")}function An(){return o("WAWebABProps").getABPropConfigValue("ctwa_web_3pd_data_sharing_cooldown_for_opted_out")}function Fn(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("payments_br_pix_web_attachment_tray")}function On(){return o("WAWebABProps").getABPropConfigValue("smb_ctwa_chat_header_label_entry_point_enabled")}function Bn(){return o("WAWebABProps").getABPropConfigValue("ctwa_suppress_message_with_external_ad_reply_consumer_db_level_enabled")}function Wn(){return o("WAWebABProps").getABPropConfigValue("per_customer_data_sharing_controls_eligible")}function qn(){return o("WAWebABProps").getABPropConfigValue("ctwa_per_customer_data_sharing_controls_do_not_show_msg_until_chosen")}l.canDisplayLabel=u,l.canEditLabelAssociation=c,l.canSendQuickReply=d,l.canSendQuickReplyInChat=m,l.webBizProfileOptions=p,l.canManageCollections=_,l.canAppealCollections=f,l.nativeFlowMessagesEnabled=g,l.interactiveNativeFlowMessagesEnabled=h,l.interactiveResponseMessagesEnabled=y,l.interactiveNativeFlowResponseMessagesEnabled=C,l.canSeeECommerceComplianceIndiaSoftEnforcement=b,l.canSeeECommerceComplianceIndiaHardEnforcementBusinessJourney=v,l.canSeeECommerceComplianceIndiaCountryOriginExemptBusinessJourney=S,l.blockCatalogCreationECommerceComplianceIndia=R,l.isWidInPaymentsCountry=k,l.isBizToolsDrawerEnabled=I,l.tos3GatingEnabled=D,l.tosFetchIteration=x,l.tosFetchEnabled=$,l.shopsInteractiveMessageEnabled=P,l.bannedShopsEnabled=N,l.smbClickToChatLoggingEnabled=M,l.smbBizProfileLoggingEnabled=w,l.bizLinkedAccountsEnabled=A,l.canViewBizLinkedAccounts=F,l.commerceFeaturesDisabledBySanctions=O,l.catalogCategoriesEnabled=B,l.QuickPayProductTypeGating=W,l.isOrderDetailsQuickPayEnabled=q,l.billingEnabled=U,l.isPSForCatalogViewEnabled=V,l.smartFiltersEnabled=H,l.isMultiDeviceMessageAttributionEnabled=G,l.inOrderMessagesEphemeralExceptionEnabled=z,l.isMultiDeviceAgentsLoggingEnabled=j,l.subscriptionFetchEnabled=K,l.isMetaVerifiedEnabled=Q,l.isPremiumBillingEnabled=X,l.commerceThreadsLoggingEnabled=Y,l.isCustomURLViaBizProfileEnabled=J,l.getFmxAgmEnabled=Z,l.getCtwaLogUserJourneyEnabled=ee,l.getWamoAgmEnabled=te,l.isQuantityControlsFeatureEnabled=ne,l.quickRepliesManagementEnabled=re,l.coverPhotoPrivacyMessagingEnabled=oe,l.chatAssignmentEnabled=ae,l.chatAssignmentSystemMessagesEnabled=ie,l.chatAssignmentMaxNuxImpressions=le,l.hideUnsupportedCurrency=se,l.graphQLForCollectionM2Enabled=ue,l.graphQLForCreateProductCatalogEnabled=ce,l.graphQLForGetProductCatalogEnabled=de,l.graphQLForAddProductEnabled=me,l.graphQLForEditProductEnabled=pe,l.graphQLForDeleteProductEnabled=_e,l.graphQLForGetProductEnabled=fe,l.graphQLForReportProductEnabled=ge,l.graphQLForAppealProductEnabled=he,l.graphQLForUpdateCollectionListEnabled=ye,l.graphQLForDeleteCollectionEnabled=Ce,l.graphQLForAppealCollectionEnabled=be,l.graphQLForGetCollectionsEnabled=ve,l.graphQLForGetSingleCollectionEnabled=Se,l.graphQLForGetProductListEnabled=Re,l.graphQLForUpdateProductVisibilityEnabled=Le,l.graphQLForCommerceSettingsEnabled=Ee,l.isGraphQLForVerifyPostcodeEnabled=ke,l.isGraphQLForGetPublicKeyEnabled=Ie,l.graphQLForRefreshCartEnabled=Te,l.graphQLForGetOrderInfoEnabled=De,l.graphQLForPlaceOrderEnabled=xe,l.graphQLForGetComplianceInfo=$e,l.graphQLForSetComplianceInfo=Pe,l.getBillingPremiumAccessConfig=Ne,l.countryGatingEnabled=Me,l.orderDetailsCustomItemEnabled=we,l.orderDetailsFromCatalogEnabled=Ae,l.orderDetailsFromCartEnabled=Fe,l.orderDetailsTotalOrderMinimumValue=Oe,l.orderDetailsTotalMaxValue=Be,l.orderManagementEnabled=We,l.paymentsHomeEnabled=qe,l.btmThreadsLoggingEnabled=Ue,l.shouldReorderChatOnAssignment=Ve,l.utmTrackingExpirationInHours=He,l.isUtmTrackingEnabled=Ge,l.isAdsAttributionEnabled=ze,l.isHideAdContextIfSoftDismissed=je,l.isUpdatedConsumerDisclosureUiRowEnabled=Ke,l.isUpdatedConsumerDisclosureUiIndiaEnabled=Qe,l.isUpdatedConsumerDisclosureUiBrazilEnabled=Xe,l.smbDataSharingConsentEnabled=Ye,l.smbDataSharingOptInCoolOffSeconds=Je,l.chatAssignmentNotificationsEnabled=Ze,l.isNonBlockingConsumerTosAbpropEnabled=et,l.adsActionBannersEnabled=tt,l.adsActionBannersLoggingEnabled=nt,l.adsActionBannersEnabledOnStartup=o("WAWebMobilePlatforms").isSMB,l.adsActionManageAdsBannerEnabled=rt,l.qpCampaignsEnabled=ot,l.qpGraphQLEnabled=at,l.qpGraphQLFetchIntervalMinutes=it,l.qpSurfaceIdsUsingGraphQL=lt,l.shouldShowAdCreationIcon=st,l.shouldShowAdCreationDropdown=ut,l.adCreationEntryPointCatalogEnabled=ct,l.adCreationEntryPointCatalogProductEnabled=dt,l.adEntryPointsConfigurationFetchEnabled=mt,l.adEntryPointsConfigurationFetchThreshold=pt,l.adEntryPointsConfigurationFetchM1Enabled=_t,l.isInLongTermHoldoutFallbackWhenAdEntryPointsConfigurationMissing=ft,l.shouldShowManageAdsDropdown=gt,l.shouldFetchLinkedAccounts=ht,l.nativeAdsCreationEnabled=yt,l.nativeAdsCreationEnabledNoExposure=Ct,l.nativeAdsCreationHawkToolEnabled=bt,l.nativeAdsCreationTargetingModalHawkToolEnabled=vt,l.businessProfileRefreshEnabled=St,l.businessProfileRefreshV2Enabled=Rt,l.adManagementEnabled=Lt,l.adManagementActionsDisplayingEnabled=Et,l.adManagementMetricsDisplayingEnabled=kt,l.adManagementRecoveryFlowEnabled=It,l.adAccountTokenStoringEnabled=Tt,l.adAccountTokenNoncePushWaitTimeoutSeconds=Dt,l.adAccountTokenNonceMaxRetries=xt,l.grapQLRecoveryDuringAdAccountRecoveryEnabled=$t,l.isSMBEnhancedLoggingEnabled=Pt,l.isSMBLabelsDataSharingEnabledForChats=Nt,l.isSMBDataSharingOrderCopyOptimizationEnabled=Mt,l.isOrderContentOptimizationEnabled=wt,l.shouldShowSMBDataSharingSettings=At,l.showDataSharingInSettingsAfterNuxDismiss=Ft,l.showDataSharingInSettingsAfterCtwaMessageReceived=Ot,l.isSMBLabelsDataSharingEnabledForMessages=Bt,l.isMessageWithLinkNfmEnabled=Wt,l.isPremiumMessagesClickLoggingEnabled=qt,l.isBuyerOrderRevampEnabled=Ut,l.isSellerOrderRevampEnabled=Vt,l.isBuyerOrderRequestVariantEnabled=Ht,l.isOrderStatusM1Enabled=Gt,l.isPremiumMessagesUrlCtaDialogEnabled=zt,l.isBrazilToBrazilOrder=jt,l.carouselsEnabled=Kt,l.labelsEditingEnabled=Qt,l.isLabelReorderingSyncFromPrimaryEnabled=Xt,l.isLabelReorderingInWebEnabled=Yt,l.is3pdImportantLabelSignalsEnabled=Jt,l.isPremiumMessagesNewLeavingWAContentEnabled=Zt,l.getTrackableLinkDomain=en,l.smbNotesV1Enabled=tn,l.smbNotesPrivacyStringABProp=nn,l.isBizToolsTopCardEnabled=rn,l.isMetaVerifiedContextCardEnabled=on,l.isMetaVerifiedLockedProfileEditingV1Enabled=an,l.isCatalogVideoViewFallbackEnabled=ln,l.isCatalogVideoViewEnabled=sn,l.isGetCustomUrlUserGraphqlMigrationEnabled=un,l.isBizAiChatAssignmentHidingEnabled=cn,l.isBizAiChatAssignmentInteropTosEnabled=dn,l.isLidMigrationForVnameEnabled=mn,l.isUsingSignedShimmedLinkInCatalogueEnabled=pn,l.isLidMigrationForBusinessProfileEnabled=_n,l.isCatalogProductSalePriceEnabled=fn,l.isLidMigrationForCatalogEnabled=gn,l.isSignalDecouplingEnabled=hn,l.isCountryOfOriginEnabled=yn,l.isDownload3PDSignalsEnabled=Cn,l.showComplianceFieldsInEditProductDrawer=bn,l.showImporterInformationInEditProductDrawer=vn,l.catalogTokenRecoveryEnabled=Sn,l.shouldGenerateAGMMsgs=Rn,l.isCatalogVariantsViewingEnabled=Ln,l.isCTWADetectedOutcomeWS1Enabled=En,l.isCTWADetectedOutcomeWS3Enabled=kn,l.isCTWADetectedOutcomeWS4Enabled=In,l.isBizBroadcastContactImportEnabled=Tn,l.isBizBroadcastSendWebEnabled=Dn,l.isCTWADetectedOutcomeWS2Enabled=xn,l.isConsumerLinkedCatalogCartEnabled=$n,l.isCTWACustomLabelsSignalsEnabled=Pn,l.isCTWAWebCustomLabelsSignalsEnabled=Nn,l.getCTWACustomLabelAlgorithmGroup=Mn,l.isCTWA3pdCooldownForOptedOutUsersEnabled=wn,l.isCTWAWeb3pdCooldownForOptedOutUsersEnabled=An,l.isPixInAttachmentTrayEnabled=Fn,l.isCTWAChatHeaderLabelEntryPointEnabled=On,l.suppressMessageWithExternalAdReplyConsumerEnabled=Bn,l.isPerCustomerDataSharingControlsEnabled=Wn,l.shouldSuppressDataSharingSystemMessageUntilGlobalChoiceMade=qn}),98);
__d("WAWebCommonAdEntryPointsTypes",[],(function(t,n,r,o,a,i){function e(e){return e}i.asAdEntryPointContent=e}),66);
__d("WAWebCommonAdsTypes",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum").Mirrored(["WEAK","STRONG"]),l=n("$InternalEnum").Mirrored(["ACTIVE","CREATING","EXTENDABLE","FINISHED","LIMITED_DELIVERY","NOT_DELIVERING","PAUSED","PENDING","REJECTED","SCHEDULED","ERROR","UNKNOWN"]),s={COMPLETED:"COMPLETED",EXTENDABLE:"EXTENDABLE",PENDING:"PENDING",ACTIVE:"ACTIVE",SCHEDULED:"SCHEDULED",REJECTED:"REJECTED",FINISHED:"FINISHED",PAUSED:"PAUSED",NOT_DELIVERING:"NOT_DELIVERING",UNABLE_TO_CREATE:"ERROR",PAYMENT_PENDING:"PAYMENT_PENDING",CREATING:"CREATING",RECOMMENDATION:"RECOMMENDATION",LIMITED_DELIVERY:"LIMITED_DELIVERY",UNKNOWN:"UNKNOWN"};function u(e){return e}function c(e){return e}function d(t,n,r,o){return r===void 0&&(r="WAA"),o===void 0&&(o=e.STRONG),r==="FB"?{type:r,token:t,bp_id:n}:{type:r,token:t,bp_id:n,tokenStrength:o}}i.WAAIdentityTokenStrengthEnum=e,i.BoostingStatusEnum=l,i.BoostingStatus=s,i.asAdId=u,i.asAdCampaignGroupId=c,i.asAdAccountToken=d}),66);
__d("WAWebPonyfillsCryptoRandomUUID",[],(function(t,n,r,o,a,i){function e(){return"randomUUID"in self.crypto?self.crypto.randomUUID():("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})}i.default=e}),66);
__d("WAWebUserPrefsCTWA",["WATimeUtils","WAWebBizGatingUtils","WAWebCommonAdEntryPointsTypes","WAWebCommonAdsTypes","WAWebPonyfillsCryptoRandomUUID","WAWebUserPrefsKeys","WAWebUserPrefsStore"],(function(t,n,r,o,a,i,l){function e(){var e=r("WAWebPonyfillsCryptoRandomUUID")();return r("WAWebUserPrefsStore").set(o("WAWebUserPrefsKeys").KEYS.AD_CREATION_FLOW_ID_KEY,e),e}function s(){var t=r("WAWebUserPrefsStore").get(o("WAWebUserPrefsKeys").KEYS.AD_CREATION_FLOW_ID_KEY);return(t==null||typeof t!="string")&&(t=e()),t}function u(){var e=r("WAWebUserPrefsStore").get(o("WAWebUserPrefsKeys").KEYS.AD_CREATION_SEQUENCE_NUMBER_KEY);return(e==null||typeof e!="number")&&(e=1),r("WAWebUserPrefsStore").set(o("WAWebUserPrefsKeys").KEYS.AD_CREATION_SEQUENCE_NUMBER_KEY,e+1),e}function c(){r("WAWebUserPrefsStore").set(o("WAWebUserPrefsKeys").KEYS.AD_CREATION_SEQUENCE_NUMBER_KEY,1)}function d(e){var t=r("WAWebUserPrefsStore").getUser(o("WAWebUserPrefsKeys").KEYS.AD_ENTRY_POINTS_CONFIGURATION);if(t==null||typeof t!="object")return null;var n=t.configuration,a=t.locale,i=t.ts;if(typeof i!="number"||typeof a!="string")return null;var l=!o("WATimeUtils").isInFuture(o("WATimeUtils").futureUnixTime(o("WAWebBizGatingUtils").adEntryPointsConfigurationFetchThreshold()/1e3,o("WATimeUtils").castToUnixTime(i)));if(a!==e||n==null||typeof n!="object")return null;var s=Object.keys(n).reduce(function(e,t){var r=n[t];if(r==null||typeof r!="object")return e;var a=r.content,i=r.shouldShow,l=r.subContent;if(typeof i!="boolean")return e;var s={shouldShow:i};if(a!=null){if(typeof a!="string")return e;s.content=o("WAWebCommonAdEntryPointsTypes").asAdEntryPointContent(a)}if(l!=null){if(typeof l!="string")return e;s.subContent=o("WAWebCommonAdEntryPointsTypes").asAdEntryPointContent(l)}return e[t]=s,e},{});return{configuration:s,isExpired:l}}function m(e,t){r("WAWebUserPrefsStore").setUser(o("WAWebUserPrefsKeys").KEYS.AD_ENTRY_POINTS_CONFIGURATION,{configuration:t,ts:o("WATimeUtils").unixTime(),locale:e})}function p(e){switch(e){case"WEAK":return o("WAWebCommonAdsTypes").WAAIdentityTokenStrengthEnum.WEAK;case"STRONG":default:return o("WAWebCommonAdsTypes").WAAIdentityTokenStrengthEnum.STRONG}}function _(){if(!o("WAWebBizGatingUtils").adAccountTokenStoringEnabled())return null;var e=r("WAWebUserPrefsStore").getUser(o("WAWebUserPrefsKeys").KEYS.AD_ACCOUNT_TOKEN),t=r("WAWebUserPrefsStore").getUser(o("WAWebUserPrefsKeys").KEYS.AD_ACCOUNT_BP_ID),n=r("WAWebUserPrefsStore").getUser(o("WAWebUserPrefsKeys").KEYS.AD_ACCOUNT_TOKEN_STRENGTH);return e==null||typeof e!="string"?null:((t==null||typeof t!="string")&&(t=""),(n==null||typeof n!="string")&&(n=null),o("WAWebCommonAdsTypes").asAdAccountToken(e,t,"WAA",p(n)))}function f(e){o("WAWebBizGatingUtils").adAccountTokenStoringEnabled()&&(r("WAWebUserPrefsStore").setUser(o("WAWebUserPrefsKeys").KEYS.AD_ACCOUNT_TOKEN,e.token),r("WAWebUserPrefsStore").setUser(o("WAWebUserPrefsKeys").KEYS.AD_ACCOUNT_BP_ID,e.bp_id),r("WAWebUserPrefsStore").setUser(o("WAWebUserPrefsKeys").KEYS.AD_ACCOUNT_TOKEN_STRENGTH,e.type==="WAA"?e.tokenStrength:null))}function g(){r("WAWebUserPrefsStore").setUser(o("WAWebUserPrefsKeys").KEYS.AD_ACCOUNT_TOKEN,null),r("WAWebUserPrefsStore").setUser(o("WAWebUserPrefsKeys").KEYS.AD_ACCOUNT_BP_ID,null),r("WAWebUserPrefsStore").setUser(o("WAWebUserPrefsKeys").KEYS.AD_ACCOUNT_TOKEN_STRENGTH,null)}function h(){r("WAWebUserPrefsStore").setUser(o("WAWebUserPrefsKeys").KEYS.FB_ACCOUNT_TOKEN,null),r("WAWebUserPrefsStore").setUser(o("WAWebUserPrefsKeys").KEYS.FB_ACCOUNT_BP_ID,null)}function y(){var e=r("WAWebUserPrefsStore").getUser(o("WAWebUserPrefsKeys").KEYS.FB_ACCOUNT_TOKEN),t=r("WAWebUserPrefsStore").getUser(o("WAWebUserPrefsKeys").KEYS.FB_ACCOUNT_BP_ID);return e==null||typeof e!="string"||t==null||typeof t!="string"?null:o("WAWebCommonAdsTypes").asAdAccountToken(e,t,"FB")}function C(e){r("WAWebUserPrefsStore").setUser(o("WAWebUserPrefsKeys").KEYS.FB_ACCOUNT_TOKEN,e.token),r("WAWebUserPrefsStore").setUser(o("WAWebUserPrefsKeys").KEYS.FB_ACCOUNT_BP_ID,e.bp_id)}l.generateAdCreationFlowId=e,l.getAdCreationFlowId=s,l.getAndIncrementAdCreationSequenceNumber=u,l.resetAdCreationSequenceNumber=c,l.getAdEntryPointsConfiguration=d,l.setAdEntryPointsConfiguration=m,l.getAdAccountToken=_,l.setAdAccountToken=f,l.clearAdAccountToken=g,l.clearFBIdentity=h,l.getFBIdentity=y,l.setFbIdentity=C}),98);
__d("WAWebUserPrefsUiRefresh",["WALogger","WAWebUserPrefsKeys","WAWebUserPrefsStore"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){r("WAWebUserPrefsStore").set(o("WAWebUserPrefsKeys").UserPrefs.WebUiRefreshNuxAcknowledged,e)}function u(){return r("WAWebUserPrefsStore").get(o("WAWebUserPrefsKeys").UserPrefs.WebUiRefreshNuxAcknowledged)===!0}function c(){var e=d();r("WAWebUserPrefsStore").set(o("WAWebUserPrefsKeys").UserPrefs.WebUiRefreshNuxViewsCount,e+1)}function d(){var t=r("WAWebUserPrefsStore").get(o("WAWebUserPrefsKeys").UserPrefs.WebUiRefreshNuxViewsCount);if(t==null)return 0;var n=parseInt(t,10);return isNaN(n)||n<0?(o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[ui-refresh] Invalid nux view count - returning 0"]))),0):n}function m(){r("WAWebUserPrefsStore").set(o("WAWebUserPrefsKeys").UserPrefs.WebUiRefreshNuxViewsCount,0)}l.setUiRefreshNuxAcked=s,l.getUiRefreshNuxAcked=u,l.incrementNuxViewCount=c,l.getNuxViewCount=d,l.resetNuxViewCount=m}),98);
__d("WAWebSyncOnABProps",["WALogger","WAWebABProps","WAWebABPropsWamGlobals","WAWebProtobufsE2E.pb","WAWebStoreSpecialAbProps","WAWebUserPrefsAppStateSync","WAWebUserPrefsCTWA","WAWebUserPrefsTypes","WAWebUserPrefsUiRefresh","asyncToGeneratorRuntime","cr:254"],(function(t,n,r,o,a,i,l){var e,s,u=(e=n("cr:254"))!=null?e:{},c=u.sendPeerDataOperationRequest;function d(e){e!==o("WAWebABProps").getABPropConfigValue("service_improvement_opt_out_flag")&&o("WAWebABPropsWamGlobals").setAbPropDependingGlobalWamAttributes()}function m(){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield o("WAWebUserPrefsAppStateSync").getNonCriticalDataSyncStatus();(e==null?void 0:e[o("WAWebUserPrefsTypes").NonCriticalDataSyncStatusType.RECENT_STICKER_INITIALIZED])===o("WAWebUserPrefsTypes").RecentStickerInitializedStatusType.NEED_REQUEST_BOOTSTRAP&&(o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Recent Stickers: request peer message for recent sticker bootstrap."]))),yield c==null?void 0:c(o("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.SEND_RECENT_STICKER_BOOTSTRAP,{}))}),p.apply(this,arguments)}function _(e){var t=o("WAWebABProps").getABPropConfigValue("ctwa_ad_account_token_storage_kill_switch_web");t===!0&&e===!1&&o("WAWebUserPrefsCTWA").clearAdAccountToken()}function f(e){var t=o("WAWebABProps").getABPropConfigValue("web_ui_refresh_m1");e===!0&&t===!1&&(o("WAWebUserPrefsUiRefresh").resetNuxViewCount(),o("WAWebUserPrefsUiRefresh").setUiRefreshNuxAcked(!1),o("WAWebStoreSpecialAbProps").storeSpecialAbProps())}l.handleServiceImprovementOptOutFlagABPropConfigValueChange=d,l.ensureNonCriticalDataSyncIsInitialized=m,l.handleAdAccountTokenStorageKillSwitchABPropConfigValueChange=_,l.handleUIRefreshNuxOnABPropConfigValueChange=f}),98);
__d("WAWebAbPropsSyncJob",["Promise","WAGetAbPropsProtocol","WALogger","WAPromiseDelays","WAWebABProps","WAWebABPropsGlobals","WAWebABPropsLocalStorage","WAWebABPropsUpdateFromStorage","WAWebAbPropsParsingJob","WAWebApiAbPropConfig","WAWebApiAbPropEventSamplingConfig","WAWebCmd","WAWebEncryptedRid","WAWebEventSamplingCache","WAWebSyncOnABProps","WAWebWorkerSafeBackendApi","asyncToGeneratorRuntime","justknobx"],(function(t,n,r,o,a,i,l){var e,s,u,c,d;o("WAWebCmd").Cmd.on("on_ab_props_update",(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t,n=e.isInitialSync,r=e.partialPreviousABPropsValues,a=r.ctwa_ad_account_token_storage_kill_switch_web,i=r.service_improvement_opt_out_flag,l=r.web_ui_refresh_m1;yield(t=o("WAWebSyncOnABProps")).ensureNonCriticalDataSyncIsInitialized(),t.handleServiceImprovementOptOutFlagABPropConfigValueChange(i),t.handleAdAccountTokenStorageKillSwitchABPropConfigValueChange(a),t.handleUIRefreshNuxOnABPropConfigValueChange(l),n&&(yield o("WAWebWorkerSafeBackendApi").workerSafeSendAndReceive("checkOrphanFavoriteStickers"))});return function(t){return e.apply(this,arguments)}})());var m={shouldSendHash:!0};function p(e){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var a=t.localRefreshId,i=t.shouldSendHash,l=r("justknobx")._("3330")&&a!=null,c=l?{propsRefreshId:a}:{propsHash:i?o("WAWebABPropsLocalStorage").getHash():void 0},m=yield o("WAGetAbPropsProtocol").getAbPropsProtocol(c);if(!m.success)return!1;var p=m.value,_=p.abKey,f=p.erid,g=p.hash,h=p.isDeltaUpdate,y=p.props,C=p.refresh,b=p.refreshId,v=p.samplingConfigs,S=f==null?(d||(d=n("Promise"))).resolve():o("WAWebEncryptedRid").setEncryptedRid(f);if(h&&!l?o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["syncABProps: received delta update response without responding to emergency push request"]))).sendLogs("abprops-requested-regular-received-delta"):!h&&l&&o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["syncABProps: received regular update response when responding to emergency push request"]))),!h){o("WAWebABPropsGlobals").updateGlobalABKey(_!=null?_:"");var R=Date.now();o("WAWebABPropsLocalStorage").updateAttributesLocalStorage(_,g,C,R)}if(b!=null&&o("WAWebABPropsLocalStorage").setRefreshId(b),g==null&&!h)return!1;try{return yield(d||(d=n("Promise"))).all([!h&&o("WAWebApiAbPropEventSamplingConfig").updateEventSamplingConfigs(v),o("WAWebApiAbPropConfig").updateABPropConfigs(o("WAWebAbPropsParsingJob").parseABProps(y,h),h),S]),!0}catch(e){o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["update ABProps config table failed"]))).verbose().sendLogs("update ABProps config table failed when syncing ABProps")}return!1}),_.apply(this,arguments)}function f(e){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){for(var t=o("WAWebABPropsLocalStorage").isABPropsAfterFirstSync(),r=3;r-- >0;)try{var a,i={service_improvement_opt_out_flag:(a=o("WAWebABProps")).getABPropConfigValue("service_improvement_opt_out_flag"),ctwa_ad_account_token_storage_kill_switch_web:a.getABPropConfigValue("ctwa_ad_account_token_storage_kill_switch_web"),web_ui_refresh_m1:a.getABPropConfigValue("web_ui_refresh_m1"),single_e2ee_session_migration_state_outgoing:a.getABPropConfigValue("single_e2ee_session_migration_state_outgoing")},l=e?babelHelpers.extends({},e):babelHelpers.extends({},m);l.localRefreshId==null&&(l.shouldSendHash=t&&l.shouldSendHash!==!1);var s=yield p(l);if(s){yield(d||(d=n("Promise"))).all([o("WAWebABPropsUpdateFromStorage").updateABPropsFromStorage(),o("WAWebEventSamplingCache").updateEventSamplingFromStorage()]),o("WAWebCmd").Cmd.onAbPropsUpdate({partialPreviousABPropsValues:i,isInitialSync:!t});return}}catch(e){r===0&&o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["failed to sync ABProps"]))).verbose().sendLogs("failed to sync ABProps"),yield o("WAPromiseDelays").delayMs(10*1e3*Math.random())}}),g.apply(this,arguments)}l.syncABProps=p,l.syncABPropsTask=f}),98);
__d("isArrayNullOrEmpty",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e==null||e.length===0}i.default=e}),66);
__d("WAWebInteractiveMessagesNativeFlowName",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({BOOKING_CONFIRMATION:"booking_confirmation",ORDER_DETAILS:"order_details",ORDER_STATUS:"order_status",PAYMENT_STATUS:"payment_status",PAYMENT_METHOD:"payment_method",PAYMENT_REMINDER:"payment_reminder",MESSAGE_WITH_LINK:"message_with_link",MESSAGE_WITH_LINK_STATUS:"message_with_link_status",QUICK_REPLY:"quick_reply",CTA_CALL:"cta_call",CTA_URL:"cta_url",CTA_CATALOG:"cta_catalog",CATALOG_MESSAGE:"catalog_message",PAYMENT_INFO:"payment_info",CTA_COPY_CODE:"cta_copy",MIXED:"mixed",CTA_FLOW:"galaxy_message",CALL_PERMISSION_REQUEST:"call_permission_request"}),l=e;i.default=l}),66);
__d("WAWebCTWABizAccessTokenNonceManager",["WACustomError","WALogger","WAPromiseRetryLoop","WAPromiseTimeout","WAQplTypes","WAResolvable","WASmaxBizAccessTokenRequestSilentNonceRPC","WAWebBizGatingUtils","WAWebQplQuickPerformanceLoggerMarkerIds","WAWebQplQuickPerformanceLoggerModule"],(function(t,n,r,o,a,i,l){var e,s=250,u=1e3,c=null;function d(e){if(c!=null&&e!==!0)return c.promise;var t=o("WAWebBizGatingUtils").adAccountTokenNoncePushWaitTimeoutSeconds(),n=o("WAWebBizGatingUtils").adAccountTokenNonceMaxRetries();o("WAWebQplQuickPerformanceLoggerModule").QPL.markerStart(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE),o("WAWebQplQuickPerformanceLoggerModule").QPL.markerAnnotate(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,{int:{fetch_nonce_timeout:t,fetch_nonce_max_retries:n}});var r=n,a=function(a){return o("WAWebQplQuickPerformanceLoggerModule").QPL.markerAnnotate(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,{int:{fetch_nonce_retry:n-r}}),o("WAPromiseTimeout").promiseTimeout(m(),t*1e3).then(function(e){a(e)}).catch(function(e){var t=r>0;if(r--,!t)throw e instanceof o("WACustomError").TimeoutError&&(o("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,o("WAQplTypes").QuickLogActionType.ABORTED),c=null),e})},i=new(o("WAPromiseRetryLoop")).PromiseRetryLoop({name:"fetchAdAccountNonce",timer:{algo:{type:"exponential",first:s},max:u},code:a});return i.start(),i.promise()}function m(){o("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,"request_nonce_start");var e=c=new(o("WAResolvable")).Resolvable;return o("WASmaxBizAccessTokenRequestSilentNonceRPC").sendRequestSilentNonceRPC({}).then(function(t){switch(t.name){case"RequestSilentNonceResponseError":return o("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,"request_nonce_end"),o("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,o("WAQplTypes").QuickLogActionType.FAIL),c=null,{type:"error"};case"RequestSilentNonceResponseRecoveryRequired":return o("WAWebQplQuickPerformanceLoggerModule").QPL.markerAnnotate(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,{bool:{fetch_nonce_recovery_needed:!0}}),o("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,"request_nonce_end"),o("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,o("WAQplTypes").QuickLogActionType.FAIL),c=null,{type:"recovery-required",emailMask:t.value.resultEmail};default:return t.name,o("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,"request_nonce_end"),o("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,"push_nonce_start"),e.promise}}).catch(function(e){throw o("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,"request_nonce_end"),o("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,o("WAQplTypes").QuickLogActionType.FAIL),c=null,e})}function p(t){c==null?(o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Received a biz token nonce without asking for it"]))),c=null,o("WAWebQplQuickPerformanceLoggerModule").QPL.markerStart(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE),o("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,"push_nonce_end"),o("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,o("WAQplTypes").QuickLogActionType.DROPPED)):(c.resolve({type:"success",nonce:t}),o("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,"push_nonce_end"),o("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_NONCE,o("WAQplTypes").QuickLogActionType.SUCCESS))}function _(e){c==null&&(c=new(o("WAResolvable")).Resolvable),c.resolve({type:"success",nonce:e})}function f(){c=null}function g(e){return e}function h(){return o("WAWebBizGatingUtils").adAccountTokenNoncePushWaitTimeoutSeconds()*(o("WAWebBizGatingUtils").adAccountTokenNonceMaxRetries()+1)}l.fetchNonce=d,l.setNonceFromPushNotification=p,l.setNonceFromRecoveryCode=_,l.markNonceAsUsed=f,l.castToNonce=g,l.getMaximumNonceFetchTimeoutSeconds=h}),98);
__d("WAWebFailureErrorCodes",[],(function(t,n,r,o,a,i){var e={REASON_GENERIC_FAILURE:400,REASON_NOT_AUTHORIZED:401,REASON_TEMP_BANNED:402,REASON_LOCKED:403,REASON_CLIENT_TOO_OLD:405,REASON_BANNED:406,REASON_BAD_USER_AGENT:409,REASON_INTERNAL_SERVER_ERROR:500,REASON_EXPERIMENTAL:501,REASON_SERVICE_UNAVAILABLE:503};i.FAILURE_REASON=e}),66);
__d("WAWebFetchAdAccountToken",["WAQplTypes","WAResolvable","WASmaxBizCtwaAdAccountGetAccessTokenAndSessionCookiesRPC","WAWebCTWABizAccessTokenNonceManager","WAWebCommonAdsTypes","WAWebFailureErrorCodes","WAWebGraphQLServerError","WAWebQplQuickPerformanceLoggerMarkerIds","WAWebQplQuickPerformanceLoggerModule","WAWebUserPrefsCTWA"],(function(t,n,r,o,a,i,l){function e(e){switch(e==null?void 0:e.elementValue){case"Weak":return o("WAWebCommonAdsTypes").WAAIdentityTokenStrengthEnum.WEAK;case"Strong":default:return o("WAWebCommonAdsTypes").WAAIdentityTokenStrengthEnum.STRONG}}var s=null,u=1;function c(e){if(s!=null){if(e!==!0)return s.promise;s=null}var t=s=new(o("WAResolvable")).Resolvable,n=o("WAWebUserPrefsCTWA").getAdAccountToken();return n!=null&&n.bp_id!==""&&e!==!0?(t.resolve({type:"success",token:n}),t.promise):(o("WAWebQplQuickPerformanceLoggerModule").QPL.markerStart(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_TOKEN),o("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_TOKEN,"request_token_start"),_(u).then(function(e){e.type==="success"?o("WAWebUserPrefsCTWA").setAdAccountToken(e.token):(e.type,s=null),t.resolve(e)}).catch(function(e){s=null,t.reject(e)}),t.promise)}function d(){s=null,o("WAWebUserPrefsCTWA").clearAdAccountToken()}function m(e){o("WAWebUserPrefsCTWA").setAdAccountToken(e);var t=new(o("WAResolvable")).Resolvable;t.resolve({type:"success",token:e}),s=t}function p(e){if(e instanceof o("WAWebGraphQLServerError").GraphQLServerError){var t=e.source.errors.some(function(e){return o("WAWebGraphQLServerError").GraphQLErrorCode.cast(e.code)===o("WAWebGraphQLServerError").GraphQLErrorCode.INVALID_ACCESS_TOKEN||e.code===o("WAWebFailureErrorCodes").FAILURE_REASON.REASON_GENERIC_FAILURE});return t}return!1}function _(e){return o("WAWebCTWABizAccessTokenNonceManager").fetchNonce().then(function(t){switch(t.type){case"error":case"recovery-required":return t;default:return t.type,f(t.nonce).then(function(t){return t.type==="incorrect-nonce"&&e>0?_(e-1).then(function(e){return e.type==="success"?e:(e.type,t)}):t})}})}function f(t){return o("WAWebCTWABizAccessTokenNonceManager").markNonceAsUsed(),o("WASmaxBizCtwaAdAccountGetAccessTokenAndSessionCookiesRPC").sendGetAccessTokenAndSessionCookiesRPC({codeElementValue:t}).then(function(t){switch(t.name){case"GetAccessTokenAndSessionCookiesResponseTooManyAttempts":return y(),{type:"too-many-attempts"};case"GetAccessTokenAndSessionCookiesResponseIncorrectNonce":return y(),{type:"incorrect-nonce"};case"GetAccessTokenAndSessionCookiesResponseError":return y(),{type:"error"};default:return t.name,h(),{type:"success",token:o("WAWebCommonAdsTypes").asAdAccountToken(t.value.accessTokenElementValue,t.value.businessPersonId,"WAA",e(t.value.tokenType))}}}).catch(function(e){throw y(),e})}function g(e){o("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_TOKEN,"request_token_end"),o("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.MANAGE_ADS_FETCH_TOKEN,e)}function h(){g(o("WAQplTypes").QuickLogActionType.SUCCESS)}function y(){g(o("WAQplTypes").QuickLogActionType.FAIL)}function C(){return o("WAWebCTWABizAccessTokenNonceManager").getMaximumNonceFetchTimeoutSeconds()*(u+1)}l.FETCH_AD_ACCOUNT_TOKEN_MAX_RETRIES=u,l.fetchToken=c,l.markTokenAsInvalid=d,l.setToken=m,l.hasGraphQLAuthError=p,l.getMaximumAdAccountFetchTimeoutSeconds=C}),98);
__d("WAWebEmojiCompile",["WATrie","escapeRegex","isStringNullOrEmpty"],(function(t,n,r,o,a,i,l){function e(e){var t=r("WATrie").fromForwardsStrings(e.sort(function(e,t){return t.length-e.length}).map(function(e){return""+e+u}));return s(null,t,null,0)}function s(e,t,n,o,a){var i=[],l=!1,d=a;if(d==null&&!r("isStringNullOrEmpty")(e))if(o===1){var m=c.has(e);m&&(d=!0)}else!r("isStringNullOrEmpty")(n)&&o===2&&(d=c.has(n+e));t.getChildren().forEach(function(t){if(t.prefix===u){l=!0;return}i.push(s(t.prefix,t.node,e,o+1,d))});var p=e===String.fromCodePoint(65039)&&n!=null&&d!==!0?String.fromCodePoint(65039)+"?":r("escapeRegex")(e||""),_=i.length===0?"":"(?:"+i.join("|")+")";return _&&l&&(_+="?"),""+p+_}var u="\n",c=new Set([String.fromCodePoint(169),String.fromCodePoint(174),String.fromCodePoint(8482),String.fromCodePoint(9823),String.fromCodePoint(9854),String.fromCodePoint(12336)]);l.default=e}),98);
__d("WAWebOrderStatusButton",["WAWebMsgType"],(function(t,n,r,o,a,i,l){var e=function(t){var e;if(t.type!==o("WAWebMsgType").MSG_TYPE.INTERACTIVE)return null;var n=(e=t.interactivePayload)==null||(e=e.buttons)==null?void 0:e[0];return s(n)},s=function(t){if((t==null?void 0:t.name)!=="order_status")return null;var e=t==null?void 0:t.buttonParamsJson;if(e==null)return null;try{var n=JSON.parse(e);return n}catch(e){return null}};l.getOrderStatusButton=e,l.parseOrderStatusButton=s}),98);
__d("WAWebWamEnumEntryPointConversationInitiated",[],(function(t,n,r,o,a,i){var e=Object.freeze({BUSINESS_INITIATED:0,CONSUMER_INITIATED:1,NO_MESSAGES_LAST_24H:2});i.ENTRY_POINT_CONVERSATION_INITIATED=e}),66);
__d("parseJSONMixed",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){return e==null?null:JSON.parse(e,t)}i.default=e}),66);
__d("tryParseJSONMixed",["parseJSONMixed"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){try{return r("parseJSONMixed")(e,t)}catch(e){return null}}l.default=e}),98);
__d("WAWebAnimatedEmojiGatingUtils",["WAWebABProps","gkx"],(function(t,n,r,o,a,i,l){function e(){return o("WAWebABProps").getABPropConfigValue("animated_emojis_enabled")}function s(){return o("WAWebABProps").getABPropConfigValue("remove_single_emoji_bubble_background_enabled")}function u(){return o("WAWebABProps").getABPropConfigValue("animated_emoji_set_1_enabled")}function c(){return!r("gkx")("26258")&&o("WAWebABProps").getABPropConfigValue("animated_emoji_final_set_enabled")}function d(){return o("WAWebABProps").getABPropConfigValue("animated_race_mercedes_car_emoji_enabled")}l.isAnimatedEmojiEnabled=e,l.isStaticSingleEmojiUIEnabled=s,l.isAnimatedEmojiSet1Enabled=u,l.isAnimatedEmojiFinalSetEnabled=c,l.isAnimatedEmojiMercedesRacingEnabled=d}),98);
__d("WAWebEmojiConst",["$InternalEnum","WAWebAnimatedEmojiGatingUtils","WAWebMobilePlatforms"],(function(t,n,r,o,a,i,l){var e=25,s={SMILEYS_PEOPLE:"SMILEYS_PEOPLE",ANIMALS_NATURE:"ANIMALS_NATURE",FOOD_DRINK:"FOOD_DRINK",ACTIVITY:"ACTIVITY",TRAVEL_PLACES:"TRAVEL_PLACES",OBJECTS:"OBJECTS",SYMBOLS:"SYMBOLS",FLAGS:"FLAGS"},u=["SMILEYS_PEOPLE","ANIMALS_NATURE","FOOD_DRINK","ACTIVITY","TRAVEL_PLACES","OBJECTS","SYMBOLS","FLAGS"],c={APPLE:"APPLE",WHATSAPP:"WHATSAPP"},d={small:20,large:32},m=n("$InternalEnum").Mirrored(["MEDIUM","LARGE","XLARGE","XLARGE_60"]),p=[].concat(u,["VARIATION"]),_=["\u2764","\u2665",String.fromCodePoint(129294),String.fromCodePoint(128150),String.fromCodePoint(128420),String.fromCodePoint(128154),String.fromCodePoint(128156),String.fromCodePoint(128151),String.fromCodePoint(128147),String.fromCodePoint(128153),String.fromCodePoint(129293),String.fromCodePoint(128155),String.fromCodePoint(128149),String.fromCodePoint(129505),String.fromCodePoint(10084,65039,8205,128293),String.fromCodePoint(129653),String.fromCodePoint(129654),String.fromCodePoint(129655)],f=[String.fromCodePoint(128536),String.fromCodePoint(10084,65039),String.fromCodePoint(128175),String.fromCodePoint(128514),String.fromCodePoint(129315),String.fromCodePoint(128525),String.fromCodePoint(128522),String.fromCodePoint(128526),String.fromCodePoint(129321),String.fromCodePoint(128149),String.fromCodePoint(128521),String.fromCodePoint(10024)],g=[String.fromCodePoint(129671),String.fromCodePoint(128148),String.fromCodePoint(128079),String.fromCodePoint(128557),String.fromCodePoint(128545),String.fromCodePoint(129318,8205,9794,65039),String.fromCodePoint(128293),String.fromCodePoint(128591),String.fromCodePoint(128556),String.fromCodePoint(128517),String.fromCodePoint(129395),String.fromCodePoint(127881),String.fromCodePoint(128532),String.fromCodePoint(128588),String.fromCodePoint(128536),String.fromCodePoint(128546),String.fromCodePoint(129392),String.fromCodePoint(128536),String.fromCodePoint(128558),String.fromCodePoint(128077),String.fromCodePoint(128075),String.fromCodePoint(127922)],h=[String.fromCodePoint(127950),String.fromCodePoint(127950,65039)],y={AnimatedAsset1FA87:"v1_Maracas_1FA87",AnimatedAsset1F494:"v1_Broken_heart_1F494",AnimatedAsset1F44F:"v2_Clapping_hands_1F44F",AnimatedAsset1F62D:"v1_Cry_1F62D",AnimatedAsset1F621:"v1_Enraged_face_1F621",AnimatedAsset1F926:"v1_Face_palm_1F926",AnimatedAsset1F618:"v1_Faceblownbyakiss_1F618",AnimatedAsset1F525:"v2_Fire_1F525",AnimatedAsset1F64F:"v2_Folded_hands_1F64F",AnimatedAsset1F62C:"v1_Grimacing_face_1F62C",AnimatedAsset1F605:"v1_Grinning_face_with_sweat_1F605",AnimatedAsset2764FE0F:"v1_Heart_2764_FE0F",AnimatedAsset1F4AF:"v1_Hundred_points_1F4AF",AnimatedAsset1F602:"v1_LOL_1F602",AnimatedAsset1F973:"v1_Party_1F973",AnimatedAsset1F389:"v2_Party_popper_1F389",AnimatedAsset1F614:"v1_Pensive_face_1F614",AnimatedAsset1F64C:"v2_Raising_hands_1F64C",AnimatedAsset1F923:"v1_ROFL_1F923",AnimatedAsset1F622:"v1_Sad_tear_1F622",AnimatedAsset1F60D:"v1_Smiling_face_with_heart_eyes_1F60D",AnimatedAsset1F970:"v1_Smiling_face_with_hearts_1F970",AnimatedAsset1F60A:"v1_Smiling_face_with_smiling_eyes_1F60A",AnimatedAsset1F60E:"v1_Smiling_face_with_sunglasses_1F60E",AnimatedAsset1F929:"v1_Star_struck_1F929",AnimatedAsset1F62E:"v1_Surprised_1F62E",AnimatedAsset1F44D:"v1_Thumbs_up_1F44D",AnimatedAsset1F495:"v1_Two_hearts_1F495",AnimatedAsset1F44B:"v1_Waving_hand_1F44B",AnimatedAsset1F609:"v1_Winking_face_1F609",AnimatedAsset1F3B2:"v1_Dice_1_1F3B2",AnimatedAsset2728:"v1_Sparkles_2728",AnimatedAsset1F3CE:"v1_race_car_1F3CE"},C={AnimatedAsset1FA87:"v1_Maracas_1FA87",AnimatedAsset1F494:"v1_Broken_heart_1F494",AnimatedAsset1F44F:"v2_iOS_clapping_hands_1F44F",AnimatedAsset1F62D:"v1_Cry_1F62D",AnimatedAsset1F621:"v2_iOS_enraged_face_1F621",AnimatedAsset1F926:"v2_iOS_face_palm_man",AnimatedAsset1F618:"v1_Faceblownbyakiss_1F618",AnimatedAsset1F525:"v1_Fire_1F525",AnimatedAsset1F64F:"v2_iOS_folded_hands_1F64F",AnimatedAsset1F62C:"v1_Grimacing_face_1F62C",AnimatedAsset1F605:"v2_iOS_grinning_face_with_sweat_1F605",AnimatedAsset2764FE0F:"v1_Heart_2764_FE0F",AnimatedAsset1F4AF:"v1_Hundred_points_1F4AF",AnimatedAsset1F602:"v1_LOL_1F602",AnimatedAsset1F973:"v2_iOS_party",AnimatedAsset1F389:"v2_iOS_party_popper_1F389",AnimatedAsset1F614:"v1_Pensive_face_1F614",AnimatedAsset1F64C:"v2_Raising_hands_1F64C",AnimatedAsset1F923:"v2_iOS_rofl_1F923",AnimatedAsset1F622:"v2_iOS_sad_tear_1F622",AnimatedAsset1F60D:"v1_Smiling_face_with_heart_eyes_1F60D",AnimatedAsset1F970:"v2_Smiling_face_with_heart_eyes_1F60D",AnimatedAsset1F60A:"v1_Smiling_face_with_smiling_eyes_1F60A",AnimatedAsset1F60E:"v1_Smiling_face_with_sunglasses_1F60E",AnimatedAsset1F929:"v3_iOS_star_struck_1F929",AnimatedAsset1F62E:"v1_Surprised_1F62E",AnimatedAsset1F44D:"v1_Thumbs_up_1F44D",AnimatedAsset1F495:"v1_Two_hearts_1F495",AnimatedAsset1F44B:"v1_Waving_hand_1F44B",AnimatedAsset1F609:"v2_iOS_winking_face_1F609",AnimatedAsset1F3B2:"v1_Dice_1_1F3B2",AnimatedAsset2728:"v1_Sparkles_2728",AnimatedAsset1F3CE:"v1_race_car_1F3CE"};function b(e){var t=[o("WAWebMobilePlatforms").PLATFORMS.IPAD,o("WAWebMobilePlatforms").PLATFORMS.IPHONE,o("WAWebMobilePlatforms").PLATFORMS.SMBI].includes(e)?C:y;return[[String.fromCodePoint(128536),""+t.AnimatedAsset1F618],[String.fromCodePoint(10084,65039),""+t.AnimatedAsset2764FE0F],[String.fromCodePoint(128175),""+t.AnimatedAsset1F4AF],[String.fromCodePoint(128514),""+t.AnimatedAsset1F602],[String.fromCodePoint(129315),""+t.AnimatedAsset1F923],[String.fromCodePoint(128525),""+t.AnimatedAsset1F60D],[String.fromCodePoint(128522),""+t.AnimatedAsset1F60A],[String.fromCodePoint(128526),""+t.AnimatedAsset1F60E],[String.fromCodePoint(129321),""+t.AnimatedAsset1F929],[String.fromCodePoint(128149),""+t.AnimatedAsset1F495],[String.fromCodePoint(128521),""+t.AnimatedAsset1F609],[String.fromCodePoint(127922),""+t.AnimatedAsset1F3B2],[String.fromCodePoint(129671),""+t.AnimatedAsset1FA87],[String.fromCodePoint(128148),""+t.AnimatedAsset1F494],[String.fromCodePoint(128079),""+t.AnimatedAsset1F44F],[String.fromCodePoint(128557),""+t.AnimatedAsset1F62D],[String.fromCodePoint(128545),""+t.AnimatedAsset1F621],[String.fromCodePoint(129318,8205,9794,65039),""+t.AnimatedAsset1F926],[String.fromCodePoint(128293),""+t.AnimatedAsset1F525],[String.fromCodePoint(128591),""+t.AnimatedAsset1F64F],[String.fromCodePoint(128556),""+t.AnimatedAsset1F62C],[String.fromCodePoint(128517),""+t.AnimatedAsset1F605],[String.fromCodePoint(129395),""+t.AnimatedAsset1F973],[String.fromCodePoint(127881),""+t.AnimatedAsset1F389],[String.fromCodePoint(128532),""+t.AnimatedAsset1F614],[String.fromCodePoint(128588),""+t.AnimatedAsset1F64C],[String.fromCodePoint(128546),""+t.AnimatedAsset1F622],[String.fromCodePoint(129392),""+t.AnimatedAsset1F970],[String.fromCodePoint(128558),""+t.AnimatedAsset1F62E],[String.fromCodePoint(128077),""+t.AnimatedAsset1F44D],[String.fromCodePoint(128075),""+t.AnimatedAsset1F44B],[String.fromCodePoint(10024),""+t.AnimatedAsset2728],[String.fromCodePoint(127950),""+t.AnimatedAsset1F3CE],[String.fromCodePoint(127950,65039),""+t.AnimatedAsset1F3CE]]}function v(){var e=[];return o("WAWebAnimatedEmojiGatingUtils").isAnimatedEmojiSet1Enabled()&&(e=[].concat(e,f)),o("WAWebAnimatedEmojiGatingUtils").isAnimatedEmojiFinalSetEnabled()&&(e=[].concat(e,g)),o("WAWebAnimatedEmojiGatingUtils").isAnimatedEmojiMercedesRacingEnabled()&&(e=[].concat(e,h)),e}function S(e){var t=v(),n=b(e),r=n.filter(function(e){var n=e[0];return t.includes(n)});return r}l.BUCKET_SIZE=e,l.CATEGORIES=s,l.ORDERED_CATEGORY_IDS=u,l.EMOJI_TYPE=c,l.EMOJI_WIDTH=d,l.LargeEmojiSize=m,l.CATEGORY_ORDERING=p,l.HEART_EMOJIS=_,l.getSupportedAnimatedEmojis=v,l.getSupportedAnimatedEmojisAssetIdsMapping=S}),98);
__d("WAWebGetEmojiPathExperimental",["gkx"],(function(t,n,r,o,a,i,l){var e=""+window.location.origin,s=r("gkx")("26258")?"https://web.whatsapp.com/emoji/v1":e+"/emoji/v1",u=16,c=0,d=1;function m(e,t,n){return p(e,n,t,"png")}function p(e,t,n,r){var o=_(e);return g("single",n,t,o+"."+r)}function _(e){return Array.from(e,function(e){return e.codePointAt(0).toString(16).padStart(6,"0")}).join("_")}function f(e,t,n,r){return g("sprite",e,n,t+"."+r)}function g(e,t,n,r){return[s,u,c,d,e,t.toLowerCase().slice(0,1),n,r].join("/")}l.getGlyphExperimentalPath=m,l.getEmojiSpritesExperimentalPath=f}),98);
__d("WAWebEmoji",["invariant","WABitArray","WANullthrows","WAOnceWithReset","WAWebABProps","WAWebEmojiCompile","WAWebEmojiConst","WAWebGetEmojiPathExperimental","compactMap","lodash","objectEntries"],(function(t,n,r,o,a,i,l,s){var e="\u25A1",u="\u200D",c=["\uD83C\uDFFB","\uD83C\uDFFC","\uD83C\uDFFD","\uD83C\uDFFE","\uD83C\uDFFF"],d=new RegExp(c.join("|"),"g"),m="\uD83E\uDDD1\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1",p="\uD83D\uDC6D",_="\uD83D\uDC6C",f="\uD83D\uDC6B",g=String.fromCodePoint(128105,8205,10084,65039,8205,128139,8205,128104),h=String.fromCodePoint(128105,8205,10084,65039,8205,128139,8205,128105),y=String.fromCodePoint(128104,8205,10084,65039,8205,128139,8205,128104),C=String.fromCodePoint(129489,8205,10084,65039,8205,128139,8205,129489),b=String.fromCodePoint(128143),v=String.fromCodePoint(128105,8205,10084,65039,8205,128104),S=String.fromCodePoint(128105,8205,10084,65039,8205,128105),R=String.fromCodePoint(128104,8205,10084,65039,8205,128104),L=String.fromCodePoint(129489,8205,10084,65039,8205,129489),E=String.fromCodePoint(128145),k=String.fromCodePoint(129309),I=new Set([m,p,_,f,g,h,y,b,v,S,R,E,k]),T=o("WAWebEmojiConst").HEART_EMOJIS.map(function(e){return e}),D=new Set(["\uFE00","\uFE01","\uFE02","\uFE03","\uFE04","\uFE05","\uFE06","\uFE07","\uFE08","\uFE09","\uFE0A","\uFE0B","\uFE0C","\uFE0D","\uFE0E","\uFE0F"]),x=[127950,65039],$=[127950,8205,128960],P=[127950,8205,128961],N=x.map(function(e){return String.fromCodePoint(e)}).join(""),M=$.map(function(e){return String.fromCodePoint(e)}).join(""),w=P.map(function(e){return String.fromCodePoint(e)}).join(""),A=function(t){return t.replace(/\uFE0F/g,"")},F=r("lodash").memoize(function(e,t){function n(r){if(r===void 0&&(r=[]),r.length===t)return[r];for(var o=[],a=0;a<e.length;a++){var i=[].concat(r);i.push(e[a]),o=o.concat(n(i))}return o}return n()},function(e,t){return e.toString()+t}),O=(function(){function t(){var t=this,n;this.skinToneVariations=c,this.emojiRegex=function(){var e=t._createEmojiRegexIfNeeded();return e.lastIndex=0,e},this._createEmojiRegexIfNeeded=(n=r("WAOnceWithReset"))(function(){var e=t._getEmojiRegexSource();return new RegExp("("+e+")","g")}),this.onlyEmojiRegex=function(){var e=t._createOnlyEmojiRegexIfNeeded();return e.lastIndex=0,e},this._createOnlyEmojiRegexIfNeeded=n(function(){var e=t._getEmojiRegexSource();return new RegExp("^("+e+")+$","g")}),this.splitEmojis=function(e){return t.containsOnlyEmoji(e)===!1?null:e.split(t.emojiRegex()).filter(Boolean)},this.extractAllEmojis=function(e){return t.containsEmoji(e)===!1?null:Array.from(e.matchAll(t.emojiRegex())).filter(Boolean).map(function(e){return e[1]})},this.containsEmoji=function(e){return t.emojiRegex().test(e)},this.containsOnlyEmoji=function(e){return t.onlyEmojiRegex().test(e)},this.matchLargeEmojiPattern=function(e){if(e!=null){if(e.length>50||e.includes(" "))return null;var n=t._getLargeEmojisRegex(),r=n.exec(e);return r?r.filter(Boolean).slice(1):null}},this.normalizeEmojiFromString=function(e){return t.normalizeEmoji(e)},this.normalizeEmoji=function(e){var n=A(e),r=t._getDerivedMaps(),o=r.unqualifiedToNormalizedEmoji;return o.get(n)},this.normalizeAllEmojis=r("lodash").memoize(function(n){return n?n.replace(t.emojiRegex(),function(n,r){var o;return D.has(r)?"":(o=t.normalizeEmoji(r))!=null?o:e}):""}),this.getSkinToneVariant=function(e,n){var r=t._getBaseToSkinToneEmojis(),o=r.get(e);if(o==null)return null;var a=B(n);return o.get(a)},this._getDerivedMaps=n(function(){var e=t._getConfig(),n=e.legacyToEmoji,o=e.orderedEmojis,a=new Map,i=new Map,l=new Map,s=0;return o.forEach(function(e,t){if(!(e===""||e==null)){var n=Array.isArray(e)?e:[e];n.forEach(function(e){i.set(e,t);var n=A(e);l.set(n,e)}),a.set(t,s),s++}}),r("objectEntries")(n).forEach(function(e){var t=e[0],n=e[1];i.set(t,n);var r=A(t);l.set(r,t)}),{emojiToGlyphId:i,glyphIdToIndex:a,unqualifiedToNormalizedEmoji:l}}),this._getBaseToSkinToneEmojis=n(function(){var e=t._getDerivedMaps(),n=e.emojiToGlyphId,r=new Map,o=function(){var e,n=i.replace(d,function(t){return e==null&&(e=[]),e.push(t),""});if(e==null)return 0;var o=e,a;n==="\uD83D\uDC69"+u+"\uD83E\uDD1D"+u+"\uD83D\uDC69"?a=p:n==="\uD83D\uDC68"+u+"\uD83E\uDD1D"+u+"\uD83D\uDC68"?a=_:n==="\uD83D\uDC69"+u+"\uD83E\uDD1D"+u+"\uD83D\uDC68"?a=f:n===L?a=E:n===C?a=b:n===String.fromCodePoint(129777,8205,129778)?a=k:a=n;var l=t.normalizeEmoji(a);if(l==null)return 0;var s=r.get(l);s==null&&(s=new Map,s.set("",l),r.set(l,s));var c=B(o);s.set(c,i)},a;for(var i of n.keys())a=o();return r}),this._getSkinToneEmojisToBase=n(function(){var e=new Map;for(var n of t._getBaseToSkinToneEmojis().entries()){var r=n[0],o=n[1];for(var a of o.values())e.set(a,r)}return e}),this._getEmojiRegexSource=n(function(){var e=t._getDerivedMaps(),n=e.emojiToGlyphId;return r("WAWebEmojiCompile")([].concat(Array.from(n.keys()),Array.from(D)).filter(Boolean))}),this._createLargeEmojisRegexIfNeeded=n(function(){var e=t._getEmojiRegexSource();return new RegExp("^("+e+")("+e+")?("+e+")?$")}),this.getEmojisInCategory=function(e){var n;return(n=t._getConfig().categorizedEmojis[e])!=null?n:[]},this._getEmojiToCategory=n(function(){var e=t._getConfig(),n=e.categorizedEmojis,r=new Map;return Object.keys(n).forEach(function(e){var a=o("WAWebEmojiConst").CATEGORY_ORDERING.indexOf(e);n[e].forEach(function(e){var n=t.normalizeEmoji(e);n!=null&&r.set(n,a)})}),r}),this._applyGlyphTransformations=function(e){if(e===N){if(o("WAWebABProps").getABPropConfigValue("custom_racing_emoji_feb2025"))return w;if(o("WAWebABProps").getABPropConfigValue("custom_racing_emoji"))return M}return e},this.getGlyphId=function(e){var n=t.normalizeEmoji(e);if(n==null)return null;var r=t._applyGlyphTransformations(n),o=t._getDerivedMaps(),a=o.emojiToGlyphId;return a.get(r)},this.getGlyphPath=function(e,n){var r=t.normalizeEmojiFromString(e);if(r==null)return null;var a=t._applyGlyphTransformations(r),i=t._getDerivedMaps(),l=i.emojiToGlyphId,s=l.get(a);return s==null?null:o("WAWebGetEmojiPathExperimental").getGlyphExperimentalPath(a,t._getConfig().emojiType,n)},this.getSpritesPath=function(e,t,n,r){return o("WAWebGetEmojiPathExperimental").getEmojiSpritesExperimentalPath(e,t,n,r)},this.isGlyphCached=function(e){var n=t._getGlyphIndex(e);return t._getCachedGlyphs().get(n)},this.markGlyphCached=function(e){var n=t._getGlyphIndex(e);t._getCachedGlyphs().set(n)},this._getCachedGlyphs=n(function(){return new(r("WABitArray"))(t._getGlyphCount())}),this.getCssClasses=function(e,n){return n===void 0&&(n="small"),["b"+t.getBucket(e),n==="small"?"emoji":"emojik",t._getConfig().emojiType===o("WAWebEmojiConst").EMOJI_TYPE.APPLE?"apple":"wa"].join(" ")},this.getStyle=function(e,n){n===void 0&&(n="small");var r=t._getCoordinates(e,n),o=r.xpos,a=r.ypos;return{backgroundPosition:"-"+o+"px -"+a+"px"}},this.getBucket=function(e){var n=t._getGlyphIndex(e),r=Math.floor(n/o("WAWebEmojiConst").BUCKET_SIZE);return""+r},this.getHeartEmojis=n(function(){return r("compactMap")(T,t.normalizeEmoji)}),this._getLastBucketId=n(function(){var e=t._getGlyphCount();return e-e%o("WAWebEmojiConst").BUCKET_SIZE}),this._getLastBucketCols=n(function(){return Math.floor(Math.sqrt(t._getGlyphCount()-t._getLastBucketId()))})}var n=t.prototype;return n.configure=function(t){t!==this._config&&(this._config=t,this.getHeartEmojis.reset(),this._createEmojiRegexIfNeeded.reset(),this._createLargeEmojisRegexIfNeeded.reset(),this._createOnlyEmojiRegexIfNeeded.reset(),this._getEmojiRegexSource.reset(),this._getCachedGlyphs.reset(),this._getSkinToneEmojisToBase.reset(),this._getBaseToSkinToneEmojis.reset(),this._getEmojiToCategory.reset(),this._getLastBucketId.reset(),this._getLastBucketCols.reset(),this._getDerivedMaps.reset())},n._getConfig=function(){return this._config!=null||s(0,56544),this._config},n.isEmoji=function(t){return this.normalizeEmoji(t)!=null},n.getSkinToneBase=function(t){var e,n=this.normalizeEmoji(t);return n==null?null:(e=this._getSkinToneEmojisToBase().get(n))!=null?e:null},n._getLargeEmojisRegex=function(){var e=this._createLargeEmojisRegexIfNeeded();return e.lastIndex=0,e},n._getGlyphCount=function(){var e=this._getDerivedMaps(),t=e.glyphIdToIndex;return t.size},n._getCoordinates=function(t,n){var e=this._getGlyphIndex(t),r=e%o("WAWebEmojiConst").BUCKET_SIZE,a=e>=this._getLastBucketId()?this._getLastBucketCols():Math.floor(Math.sqrt(o("WAWebEmojiConst").BUCKET_SIZE)),i=o("WAWebEmojiConst").EMOJI_WIDTH[n],l=Math.floor(r/a),s=Math.floor(r%a),u=s*i,c=l*i;return{xpos:u,ypos:c,width:i}},n._getGlyphIndex=function(t){var e=this._getDerivedMaps(),n=e.glyphIdToIndex;return r("WANullthrows")(n.get(t))},n.getEmojiAggregate=function(t){var e=this.getNormalizedOrTofu(t),n=this.getSkinToneBase(e);return n!=null?n:A(e)},n.getNormalizedOrTofu=function(n){var t=this.normalizeEmojiFromString(n);return t?n:e},t})();function B(e){return e.every(function(t){return t===e[0]})?e[0]:e.join("")}function W(e){return I.has(e)}var q=new O;l.OPEN_BOX_CHAR=e,l.PEOPLE_HOLDING_HANDS=m,l.WOMEN_HOLDING_HANDS=p,l.MEN_HOLDING_HANDS=_,l.WOMAN_AND_MAN_HOLDING_HANDS=f,l.KISS_WOMAN_MAN=g,l.KISS_WOMAN_WOMAN=h,l.KISS_MAN_MAN=y,l.KISS=b,l.COUPLE_WITH_HEART_WOMAN_MAN=v,l.COUPLE_WITH_HEART_WOMAN_WOMAN=S,l.COUPLE_WITH_HEART_MAN_MAN=R,l.COUPLE_WITH_HEART=E,l.HANDSHAKE=k,l.getPermutations=F,l.isBaseMultiSkinToneEmoji=W,l.EmojiUtil=q}),98);
__d("WAWebAddonDeleteMsgs",["Promise","WALogger","WAWebAddonConstants","WAWebAddonDBTable","WAWebAddonLogUtils","WAWebAddonPerfUtils","WAWebAddonUpdateDataUtils","WAWebMsgKey","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u;function c(e,t){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r){var a;try{a=yield(u||(u=n("Promise"))).all(r.map(function(e){return o("WAWebAddonDBTable").addonInternalDBTable.bulkGetByParentMsgKey(t,[e])})).then(function(e){var t;return(t=[]).concat.apply(t,e)})}catch(e){return}if(a.length!==0){var i=yield o("WAWebAddonPerfUtils").createAddonQplMarker(o("WAWebAddonPerfUtils").AddonQplMarkerType.UI,{mode:t,type:o("WAWebAddonPerfUtils").AnnotationRequestType.BulkRemoveByParents,size:a.length});try{yield o("WAWebAddonUpdateDataUtils").updateAddonsInTableMode({processMode:o("WAWebAddonConstants").AddonProcessMode.DeleteWithParent,tableMode:t},{remove:a}),i==null||i.success()}catch(n){throw o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["deleteAddonMsgsByParentKeys for ",": ",""])),t,n),i==null||i.fail(),n}}}),d.apply(this,arguments)}function m(e){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.parentMsgKeys,a=t.map(function(e){return r("WAWebMsgKey").fromString(e)}),i=[];for(var l of o("WAWebAddonConstants").AddonTableMode.members())l!==o("WAWebAddonConstants").AddonTableMode.None&&i.push(c(l,a));var d=yield(u||(u=n("Promise"))).allSettled(i);o("WAWebAddonLogUtils").hasSettledWithError(d)&&o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["delete addons finished with errors"]))).tags("addons","messaging").sendLogs("deleteAddonMsgsByParentKeys")}),p.apply(this,arguments)}l.deleteAddonMsgsByParentKeys=m}),98);
__d("WAWebWorkerStorageUtils",["invariant","Promise","WAWebIdb","WAWebStorage","err"],(function(t,n,r,o,a,i,l,s){var e,u="worker-storage",c=null;function d(){var e=new(r("WAWebIdb"))(u);c=new(o("WAWebStorage")).Storage(e)}function m(){return c!=null||s(0,56324),c}function p(){return c==null?(e||(e=n("Promise"))).reject(r("err")("[worker-storage] Storage should be created first before being destroyed")):c.purge().then(function(){c=null}).catch(function(e){throw c=null,e})}l.DATABASE_NAME=u,l.createStorage=d,l.getStorage=m,l.destroyStorage=p}),98);
__d("WAWebWorkerStorageVersions",["WAWebWorkerStorageUtils"],(function(t,n,r,o,a,i,l){function e(){return o("WAWebWorkerStorageUtils").getStorage().versions.version(0)}function s(){return o("WAWebWorkerStorageUtils").getStorage().versions.version(1)}l.localStorageCreateTable=e,l.deferredMessagesStorageCreateTable=s}),98);
__d("WAWebSchemaLocalStorage",["WAWebStorageMutationBuilder","WAWebWorkerStorageUtils","WAWebWorkerStorageVersions"],(function(t,n,r,o,a,i,l){var e=o("WAWebStorageMutationBuilder").columnBuilder(),s=e.addColumn,u=e.addUserDefinedPrimaryKey;function c(){o("WAWebWorkerStorageUtils").getStorage().add("local_storage").version(o("WAWebWorkerStorageVersions").localStorageCreateTable(),[u("key"),s("value")]).view(function(e){return{key:e.key,value:e.value}})}function d(){return o("WAWebWorkerStorageUtils").getStorage().table("local_storage")}l.addTable=c,l.getTable=d}),98);
__d("WAWebApiLocalStorage",["WAWebSchemaLocalStorage","WAWebWorkerStorageUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){function e(e){return o("WAWebSchemaLocalStorage").getTable().get(e).then(function(e){return e==null?void 0:e.value})}function s(e){var t=e.map(function(e){return{key:e.key,value:e.value}});return o("WAWebWorkerStorageUtils").getStorage().lock(["local_storage"],(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var n=e[0];yield n.clear(),yield n.bulkCreateOrReplace(t)});return function(t){return e.apply(this,arguments)}})())}function u(){return o("WAWebSchemaLocalStorage").getTable().clear()}l.getLocalStorageValue=e,l.updateLocalStorage=s,l.clearLocalStorage=u}),98);
__d("WAWebApiPeerMessageStore",["WAWebMsgKey","WAWebSchemaPeerMessage","WAWebUserPrefsMeUser"],(function(t,n,r,o,a,i,l){var e=["kind"];function s(t){var n=t.map(function(t){var n=t.kind,r=babelHelpers.objectWithoutPropertiesLoose(t,e);return babelHelpers.extends({},r,{id:String(t.id),to:String(t.to),subtype:String(t.subtype)})});return o("WAWebSchemaPeerMessage").getPeerMessageTable().bulkCreate(n)}function u(e){var t=o("WAWebSchemaPeerMessage").getPeerMessageTable(),n=new(r("WAWebMsgKey"))({fromMe:!0,remote:o("WAWebUserPrefsMeUser").getMePnUserOrThrow(),id:e});return t.remove(n.toString())}l.storePeerMessages=s,l.deletePeerMessage=u}),98);
__d("WAWebAutoLogoutGating",["WAWebEnvironment","WAWebUA"],(function(t,n,r,o,a,i,l){function e(){var e=s();return e}function s(){return r("WAWebEnvironment").isWindows?!1:o("WAWebUA").UA.hasCredentiallessIframeSupport&&!o("WAWebUA").UA.isOculusBroswer}function u(){var e=self.location!==self.parent.location;if(!e)return!1;var t=new URLSearchParams(window.location.search),n=t.get("autologout");return n==="1"}function c(){var e=new URL(window.location.href);return e.searchParams.set("autologout","1"),e.toString()}l.isAutoLogoutEnabled=e,l.isRunningInAutoLogoutIframe=u,l.getAutoLogoutIframeUrl=c}),98);
__d("WAWebArkoseExpUtils",["$InternalEnum","WAWebAutoLogoutGating","gkx","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e=n("$InternalEnum")({NONE:-1,CONTROL:0,TEST:1,DEV:2});function s(){if(!r("justknobx")._("5007"))return u();if(o("WAWebAutoLogoutGating").isRunningInAutoLogoutIframe()){var t=window.parent.arkoseVariant,n=e.cast(t);return n!=null?n:u()}var a=u();return window.arkoseVariant=a,a}function u(){return r("gkx")("26256")||!r("gkx")("18518")?e.NONE:r("gkx")("26258")?r("gkx")("19648")?e.TEST:e.CONTROL:r("gkx")("7634")?e.DEV:e.NONE}function c(){return s()===e.TEST||s()===e.DEV}l.ArkoseVariantType=e,l.getArkoseVariant=s,l.isArkoseAllowedToRun=c}),98);
__d("WAWebArrowForwardIcon.react",["WAWebSvgComponentBase","react","stylex"],(function(t,n,r,o,a,i,l){var e=["height","iconXstyle","name","viewBox","width"],s,u,c=s||(s=r("react")),d="arrow-forward";function m(t){var n=t.height,a=t.iconXstyle,i=t.name,l=t.viewBox,s=t.width,m=babelHelpers.objectWithoutPropertiesLoose(t,e),p;if(l){var _=l.height,f=_===void 0?0:_,g=l.width,h=g===void 0?0:g,y=l.x,C=y===void 0?0:y,b=l.y,v=b===void 0?0:b;p=[C,v,h,f].join(" ")}var S=30,R=30;return(n!=null||s!=null)&&(S=n,R=s),c.jsx(o("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers.extends({name:i!=null?i:d},m,{children:c.jsxs("svg",{viewBox:p!=null?p:"0 0 30 30",height:S,width:R,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(a),version:"1.1",x:"0px",y:"0px",enableBackground:"new 0 0 30 30",children:[c.jsx("title",{children:i!=null?i:d}),c.jsx("path",{fill:"currentColor",d:"M15,7l-1.4,1.4l5.6,5.6H7v2h12.2l-5.6,5.6L15,23l8-8L15,7z"})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.ArrowForwardIcon=m}),98);
__d("WAWebWaitForInitialChatsSynced",["Promise","WAWebBackendEventBus","WAWebEventsWaitForBbEvent"],(function(t,n,r,o,a,i,l){var e,s=(e||(e=n("Promise"))).resolve();function u(){s=r("WAWebEventsWaitForBbEvent")(o("WAWebBackendEventBus").BackendEventBus,o("WAWebBackendEventBus").BackendEvent.ON_INITIAL_CHAT_SYNCED)}function c(){return s}l.initWaitForInitialChatsSynced=u,l.waitForInitialChatsSynced=c}),98);
__d("WAWebMessageQueue",["WACustomError","WALogger","WAPromiseQueue","WAPromiseTimeout","WAWebABProps","WAWebApiContact","WAWebEventsWaitForOfflineDeliveryEnd","WAWebEventsWaitForReadyForOffline","WAWebHandleMsgCommon","WAWebOfflineHandler","WAWebPromiseQueue","WAWebWaitForInitialChatsSynced","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u=2e4,c={allChatQueue:new(o("WAWebPromiseQueue")).PromiseQueue,chatQueue:new(o("WAPromiseQueue")).PromiseQueueMap},d={allChatQueue:new(o("WAWebPromiseQueue")).PromiseQueue,chatQueue:new(o("WAPromiseQueue")).PromiseQueueMap};function m(e){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var r=t.action,a=t.chatWid,i=t.isOffline,l=t.msgCategory,m=a.isRegularUser()&&!a.isLid()?o("WAWebApiContact").getCurrentLid(a):null,p=(m!=null?m:a).toString();return l!==o("WAWebHandleMsgCommon").MSG_CATEGORY.peer&&o("WAWebABProps").getABPropConfigValue("web_fix_duplicated_lids_history_sync")&&(yield o("WAWebWaitForInitialChatsSynced").waitForInitialChatsSynced()),i&&!o("WAWebOfflineHandler").OfflineMessageHandler.isResumeFromRestartComplete()?d.allChatQueue.enqueue(function(){return d.chatQueue.enqueue(p,n("asyncToGeneratorRuntime").asyncToGenerator(function*(){return yield o("WAWebEventsWaitForReadyForOffline").waitForOfflineProcessReady(),o("WAPromiseTimeout").promiseTimeout(r(),u).catch(function(t){if(t instanceof o("WACustomError").TimeoutError)return o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Offline chat queue MAX_MESSAGE_DELAY exceeded"]))).tags("messaging"),null;throw t})}))}):(yield o("WAWebEventsWaitForOfflineDeliveryEnd").waitForOfflineDeliveryEnd(),c.allChatQueue.enqueue(function(){return c.chatQueue.enqueue(p,function(){return o("WAPromiseTimeout").promiseTimeout(r(),u).catch(function(e){if(e instanceof o("WACustomError").TimeoutError)return o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Online chat queue MAX_MESSAGE_DELAY exceeded"]))).tags("messaging"),null;throw e})})}))}),p.apply(this,arguments)}function _(){return d.allChatQueue.wait()}function f(){return c.allChatQueue.wait()}l.onMessageQueue=m,l.waitForOfflineMessageQueue=_,l.waitForOnlineMessageQueue=f}),98);
__d("WAWebOfflineResumeConst",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum").Mirrored(["INIT","RESUME_ON_RESTART","RESUME_WITH_OPEN_TAB","COMPLETE"]),l=2e4,s=100,u=2e3,c=6e4,d=1e3,m=1e3;i.ResumeStatus=e,i.OFFLINE_STANZA_COUNT_CHECK_TIMEOUT_MS=l,i.OFFLINE_STANZA_COUNT_LIMIT=s,i.OFFLINE_DEVICE_SYNC_DELAY=u,i.OFFLINE_STANZA_TIMEOUT_MS=c,i.OFFLINE_PREVIEW_PERIOD_MS=d,i.UI_UPDATE_TIME_MS=m}),66);
__d("WAWebBlockingOfflineResumeManager",["WALogger","WAShiftTimer","WAWebABProps","WAWebApiPendingDeviceSync","WAWebAppTracker","WAWebBackendApi","WAWebBrokerGlobalAppState","WAWebChatThreadLogging","WAWebCmd","WAWebEnvironment","WAWebHandleMsgTypes.flow","WAWebJSHaltDetector","WAWebMessageQueue","WAWebOfflineResumeConst","WAWebOfflineResumeTypes.flow","WAWebOfflineResumeUtils","WAWebPageLoadLogging","WAWebSignalProtocolStore","WAWebUserPrefsGeneral","WAWebWamEnumWebcScenarioType","WAWebWamMemoryStat","WAWebWamOfflineResumeReporter","WAWebWorkerSafeBackendApi","asyncToGeneratorRuntime","gkx"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E,k,I,T;function D(){return T==null&&(T=new $),T}function x(){T=null}var $=(function(){function t(){var e=this;this.$7=null,this.$8=new(o("WAShiftTimer")).ShiftTimer(function(){o("WAWebCmd").Cmd.handleOfflineProgressUpdate(),e.$8.onOrAfter(o("WAWebOfflineResumeConst").UI_UPDATE_TIME_MS)}),this.$10=!1,this.resumeType=o("WAWebOfflineResumeTypes.flow").ResumeType.Blocking,this.$11()}var a=t.prototype;return a.$11=function(){this.offlineMessagePreviewCounter=-1,this.$2=0,this.$3=0,this.$4=!1,this.$5=null,this.$1=o("WAWebOfflineResumeConst").ResumeStatus.INIT},a.$12=function(n){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] offline resume stage: "," -> ",""])),this.$1,n),this.$1=n},a.setStatus_TESTONLY=function(t){o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] offline resume stage: "," -> ",""])),this.$1,t),this.$1=t},a.processOfflinePreview=function(t){if(o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logOfflinePreviewT(),this.isResumeFromRestartComplete())o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] Offline session is complete when receiving offline preview ib."]))),o("WAWebOfflineResumeUtils").exceedResumeWithOpenTabLimit(t.message,t.receipt)&&(o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] restart client due to exceed the LIMIT, message: ",", receipt: ",""])),t.message,t.receipt),o("WAWebOfflineResumeUtils").refreshWindow()),o("WAWebJSHaltDetector").jsHaltDetector.restartDetection(),this.$12(o("WAWebOfflineResumeConst").ResumeStatus.RESUME_WITH_OPEN_TAB),o("WAWebBackendApi").frontendFireAndForget("updateChatSortListener",{enable:!1}),self.setTimeout(function(){o("WAWebBackendApi").frontendFireAndForget("updateChatSortListener",{enable:!0})},7e3);else if(this.$1===o("WAWebOfflineResumeConst").ResumeStatus.INIT)o("WAWebAppTracker").AppTracker.start(o("WAWebAppTracker").AppTrackerType.BlockingOR),r("WAWebBrokerGlobalAppState").initOrUpdateTracking(o("WAWebWamEnumWebcScenarioType").WEBC_SCENARIO_TYPE.OFFLINE_RESUME),o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logOfflineCount(t),this.$5=t.message>0,this.$4=t.message===0,this.offlineMessagePreviewCounter=t.message,this.$2=0,this.$9=Date.now(),o("WAWebSignalProtocolStore").enableMemSignalStore(),o("WAWebCmd").Cmd.handleOfflineProgressUpdate(),o("WAWebJSHaltDetector").jsHaltDetector.restartDetection(),this.$12(o("WAWebOfflineResumeConst").ResumeStatus.RESUME_ON_RESTART),this.$13(t.message,t.receipt),this.$8.onOrAfter(o("WAWebOfflineResumeConst").UI_UPDATE_TIME_MS),o("WAWebCmd").Cmd.readyForProcessOffline(),o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] start handling offline stanza"])));else{var e=this.$9;if(e!=null){var n=Date.now()-e;n<o("WAWebOfflineResumeConst").OFFLINE_PREVIEW_PERIOD_MS?(o("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] Accept multiple offline preview ibs during offline resume, delay ","."])),n),this.offlineMessagePreviewCounter+=t.message,this.$5=this.offlineMessagePreviewCounter>0,this.$4=this.offlineMessagePreviewCounter===0,o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logOfflineCount(t),o("WAWebCmd").Cmd.handleOfflineProgressUpdate()):r("gkx")("26258")?o("WALogger").LOG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] Reject multiple offline preview ib during offline resume, delay ","."])),n):o("WALogger").ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] Reject multiple offline preview ibs during offline resume, delay ",""])),n).sendLogs("offline-multiple-preview")}this.$14()}},a.getOfflineDeliveryProgress=function(){return this.$4?100:this.offlineMessagePreviewCounter===-1?0:this.offlineMessagePreviewCounter===0?100:Math.min(Math.ceil(100*this.$2/this.offlineMessagePreviewCounter),100)},a.processOfflineSessionComplete=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t,n=this,r=e;if(self.setTimeout(function(){o("WAWebBackendApi").frontendFireAndForget("updateChatSortListener",{enable:!0})},3e3),(t=this.$7)==null||t.cancel(),this.$7=null,o("WAWebCmd").Cmd.readyForProcessOffline(),o("WALogger").LOG(f||(f=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] start handling offline stanza"]))),this.$1===o("WAWebOfflineResumeConst").ResumeStatus.COMPLETE){o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logLastStanzaT(),o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.commit();return}else if(this.$1===o("WAWebOfflineResumeConst").ResumeStatus.RESUME_WITH_OPEN_TAB){yield o("WAWebMessageQueue").waitForOnlineMessageQueue(),yield o("WAWebApiPendingDeviceSync").doPendingDeviceSync(),this.$12(o("WAWebOfflineResumeConst").ResumeStatus.COMPLETE),o("WAWebCmd").Cmd.offlineDeliveryEnd();return}return this.$5=r>0,this.$4=r===0,this.$6=0,self.setTimeout(function(){n.$6>o("WAWebOfflineResumeConst").OFFLINE_STANZA_COUNT_LIMIT&&(o("WALogger").WARN(g||(g=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] "," received after offline completion marker. Refreshing window due to potential server issue."])),n.$6),o("WAWebOfflineResumeUtils").refreshWindow())},o("WAWebOfflineResumeConst").OFFLINE_STANZA_COUNT_CHECK_TIMEOUT_MS),o("WAWebCmd").Cmd.handleOfflineProgressUpdate(),this.$12(o("WAWebOfflineResumeConst").ResumeStatus.COMPLETE),this.$15()});function t(t){return e.apply(this,arguments)}return t})(),a.isResumeFromRestartComplete=function(){return this.$1!==o("WAWebOfflineResumeConst").ResumeStatus.RESUME_ON_RESTART&&this.$1!==o("WAWebOfflineResumeConst").ResumeStatus.INIT},a.isResumeOnSocketDisconnectInProgress=function(){return this.$1===o("WAWebOfflineResumeConst").ResumeStatus.RESUME_WITH_OPEN_TAB},a.isResumeFromRestartInProgress=function(){return this.$1!==o("WAWebOfflineResumeConst").ResumeStatus.INIT&&!o("WAWebCmd").Cmd.isOfflineDeliveryEnd},a.isResumeComplete=function(){return this.$1===o("WAWebOfflineResumeConst").ResumeStatus.COMPLETE},a.getHasMessagesToDownload=function(){return this.$5},a.getFinishedDownloading=function(){return this.getOfflineDeliveryProgress()===100},a.shouldUseOfflineResumeScreen=function(){return this.offlineMessagePreviewCounter>this.$2},a.processDecryptResult=function(t){this.$14(),this.$2+=1,t===o("WAWebHandleMsgTypes.flow").E2EProcessResult.RETRY&&(this.$3+=1)},a.offlineStanzaReceivedAfterComplete=function(){this.isResumeFromRestartComplete()&&(this.$6+=1)},a.newOfflineStanza=function(t,n){this.$14(),o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logAddOfflineSizeBytes(n),o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logOldestStanzaTime(t)},a.getResumeUIProgressBarType=function(){return o("WAWebOfflineResumeTypes.flow").ResumeUIProgressBarType.None},a.$14=function(){this.$7&&this.$7.onOrAfter(o("WAWebOfflineResumeConst").OFFLINE_STANZA_TIMEOUT_MS)},a.$13=function(t,n){var e,r=this;(e=this.$7)==null||e.cancel(),this.$7=new(o("WAShiftTimer")).ShiftTimer(function(){r.$1!==o("WAWebOfflineResumeConst").ResumeStatus.COMPLETE&&(o("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking]: offline session completed by timeout"]))),o("WALogger").ERROR(y||(y=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking]offline resume finished by timeout"]))).sendLogs("blocking-offline-resume-timeout",{sampling:.01}),r.processOfflineSessionComplete(t+n).catch(function(e){o("WALogger").ERROR(C||(C=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] processOfflineSessionComplete failed in timeout handler: ",""])),e).sendLogs("blocking-offline-resume-timeout-handler",{sampling:.01})}),r.$7=null,o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logMissedOfflineComplete())}),this.$7.onOrAfter(o("WAWebOfflineResumeConst").OFFLINE_STANZA_TIMEOUT_MS)},a.$15=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){o("WAWebPageLoadLogging").startPageLoadQplMeasure("waitForOfflineMessageQueue"),yield o("WAWebMessageQueue").waitForOfflineMessageQueue(),o("WAWebPageLoadLogging").endPageLoadQplMeasure("waitForOfflineMessageQueue"),this.$4=!0,o("WAWebCmd").Cmd.handleOfflineProgressUpdate(),o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logOfflineDecryptionErrorCount(this.$3),o("WALogger").LOG(b||(b=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] _onOfflineComplete: waitForOfflineMsgThread done, total decryption error: ",""])),this.$3),this.$3=0,o("WAWebPageLoadLogging").startPageLoadQplMeasure("clearOfflineSnapShot"),yield o("WAWebOfflineResumeUtils").clearOfflineSnapShot(),o("WAWebPageLoadLogging").endPageLoadQplMeasure("clearOfflineSnapShot"),o("WALogger").LOG(v||(v=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] _onOfflineComplete: clearOfflineSnapShot done."]))),o("WAWebSignalProtocolStore").enablePersistSignalStore(),o("WAWebOfflineResumeUtils").runReceiptCleanUpLoop().catch(function(e){o("WALogger").ERROR(S||(S=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] runReceiptCleanUpLoop failed: ",""])),e).sendLogs("blocking-offline-resume-receipt-cleanup",{sampling:.01})}),o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logLastStanzaT(),o("WAWebPageLoadLogging").startPageLoadQplMeasure("loadMainScreen"),yield o("WAWebOfflineResumeUtils").loadMainScreen({shouldUpdateReceipts:!0,shouldRestoreChatsAndMsgs:!this.$10}),o("WAWebPageLoadLogging").endPageLoadQplMeasure("loadMainScreen"),o("WAWebCmd").Cmd.offlineDeliveryEnd(),o("WAWebAppTracker").AppTracker.stop(o("WAWebAppTracker").AppTrackerType.BlockingOR),o("WAWebUserPrefsGeneral").setOfflinePushCount(0).catch(function(e){o("WALogger").ERROR(R||(R=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] setOfflinePushCount failed: ",""])),e).sendLogs("blocking-offline-resume-push-count",{sampling:.01})}),o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.commit().catch(function(e){o("WALogger").ERROR(L||(L=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] OfflineResumeReporter.commit failed: ",""])),e).sendLogs("blocking-offline-resume-reporter-commit",{sampling:.01})}),o("WAWebWorkerSafeBackendApi").workerSafeFireAndForget("processAllOrphanPaymentNotifications"),o("WAWebChatThreadLogging").uploadChatThreadLoggingEvents().catch(function(e){o("WALogger").ERROR(E||(E=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] uploadChatThreadLoggingEvents failed: ",""])),e).sendLogs("blocking-offline-resume-upload-ctl",{sampling:.01})}),r("WAWebBrokerGlobalAppState").initOrUpdateTracking(o("WAWebWamEnumWebcScenarioType").WEBC_SCENARIO_TYPE.IDLE),o("WAWebWamMemoryStat").setCurrentMemoryScenario(o("WAWebWamEnumWebcScenarioType").WEBC_SCENARIO_TYPE.IDLE),self.setTimeout(function(){o("WAWebApiPendingDeviceSync").doPendingDeviceSync().catch(function(e){o("WALogger").ERROR(k||(k=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] doPendingDeviceSync failed: ",""])),e).sendLogs("blocking-offline-resume-device-sync",{sampling:.01})})},o("WAWebOfflineResumeConst").OFFLINE_DEVICE_SYNC_DELAY),(r("WAWebEnvironment").isWindows||o("WAWebABProps").getABPropConfigValue("wa_web_resume_timer_fix_enabled"))&&(o("WALogger").LOG(I||(I=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] cancel progress bar timer"]))),this.$8.forceRunNow(),this.$8.cancel())});function t(){return e.apply(this,arguments)}return t})(),t})();l.getOrCreateInstance=D,l.clearInstance=x,l.OfflineBlockingResumeStageManager=$}),98);
__d("WAWebBotMessageSecret",["WABinary","WACryptoAesGcm","WACryptoHkdf","WALogger","WANullthrows","WAWebBotGroupGatingUtils","WAWebBotTypes","WAWebDBMessageSerialization","WAWebLidMigrationUtils","WAWebMsgKey","WAWebMsmsgMsgSecretCache","WAWebProtobufsE2E.pb","WAWebSchemaMessage","WAWebUserPrefsMeUser","WAWebWidToJid","asyncToGeneratorRuntime","decodeProtobuf"],(function(t,n,r,o,a,i,l){var e,s,u,c=32,d="Bot Message";function m(e){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=new(o("WABinary")).Binary(e).readByteArrayView(),n=yield o("WACryptoHkdf").extractAndExpand(new Uint8Array(t),d,c);return n}),p.apply(this,arguments)}function _(e,t){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){return t.msgInfo.author.isFbidBot()?y(e,t):g(e,t)}),f.apply(this,arguments)}function g(e,t){return h.apply(this,arguments)}function h(){return h=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){var a,i,l=n.msgInfo,s=n.msgMeta,u=o("decodeProtobuf").decodeProtobuf(o("WAWebProtobufsE2E.pb").MessageSecretMessageSpec,t),c=s.targetSenderJid?o("WAWebUserPrefsMeUser").isMeAccount(s.targetSenderJid):!0,d={fromMe:c,remote:(a=s.targetChatJid)!=null?a:l.chat,id:r("WANullthrows")(s.targetId,"decryptMsmsgBotMessage: targetId")};l.chat.isGroup()&&(d.participant=s.targetSenderJid);var m=yield b(d),p=o("WAWebWidToJid").widToUserJid((i=s.targetSenderJid)!=null?i:o("WAWebUserPrefsMeUser").getMePnUserOrThrow()),_=o("WAWebWidToJid").widToUserJid(r("WANullthrows")(l.author,"decryptMsmsgBotMessage: author")),f=null,g=r("WANullthrows")(u.encIv,"decryptMsmsgBotMessage: encIv"),h=r("WANullthrows")(u.encPayload,"decryptMsmsgBotMessage: encPayload");try{var y=l.externalId,C=yield S(y,p,_,m);f=yield o("WACryptoAesGcm").gcmDecrypt(C,g,h,y+"\0"+_)}catch(t){var v;o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["decryptMsmsgBotMessage: fallback to botEditTargetId: ",""])),t);var R=r("WANullthrows")((v=n.msgBotInfo)==null?void 0:v.botEditTargetId,"decryptMsmsgBotMessage: botEditTargetId"),L=yield S(R,p,_,m);f=yield o("WACryptoAesGcm").gcmDecrypt(L,g,h,R+"\0"+_)}return f}),h.apply(this,arguments)}function y(e,t){return C.apply(this,arguments)}function C(){return C=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n,a=t.msgBotInfo,i=t.msgInfo,l=t.msgMeta,u=o("WAWebUserPrefsMeUser").getMeLidUserOrThrow(),c=(n=l.targetSenderJid)!=null?n:u,d={fromMe:o("WAWebUserPrefsMeUser").isMeAccount(c),remote:i.chat,id:r("WANullthrows")(l.targetId,"decryptMsmsgFbidBotMessage: targetId")};if(i.chat.isGroup()){var m;d.participant=(m=o("WAWebLidMigrationUtils").toPn(c))!=null?m:c}var p=yield b(d),_=i.externalId;((a==null?void 0:a.botEditType)===o("WAWebBotTypes").BotMsgEditType.INNER||(a==null?void 0:a.botEditType)===o("WAWebBotTypes").BotMsgEditType.LAST)&&((a==null?void 0:a.botEditTargetId)!=null?_=a==null?void 0:a.botEditTargetId:o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[decryptMsmsgFbidBotMessage] fallback\u2192externalId edit=",""])),a==null?void 0:a.botEditType));var f=o("WAWebWidToJid").widToUserJid(r("WANullthrows")(i.author,"decryptMsmsgFbidBotMessage: author")),g=yield S(_,o("WAWebWidToJid").widToUserJid(c),f,p),h=o("decodeProtobuf").decodeProtobuf(o("WAWebProtobufsE2E.pb").MessageSecretMessageSpec,e),y=h.encIv,C=h.encPayload,v=yield o("WACryptoAesGcm").gcmDecrypt(g,r("WANullthrows")(y,"decryptMsmsgFbidBotMessage: encIv"),r("WANullthrows")(C,"decryptMsmsgFbidBotMessage: encPayload"),_+"\0"+f);return v}),C.apply(this,arguments)}function b(e){return v.apply(this,arguments)}function v(){return v=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t,n=new(r("WAWebMsgKey"))(e),a=n.toString(),i=(t=o("WAWebLidMigrationUtils").getAlternateMsgKey(n))==null?void 0:t.toString(),l=o("WAWebMsmsgMsgSecretCache").msmsgMsgSecretCache.getMsmsgMsgSecretFromCache(a);if(l==null&&i!=null&&(l=o("WAWebMsmsgMsgSecretCache").msmsgMsgSecretCache.getMsmsgMsgSecretFromCache(i)),l==null){var s=yield o("WAWebSchemaMessage").getMessageTable().bulkGet([a,i].filter(Boolean)),c=s[0],d=s[1];c==null&&d==null&&o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[getDecryptSecretForMsg] targetMsg null chat="," key="," alt=",""])),e.remote,a,i);var p=o("WAWebDBMessageSerialization").messageFromDbRow(r("WANullthrows")(c!=null?c:d,"decryptMsmsgBotMessage: targetMsg"));if(l=p==null?void 0:p.messageSecret,o("WAWebBotGroupGatingUtils").isOpenGroupBotParticipantAddEnabled()){var _=p==null?void 0:p.botGroupParticipant;_!=null&&o("WAWebMsmsgMsgSecretCache").msmsgBotGroupGossipDataCache.addMsmsgBotGroupGossipDataToCache(a,_)}}return m(r("WANullthrows")(l,"decryptMsmsgBotMessage: decryptSecretBase"))}),v.apply(this,arguments)}function S(e,t,n,r){return R.apply(this,arguments)}function R(){return R=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r){var a=o("WABinary").Binary.build(e,t,n).readBuffer(),i=yield o("WACryptoHkdf").extractAndExpand(new Uint8Array(r),a,c);return i}),R.apply(this,arguments)}l.genBotMsgSecretFromMsgSecret=m,l.decryptMsmsgBotMessage=_}),98);
__d("WAWebBuildType",["$InternalEnum","WAWebEnvironment","WAWebUserPrefsGeneral","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e=n("$InternalEnum")({RELEASE:0,BETA:1,ALPHA:2,DEBUG:3});function s(){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=yield o("WAWebUserPrefsGeneral").getWhatsAppWebExternalBetaJoinedIdb(),n=r("WAWebEnvironment").getEnvironment();return(function(t){if(Array.isArray(t)&&t.length===2&&t[0]==="prod"&&t[1]===!0)return e.BETA;if(Array.isArray(t)&&t.length===2&&t[0]==="prod"&&t[1]===!1)return e.RELEASE;if(Array.isArray(t)&&t.length===2&&t[0]==="intern"&&t[1]===!0)return e.DEBUG;if(Array.isArray(t)&&t.length===2&&t[0]==="intern"&&t[1]===!1||Array.isArray(t)&&t.length===2&&t[0]==="dev"&&t[1]===!0)return e.BETA;if(Array.isArray(t)&&t.length===2&&t[0]==="dev"&&t[1]===!1)return e.DEBUG;throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t)})([n,t])}),u.apply(this,arguments)}l.BuildType=e,l.getBuildType=s}),98);
__d("WAWebWamEnumActionConducted",[],(function(t,n,r,o,a,i){var e=Object.freeze({MUTE:1,UNMUTE:2,EXPIRE:3});i.ACTION_CONDUCTED=e}),66);
__d("WAWebWamEnumChatMuteNotificationChoice",[],(function(t,n,r,o,a,i){var e=Object.freeze({NO_NOTIFICATIONS_WHEN_MUTED:1,YES_NOTIFICATIONS_WHEN_MUTED:2});i.CHAT_MUTE_NOTIFICATION_CHOICE=e}),66);
__d("WAWebWamEnumMuteChatType",[],(function(t,n,r,o,a,i){var e=Object.freeze({ONE_ON_ONE:1,GROUP:2,CHANNEL:3,INTEROP:4,INORGANIC_NOTIFICATION:5});i.MUTE_CHAT_TYPE=e}),66);
__d("WAWebWamEnumMuteEntryPoint",[],(function(t,n,r,o,a,i){var e=Object.freeze({CHAT_LIST_SCREEN:1,CONTACT_INFO:2,CONVERSATION_SCREEN:3,CHAT_MORE_OPTIONS:4,CHAT_LONG_PRESS_OPTIONS:5,INORGANIC_NOTIFICATION:6,LIST_BASED_MUTE:7});i.MUTE_ENTRY_POINT=e}),66);
__d("WAWebWamEnumWaOfficialAccountName",[],(function(t,n,r,o,a,i){var e=Object.freeze({WHATSAPP_CHATPSA:1});i.WA_OFFICIAL_ACCOUNT_NAME=e}),66);
__d("WAWebChatMuteWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumActionConducted","WAWebWamEnumChatMuteNotificationChoice","WAWebWamEnumMuteChatType","WAWebWamEnumMuteEntryPoint","WAWebWamEnumWaOfficialAccountName"],(function(t,n,r,o,a,i,l){var e=o("WAWebWamCodegenUtils").defineEvents({ChatMute:[2280,{actionConducted:[3,o("WAWebWamEnumActionConducted").ACTION_CONDUCTED],chatMuteNotificationChoice:[5,o("WAWebWamEnumChatMuteNotificationChoice").CHAT_MUTE_NOTIFICATION_CHOICE],muteChatType:[4,o("WAWebWamEnumMuteChatType").MUTE_CHAT_TYPE],muteDuration:[1,o("WAWebWamCodegenUtils").TYPES.TIMER],muteEntryPoint:[6,o("WAWebWamEnumMuteEntryPoint").MUTE_ENTRY_POINT],muteGroupSize:[2,o("WAWebWamCodegenUtils").TYPES.INTEGER],waOfficialAccountName:[7,o("WAWebWamEnumWaOfficialAccountName").WA_OFFICIAL_ACCOUNT_NAME]},[1,1,1],"regular"]},{ChatMute:[]});l.ChatMuteWamEvent=e}),98);
__d("WAWebWamEnumPsaMessageActionType",[],(function(t,n,r,o,a,i){var e=Object.freeze({SAVE:1,FORWARD:2,REACT:3,LINK_CLICK:4,MEDIA_PLAY:5,DELETE:6,PUSH_NOTIFICATION_CLICK:7,PUSH_NOTIFICATION_RENDER:8});i.PSA_MESSAGE_ACTION_TYPE=e}),66);
__d("WAWebChatPsaActionWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumMediaType","WAWebWamEnumPsaMessageActionType"],(function(t,n,r,o,a,i,l){var e=o("WAWebWamCodegenUtils").defineEvents({ChatPsaAction:[3572,{messageMediaType:[1,o("WAWebWamEnumMediaType").MEDIA_TYPE],psaCampaignId:[4,o("WAWebWamCodegenUtils").TYPES.STRING],psaMessageActionType:[2,o("WAWebWamEnumPsaMessageActionType").PSA_MESSAGE_ACTION_TYPE],psaMsgId:[5,o("WAWebWamCodegenUtils").TYPES.STRING]},[1,1,1],"regular"]},{ChatPsaAction:[]});l.ChatPsaActionWamEvent=e}),98);
__d("WAWebWamEnumReadEntryPoint",[],(function(t,n,r,o,a,i){var e=Object.freeze({CHAT_LIST:1,CHAT:2});i.READ_ENTRY_POINT=e}),66);
__d("WAWebChatPsaReadWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumMediaType","WAWebWamEnumReadEntryPoint"],(function(t,n,r,o,a,i,l){var e=o("WAWebWamCodegenUtils").defineEvents({ChatPsaRead:[3574,{messageMediaType:[1,o("WAWebWamEnumMediaType").MEDIA_TYPE],psaCampaignId:[4,o("WAWebWamCodegenUtils").TYPES.STRING],psaMsgId:[5,o("WAWebWamCodegenUtils").TYPES.STRING],readEntryPoint:[3,o("WAWebWamEnumReadEntryPoint").READ_ENTRY_POINT]},[1,1,1],"regular"]},{ChatPsaRead:[]});l.ChatPsaReadWamEvent=e}),98);
__d("WAWebWamEnumPsaBlockReason",[],(function(t,n,r,o,a,i){var e=Object.freeze({OTHER:0,MESSAGES_ARENT_HELPFUL:1,TOO_MANY_MESSAGES:2,IT_LOOKS_SUSPICIOUS:3});i.PSA_BLOCK_REASON=e}),66);
__d("WAWebWamEnumPsaMessageRemoveAction",[],(function(t,n,r,o,a,i){var e=Object.freeze({BLOCK:1,UNBLOCK:2,ARCHIVE:3,UNARCHIVE:4,CLEAR:5,DELETE_ALL:6});i.PSA_MESSAGE_REMOVE_ACTION=e}),66);
__d("WAWebWamEnumPsaMessageRemoveEntryPoint",[],(function(t,n,r,o,a,i){var e=Object.freeze({BLOCK_FROM_CONTACT_INFO:1,BLOCK_FROM_CHAT:2,UNBLOCK_FROM_CONTACT_INFO:3,UNBLOCK_FROM_CHAT:4,UNBLOCK_FROM_PRIVACY_SETTINGS:5,ARCHIVE_FROM_CHAT_LIST:6,ARCHIVE_FROM_DELETE_OPTION:7,UNARCHIVE_FROM_ARCHIVED_CHAT_LIST:8,CLEAR_FROM_CONTACT_INFO:9,CLEAR_FROM_CHAT_LIST:10,DELETE_ALL_FROM_CHAT_LIST:11,DELETE_ALL_FROM_CONTACT_INFO:12,DELETE_ALL_FROM_CONVERSATION:13,CLEAR_FROM_CONVERSATION:14,BLOCK_FROM_CONSENT_MODAL:15});i.PSA_MESSAGE_REMOVE_ENTRY_POINT=e}),66);
__d("WAWebChatPsaRemoveWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumMediaType","WAWebWamEnumPsaBlockReason","WAWebWamEnumPsaMessageRemoveAction","WAWebWamEnumPsaMessageRemoveEntryPoint","WAWebWamEnumWaOfficialAccountName"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({ChatPsaRemove:[3582,{lastReceivedMediaType:[2,o("WAWebWamEnumMediaType").MEDIA_TYPE],lastReceivedMessageTs:[4,e.TYPES.TIMER],lastReceivedMsgId:[8,e.TYPES.STRING],psaBlockReason:[10,o("WAWebWamEnumPsaBlockReason").PSA_BLOCK_REASON],psaCampaignId:[9,e.TYPES.STRING],psaMessageRemoveAction:[5,o("WAWebWamEnumPsaMessageRemoveAction").PSA_MESSAGE_REMOVE_ACTION],psaMessageRemoveEntryPoint:[6,o("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT],waOfficialAccountName:[7,o("WAWebWamEnumWaOfficialAccountName").WA_OFFICIAL_ACCOUNT_NAME]},[1,1,1],"regular"]},{ChatPsaRemove:[]});l.ChatPsaRemoveWamEvent=s}),98);
__d("WDSIconIcCheck.react",["WDSSvgComponentBase.react","react","stylex"],(function(t,n,r,o,a,i,l){var e=["height","iconXstyle","viewBox","width"],s,u,c=s||(s=r("react")),d="ic-check";function m(t){var n=t.height,o=t.iconXstyle,a=t.viewBox,i=t.width,l=babelHelpers.objectWithoutPropertiesLoose(t,e),s;if(a){var m=a.height,p=m===void 0?0:m,_=a.width,f=_===void 0?0:_,g=a.x,h=g===void 0?0:g,y=a.y,C=y===void 0?0:y;s=[h,C,f,p].join(" ")}var b=24,v=24;return(n!=null||i!=null)&&(b=n,v=i),c.jsx(r("WDSSvgComponentBase.react"),babelHelpers.extends({},l,{children:c.jsxs("svg",{viewBox:s!=null?s:"0 0 24 24",height:b,width:v,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(o),fill:"none",children:[c.jsx("title",{children:d}),c.jsx("path",{d:"M9.55002 15.15L18.025 6.675C18.225 6.475 18.4625 6.375 18.7375 6.375C19.0125 6.375 19.25 6.475 19.45 6.675C19.65 6.875 19.75 7.1125 19.75 7.3875C19.75 7.6625 19.65 7.9 19.45 8.1L10.25 17.3C10.05 17.5 9.81669 17.6 9.55002 17.6C9.28336 17.6 9.05002 17.5 8.85002 17.3L4.55002 13C4.35002 12.8 4.25419 12.5625 4.26252 12.2875C4.27086 12.0125 4.37502 11.775 4.57502 11.575C4.77502 11.375 5.01252 11.275 5.28752 11.275C5.56252 11.275 5.80002 11.375 6.00002 11.575L9.55002 15.15Z",fill:"currentColor"})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),98);
__d("WDSBaseCheckbox.react",["BaseCheckbox.react","BaseView.react","WDSHoverStateStyles","WDSIconIcCheck.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e=["appearsOnMedia","children","disabled","id","onChange","onKeyDown","platform","shape","tabIndex","testid","value"],s,u=s||(s=o("react")),c=s.useState,d="xuza879-B",m={root:{height:"xxk0z11",width:"xvy4d1p",display:"x3nfvp2",alignItems:"x6s0dn4",justifyContent:"xl56j7k",boxSizing:"x9f619",paddingTop:"xyqdw3p",paddingInlineEnd:"x1im30kd",paddingBottom:"xg8j3zb",paddingInlineStart:"x1djpfga",position:"x1n2onr6",$$css:!0},checkboxBorder:{boxSizing:"x9f619",flexShrink:"x2lah0s",borderTopWidth:"xamhcws",borderInlineEndWidth:"x1alpsbp",borderBottomWidth:"xlxy82",borderInlineStartWidth:"xyumdvf",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",alignItems:"x6s0dn4",justifyContent:"xl56j7k",display:"x3nfvp2",$$css:!0},checkboxBorderUnselected:{borderTopColor:"x1pyc6se",borderInlineEndColor:"x1mlb2bo",borderBottomColor:"x16pkwpw",borderInlineStartColor:"xqe4bef",$$css:!0},checkboxBorderSelected:{borderTopColor:"xlze6vy",borderInlineEndColor:"x47fsot",borderBottomColor:"x1rrvw3c",borderInlineStartColor:"x18djku1",backgroundColor:"xfn3atn",$$css:!0},checkboxBorderCircle:{borderStartStartRadius:"xt8t1vi",borderStartEndRadius:"x1xc408v",borderEndEndRadius:"x129tdwq",borderEndStartRadius:"x15urzxu",$$css:!0},disabledCheckbox:{opacity:"x1lxidc1",filter:"x4dje6k",$$css:!0},mediaCheckboxUnselected:{borderTopColor:"x1zfx7y",borderInlineEndColor:"x1gj3efs",borderBottomColor:"x151wx5t",borderInlineStartColor:"xea0m3l",$$css:!0},mediaCheckboxSelected:{borderTopColor:"x1zfx7y",borderInlineEndColor:"x1gj3efs",borderBottomColor:"x151wx5t",borderInlineStartColor:"xea0m3l",backgroundColor:"x1p8t8ri",$$css:!0},checkmarkWrapper:{display:"x78zum5",alignItems:"x6s0dn4",justifyContent:"xl56j7k",$$css:!0},checkedCheckmark:{opacity:"x1hc1fzr",animationName:"x1oyg3g3",animationTimingFunction:"xa3vuyk",animationFillMode:"x10e4vud",animationDuration:"x1shwlz2",$$css:!0},uncheckedCheckmark:{opacity:"xg01cxk",$$css:!0}},p={checkboxBorder:{height:"xmix8c7",width:"x1xp8n7a",borderStartStartRadius:"xbrszos",borderStartEndRadius:"xea3l6g",borderEndEndRadius:"x18isctg",borderEndStartRadius:"x2q3nzr",$$css:!0}},_={checkboxBorder:{height:"x17rw0jw",width:"x17z2i9w",borderStartStartRadius:"xt8t1vi",borderStartEndRadius:"x1xc408v",borderEndEndRadius:"x129tdwq",borderEndStartRadius:"x15urzxu",$$css:!0}};function f(t){var n=t.appearsOnMedia,a=n===void 0?!1:n,i=t.children,l=t.disabled,s=l===void 0?!1:l,d=t.id,f=t.onChange,g=t.onKeyDown,h=t.platform,y=t.shape,C=y===void 0?"square":y,b=t.tabIndex,v=t.testid,S=t.value,R=S===void 0?!1:S,L=babelHelpers.objectWithoutPropertiesLoose(t,e),E=h==="iOS",k=c(!1),I=k[0],T=k[1];function D(e){var t=e.key==="Enter"||e.key===" ";t&&(e.preventDefault(),f==null||f(null)),g==null||g(e)}var x=R===!0||R==="indeterminate",$=R==="indeterminate",P=x||$===!0,N=[],M=[P?m.mediaCheckboxSelected:m.mediaCheckboxUnselected],w=[m.checkboxBorderCircle];return I&&(w.push(o("WDSHoverStateStyles").WDSComponentHoverStateStyles.WDSCheckboxCircle),P?(N.push(o("WDSHoverStateStyles").WDSComponentHoverStateStyles.WDSCheckboxSelected),M.push(o("WDSHoverStateStyles").WDSComponentHoverStateStyles.WDSCheckboxMediaSelected)):(N.push(o("WDSHoverStateStyles").WDSComponentHoverStateStyles.WDSCheckboxUnselected),M.push(o("WDSHoverStateStyles").WDSComponentHoverStateStyles.WDSCheckboxMediaUnselected))),u.jsx(r("BaseCheckbox.react"),babelHelpers.extends({},L,{checked:x,disabled:s,id:d,onClick:f,onKeyDown:D,onMouseEnter:function(){return T(!0)},onMouseLeave:function(){return T(!1)},suppressFocusRing:!0,testid:void 0,xstyle:m.root,tabIndex:b,children:u.jsxs(r("BaseView.react"),{"aria-hidden":!0,tabIndex:-1,testid:void 0,xstyle:[m.checkboxBorder,E?_.checkboxBorder:p.checkboxBorder,P?m.checkboxBorderSelected:m.checkboxBorderUnselected,s&&m.disabledCheckbox,I&&o("WDSHoverStateStyles").WDSComponentHoverStateStyles.WDSCheckboxBase].concat(a?M:N,C==="circle"||E?w:[]),children:[$===!0?u.jsx("div",babelHelpers.extends({},{0:{className:"x36qwtl x1fsd2vl xt8t1vi x1xc408v x129tdwq x15urzxu xep993w x1hc1fzr x1oyg3g3 xa3vuyk x10e4vud x1shwlz2"},1:{className:"x36qwtl x1fsd2vl xt8t1vi x1xc408v x129tdwq x15urzxu x1hc1fzr x1oyg3g3 xa3vuyk x10e4vud x1shwlz2 x1e6sl3u"}}[!!a<<0])):u.jsx(r("WDSIconIcCheck.react"),{width:18,height:18,xstyle:m.checkmarkWrapper,colorName:a?"persistentAlwaysBlack":"contentOnAccent",iconXstyle:[x?m.checkedCheckmark:m.uncheckedCheckmark]}),i]})}))}f.displayName=f.name+" [from "+i.id+"]",l.default=f}),98);
__d("WAWebCheckBox.react",["$InternalEnum","WAWebABProps","WAWebKeyboardHotKeys.react","WAWebStopEvent","WDSBaseCheckbox.react","WDSFocusStateStyles","react","stylex","useMergeRefs","useWAWebFocusState"],(function(t,n,r,o,a,i,l){var e,s,u,c=u||(u=r("react")),d=(e||(e=o("react"))).useRef,m=5,p=10,_=4,f=8,g="xh7cyri-B",h="xwetn48-B",y={checkboxContainer:{position:"x1n2onr6",display:"x1rg5ohu",width:"x1xp8n7a",height:"xmix8c7",verticalAlign:"xxymvpz",cursor:"x1ypdohk",borderStartStartRadius:"xr9e8f9",borderStartEndRadius:"x1e4oeot",borderEndEndRadius:"x1ui04y5",borderEndStartRadius:"x6en5u8",transform:"x17dzmu4",$$css:!0},roundedCheckboxContainer:{borderStartStartRadius:"xvs2etk",borderStartEndRadius:"xg3wpu6",borderEndEndRadius:"x1jwbhkm",borderEndStartRadius:"xgg4q86",$$css:!0},disabledCheckboxContainer:{cursor:"xt0e3qv",$$css:!0},checkbox:{position:"x1n2onr6",boxSizing:"x9f619",height:"x5yr21d",pointerEvents:"x47corl",backgroundColor:"xjbqb8w",borderTopWidth:"x1ktv7sr",borderInlineEndWidth:"x142x0oa",borderBottomWidth:"xv7zg05",borderInlineStartWidth:"x12dgle5",borderTopColor:"x1hj3nd5",borderInlineEndColor:"xjjclns",borderBottomColor:"x1ywb9b",borderInlineStartColor:"x1212ok9",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderStartStartRadius:"xr9e8f9",borderStartEndRadius:"x1e4oeot",borderEndEndRadius:"x1ui04y5",borderEndStartRadius:"x6en5u8",transitionProperty:"xts7igz",transitionDuration:"xv1tzdm",$$css:!0},pollsCheckboxReceiver:{borderTopColor:"x1128f5s",borderInlineEndColor:"x13kd0oy",borderBottomColor:"x1jdxhwu",borderInlineStartColor:"xj1yhid",$$css:!0},pollsCheckboxSender:{borderTopColor:"xknwhpl",borderInlineEndColor:"x1g0ajyl",borderBottomColor:"x1xx3qdw",borderInlineStartColor:"xtiunav",$$css:!0},roundedCheckbox:{borderStartStartRadius:"xvs2etk",borderStartEndRadius:"xg3wpu6",borderEndEndRadius:"x1jwbhkm",borderEndStartRadius:"xgg4q86",$$css:!0},checkedCheckbox:{backgroundColor:"xfn3atn",borderTopColor:"xlze6vy",borderInlineEndColor:"x47fsot",borderBottomColor:"x1rrvw3c",borderInlineStartColor:"x18djku1",$$css:!0},pollsCheckedCheckboxReceiver:{backgroundColor:"xfn3atn",borderTopColor:"xlze6vy",borderInlineEndColor:"x47fsot",borderBottomColor:"x1rrvw3c",borderInlineStartColor:"x18djku1",$$css:!0},pollsCheckedCheckboxSender:{backgroundColor:"xfn3atn",borderTopColor:"xlze6vy",borderInlineEndColor:"x47fsot",borderBottomColor:"x1rrvw3c",borderInlineStartColor:"x18djku1",$$css:!0},autoLogoutCheckedCheckboxSender:{backgroundColor:"xy7xkci",borderTopColor:"x1xtg2tb",borderInlineEndColor:"x1acu24o",borderBottomColor:"x1muebr1",borderInlineStartColor:"x19e1r83",$$css:!0},disabledCheckbox:{backgroundColor:"x3qdkio",borderTopColor:"x1wpzk8y",borderInlineEndColor:"xts9ub1",borderBottomColor:"xhl97hz",borderInlineStartColor:"x16gmtct",$$css:!0},disabledCheckboxOutline:{backgroundColor:"xjbqb8w",$$css:!0},pollsDisabledCheckedCheckboxReceiver:{backgroundColor:"x1wqby5h",borderTopColor:"x1v8p93f",borderInlineEndColor:"x1o3jo1z",borderBottomColor:"x16stqrj",borderInlineStartColor:"xv5lvn5",$$css:!0},pollsDisabledUncheckedCheckboxReceiver:{borderTopColor:"x1sa7cev",borderInlineEndColor:"xmo3yxm",borderBottomColor:"xzim36q",borderInlineStartColor:"x1656ei8",backgroundColor:null,$$css:!0},pollsDisabledCheckedCheckboxSender:{backgroundColor:"xpzuy9b",borderTopColor:"x1v8p93f",borderInlineEndColor:"x1o3jo1z",borderBottomColor:"x16stqrj",borderInlineStartColor:"xv5lvn5",$$css:!0},pollsDisabledUncheckedCheckboxSender:{borderTopColor:"x7s9935",borderInlineEndColor:"x1i8jwm6",borderBottomColor:"xymrcl3",borderInlineStartColor:"xv5he41",backgroundColor:null,$$css:!0},checkmark:{position:"x10l6tqk",top:"x1pdr0v7",left:"xcqyyxr",width:"x1ftt334",height:"x170jfvy",borderTop:"x76ihet",borderRight:"x1u9eeiz",borderBottom:"x13couss",borderLeft:"xcym7qx",transform:"x1158fpu",direction:"xzt5al7",$$css:!0},roundedCheckmark:{width:"x51ohtg",height:"xdk7pt",$$css:!0},checkedCheckmark:{opacity:"x1hc1fzr",animationName:"xnlt6tn",animationTimingFunction:"xa3vuyk",animationFillMode:"x10e4vud",animationDuration:"x1shwlz2",$$css:!0},roundedCheckedCheckmark:{animationName:"xwigvol",$$css:!0},uncheckedCheckmark:{opacity:"xg01cxk",$$css:!0},partialCheckmark:{position:"x10l6tqk",width:"x1ftt334",height:"x170jfvy",borderTop:"x76ihet",borderRight:"x1u9eeiz",borderBottom:"x112ta8",borderLeft:"xcym7qx",transform:"x1iffjtl",$$css:!0},outlineWhite:{borderTopColor:"x1zfx7y",borderInlineEndColor:"x1gj3efs",borderBottomColor:"x151wx5t",borderInlineStartColor:"xea0m3l",$$css:!0},outlineWhiteChecked:{backgroundColor:"x1p8t8ri",borderTopColor:"x1zfx7y",borderInlineEndColor:"x1gj3efs",borderBottomColor:"x151wx5t",borderInlineStartColor:"xea0m3l",$$css:!0},outlinedWhiteCheckmark:{borderInlineEndColor:"x7nxbsa",borderBottomColor:"x126uxjm",$$css:!0},whiteCheckmark:{borderTopStyle:"x1ejq31n",borderInlineEndWidth:"x142x0oa",borderInlineEndStyle:"x18b5jzi",borderInlineEndColor:"x1gj3efs",borderBottomWidth:"xv7zg05",borderBottomStyle:"x1q0q8m5",borderBottomColor:"x151wx5t",borderInlineStartStyle:"xstzfhl",$$css:!0}},C=n("$InternalEnum").Mirrored(["PARTIAL","OUTLINE","POLLS_RECEIVER","POLLS_SENDER","AUTO_LOGOUT","OUTLINE_WHITE"]);function b(e){var t=e.ariaLabel,n=e.checked,a=e.disabled,i=a===void 0?!1:a,l=e.id,u=e.onArrowKeyLeftRight,m=e.onChange,p=e.tabIndex,_=e.testid,f=e.theme,g=d(null),h=n&&f===C.PARTIAL,b=r("useWAWebFocusState")(),v=b[0],S=b[1],R=r("useMergeRefs")(g,v);function L(e){e.stopPropagation();var t=g.current;t!=null&&t.focus(),m(e)}function E(e){var t;e.preventDefault(),(t=g.current)==null||t.click()}var k=function(t){if(o("WAWebKeyboardHotKeys.react").SpecialKeyMap.space===t.keyCode||o("WAWebKeyboardHotKeys.react").SpecialKeyMap.enter===t.keyCode){var e;t.preventDefault(),(e=g.current)==null||e.click(),m()}(o("WAWebKeyboardHotKeys.react").SpecialKeyMap.right===t.keyCode||o("WAWebKeyboardHotKeys.react").SpecialKeyMap.left===t.keyCode)&&(u==null||u(t.keyCode))},I=f===C.POLLS_RECEIVER||f===C.POLLS_SENDER,T=o("WAWebABProps").getABPropConfigValue("wds_web_checkbox");return T?c.jsx(r("WDSBaseCheckbox.react"),{tabIndex:p!=null?p:void 0,value:h?"indeterminate":n,disabled:i,id:l,onChange:function(t){t&&m(t)},onKeyDown:k,testid:void 0,"aria-label":t,appearsOnMedia:f===C.OUTLINE_WHITE,shape:I?"circle":"square"}):c.jsxs(c.Fragment,{children:[c.jsx("input",{ref:R,className:"x10l6tqk x1i1rx1s xjm9jq1 x6ikm8r x10wlt62 xeh89do x1hyvwdk xuxw1ft",checked:n,disabled:i?!0:void 0,indeterminate:h?!0:void 0,"aria-label":t,onClick:o("WAWebStopEvent").stopPropagation,onChange:L,onKeyDown:k,type:"checkbox",id:l,tabIndex:p!=null?p:0,"data-testid":void 0}),c.jsx("div",babelHelpers.extends({onClick:E},(s||(s=r("stylex"))).props(y.checkboxContainer,i&&y.disabledCheckboxContainer,S&&o("WDSFocusStateStyles").WDSFocusStateStyles.genericFocusPersistent,I&&y.roundedCheckboxContainer),{tabIndex:-1,"aria-hidden":"true","data-testid":void 0,children:c.jsx("div",babelHelpers.extends({},s.props(y.checkbox,n&&y.checkedCheckbox,i&&y.disabledCheckbox,i&&!n&&(f===C.OUTLINE||C.OUTLINE_WHITE)&&y.disabledCheckboxOutline,!n&&f===C.OUTLINE_WHITE&&y.outlineWhite,n&&f===C.OUTLINE_WHITE&&y.outlineWhiteChecked,f===C.POLLS_RECEIVER&&y.pollsCheckboxReceiver,f===C.POLLS_SENDER&&y.pollsCheckboxSender,I&&y.roundedCheckbox,n&&f===C.POLLS_RECEIVER&&y.pollsCheckedCheckboxReceiver,n&&f===C.POLLS_SENDER&&y.pollsCheckedCheckboxSender,n&&f===C.AUTO_LOGOUT&&y.autoLogoutCheckedCheckboxSender,i&&f===C.POLLS_RECEIVER&&(n?y.pollsDisabledCheckedCheckboxReceiver:y.pollsDisabledUncheckedCheckboxReceiver),i&&f===C.POLLS_SENDER&&(n?y.pollsDisabledCheckedCheckboxSender:y.pollsDisabledUncheckedCheckboxSender)),{children:c.jsx("div",babelHelpers.extends({},s.props(y.checkmark,n&&f!==C.PARTIAL&&y.checkedCheckmark,n&&I&&y.roundedCheckedCheckmark,!n&&y.uncheckedCheckmark,h&&y.partialCheckmark,I&&y.roundedCheckmark,n&&f===C.OUTLINE_WHITE&&y.outlinedWhiteCheckmark,n&&f===C.AUTO_LOGOUT&&y.whiteCheckmark)))}))}))]})}b.displayName=b.name+" [from "+i.id+"]",l.CheckboxTheme=C,l.CheckBox=b}),98);
__d("WAWebChevronIcon.react",["WAWebSvgComponentBase","react","stylex"],(function(t,n,r,o,a,i,l){var e=["height","iconXstyle","name","viewBox","width"],s,u,c=s||(s=r("react")),d="chevron";function m(t){var n=t.height,a=t.iconXstyle,i=t.name,l=t.viewBox,s=t.width,m=babelHelpers.objectWithoutPropertiesLoose(t,e),p;if(l){var _=l.height,f=_===void 0?0:_,g=l.width,h=g===void 0?0:g,y=l.x,C=y===void 0?0:y,b=l.y,v=b===void 0?0:b;p=[C,v,h,f].join(" ")}var S=30,R=30;return(n!=null||s!=null)&&(S=n,R=s),c.jsx(o("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers.extends({name:i!=null?i:d},m,{children:c.jsxs("svg",{viewBox:p!=null?p:"0 0 30 30",height:S,width:R,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(a),x:"0px",y:"0px",children:[c.jsx("title",{children:i!=null?i:d}),c.jsx("path",{fill:"currentColor",d:"M11,21.212L17.35,15L11,8.65l1.932-1.932L21.215,15l-8.282,8.282L11,21.212z"})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.ChevronIcon=m}),98);
__d("WAWebProtobufsWa6.pb",["$InternalEnum","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s,u=(s=n("$InternalEnum"))({OFF:0,STANDARD:1}),c=s({DEFAULT:0,GUEST:1}),d=s({WHATSAPP:0,MESSENGER:1,INTEROP:2,INTEROP_MSGR:3,WHATSAPP_LID:4}),m=s({SYSTEM:0,GOOGLE:1,HARDCODED:2,OVERRIDE:3,FALLBACK:4,MNS:5,MNS_SECONDARY:6,SOCKS_PROXY:7}),p=s({CELLULAR_UNKNOWN:0,WIFI_UNKNOWN:1,CELLULAR_EDGE:100,CELLULAR_IDEN:101,CELLULAR_UMTS:102,CELLULAR_EVDO:103,CELLULAR_GPRS:104,CELLULAR_HSDPA:105,CELLULAR_HSUPA:106,CELLULAR_HSPA:107,CELLULAR_CDMA:108,CELLULAR_1XRTT:109,CELLULAR_EHRPD:110,CELLULAR_LTE:111,CELLULAR_HSPAP:112}),_=s({PUSH:0,USER_ACTIVATED:1,SCHEDULED:2,ERROR_RECONNECT:3,NETWORK_SWITCH:4,PING_RECONNECT:5,UNKNOWN:6}),f=s({SHARE_EXTENSION:0,SERVICE_EXTENSION:1,INTENTS_EXTENSION:2}),g=s({WEB_BROWSER:0,APP_STORE:1,WIN_STORE:2,DARWIN:3,WIN32:4,WIN_HYBRID:5}),h=s({PHONE:0,TABLET:1,DESKTOP:2,WEARABLE:3,VR:4}),y=s({RELEASE:0,BETA:1,ALPHA:2,DEBUG:3}),C=s({ANDROID:0,IOS:1,WINDOWS_PHONE:2,BLACKBERRY:3,BLACKBERRYX:4,S40:5,S60:6,PYTHON_CLIENT:7,TIZEN:8,ENTERPRISE:9,SMB_ANDROID:10,KAIOS:11,SMB_IOS:12,WINDOWS:13,WEB:14,PORTAL:15,GREEN_ANDROID:16,GREEN_IPHONE:17,BLUE_ANDROID:18,BLUE_IPHONE:19,FBLITE_ANDROID:20,MLITE_ANDROID:21,IGLITE_ANDROID:22,PAGE:23,MACOS:24,OCULUS_MSG:25,OCULUS_CALL:26,MILAN:27,CAPI:28,WEAROS:29,ARDEVICE:30,VRDEVICE:31,BLUE_WEB:32,IPAD:33,TEST:34,SMART_GLASSES:35,BLUE_VR:36,AR_WRIST:37}),b={},v={},S={},R={},L={},E={},k={},I={},T={},D={},x={},$={};b.name="HandshakeMessage",b.internalSpec={clientHello:[2,(e=o("WAProtoConst")).TYPES.MESSAGE,R],serverHello:[3,e.TYPES.MESSAGE,S],clientFinish:[4,e.TYPES.MESSAGE,v]},v.name="HandshakeMessage$ClientFinish",v.internalSpec={static:[1,e.TYPES.BYTES],payload:[2,e.TYPES.BYTES],extendedCiphertext:[3,e.TYPES.BYTES]},S.name="HandshakeMessage$ServerHello",S.internalSpec={ephemeral:[1,e.TYPES.BYTES],static:[2,e.TYPES.BYTES],payload:[3,e.TYPES.BYTES],extendedStatic:[4,e.TYPES.BYTES]},R.name="HandshakeMessage$ClientHello",R.internalSpec={ephemeral:[1,e.TYPES.BYTES],static:[2,e.TYPES.BYTES],payload:[3,e.TYPES.BYTES],useExtended:[4,e.TYPES.BOOL],extendedCiphertext:[5,e.TYPES.BYTES]},L.name="ClientPayload",L.internalSpec={username:[1,e.TYPES.UINT64],passive:[3,e.TYPES.BOOL],userAgent:[5,e.TYPES.MESSAGE,x],webInfo:[6,e.TYPES.MESSAGE,T],pushName:[7,e.TYPES.STRING],sessionId:[9,e.TYPES.SFIXED32],shortConnect:[10,e.TYPES.BOOL],connectType:[12,e.TYPES.ENUM,p],connectReason:[13,e.TYPES.ENUM,_],shards:[14,e.FLAGS.REPEATED|e.TYPES.INT32],dnsSource:[15,e.TYPES.MESSAGE,I],connectAttemptCount:[16,e.TYPES.UINT32],device:[18,e.TYPES.UINT32],devicePairingData:[19,e.TYPES.MESSAGE,k],product:[20,e.TYPES.ENUM,d],fbCat:[21,e.TYPES.BYTES],fbUserAgent:[22,e.TYPES.BYTES],oc:[23,e.TYPES.BOOL],lc:[24,e.TYPES.INT32],iosAppExtension:[30,e.TYPES.ENUM,f],fbAppId:[31,e.TYPES.UINT64],fbDeviceId:[32,e.TYPES.BYTES],pull:[33,e.TYPES.BOOL],paddingBytes:[34,e.TYPES.BYTES],yearClass:[36,e.TYPES.INT32],memClass:[37,e.TYPES.INT32],interopData:[38,e.TYPES.MESSAGE,E],trafficAnonymization:[40,e.TYPES.ENUM,u],lidDbMigrated:[41,e.TYPES.BOOL],accountType:[42,e.TYPES.ENUM,c],connectionSequenceInfo:[43,e.TYPES.SFIXED32],paaLink:[44,e.TYPES.BOOL],preacksCount:[45,e.TYPES.INT32],processingQueueSize:[46,e.TYPES.INT32]},E.name="ClientPayload$InteropData",E.internalSpec={accountId:[1,e.TYPES.UINT64],token:[2,e.TYPES.BYTES],enableReadReceipts:[3,e.TYPES.BOOL]},k.name="ClientPayload$DevicePairingRegistrationData",k.internalSpec={eRegid:[1,e.TYPES.BYTES],eKeytype:[2,e.TYPES.BYTES],eIdent:[3,e.TYPES.BYTES],eSkeyId:[4,e.TYPES.BYTES],eSkeyVal:[5,e.TYPES.BYTES],eSkeySig:[6,e.TYPES.BYTES],buildHash:[7,e.TYPES.BYTES],deviceProps:[8,e.TYPES.BYTES]},I.name="ClientPayload$DNSSource",I.internalSpec={dnsMethod:[15,e.TYPES.ENUM,m],appCached:[16,e.TYPES.BOOL]},T.name="ClientPayload$WebInfo",T.internalSpec={refToken:[1,e.TYPES.STRING],version:[2,e.TYPES.STRING],webdPayload:[3,e.TYPES.MESSAGE,D],webSubPlatform:[4,e.TYPES.ENUM,g],browser:[5,e.TYPES.STRING],browserVersion:[6,e.TYPES.STRING]},D.name="ClientPayload$WebInfo$WebdPayload",D.internalSpec={usesParticipantInKey:[1,e.TYPES.BOOL],supportsStarredMessages:[2,e.TYPES.BOOL],supportsDocumentMessages:[3,e.TYPES.BOOL],supportsUrlMessages:[4,e.TYPES.BOOL],supportsMediaRetry:[5,e.TYPES.BOOL],supportsE2EImage:[6,e.TYPES.BOOL],supportsE2EVideo:[7,e.TYPES.BOOL],supportsE2EAudio:[8,e.TYPES.BOOL],supportsE2EDocument:[9,e.TYPES.BOOL],documentTypes:[10,e.TYPES.STRING],features:[11,e.TYPES.BYTES]},x.name="ClientPayload$UserAgent",x.internalSpec={platform:[1,e.TYPES.ENUM,C],appVersion:[2,e.TYPES.MESSAGE,$],mcc:[3,e.TYPES.STRING],mnc:[4,e.TYPES.STRING],osVersion:[5,e.TYPES.STRING],manufacturer:[6,e.TYPES.STRING],device:[7,e.TYPES.STRING],osBuildNumber:[8,e.TYPES.STRING],phoneId:[9,e.TYPES.STRING],releaseChannel:[10,e.TYPES.ENUM,y],localeLanguageIso6391:[11,e.TYPES.STRING],localeCountryIso31661Alpha2:[12,e.TYPES.STRING],deviceBoard:[13,e.TYPES.STRING],deviceExpId:[14,e.TYPES.STRING],deviceType:[15,e.TYPES.ENUM,h],deviceModelType:[16,e.TYPES.STRING]},$.name="ClientPayload$UserAgent$AppVersion",$.internalSpec={primary:[1,e.TYPES.UINT32],secondary:[2,e.TYPES.UINT32],tertiary:[3,e.TYPES.UINT32],quaternary:[4,e.TYPES.UINT32],quinary:[5,e.TYPES.UINT32]},l.ClientPayload$TrafficAnonymization=u,l.ClientPayload$AccountType=c,l.ClientPayload$Product=d,l.ClientPayload$DNSSource$DNSResolutionMethod=m,l.ClientPayload$ConnectType=p,l.ClientPayload$ConnectReason=_,l.ClientPayload$IOSAppExtension=f,l.ClientPayload$WebInfo$WebSubPlatform=g,l.ClientPayload$UserAgent$DeviceType=h,l.ClientPayload$UserAgent$ReleaseChannel=y,l.ClientPayload$UserAgent$Platform=C,l.HandshakeMessageSpec=b,l.HandshakeMessage$ClientFinishSpec=v,l.HandshakeMessage$ServerHelloSpec=S,l.HandshakeMessage$ClientHelloSpec=R,l.ClientPayloadSpec=L,l.ClientPayload$InteropDataSpec=E,l.ClientPayload$DevicePairingRegistrationDataSpec=k,l.ClientPayload$DNSSourceSpec=I,l.ClientPayload$WebInfoSpec=T,l.ClientPayload$WebInfo$WebdPayloadSpec=D,l.ClientPayload$UserAgentSpec=x,l.ClientPayload$UserAgent$AppVersionSpec=$}),98);
__d("WAWebClientPayloadReleaseChannel",["WALogger","WAWebBuildType","WAWebProtobufsWa6.pb","asyncToGeneratorRuntime","cr:9565"],(function(t,n,r,o,a,i,l){var e,s,u,c=(e=n("cr:9565"))!=null?e:{},d=c.getWindowsBuildType;function m(){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e;d!=null?e=d():e=yield o("WAWebBuildType").getBuildType();var t;e:{if(e===o("WAWebBuildType").BuildType.RELEASE){t=o("WAWebProtobufsWa6.pb").ClientPayload$UserAgent$ReleaseChannel.RELEASE;break e}if(e===o("WAWebBuildType").BuildType.BETA){o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[Web] Enabling BETA features"]))),t=o("WAWebProtobufsWa6.pb").ClientPayload$UserAgent$ReleaseChannel.BETA;break e}if(e===o("WAWebBuildType").BuildType.ALPHA){t=o("WAWebProtobufsWa6.pb").ClientPayload$UserAgent$ReleaseChannel.ALPHA;break e}if(e===o("WAWebBuildType").BuildType.DEBUG){o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[Web]: Enabling DEBUG features"]))),t=o("WAWebProtobufsWa6.pb").ClientPayload$UserAgent$ReleaseChannel.DEBUG;break e}throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+e)}return t}),p.apply(this,arguments)}l.getReleaseChannel=m}),98);
__d("WAWebSyncdMdSession",["WABinary","WACryptoSha256","WANullthrows","WAWebCryptoCurve25519","WAWebSignalCommonUtils","WAWebSignalProtocolStore","WAWebUserPrefsMeUser","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){function e(){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=o("WAWebSignalCommonUtils").createSignalAddress(o("WAWebUserPrefsMeUser").getMePnUserOrThrow()).toString(),t=r("WANullthrows")(yield o("WAWebSignalProtocolStore").getPersistSignalProtocolStore().loadIdentityKey(e)),n=o("WAWebCryptoCurve25519").toCurveKeyPubKey(o("WAWebSignalCommonUtils").strToBuffer(t)),a=r("WANullthrows")(yield o("WAWebSignalProtocolStore").getPersistSignalProtocolStore().getIdentityKeyPair()),i=o("WAWebCryptoCurve25519").toCurveKeyPubKey(a.pubKey);return u(n,i)}),s.apply(this,arguments)}function u(e,t){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){if(e.byteLength!==32)throw r("err")("genSessionId: primary identity public key is "+e.byteLength+" bytes, should be 32!");if(t.byteLength!==32)throw r("err")("genSessionId: companion identity public key is "+e.byteLength+" bytes, should be 32!");var n=new(o("WABinary")).Binary;n.writeBuffer(e),n.write(95),n.writeBuffer(t);var a=n.readByteArrayView(),i=yield o("WACryptoSha256").sha256Base64(a);return i}),c.apply(this,arguments)}l.genCurrentSessionId=e,l.genSessionId=u}),98);
__d("WAWebSyncdMdSyncFieldstatMeta",["Promise","WAStorageEstimator","WAWebSyncdMdSession","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s=-2,u=-1,c=(function(){function t(){this.$1={mdStorageQuotaBytes:-2,mdStorageQuotaUsedBytes:-2},this.$2=null}var r=t.prototype;return r.getStorageEstimation=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(this.$1.mdStorageQuotaBytes!==s)return(e||(e=n("Promise"))).resolve(this.$1);var t=yield o("WAStorageEstimator").estimateStorage();return this.$1={mdStorageQuotaBytes:t.success?t.value.quota:u,mdStorageQuotaUsedBytes:t.success?t.value.usage:u},this.$1});function r(){return t.apply(this,arguments)}return r})(),r.getMdSessionId=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){return this.$2!=null?this.$2:(this.$2=yield o("WAWebSyncdMdSession").genCurrentSessionId(),this.$2)});function t(){return e.apply(this,arguments)}return t})(),t})(),d=new c;l.STORAGE_QUOTA_UNAVAILABLE=u,l.MdSyncFieldStatsMeta=d}),98);
__d("WAWebPwaDocumentMetadataUtils",["WAWebNoop","WAWebRuntimeEnvironmentUtils"],(function(t,n,r,o,a,i,l){var e="",s=-1,u;o("WAWebRuntimeEnvironmentUtils").isWorker()||(e=document.title);function c(t){t===void 0&&(t=null),t!=null&&(e=t),d(e)}function d(e,t){t===void 0&&(t=!1),g()&&!t?document.title=" ":(self.clearTimeout(u),document.title+=" ",u=self.setTimeout(function(){document.title=e},0))}var m=2e3,p=6e4;function _(t,n,r,o){n===void 0&&(n=m),r===void 0&&(r=!0),o===void 0&&(o=p);var a=!1,i=!1,l=self.setInterval(function(){a=!a;var n=a?t:e;d(n,r)},n),s=function(){i||(i=!0,self.clearInterval(l),self.clearTimeout(u),d(e,r))},u=self.setTimeout(s,o);return s}function f(e){e!=null&&(s=e),g!=null&&g()&&"setAppBadge"in navigator&&(s===-1||s===0?navigator.clearAppBadge==null||navigator.clearAppBadge().catch(r("WAWebNoop")):navigator.setAppBadge==null||navigator.setAppBadge(s).catch(r("WAWebNoop")))}function g(){return"matchMedia"in self?window.matchMedia("(display-mode: standalone)").matches:!1}l.setDocumentTitle=c,l.startDocumentTitleFlash=_,l.setAppBadge=f,l.isCurrentWebSessionInsidePwa=g}),98);
__d("WAWebWamPlatform",["WAWebEnvironment","WAWebPwaDocumentMetadataUtils"],(function(t,n,r,o,a,i,l){function e(){return r("WAWebEnvironment").isWindows===!0?"WIN_HYBRID":o("WAWebPwaDocumentMetadataUtils").isCurrentWebSessionInsidePwa()?"PWA":"WEB"}l.getWamPlatform=e}),98);
__d("WAWebClientPayload",["WABase64","WAByteArray","WAMd5","WAWebBackendApi","WAWebBuildConstants","WAWebClientFeatureFlags","WAWebClientPayloadReleaseChannel","WAWebEnvironment","WAWebLid1X1MigrationGating","WAWebMiscBrowserUtils","WAWebProtobufsCompanionReg.pb","WAWebProtobufsWa6.pb","WAWebSyncdMdSyncFieldstatMeta","WAWebUserPrefsMeUser","WAWebWamPlatform","asyncToGeneratorRuntime","encodeProtobuf","gkx","justknobx"],(function(t,n,r,o,a,i,l){var e=null;function s(e){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=o("WAWebUserPrefsMeUser").getMeDevicePnOrThrow(),r=babelHelpers.extends({},yield m(t),{username:parseInt(n.user,10),device:n.device!=null?n.device:0,lidDbMigrated:o("WAWebLid1X1MigrationGating").Lid1X1MigrationUtils.isLidMigrated()},e);return o("encodeProtobuf").encodeProtobuf(o("WAWebProtobufsWa6.pb").ClientPayloadSpec,r).readByteArrayView()}),u.apply(this,arguments)}function c(e,t,n){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=_(),a=yield f(),i=babelHelpers.extends({},yield m(n),{devicePairingData:{buildHash:r,deviceProps:a,eRegid:o("WAByteArray").intToBytes(4,e.registrationId),eKeytype:o("WAByteArray").intToBytes(1,5),eIdent:e.identityKeyPair.pubKey,eSkeyId:o("WAByteArray").intToBytes(3,t.keyId),eSkeyVal:t.keyPair.pubKey,eSkeySig:t.signature}});return o("encodeProtobuf").encodeProtobuf(o("WAWebProtobufsWa6.pb").ClientPayloadSpec,i).readByteArrayView()}),d.apply(this,arguments)}function m(e){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t,n;return{passive:(t=e==null?void 0:e.passive)!=null?t:!1,pull:(n=e==null?void 0:e.pull)!=null?n:!1,connectType:o("WAWebProtobufsWa6.pb").ClientPayload$ConnectType.WIFI_UNKNOWN,connectReason:o("WAWebProtobufsWa6.pb").ClientPayload$ConnectReason.USER_ACTIVATED,userAgent:yield y(),webInfo:{webSubPlatform:v()}}}),p.apply(this,arguments)}function _(){var e=o("WABase64").decodeB64(r("WAMd5")(o("WAWebBuildConstants").VERSION_BASE)),t=new Uint8Array(e);return t}function f(){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=r("WAWebMiscBrowserUtils").info(),t;if(e.version&&e.version!==""){var n=e.version.split(".");n.length>0&&e.version&&/^[0-9\.]+$/.test(e.version)&&(t={primary:parseInt(n[0],10),secondary:n.length>1?parseInt(n[1],10):void 0,tertiary:n.length>2?parseInt(n[2],10):void 0})}var a={inlineInitialPayloadInE2EeMsg:!0,supportBotUserAgentChatHistory:!0,supportCagReactionsAndPolls:!0,supportRecentSyncChunkMessageCountTuning:!0,supportHostedGroupMsg:!0,supportBizHostedMsg:!0,supportFbidBotChatHistory:!0,supportMessageAssociation:!0,supportCallLogHistory:r("WAWebEnvironment").isWindows,supportGroupHistory:r("gkx")("15338"),thumbnailSyncDaysLimit:r("justknobx")._("4736")},i=o("WAWebClientFeatureFlags").isFeatureEnabled("debug_1_year_history_sync");if(i)a=babelHelpers.extends({},a,{fullSyncDaysLimit:365});else{var l=yield o("WAWebSyncdMdSyncFieldstatMeta").MdSyncFieldStatsMeta.getStorageEstimation();l.mdStorageQuotaBytes!==o("WAWebSyncdMdSyncFieldstatMeta").STORAGE_QUOTA_UNAVAILABLE&&(a=babelHelpers.extends({},a,{storageQuotaMb:Math.trunc(l.mdStorageQuotaBytes/1024/1024)}))}var s=r("WAWebEnvironment").isWindows&&!r("justknobx")._("1836");s&&(a.onDemandReady=!0,a.completeOnDemandReady=!0);var u=r("WAWebEnvironment").isWindows?o("WAWebProtobufsCompanionReg.pb").DeviceProps$PlatformType.UWP:b(e.name),c={os:e.os,version:t,platformType:u,requireFullSync:i,historySyncConfig:a},d=o("encodeProtobuf").encodeProtobuf(o("WAWebProtobufsCompanionReg.pb").DevicePropsSpec,c).readByteArrayView();return d}),g.apply(this,arguments)}function h(t){e=t}function y(){return C.apply(this,arguments)}function C(){return C=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield o("WAWebBackendApi").frontendSendAndReceive("getDeviceInfo",void 0),t={appVersion:{primary:Number(o("WAWebBuildConstants").VERSION_PRIMARY),secondary:Number(o("WAWebBuildConstants").VERSION_SECONDARY),tertiary:Number(o("WAWebBuildConstants").VERSION_TERTIARY)},platform:o("WAWebProtobufsWa6.pb").ClientPayload$UserAgent$Platform.WEB,releaseChannel:yield o("WAWebClientPayloadReleaseChannel").getReleaseChannel(),mcc:e.mcc,mnc:e.mnc,osVersion:e.osVersion,manufacturer:e.manufacturer,device:e.device,osBuildNumber:e.osBuild,localeLanguageIso6391:e.lg,localeCountryIso31661Alpha2:e.lc};if(r("WAWebEnvironment").isWindows){var n;t.appVersion={primary:Number((n=o("WAWebBuildConstants")).VERSION_PRIMARY),secondary:Number(n.VERSION_SECONDARY),tertiary:Number(n.VERSION_TERTIARY),quaternary:Number(n.WINDOWS_BUILD)},(o("WAWebBuildConstants").WINDOWS_BUILD==null?void 0:o("WAWebBuildConstants").WINDOWS_BUILD.length)===6&&(t.mcc=o("WAWebBuildConstants").WINDOWS_BUILD.substr(0,3),t.mnc=o("WAWebBuildConstants").WINDOWS_BUILD.substr(3,3))}return t}),C.apply(this,arguments)}function b(e){return e==="Chrome"?o("WAWebProtobufsCompanionReg.pb").DeviceProps$PlatformType.CHROME:e==="Firefox"?o("WAWebProtobufsCompanionReg.pb").DeviceProps$PlatformType.FIREFOX:e==="IE"?o("WAWebProtobufsCompanionReg.pb").DeviceProps$PlatformType.IE:e==="Opera"?o("WAWebProtobufsCompanionReg.pb").DeviceProps$PlatformType.OPERA:e==="Safari"?o("WAWebProtobufsCompanionReg.pb").DeviceProps$PlatformType.SAFARI:e==="Edge"?o("WAWebProtobufsCompanionReg.pb").DeviceProps$PlatformType.EDGE:e==="electron"||e==="Desktop"?o("WAWebProtobufsCompanionReg.pb").DeviceProps$PlatformType.DESKTOP:e==="ipad"||e==="iPad"?o("WAWebProtobufsCompanionReg.pb").DeviceProps$PlatformType.IPAD:e==="tablet"||e==="Android tablet"?o("WAWebProtobufsCompanionReg.pb").DeviceProps$PlatformType.ANDROID_TABLET:e==="Ohana"?o("WAWebProtobufsCompanionReg.pb").DeviceProps$PlatformType.OHANA:e==="Aloha"?o("WAWebProtobufsCompanionReg.pb").DeviceProps$PlatformType.ALOHA:e==="Catalina"?o("WAWebProtobufsCompanionReg.pb").DeviceProps$PlatformType.CATALINA:o("WAWebProtobufsCompanionReg.pb").DeviceProps$PlatformType.UNKNOWN}function v(){return(function(e){if(e==="WEB"||e==="PWA")return o("WAWebProtobufsWa6.pb").ClientPayload$WebInfo$WebSubPlatform.WEB_BROWSER;if(e==="DARWIN"||e==="DARWIN_BETA")return o("WAWebProtobufsWa6.pb").ClientPayload$WebInfo$WebSubPlatform.DARWIN;if(e==="MACSTORE")return o("WAWebProtobufsWa6.pb").ClientPayload$WebInfo$WebSubPlatform.APP_STORE;if(e==="WIN_HYBRID")return o("WAWebProtobufsWa6.pb").ClientPayload$WebInfo$WebSubPlatform.WIN_HYBRID;throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+e)})(o("WAWebWamPlatform").getWamPlatform())}l.getClientPayloadForLogin=s,l.getClientPayloadForRegistration=c,l.setClientPayloadOverride=h}),98);
__d("WAWebClockSkewDifferenceTWamEvent",["WAWebWamCodegenUtils"],(function(t,n,r,o,a,i,l){var e=o("WAWebWamCodegenUtils").defineEvents({ClockSkewDifferenceT:[3178,{clockSkewHourly:[1,o("WAWebWamCodegenUtils").TYPES.INTEGER]},[1,1e3,1e4],"private",37887164]},{ClockSkewDifferenceT:[]});l.ClockSkewDifferenceTWamEvent=e}),98);
__d("WAWebCommonSocketPlatformDetails",["WALogger","WAVerifyChainCertificateWA6","WAWapDict","WAWebProtobufsWa6.pb","asyncToGeneratorRuntime","decodeProtobuf","encodeProtobuf","err"],(function(t,n,r,o,a,i,l){var e,s=new Uint8Array([87,65,6,o("WAWapDict").DICT_VERSION]);function u(e){return o("encodeProtobuf").encodeProtobuf(o("WAWebProtobufsWa6.pb").HandshakeMessageSpec,{clientHello:e}).readByteArrayView()}function c(e){return o("encodeProtobuf").encodeProtobuf(o("WAWebProtobufsWa6.pb").HandshakeMessageSpec,{clientFinish:e}).readByteArrayView()}function d(e){return o("decodeProtobuf").decodeProtobuf(o("WAWebProtobufsWa6.pb").HandshakeMessageSpec,e).serverHello}function m(e){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=t.certificate,a=t.serverStatic;o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["processCertificate start"])));var i=yield o("WAVerifyChainCertificateWA6").verifyChainCertificateWA6(n,a);if(!i.success)throw r("err")("verifyCertificateWA6 - "+i.error)}),p.apply(this,arguments)}function _(){return null}function f(e){if(e==null)return null;var t=e!=null?e:{},n=t.intermediate,r=t.leaf;return r&&n?r.key:null}l.WA_WEB_PROTO_HEADER=s,l.encodeHandshakeHello=u,l.encodeHandshakeFinish=c,l.decodeServerHello=d,l.processCertificate=m,l.serverInfoIfKnown=_,l.makeServerInfoIfKnown=f}),98);
__d("WAWebCommsProcessAck",["WALogger","WAWebActiveMessageRanges","WAWebDBMessageUtils","WAWebMsgKey","WAWebMsgType","WAWebSchemaMessage","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime","cr:634"],(function(t,n,r,o,a,i,l){var e,s,u=(e=n("cr:634"))!=null?e:{},c=u.MsgCollection;function d(e){var t=e.attrs,n=t.from,r=t.id,a=t.t;if(e.attrs.class==="message"){var i=o("WAWebWidFactory").createWid(String(n)),l=m(e);f(String(r),i,parseInt(a,10),l),_(l,String(r),i)}}function m(e){var t,n,r=e.content;if(!Array.isArray(r)||((t=r[0])==null?void 0:t.tag)!=="rcat")return null;var o=(n=r[0])==null?void 0:n.content;return Array.isArray(o)?null:o}function p(e,t){return t.isGroup()?new(r("WAWebMsgKey"))({fromMe:!0,remote:t,id:e,participant:o("WAWebUserPrefsMeUser").getMePnUserOrThrow()}):new(r("WAWebMsgKey"))({fromMe:!0,remote:t,id:e})}function _(e,t,n){if(e!=null){var r=c==null?void 0:c.get(p(t,n));r!=null&&(r.rcat=e)}}function f(e,t,n,r){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r){var a=p(e,t),i=String(a);try{var l=yield o("WAWebSchemaMessage").getMessageTable().get(i);if((l==null?void 0:l.type)===o("WAWebMsgType").MSG_TYPE.REACTION)return;var u=o("WAWebDBMessageUtils").MessagePropertyType.cast(l==null?void 0:l.messageRangeIndex.split("_")[1]);o("WAWebSchemaMessage").getMessageTable().merge(i,{messageRangeIndex:o("WAWebDBMessageUtils").craftMessageRangeIndex(t.toString(),!1,u===o("WAWebDBMessageUtils").MessagePropertyType.SystemMessage,n),rcat:r})}catch(e){throw o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["processAckForOutgoingMessage: failed to update in storage"]))).verbose().sendLogs("message processAckForOutgoingMessage failed"),e}o("WAWebActiveMessageRanges").checkAndRemoveActiveMessageRanges(a,n)}),g.apply(this,arguments)}l.default=d}),98);
__d("WAWebPassiveModeManager",["Promise","WAAbortError","WALogger","WAPromiseQueue","WAPromiseRaceAbort","WAResolvable","WASendPassiveModeProtocol","WAWebBackendEventBus","WAWebHandleOfflineAbProps","WAWebPageLoadLogging","WAWebQplQuickPerformanceLoggerMarkerIds","WAWebQplQuickPerformanceLoggerModule","WAWebWamOfflineResumeReporter"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E=6e4,k=(function(){function t(){var t=this;this.$1=new AbortController,this.$2=new(o("WAResolvable")).Resolvable,this.$3=!1,this.$4=[],this.$5=[],this.$7=E,this.$8=new(o("WAPromiseQueue")).PromiseQueue,o("WAWebBackendEventBus").BackendEventBus.onSocketStreamDisconnected(function(){var n;o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: trying to abort passive mode because of disconnect"]))),o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: "," tasks from current or last run: ",""])),t.$5.length,t.$5.map(function(e){return e.name}).join(", ")),o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: processing tasks finished: ",""])),t.$2.resolveWasCalled()),(n=t.$1)==null||n.abort(),t.resetState()})}var a=t.prototype;return a.passiveTimeoutTimer_TESTONLY=function(){return this.$6},a.resetState=function(){o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: reset status"]))),this.$5=[],this.$6&&(self.clearTimeout(this.$6),this.$6=null),this.$3=!1,this.$2.resolveWasCalled()||this.$2.resolve(),this.$2=new(o("WAResolvable")).Resolvable,this.$1=new AbortController},a.registerPassiveTask=function(t,n){this.$4.find(function(e){return e.name===t})?o("WALogger").WARN(m||(m=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: passive task "," already registered"])),t):(o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: register passive task ",""])),t),this.$4.push({name:t,task:n}))},a.enableDebugPassiveMode=function(){},a.executePassiveTasks=function(){var e=this;if(!this.shouldConnectAsPassiveMode()){this.$2.resolve();return}var t=[].concat(this.$4);this.$4=[],this.$8.enqueue(function(){e.$5=t,o("WAWebPageLoadLogging").startPageLoadQplMeasure("passive_tasks"),o("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.OFFLINE_RESUME,"PassiveTasks_start"),o("WALogger").LOG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: executePassiveTasks: start to execute "," passive tasks: ",""])),t.length,t.map(function(e){return e.name}).join(", "));var a=r("WAPromiseRaceAbort")((L||(L=n("Promise"))).all(t.map(function(t){var n=t.task;return n(e.$1.signal).catch(function(e){if(e.name===o("WAAbortError").ABORT_ERROR)throw e;o("WALogger").ERROR(f||(f=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: executePassiveTasks: failed for single task with ",""])),e)})})),e.$1.signal).then(function(){o("WALogger").LOG(g||(g=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: executePassiveTasks: complete all tasks"]))),e.$9()}).catch(o("WAAbortError").catchAbort(function(){o("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: executePassiveTasks: abort by disconnect, skip send active"]))),e.$2.resolve()})).catch(function(t){o("WALogger").ERROR(y||(y=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: executePassiveTasks: end with error ",""])),t),e.$9()}).finally(function(){o("WAWebPageLoadLogging").endPageLoadQplMeasure("passive_tasks"),o("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.OFFLINE_RESUME,"PassiveTasks_end"),o("WALogger").LOG(C||(C=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: executePassiveTasks: done"]))),e.resetState()}),i=new L(function(t){e.$6=self.setTimeout(function(){var n=o("WALogger").ERROR(b||(b=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: executePassiveTasks: passive mode end with timeout"])));o("WAWebHandleOfflineAbProps").isNonBlockingOfflineResumeExpEnabled()&&(n=n.tags("offline-resume-experimental")),n.sendLogs("passive-timeout"),e.$9(),e.resetState(),t()},e.$7)});return L.race([a,i])})},a.$9=function(){o("WALogger").LOG(v||(v=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: _endPassiveMode"]))),this.$2.resolve(),o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logOfflinePassiveT(),this.$3||(o("WALogger").LOG(S||(S=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: send passive active iq"]))),o("WASendPassiveModeProtocol").sendPassiveModeProtocol("active"))},a.waitForPassiveTaskEnd=function(){return this.$2.promise},a.shouldConnectAsPassiveMode=function(){return this.$3||this.$4.length>0},a.setPassiveModeTimeout=function(t){o("WALogger").LOG(R||(R=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: setPassiveModeTimeout: config timeout to be ",""])),t),this.$7=t},t})(),I=new k;l.DEFAULT_MAX_PASSIVE_MODE_TIME_MS=E,l.PassiveTaskManager=I}),98);
__d("WAWebOnlineDanglingReceipts",["Promise","WALogger","WATimeUtils","WAWebABProps","WAWebCommsSendPing","WAWebNetworkStatus","WAWebSchemaDanglingReceipt","WAWebSendReceiptJobCommon","WAWebWamOfflineResumeReporter","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g,h,y=new Map,C=null,b=120*1e3;function v(t,n,r){var a;y.has(t)||y.set(t,new Map);var i=y.get(t);i!=null&&i.has(n)||i==null||i.set(n,[]),i==null||(a=i.get(n))==null||a.push(r),C||(C=self.setTimeout(function(){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[online-preacks] clear online dangling receipts due to timeout"]))),I(),C=null},b))}function S(){return y.size>0}function R(){return L.apply(this,arguments)}function L(){return L=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=String(o("WATimeUtils").unixTime()),t=0,r=Array.from(y.keys()).map(function(n){var r=y.get(n);if(r)return r.forEach(function(e){t+=e.length}),o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[online-preacks]: sending online dangling grouped receipts: ",""])),r.size),o("WAWebSendReceiptJobCommon").sendAggregateReceipts({to:n,type:o("WAWebSendReceiptJobCommon").RECEIPT_TYPE.DELIVERY,t:e,groupedReceipt:r})});yield(h||(h=n("Promise"))).all(r),o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logOfflinePreackCount(t,!0),E()}),L.apply(this,arguments)}function E(){return k.apply(this,arguments)}function k(){return k=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(y.size!==0){if(!r("WAWebNetworkStatus").online){o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[online-preacks] clearOnlineDanglingReceiptsAfterSending: skip due to offline"])));return}o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[online-preacks] clearOnlineDanglingReceiptsAfterSending: sending ping"])));var e=yield o("WAWebCommsSendPing").blockSendPing();(e||!o("WAWebABProps").getABPropConfigValue("web_offline_resume_wait_for_ping_response_enabled"))&&(o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["[online-preacks] clearOnlineDanglingReceiptsAfterSending: clearing receipts"]))),y.clear())}}),k.apply(this,arguments)}function I(){return T.apply(this,arguments)}function T(){return T=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(y.size!==0){if(!r("WAWebNetworkStatus").online)return D();try{o("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[online-preacks] clearOrFlushOnlineDanglingReceipts: sending ping"])));var e=yield o("WAWebCommsSendPing").blockSendPing();(e||!o("WAWebABProps").getABPropConfigValue("web_offline_resume_wait_for_ping_response_enabled"))&&(o("WALogger").LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["[online-preacks] clearOrFlushOnlineDanglingReceipts: clearing receipts"]))),y.clear())}catch(e){o("WALogger").LOG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["[online-preacks] clearOrFlushOnlineDanglingReceipts: failed to clear receipts: ",""])),e),D()}}}),T.apply(this,arguments)}function D(){return x.apply(this,arguments)}function x(){return x=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(!(!S()||!o("WAWebABProps").getABPropConfigValue("web_pre_acks_m3_enabled"))){o("WALogger").LOG(f||(f=babelHelpers.taggedTemplateLiteralLoose(["[online-preacks]: clearOrFlushOnlineDanglingReceipts: flush due to offline."])));var e=[];y.forEach(function(t,n){t.forEach(function(t,r){t.forEach(function(t){e.push({from:String(n),author:String(r),externalId:t})})})}),e.length>0&&(o("WALogger").LOG(g||(g=babelHelpers.taggedTemplateLiteralLoose(["[online-preacks]: clearOrFlushOnlineDanglingReceipts: flush "," receipts"])),e.length),yield o("WAWebSchemaDanglingReceipt").getTable().create({receipts:e,acks:[]}),y.clear())}}),x.apply(this,arguments)}l.addOnlineDanglingReceipts=v,l.hasOnlineDanglingReceipts=S,l.sendAndClearOnlineDanglingReceipts=R}),98);
__d("WAWebSignalKeyApi",["WAWebCryptoCurve25519","WAWebCryptoLibraryUtilsApi","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){function e(e){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=r("WAWebCryptoLibraryUtilsApi").makePreKey(e),n=t.preKeyId,o=t.privKey,a=t.pubKey,i={privKey:o,pubKey:a};return{keyId:n,keyPair:i,isDirectDistribution:0}}),s.apply(this,arguments)}function u(e,t){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=r("WAWebCryptoLibraryUtilsApi").makeSignedPreKey(o("WAWebCryptoCurve25519").toCurveKeyPair(e),t),a=n.preKeyId,i=n.privKey,l=n.pubKey,s=n.signature,u={privKey:i,pubKey:l};return{keyId:a,keyPair:o("WAWebCryptoCurve25519").toCurveKeyPair(u),signature:s}}),c.apply(this,arguments)}function d(){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){return r("WAWebCryptoLibraryUtilsApi").makeKeyPair()}),m.apply(this,arguments)}l.generatePreKeyPair=e,l.generateSignedKeyPair=u,l.generateIdentityKeyPair=d}),98);
__d("WAWebUploadPreKeysJob",["Promise","WAComms","WADeprecatedSendIq","WADeprecatedWapParser","WALogger","WAPromiseRetryLoop","WAWap","WAWebConstantsDeprecated","WAWebSignalKeyApi","WAWebSignalStoreApi","WAWebSignalUtilsApi","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g=812,h={error:!1,result:!0},y=new(r("WADeprecatedWapParser"))("uploadPreKeyResParser",function(e){var t;e.assertTag("iq"),e.assertFromServer();var n=e.attrEnum("type",h);if(n)return{success:!0};var r=e.child("error");return{errorCode:r.attrInt("code"),errorText:(t=r.maybeAttrString("text"))!=null?t:""}});function C(){return b.apply(this,arguments)}function b(){return b=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield(f||(f=n("Promise"))).all([o("WAWebSignalStoreApi").waSignalStore.getRegistrationInfo(),o("WAWebSignalStoreApi").waSignalStore.getSignedPreKey()]),t=e[0],a=e[1];if(!t||!a)throw r("err")("No signal info is available");var i=t.identityKeyPair,l=t.registrationId,s=yield o("WAWebSignalStoreApi").waSignalStore.getOrGenPreKeys(g,o("WAWebSignalKeyApi").generatePreKeyPair).then(function(e){if(e.length===0)throw r("err")("No preKey is available");return[o("WAWap").wap("iq",{id:o("WAWap").generateId(),xmlns:"encrypt",type:"set",to:o("WAWap").S_WHATSAPP_NET},o("WAWap").wap("registration",null,o("WAWap").BIG_ENDIAN_CONTENT(l)),o("WAWap").wap("type",null,r("WAWebConstantsDeprecated").KEY_BUNDLE_TYPE),o("WAWap").wap("identity",null,i.pubKey),o("WAWap").wap("list",null,e.map(o("WAWebSignalUtilsApi").xmppPreKey)),o("WAWebSignalUtilsApi").xmppSignedPreKey(a)),e[e.length-1].keyId,e.length]}),u=s[0],h=s[1],C=s[2];try{var b=yield o("WAComms").waitForConnection().then(function(){return o("WAWebSignalStoreApi").waSignalStore.markKeyAsUploaded(h)}).then(function(){return o("WADeprecatedSendIq").deprecatedSendIqWithoutRetry(u,y)});if(b.success)return o("WAWebSignalStoreApi").waSignalStore.setServerHasPreKeys(!0),o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["_uploadPreKeys: "," keys uploaded, raw stanza size: ","b"])),C,u.toString().length),{success:!0};var v=b.errorCode;return v>=500?o("WALogger").WARN(d||(d=babelHelpers.taggedTemplateLiteralLoose(["_uploadPreKeys: server requested backoff "," (count: ",", size: ","b)"])),v,C,u.toString().length):v===406?o("WALogger").WARN(m||(m=babelHelpers.taggedTemplateLiteralLoose(["_uploadPreKeys: uploaded invalid keys (count: ",", size: ","b)"])),C,u.toString().length):o("WALogger").WARN(p||(p=babelHelpers.taggedTemplateLiteralLoose(["_uploadPreKeys: unrecognized error "," (count: ",", size: ","b)"])),v,C,u.toString().length),{errorCode:b.errorCode,errorText:b.errorText}}catch(e){o("WALogger").WARN(_||(_=babelHelpers.taggedTemplateLiteralLoose(["_uploadPreKeys: disconnected, unclear if on server: "," (count: ",", size: ","b)"])),e,C,u.toString().length);return}}),b.apply(this,arguments)}var v={algo:{type:"fibonacci",first:1e3,second:2e3},max:61e4};function S(){var t=new(o("WAPromiseRetryLoop")).PromiseRetryLoop({name:"uploadPreKeys",timer:v,code:(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["uploadPreKeys: running"])));var n=yield C();(n==null?void 0:n.success)===!0?(o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["uploadPreKeys: done"]))),t()):o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["uploadPreKeys: retrying (after delay)"])))});function r(e){return t.apply(this,arguments)}return r})()});return t.start(),t.promise()}l.UPLOAD_KEYS_COUNT=g,l.uploadPreKeyResParser=y,l.uploadPreKeys=S}),98);
__d("WAWebUploadPrekeysForRegTask",["Promise","WAComms","WADeprecatedSendIq","WALogger","WAWap","WAWebConstantsDeprecated","WAWebSignalKeyApi","WAWebSignalStoreApi","WAWebSignalUtilsApi","WAWebUploadPreKeysJob","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g=(function(){function t(){}var a=t.prototype;return a.startKeyGenerationStage=function(){return this.$1||(this.$1=this.$3()),this.$1},a.startKeyUploadStage=function(){return this.$2||(this.$2=this.$4()),this.$2},a.$3=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["PrekeyUploadForRegistrationTask: start key generation"])));var t=yield(f||(f=n("Promise"))).all([o("WAWebSignalStoreApi").waSignalStore.getRegistrationInfo(),o("WAWebSignalStoreApi").waSignalStore.getSignedPreKey()]),a=t[0],i=t[1];if(!a||!i)throw r("err")("No signal info is available");var l=yield o("WAWebSignalStoreApi").waSignalStore.getOrGenPreKeys(o("WAWebUploadPreKeysJob").UPLOAD_KEYS_COUNT,o("WAWebSignalKeyApi").generatePreKeyPair);return o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["PrekeyUploadForRegistrationTask: successfully generated "," keys"])),l.length),{regInfo:a,signedPreKey:i,prekeys:l}});function a(){return t.apply(this,arguments)}return a})(),a.$4=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=this.$1||this.startKeyGenerationStage(),t=yield e,n=t.prekeys,a=t.regInfo,i=t.signedPreKey;o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["PrekeyUploadForRegistrationTask: start key upload"])));var l=n.length;if(l===0)throw r("err")("No preKey is available");var s=n[n.length-1].keyId,f=a.identityKeyPair,g=a.registrationId,h=o("WAWap").wap("iq",{id:o("WAWap").generateId(),xmlns:"encrypt",type:"set",to:o("WAWap").S_WHATSAPP_NET},o("WAWap").wap("registration",null,o("WAWap").BIG_ENDIAN_CONTENT(g)),o("WAWap").wap("type",null,r("WAWebConstantsDeprecated").KEY_BUNDLE_TYPE),o("WAWap").wap("identity",null,f.pubKey),o("WAWap").wap("list",null,n.map(o("WAWebSignalUtilsApi").xmppPreKey)),o("WAWebSignalUtilsApi").xmppSignedPreKey(i));try{yield o("WAComms").waitForConnection(),yield o("WAWebSignalStoreApi").waSignalStore.markKeyAsUploaded(s);var y=yield o("WADeprecatedSendIq").deprecatedSendIqWithoutRetry(h,o("WAWebUploadPreKeysJob").uploadPreKeyResParser);if(y.success)return o("WAWebSignalStoreApi").waSignalStore.setServerHasPreKeys(!0),o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["_uploadPreKeys: "," keys uploaded, raw stanza size: ","b"])),n.length,h.toString().length),{success:!0};var C=y.errorCode;return C>=500?o("WALogger").WARN(d||(d=babelHelpers.taggedTemplateLiteralLoose(["_uploadPreKeys: server requested backoff "," (count: ",", size: ","b)"])),C,l,h.toString().length):C===406?o("WALogger").WARN(m||(m=babelHelpers.taggedTemplateLiteralLoose(["_uploadPreKeys: uploaded invalid keys (count: ",", size: ","b)"])),l,h.toString().length):o("WALogger").WARN(p||(p=babelHelpers.taggedTemplateLiteralLoose(["_uploadPreKeys: unrecognized error "," (count: ",", size: ","b)"])),C,l,h.toString().length),{errorCode:y.errorCode,errorText:y.errorText}}catch(e){o("WALogger").WARN(_||(_=babelHelpers.taggedTemplateLiteralLoose(["_uploadPreKeys: disconnected, unclear if on server: "," (count: ",", size: ","b)"])),e,l,h.toString().length);return}});function t(){return e.apply(this,arguments)}return t})(),t})();function h(){return new g}l.default=h}),98);
__d("WAWebWamEnumWebcNativeUpsellCtaQrScreenExperimentGroup",[],(function(t,n,r,o,a,i){var e=Object.freeze({NONE:1,TEST_BANNER_SLIM:2,TEST_BANNER_LARGE:3,CONTROL:4});i.WEBC_NATIVE_UPSELL_CTA_QR_SCREEN_EXPERIMENT_GROUP=e}),66);
__d("WAWebDesktopUpsellQRCodeBannerExperiment",["WAWebWamEnumWebcNativeUpsellCtaQrScreenExperimentGroup"],(function(t,n,r,o,a,i,l){function e(){return o("WAWebWamEnumWebcNativeUpsellCtaQrScreenExperimentGroup").WEBC_NATIVE_UPSELL_CTA_QR_SCREEN_EXPERIMENT_GROUP.TEST_BANNER_SLIM}l.getWAWebDesktopUpsellQRCodeBannerExperiment=e}),98);
__d("WAWebDeviceFeatures",["WAWebSessionStorage"],(function(t,n,r,o,a,i,l){"use strict";function e(){return navigator.platform}function s(){return navigator.deviceMemory===void 0?"undefined":""+navigator.deviceMemory}function u(){var e=window.devicePixelRatio;return e==null||e===void 0?"undefined":e*window.outerWidth+"x"+e*window.outerHeight}function c(){var e,t;return(e=(t=navigator)==null||(t=t.connection)==null?void 0:t.rtt)!=null?e:-1}function d(){var e;return(e=r("WAWebSessionStorage")==null?void 0:r("WAWebSessionStorage").length)!=null?e:-1}function m(){return"ontouchstart"in window&&"TouchEvent"in window}function p(){return{cpuPlatform:e(),deviceMemory:s(),screenResolution:u(),connectionRoundTripTime:c(),sessionStorageLength:d(),touchPresence:m()}}l.default=p}),98);
__d("isWAWebFeatureDetectionAppleTouchscreen",["WAWebMiscBrowserUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=r("WAWebMiscBrowserUtils").info();return e.os.toLowerCase()!=="mac os"?!1:!!navigator.maxTouchPoints&&navigator.maxTouchPoints>2}l.default=e}),98);
__d("WAWebLinkDeviceScreenGatedUtils",["$InternalEnum","WAWebAutoLogoutGating","gkx","isWAWebFeatureDetectionAppleTouchscreen","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e=n("$InternalEnum")({M1_WINNER:1});function s(){if(!r("justknobx")._("5007"))return u();if(o("WAWebAutoLogoutGating").isRunningInAutoLogoutIframe()){var t=window.parent.linkDeviceVariant,n=e.cast(t);return n!=null?n:u()}var a=u();return window.linkDeviceVariant=a,a}function u(){return e.M1_WINNER}function c(){return r("gkx")("16993")?r("gkx")("18089")?"test":"control":"none"}function d(){return r("isWAWebFeatureDetectionAppleTouchscreen")()&&r("gkx")("20339")}function m(){return r("gkx")("20730")?r("gkx")("20731")?"test":"control":"none"}l.LinkDeviceScreenVariantType=e,l.getLinkDeviceScreenVariant=s,l.getOptimizedRegFromWebVariant=c,l.isAppleTouchscreenOverlayEnabled=d,l.getSimplifiedPairingInstructionsVariant=m}),98);
__d("WAWebNativeCameraQRLinkedDeviceUtils",["$InternalEnum","WAWebAutoLogoutGating","gkx","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e=n("$InternalEnum")({NONE:-1,CONTROL:0,TEST:1});function s(){if(!r("justknobx")._("5007"))return u();if(o("WAWebAutoLogoutGating").isRunningInAutoLogoutIframe()){var t=window.parent.nativeCameraVariant,n=e.cast(t);return n!=null?n:u()}var a=u();return window.nativeCameraVariant=a,a}function u(){return!r("gkx")("14464")||r("gkx")("26256")?e.NONE:r("gkx")("15235")?e.TEST:e.CONTROL}function c(){return s()===e.TEST}l.NativeCameraQRLinkedDeviceVariantType=e,l.getNativeCameraQRLinkedDeviceVariant=s,l.isNativeCameraQRLinkedDeviceTest=c}),98);
__d("WAWebLinkDeviceExperience",["WABitArray","WAWebArkoseExpUtils","WAWebAutoLogoutGating","WAWebDesktopUpsellQRCodeBannerExperiment","WAWebDeviceFeatures","WAWebLinkDeviceScreenGatedUtils","WAWebNativeCameraQRLinkedDeviceUtils","WAWebWamEnumWebcNativeUpsellCtaQrScreenExperimentGroup"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e){this.flag=e}var t=e.prototype;return t.getIndex=function(){return u()-1-this.flag},e})(),s={ScreenRefreshFlag:new e(0),AutoLogoutFlag:new e(1),DesktopUpsellBannerControlFlag:new e(2),DesktopUpsellBannerTestSlimBannerFlag:new e(3),DesktopUpsellBannerTestLargeBannerFlag:new e(4),PairingScreenRefreshVariant1Flag:new e(6),LinkDeviceScreenControl:new e(8),LinkDeviceScreenTest:new e(9),OptimizedRegistrationControl:new e(10),OptimizedRegistrationTest:new e(11),ArkoseControl:new e(12),ArkoseTest:new e(13),SimplifiedPairingInstructionsControl:new e(14),SimplifiedPairingInstructionsTest:new e(15),TouchPresence:new e(16),AppleTouchscreenOverlay:new e(17)};function u(){return Math.max.apply(Math,Object.values(s).map(function(e){return e.flag}))+1}function c(e){var t=new(r("WABitArray"))(u());t.set(s.ScreenRefreshFlag.getIndex()),o("WAWebAutoLogoutGating").isAutoLogoutEnabled()&&t.set(s.AutoLogoutFlag.getIndex());var n=o("WAWebDesktopUpsellQRCodeBannerExperiment").getWAWebDesktopUpsellQRCodeBannerExperiment();switch(n){case o("WAWebWamEnumWebcNativeUpsellCtaQrScreenExperimentGroup").WEBC_NATIVE_UPSELL_CTA_QR_SCREEN_EXPERIMENT_GROUP.NONE:break;case o("WAWebWamEnumWebcNativeUpsellCtaQrScreenExperimentGroup").WEBC_NATIVE_UPSELL_CTA_QR_SCREEN_EXPERIMENT_GROUP.CONTROL:{t.set(s.DesktopUpsellBannerControlFlag.getIndex());break}case o("WAWebWamEnumWebcNativeUpsellCtaQrScreenExperimentGroup").WEBC_NATIVE_UPSELL_CTA_QR_SCREEN_EXPERIMENT_GROUP.TEST_BANNER_SLIM:{t.set(s.DesktopUpsellBannerTestSlimBannerFlag.getIndex());break}case o("WAWebWamEnumWebcNativeUpsellCtaQrScreenExperimentGroup").WEBC_NATIVE_UPSELL_CTA_QR_SCREEN_EXPERIMENT_GROUP.TEST_BANNER_LARGE:{t.set(s.DesktopUpsellBannerTestLargeBannerFlag.getIndex());break}}var a=o("WAWebLinkDeviceScreenGatedUtils").getLinkDeviceScreenVariant();switch(a){case o("WAWebLinkDeviceScreenGatedUtils").LinkDeviceScreenVariantType.M1_WINNER:t.set(s.PairingScreenRefreshVariant1Flag.getIndex());break}var i=o("WAWebNativeCameraQRLinkedDeviceUtils").getNativeCameraQRLinkedDeviceVariant();switch(i){case o("WAWebNativeCameraQRLinkedDeviceUtils").NativeCameraQRLinkedDeviceVariantType.NONE:break;case o("WAWebNativeCameraQRLinkedDeviceUtils").NativeCameraQRLinkedDeviceVariantType.CONTROL:t.set(s.LinkDeviceScreenControl.getIndex());break;case o("WAWebNativeCameraQRLinkedDeviceUtils").NativeCameraQRLinkedDeviceVariantType.TEST:t.set(s.LinkDeviceScreenTest.getIndex());break}var l=o("WAWebLinkDeviceScreenGatedUtils").getOptimizedRegFromWebVariant(),c=(e==null?void 0:e.resultType)==="WEB_REGISTRATION_CAMPAIGN"||l==="test";c?t.set(s.OptimizedRegistrationTest.getIndex()):l==="control"&&t.set(s.OptimizedRegistrationControl.getIndex());var d=o("WAWebArkoseExpUtils").getArkoseVariant();switch(d){case o("WAWebArkoseExpUtils").ArkoseVariantType.CONTROL:t.set(s.ArkoseControl.getIndex());break;case o("WAWebArkoseExpUtils").ArkoseVariantType.TEST:t.set(s.ArkoseTest.getIndex());break;default:break}r("WAWebDeviceFeatures")().touchPresence&&t.set(s.TouchPresence.getIndex()),o("WAWebLinkDeviceScreenGatedUtils").isAppleTouchscreenOverlayEnabled()&&t.set(s.AppleTouchscreenOverlay.getIndex());var m=o("WAWebLinkDeviceScreenGatedUtils").getSimplifiedPairingInstructionsVariant();switch(m){case"control":t.set(s.SimplifiedPairingInstructionsControl.getIndex());break;case"test":t.set(s.SimplifiedPairingInstructionsTest.getIndex());break}return t.toNumber()}l.getWebCompanionLinkDeviceExperienceId=c}),98);
__d("WAWebWamEnumApplicationState",[],(function(t,n,r,o,a,i){var e=Object.freeze({FOREGROUND:1,BACKGROUND:2});i.APPLICATION_STATE=e}),66);
__d("WAWebWamEnumMdLinkDeviceCompanionStage",[],(function(t,n,r,o,a,i){var e=Object.freeze({PAIR_SUCCESS_RECEIVED:1,PAIR_DEVICE_SIGN_SENT:2,FIRST_CONNECT:3,UPLOAD_PREKEYS:4,COMPLETE:5,GENERATE_PREKEYS:6,SENT_PREKEYS:7});i.MD_LINK_DEVICE_COMPANION_STAGE=e}),66);
__d("WAWebMdLinkDeviceCompanionWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumApplicationState","WAWebWamEnumMdLinkDeviceCompanionStage"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({MdLinkDeviceCompanion:[2576,{appContext:[13,e.TYPES.STRING],appContextBitfield:[14,e.TYPES.INTEGER],applicationState:[12,o("WAWebWamEnumApplicationState").APPLICATION_STATE],mdCompanionRefHash:[10,e.TYPES.STRING],mdDurationS:[8,e.TYPES.INTEGER],mdLinkDeviceCompanionErrorCode:[6,e.TYPES.INTEGER],mdLinkDeviceCompanionStage:[4,o("WAWebWamEnumMdLinkDeviceCompanionStage").MD_LINK_DEVICE_COMPANION_STAGE],mdLinkDeviceExperienceId:[11,e.TYPES.INTEGER],mdRegAttemptId:[9,e.TYPES.STRING],mdSessionId:[1,e.TYPES.STRING],mdTimestampS:[7,e.TYPES.INTEGER],mdWasUpgraded:[5,e.TYPES.BOOLEAN],userLocale:[15,e.TYPES.STRING]},[1,1,1],"regular"]},{MdLinkDeviceCompanion:[]});l.MdLinkDeviceCompanionWamEvent=s}),98);
__d("WAWebWamDeviceLinkReporter",["WABase64","WABinary","WACryptoSha256","WAResolvable","WATimeUtils","WAWebAppTracker","WAWebLinkDeviceExperience","WAWebMdLinkDeviceCompanionWamEvent","WAWebWamEnumMdLinkDeviceCompanionStage","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e=null,s=null,u=null,c=null;function d(e,t,n){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,r){e=new(o("WAWebMdLinkDeviceCompanionWamEvent")).MdLinkDeviceCompanionWamEvent;var a=yield f(t,n);return s={regStartTime:r,sessionId:a},a}),m.apply(this,arguments)}function p(e){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n;e&&(yield(n=c)==null?void 0:n.promise,c=new(o("WAResolvable")).Resolvable,u=t,yield h())}),_.apply(this,arguments)}function f(e,t){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=new(o("WABinary")).Binary;n.writeBuffer(e),n.write(95),n.writeBuffer(t);var r=n.readByteArrayView(),a=yield o("WACryptoSha256").sha256(r);return o("WABase64").encodeB64(a)}),g.apply(this,arguments)}function h(t){var n;if(!(!e||!s)){var r=s,a=o("WATimeUtils").unixTimeWithoutClockSkewCorrection()-r.regStartTime;if(u!=null){e=new(o("WAWebMdLinkDeviceCompanionWamEvent")).MdLinkDeviceCompanionWamEvent({mdDurationS:a,mdSessionId:r.sessionId,mdTimestampS:r.regStartTime,mdLinkDeviceCompanionErrorCode:t==null?0:t,mdLinkDeviceCompanionStage:u,mdLinkDeviceExperienceId:o("WAWebLinkDeviceExperience").getWebCompanionLinkDeviceExperienceId()});var i=e;o("WAWebAppTracker").attachWAMAppContext(i,a*1e3),i.commitAndWaitForFlush(!0),(n=c)==null||n.resolve(),(t!=null||i.mdLinkDeviceCompanionStage===o("WAWebWamEnumMdLinkDeviceCompanionStage").MD_LINK_DEVICE_COMPANION_STAGE.COMPLETE)&&(e=null,s=null,u=null)}}}l.initDeviceLinkEvent=d,l.setDeviceLinkPairStage=p,l.commitDeviceLinkEvent=h}),98);
__d("WAWebRegisterPassiveTasks",["WAAbortError","WACustomError","WALogger","WAPromiseLoop","WAPromiseTimeout","WAWebABPropsLocalStorage","WAWebABPropsWamGlobals","WAWebAbPropsSyncJob","WAWebClearDanglingReceipts","WAWebGetMessageCache","WAWebHandleOfflineAbProps","WAWebOnlineDanglingReceipts","WAWebPassiveModeManager","WAWebSchemaDanglingReceipt","WAWebSignalStoreApi","WAWebUploadPrekeysForRegTask","WAWebUserPrefsGeneral","WAWebWamDeviceLinkReporter","WAWebWamEnumMdLinkDeviceCompanionStage","asyncToGeneratorRuntime","cr:10195","getErrorSafe","gkx"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L=4,E=60*1e3;function k(){return I.apply(this,arguments)}function I(){return I=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=yield o("WAWebSignalStoreApi").waSignalStore.getServerHasPreKeys();if(!t){yield o("WAWebWamDeviceLinkReporter").setDeviceLinkPairStage(o("WAWebWamEnumMdLinkDeviceCompanionStage").MD_LINK_DEVICE_COMPANION_STAGE.UPLOAD_PREKEYS);var a=r("WAWebUploadPrekeysForRegTask")();a.startKeyGenerationStage(),o("WAWebPassiveModeManager").PassiveTaskManager.registerPassiveTask("KeyUpload",function(t){return o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[passive] start key upload"]))),a.startKeyUploadStage().then(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[passive] key upload complete"]))),yield o("WAWebWamDeviceLinkReporter").setDeviceLinkPairStage(o("WAWebWamEnumMdLinkDeviceCompanionStage").MD_LINK_DEVICE_COMPANION_STAGE.COMPLETE),yield o("WAWebWamDeviceLinkReporter").commitDeviceLinkEvent()})).catch((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["error while uploading prekeys, ",""])),e).verbose().sendLogs("error while uploading prekeys"),yield o("WAWebWamDeviceLinkReporter").commitDeviceLinkEvent(-1)});return function(t){return e.apply(this,arguments)}})())})}(r("gkx")("17264")||r("gkx")("26259")||!o("WAWebABPropsLocalStorage").isABPropsAfterFirstSync()||(yield o("WAWebUserPrefsGeneral").getWhatsAppWebExternalBetaDirtyBitIdb()))&&(yield o("WAWebPassiveModeManager").PassiveTaskManager.registerPassiveTask("SyncABProps",function(e){return o("WAWebAbPropsSyncJob").syncABPropsTask().catch(function(e){o("WALogger").WARN(c||(c=babelHelpers.taggedTemplateLiteralLoose(["error while sync ab props prekeys, ",""])),e).verbose()})}),o("WAWebUserPrefsGeneral").setWhatsAppWebExternalBetaDirtyBitIdb(!1),o("WAWebABPropsWamGlobals").setAbPropDependingGlobalWamAttributes())}),I.apply(this,arguments)}function T(){return D.apply(this,arguments)}function D(){return D=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){o("WAWebOnlineDanglingReceipts").hasOnlineDanglingReceipts()&&o("WAWebPassiveModeManager").PassiveTaskManager.registerPassiveTask("SendOnlineDanglingReceipts",n("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["[passive] start sending online dangling receipts"]))),yield o("WAWebOnlineDanglingReceipts").sendAndClearOnlineDanglingReceipts(),o("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[passive] sending online dangling receipts complete"])))}catch(e){o("WALogger").ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["error while sending online dangling receipts, ",""])),e).verbose().sendLogs("send-online-dangling-receipts-failed")}}));var e=yield o("WAWebSchemaDanglingReceipt").getTable().all(),t=e.length>0,a=o("WAWebGetMessageCache").getMessageCache().size()>0||o("WAWebGetMessageCache").getMessageCache().checkpointQueue.size()>0;(t||a)&&o("WAWebPassiveModeManager").PassiveTaskManager.registerPassiveTask("SendDanglingReceipts",(function(){var i=n("asyncToGeneratorRuntime").asyncToGenerator(function*(n){if(t)try{o("WALogger").LOG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["[passive] sending dangling receipts"]))),yield o("WAWebClearDanglingReceipts").sendAndClearDanglingReceipts(e,n),o("WALogger").LOG(f||(f=babelHelpers.taggedTemplateLiteralLoose(["[passive] sending dangling receipts: done"])))}catch(e){if(r("getErrorSafe")(e).name===o("WAAbortError").ABORT_ERROR)throw e;o("WALogger").ERROR(g||(g=babelHelpers.taggedTemplateLiteralLoose(["[passive] sending dangling receipts failed: ",""])),e).verbose().sendLogs("send-and-clear-dangling-receipts-failed")}a&&(yield $())});return function(e){return i.apply(this,arguments)}})())}),D.apply(this,arguments)}var x=null;function $(){return P.apply(this,arguments)}function P(){return P=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(x)return o("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[passive] flush message cache: skip"]))),x;try{o("WALogger").LOG(y||(y=babelHelpers.taggedTemplateLiteralLoose(["[passive] flush message cache"])));var e=o("WAPromiseLoop").promiseLoop((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){o("WALogger").LOG(C||(C=babelHelpers.taggedTemplateLiteralLoose(["[passive] flush message cache: size: ",", queue size: ",", generation: ",""])),o("WAWebGetMessageCache").getMessageCache().size(),o("WAWebGetMessageCache").getMessageCache().checkpointQueue.size(),n),o("WAWebGetMessageCache").getMessageCache().size()>0&&o("WAWebGetMessageCache").getMessageCache().createSnapshot(),yield o("WAWebGetMessageCache").getMessageCache().checkpointQueue.wait(),o("WAWebGetMessageCache").getMessageCache().size()===0&&o("WAWebGetMessageCache").getMessageCache().checkpointQueue.size()===0?e():n+1>=L&&(o("WALogger").WARN(b||(b=babelHelpers.taggedTemplateLiteralLoose(["[passive] flush message cache: stop after "," attempts"])),L),e())});return function(t,n,r){return e.apply(this,arguments)}})());x=o("WAPromiseTimeout").promiseTimeout(e,E),yield x,o("WALogger").LOG(v||(v=babelHelpers.taggedTemplateLiteralLoose(["[passive] flush message cache: done"])))}catch(e){if(e instanceof o("WACustomError").TimeoutError){var t=o("WALogger").ERROR(S||(S=babelHelpers.taggedTemplateLiteralLoose(["[passive] flush message cache: timeout"])));o("WAWebHandleOfflineAbProps").isNonBlockingOfflineResumeExpEnabled()&&(t=t.tags("offline-resume-experimental")),t.sendLogs("passive-flush-message-cache-timeout",{sampling:.01})}else o("WALogger").ERROR(R||(R=babelHelpers.taggedTemplateLiteralLoose(["[passive] flush message cache failed: ",""])),e).verbose().sendLogs("passive-flush-message-cache-failed",{sampling:.01})}finally{x=null}}),P.apply(this,arguments)}l.registerPassiveTaskForStartUp=k,l.registerPassiveTasksForConnect=T}),98);
__d("WAWebGetClientPayloadForLogin",["WALogger","WAWebClientPayload","WAWebPassiveModeManager","WAWebRegisterPassiveTasks","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s;function u(e){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=t||{passive:!1,pull:!0},r=self.performance.now();yield o("WAWebRegisterPassiveTasks").registerPassiveTasksForConnect(),o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[comms] getClientPayloadForLogin registered passive tasks in ","ms"])),Math.ceil(self.performance.now()-r)).tags("launch-socket-chat"),n.passive=o("WAWebPassiveModeManager").PassiveTaskManager.shouldConnectAsPassiveMode();var a=self.performance.now(),i=yield o("WAWebClientPayload").getClientPayloadForLogin(n);return o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[comms] getClientPayloadForLogin generated payload in ","ms"])),Math.ceil(self.performance.now()-a)).tags("launch-socket-chat"),i}),c.apply(this,arguments)}l.getClientPayloadForLogin=u}),98);
__d("WAWebGetClientPayloadForRegistration",["Promise","WALogger","WAWebClientPayload","WAWebSignalStoreApi","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){var e,s,u;function c(e){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var a=self.performance.now(),i=yield(u||(u=n("Promise"))).all([o("WAWebSignalStoreApi").waSignalStore.getRegistrationInfo(),o("WAWebSignalStoreApi").waSignalStore.getSignedPreKey()]),l=i[0],c=i[1];if(o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[comms] getClientPayloadForRegistration fetched signalInfo in ","ms"])),Math.ceil(self.performance.now()-a)).tags("launch-socket-chat"),!c||!l)throw r("err")("Invalid signal credentials");var d=self.performance.now(),m=yield o("WAWebClientPayload").getClientPayloadForRegistration(l,c,t);return o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[comms] getClientPayloadForRegistration generated payload in ","ms"])),Math.ceil(self.performance.now()-d)).tags("launch-socket-chat"),m}),d.apply(this,arguments)}l.getClientPayloadForRegistration=c}),98);
__d("WAWebEventsWaitForEvent",["Promise","WAAbortError","WAWebBoolFunc"],(function(t,n,r,o,a,i,l){var e;function s(t,r,a,i){return a===void 0&&(a=o("WAWebBoolFunc").returnTrue),i!=null&&i.aborted?(e||(e=n("Promise"))).reject(new(o("WAAbortError")).AbortError):new(e||(e=n("Promise")))(function(e,n){var l=function(){a.apply(this,arguments)&&(u==null||u(),e.apply(this,arguments))},s=function(){u==null||u(),n(new(o("WAAbortError")).AbortError)},u=function(){t.removeEventListener(r,l),i==null||i.removeEventListener("abort",s),u=null};i==null||i.addEventListener("abort",s),t.addEventListener(r,l)})}l.default=s}),98);
__d("WAWebEventsWaitForOffline",["WAWebEventsWaitForEvent"],(function(t,n,r,o,a,i,l){function e(e){return r("WAWebEventsWaitForEvent")(window,"offline",void 0,e)}l.default=e}),98);
__d("WAWebWatchedSocket",["WAAbortError","WABinary","WASocketTransport","WAWebEventsWaitForOffline","WAWebNoop"],(function(t,n,r,o,a,i,l){var e=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.dataToSend=new(o("WABinary")).Binary,n.wsUrl=t.url,n.$WatchedSocket$p_2=new AbortController,n.$WatchedSocket$p_1=r("WAWebEventsWaitForOffline")(n.$WatchedSocket$p_2.signal).then(function(){return n.close()}).catch(o("WAAbortError").catchAbort(r("WAWebNoop"))),n}return babelHelpers.inheritsLoose(t,e),t})(o("WASocketTransport").WebSocketTransport);l.WatchedSocket=e}),98);
__d("WAWebOpenSocket",["Promise","WAAbortError","WALogger","WANullthrows","WAPromiseRetryLoop","WAWebCookieDomain","WAWebLocalStorage","WAWebMiscErrors","WAWebWatchedSocket","gkx"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g=["wss://web.whatsapp.com/ws/chat","wss://web.whatsapp.com:5222/ws/chat"];function h(){if(!r("gkx")("26258")){var e,t=(e=r("WANullthrows")(r("WAWebLocalStorage")).getItem("wdev-pinning-cookie-value"))!=null?e:"";document.cookie=["sticky_routing="+t.replace(/\"/g,""),"path=/","domain="+o("WAWebCookieDomain").COOKIE_DOMAIN,"secure"].join(";")}}function y(t){t.code!==1e3&&o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[socket] Immediate socket closure: closed: "," ",""])),t.code,t.reason).tags("socket")}function C(e,t){var n=e!=null?"[socket] "+e+" closed. code: "+t.code:"[socket] closed connection during initialization. Code: "+t.code;e:{if(t.code===1e3||t.code===1001){o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[socket] ",""])),n).tags("socket");break e}if(t.code===1006){e!=null&&o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[socket] ",""])),n).tags("socket"),o("WALogger").COUNT(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[socket] ",""])),n).tags("socket");break e}if(t.code===1002||t.code===1003||t.code===1007||t.code===1008||t.code===1009||t.code===1010||t.code===1011||t.code===1015){o("WALogger").ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["[socket] ",""])),n).tags("socket");break e}{o("WALogger").ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[socket] ",". Reason: ",", clean: ",""])),n,t.reason,t.wasClean).tags("socket");break e}}}function b(e){var t=new AbortController;return new(f||(f=n("Promise")))(function(n,r){var a=!1,i=[];e.forEach(function(l){v(l,t.signal,y,C).then(function(e){a?(t.abort(),e.close(1e3,"loser socket")):(a=!0,o("WALogger").LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["[socket] openWebSocketsConcurrently opened socket with "," ws."])),l).tags("socket"),n(e))}).catch(function(t){t.name!=="AbortError"&&(o("WALogger").WARN(_||(_=babelHelpers.taggedTemplateLiteralLoose(["[socket] openWebSocketsConcurrently socket with "," failed: ",""])),l,t).tags("socket"),i.push(t),i.length===e.length&&r(t))})})})}function v(e,t,r,a){var i=new WebSocket(e);return i.binaryType="arraybuffer",new(f||(f=n("Promise")))(function(e,n){i.onopen=e,i.onclose=function(e){if(t!=null&&t.aborted){n(new(o("WAAbortError")).AbortError);return}r==null||r(e),a==null||a(null,e),n(new(o("WAWebMiscErrors")).SocketError(e))}}).then(function(){return i})}function S(){return{jitter:.1,max:1e4,algo:{type:"fibonacci",first:1e3,second:1e3},relativeDelay:!0}}function R(){return self.navigator!=null?self.navigator.onLine:!0}function L(e){var t=g.map(function(t){return e!=null?t+"?ED="+e:t}),n=!0;h();var r=function(){R()&&n===!1&&(n=!0,a.reset())},a=new(o("WAPromiseRetryLoop")).PromiseRetryLoop({name:"socketOpener",timer:S(),code:function(r){return b(t).then(function(e){r(new(o("WAWebWatchedSocket")).WatchedSocket(e))}).catch(function(){n=R()})}});return self.addEventListener("online",r),a.start(),a.promise().finally(function(){self.removeEventListener("online",r)})}l.openWebSocket=L}),98);
__d("WAWebSocketConstants",[],(function(t,n,r,o,a,i){var e={OPENING:"OPENING",PAIRING:"PAIRING",UNPAIRED:"UNPAIRED",UNPAIRED_IDLE:"UNPAIRED_IDLE",CONNECTED:"CONNECTED",CONFLICT:"CONFLICT",UNLAUNCHED:"UNLAUNCHED",PROXYBLOCK:"PROXYBLOCK",TOS_BLOCK:"TOS_BLOCK",SMB_TOS_BLOCK:"SMB_TOS_BLOCK",DEPRECATED_VERSION:"DEPRECATED_VERSION",SCREEN_LOCKED:"SCREEN_LOCKED"},l={DISCONNECTED:"DISCONNECTED",SYNCING:"SYNCING",RESUMING:"RESUMING",CONNECTED:"CONNECTED"};i.SOCKET_STATE=e,i.SOCKET_STREAM=l}),66);
__d("WAWebDirectConnectionUtils",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e}function l(e){return e}i.stringToCertificateString=e,i.certificateStringToString=l}),66);
__d("WAWebDirectConnectionX509",["JSResourceForInteraction","Promise","WALogger","WAWebDirectConnectionUtils","asyncToGeneratorRuntime","filterNulls","pvutils-1.0.17","requireDeferred"],(function(t,n,r,o,a,i,l){var e,s,u,c,d=r("requireDeferred")("asn1js-2.1.1").__setRef("WAWebDirectConnectionX509"),m="-----BEGIN CERTIFICATE-----",p="-----END CERTIFICATE-----",_="(?:"+m+")((?:.|\n)*?)(?:"+p+")",f="2.5.4.3";function g(){return r("JSResourceForInteraction")("pkijs").__setRef("WAWebDirectConnectionX509").load()}function h(t){var n="";try{n=atob(t)}catch(t){o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[direct-connection] base64 decoding failed with ",""])),t.toString())}return C(n)}function y(e){return btoa(b(e))}function C(e){for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=e.charCodeAt(r);return n.buffer}function b(e){return String.fromCharCode.apply(String,Array.from(new Uint8Array(e)))}function v(e,t){return S.apply(this,arguments)}function S(){return S=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield g(),r=n.CertificateChainValidationEngine;return new r({trustedCerts:t,certs:e})}),S.apply(this,arguments)}function R(e,t){return e.flat().reduce(function(e,n){return e.every(function(e){return!o("pvutils-1.0.17").isEqualBuffer(e.tbs,n.tbs)})&&t.includes(n)?[].concat(e,[n]):e},[])}function L(){return E.apply(this,arguments)}function E(){return E=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield r("JSResourceForInteraction")("WAWebDirectConnectionCaBundle").__setRef("WAWebDirectConnectionX509").load(),t=e.CA_BUNDLE;return k(t)}),E.apply(this,arguments)}function k(e){return I.apply(this,arguments)}function I(){return I=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield g(),a=t.Certificate,i=yield new(c||(c=n("Promise")))(function(e){d.onReady(function(t){e(t().fromBER)})});return r("filterNulls")(Array.from(e.matchAll(new RegExp(_,"gm")),function(e){var t=e[0],n=e[1],r=i(h(n)),l=r.result,u;try{u=l.error?null:new a({schema:l})}catch(e){o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[direct-connection] certificate chain parsing from Get Public Key IQ failed with ",""])),e.toString())}return u}))}),I.apply(this,arguments)}function T(e,t){return D.apply(this,arguments)}function D(){return D=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){return(yield v(e,t)).verify()}),D.apply(this,arguments)}function x(e,t){return $.apply(this,arguments)}function $(){return $=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var r=yield v(e,t),a=R(yield(c||(c=n("Promise"))).all(e.map(function(e){return r.findIssuer(e,r)})),t);return a.length===0?(o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[direct-connection] no trusted root certificates could be found for ",""])),P(e[0])),null):a}),$.apply(this,arguments)}function P(e){var t;return(t=e.issuer.typesAndValues.find(function(e){var t=e.type;return t===f}))==null?void 0:t.value.valueBlock.value}function N(e){return o("WAWebDirectConnectionUtils").stringToCertificateString(e.map(function(e){var t=y(e.toSchema(!0).toBER(!1)).split(/(.{0,64})/g).filter(function(e){return e!==""}).join("\n");return m+"\n"+t+"\n"+p}).join("\n"))}function M(){return w.apply(this,arguments)}function w(){return w=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield g(),t=e.getEngine;return t()}),w.apply(this,arguments)}function A(e){return F.apply(this,arguments)}function F(){return F=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield g(),n=t.getRandomValues;return n(e)}),F.apply(this,arguments)}function O(e,t){return B.apply(this,arguments)}function B(){return B=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield e.getPublicKey({algorithm:{algorithm:{name:"RSA-OAEP",hash:{name:"SHA-256"}},usages:["encrypt"]}}),r=yield M(),o=yield r.subtle.encrypt({name:"RSA-OAEP"},n,t);return y(o)}),B.apply(this,arguments)}l.base64ToArrayBuffer=h,l.arrayBufferToBase64=y,l.stringToArrayBuffer=C,l.arrayBufferToString=b,l.fetchFromCABundle=L,l.extractCertificates=k,l.validateCertificates=T,l.genRootIssuers=x,l.encodeToString=N,l.getEngine=M,l.getRandomValues=A,l.encryptWithPublicKey=O}),98);
__d("WAWebUserPrefsScreenLock",["WAArrayBufferUtils","WABase64","WABinary","WAWebDbEncryptionKey","WAWebDirectConnectionX509","WAWebPermanentStorage","WAWebUserPrefsKeys","WAWebUserPrefsStore","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){function e(){var e;T(o("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_DURATION_SECONDS);var t=parseInt((e=r("WAWebUserPrefsStore").getUser(o("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_DURATION_SECONDS))!=null?e:0,10);return t!==0}function s(){return T(o("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_DURATION_SECONDS),r("WAWebUserPrefsStore").getUser(o("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_DURATION_SECONDS)}function u(){var e;return T(o("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_DURATION_SECONDS),(e=r("WAWebUserPrefsStore").getUser(o("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_DURATION_SECONDS))!=null?e:0}function c(e){r("WAWebUserPrefsStore").setUser(o("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_DURATION_SECONDS,e)}function d(e){r("WAWebUserPrefsStore").setUser(o("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_IV,e)}function m(){return T(o("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_IV),r("WAWebUserPrefsStore").getUser(o("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_IV)}function p(e){return r("WAWebUserPrefsStore").setUser(o("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_SALT,e,{shouldWriteToIdb:!1})}function _(){return T(o("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_SALT,!1),r("WAWebUserPrefsStore").getUser(o("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_SALT)}function f(e){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=I(),n=yield R(String(e),t);return r("WAWebUserPrefsStore").setUser(o("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_ITERATIONS,n+"_"+t)}),g.apply(this,arguments)}function h(){return y.apply(this,arguments)}function y(){return y=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){T(o("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_ITERATIONS);var e=r("WAWebUserPrefsStore").getUser(o("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_ITERATIONS);if(e==null)return null;if(typeof e=="number")return parseInt(e,10);var t=e.split("_"),n=t[0],a=t[1];if(n==null||a==null)return null;var i=yield E(n,a);return parseInt(i,10)}),y.apply(this,arguments)}function C(){return b.apply(this,arguments)}function b(){return b=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){T(o("WAWebUserPrefsKeys").MD_KEYS.SCREEN_UNLOCK_TRY_COUNT);var e=r("WAWebUserPrefsStore").getUser(o("WAWebUserPrefsKeys").MD_KEYS.SCREEN_UNLOCK_TRY_COUNT);if(e==null)return 0;if(typeof e=="number")return parseInt(e,10);var t=e.split("_"),n=t[0],a=t[1],i=yield E(n,a);return parseInt(i,10)}),b.apply(this,arguments)}function v(e,t){return S.apply(this,arguments)}function S(){return S=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=I(),a=yield R(String(e),n);t.aborted||r("WAWebUserPrefsStore").setUser(o("WAWebUserPrefsKeys").MD_KEYS.SCREEN_UNLOCK_TRY_COUNT,a+"_"+n)}),S.apply(this,arguments)}function R(e,t){return L.apply(this,arguments)}function L(){return L=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=new Uint8Array(o("WABase64").decodeB64(t)),r=o("WAWebDbEncryptionKey").DbEncKeyStore.getEncKeys()[0],a=yield self.crypto.subtle.encrypt({iv:n,name:"AES-CBC"},r.key,o("WAArrayBufferUtils").stringToArrayBuffer(e));return o("WABase64").encodeB64(a)}),L.apply(this,arguments)}function E(e,t){return k.apply(this,arguments)}function k(){return k=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=new Uint8Array(o("WABase64").decodeB64(t));yield o("WAWebDbEncryptionKey").DbEncKeyStore.waitForInit();var r=o("WAWebDbEncryptionKey").DbEncKeyStore.getEncKeys()[0],a=yield self.crypto.subtle.decrypt({iv:n,name:"AES-CBC"},r.key,o("WABase64").decodeB64(e));return o("WAWebDirectConnectionX509").arrayBufferToString(a)}),k.apply(this,arguments)}function I(){var e=new Uint8Array(16);self.crypto.getRandomValues(e);var t=new(o("WABinary")).Binary(e).readByteArrayView(16);return o("WABase64").encodeB64(t)}function T(e,t){var n=r("WAWebUserPrefsStore").get(e);if(n!=null){var o=t!=null?{shouldWriteToIdb:t}:null;r("WAWebUserPrefsStore").setUser(e,n,o!=null?o:{}),r("WAWebPermanentStorage").removeItem(e)}}l.getScreenLockEnabled=e,l.getScreenLockDurationForLogging=s,l.getScreenLockDurationInSeconds=u,l.setScreenLockDurationInSeconds=c,l.setScreenLockIvString=d,l.getScreenLockIvString=m,l.setScreenLockSalt=p,l.getScreenLockSalt=_,l.setScreenLockIterations=f,l.getScreenLockIterations=h,l.getScreenUnlockTryCount=C,l.setScreenUnlockTryCount=v}),98);
__d("WAWebUserPrefsInfoStore",["Promise","WAArrayBufferUtils","WABase64","WABinary","WALogger","WAWebCmd","WAWebCryptoCurve25519","WAWebDbEncryptionKey","WAWebLogoutReasonConstants","WAWebSocketConstants","WAWebSocketLogoutJob","WAWebUserPrefsMultiDevice","WAWebUserPrefsScreenLock","asyncToGeneratorRuntime","cr:1234","gkx"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f=(e=n("cr:1234"))!=null?e:{},g=f.LockScreenResolvable,h=128,y="AES-GCM",C="PBKDF2",b=r("gkx")("26256")?1e4:6e5,v=(function(){function e(){this.cachedPasscodeDerivedKey=null}var t=e.prototype;return t.resetCachedPasscodeDerivedKey=function(){this.cachedPasscodeDerivedKey=null},t.getCertficateChain=function(t){var e=o("WAArrayBufferUtils").arrayBufferToString(t);try{var n=JSON.parse(e),r=n.intermediate,a=n.leaf;return{intermediate:{key:o("WABase64").decodeB64(r.key),notAfter:Number(r.notAfter),notBefore:Number(r.notBefore)},leaf:{key:o("WABase64").decodeB64(a.key),notAfter:Number(a.notAfter),notBefore:Number(a.notBefore)}}}catch(e){return o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Error parsing certificate chain: ",""])),e),null}},t.get=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=o("WAWebUserPrefsMultiDevice").getNoiseInfo();if(!e)return null;var t=this.$1();if(!t)return null;if(e=yield this.$2(e,t),o("WAWebUserPrefsScreenLock").getScreenLockEnabled()){o("WAWebCmd").Cmd.setSocketState(o("WAWebSocketConstants").SOCKET_STATE.SCREEN_LOCKED);var n=yield this.passcodeUnlockNoiseInfo(e);n&&(e=n)}var r=yield this.$3(e);return r?e:(o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Decrypted noise key was invalid."]))).tags("info-store"),null)});function t(){return e.apply(this,arguments)}return t})(),t.setCertificateChain=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield this.get();if(t)try{var n=babelHelpers.extends({},e.intermediate,{key:o("WABase64").encodeB64(e.intermediate.key)}),r=babelHelpers.extends({},e.leaf,{key:o("WABase64").encodeB64(e.leaf.key)}),a=JSON.stringify({intermediate:n,leaf:r});return t.certificateChainBuffer=o("WAArrayBufferUtils").stringToArrayBuffer(a),this.set(t)}catch(e){o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Error serializing certificate chain: ",""])),e).sendLogs("handshake-serialization-failed")}});function t(t){return e.apply(this,arguments)}return t})(),t.set=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=this,r=e;if(this.cachedPasscodeDerivedKey!=null){var a=this.cachedPasscodeDerivedKey,i=r,l=i.certificateChainBuffer,s=i.recoveryToken,u=i.staticKeyPair,c=u.privKey,d=u.pubKey;try{var m=yield(_||(_=n("Promise"))).all([s,d,c,l].map(function(e){return t.encryptNoiseWithPasscodeDerivedKey(e,a)}));m[0]&&m[1]&&m[2]&&(r={recoveryToken:m[0],staticKeyPair:{pubKey:m[1],privKey:m[2]},certificateChainBuffer:m[3]})}catch(e){}}var p=new Uint8Array(64);self.crypto.getRandomValues(p);var f=this.$4(p);yield this.$5(f);var g=yield(_||(_=n("Promise"))).all([this.$6(r.recoveryToken,f[0]),this.$6(r.staticKeyPair.pubKey,f[1]),this.$6(r.staticKeyPair.privKey,f[2]),r.certificateChainBuffer?this.$6(r.certificateChainBuffer,f[3]):(_||(_=n("Promise"))).resolve(void 0)]),h=g[0],y=g[1],C=g[2],b=g[3];return r.recoveryToken=h,r.staticKeyPair.pubKey=y,r.staticKeyPair.privKey=C,r.certificateChainBuffer=b,o("WAWebUserPrefsMultiDevice").setNoiseInfo(r)});function t(t){return e.apply(this,arguments)}return t})(),t.$5=function(t){return o("WAWebUserPrefsMultiDevice").setNoiseInfoIv(t.map(o("WABase64").encodeB64))},t.$1=function(){var e=o("WAWebUserPrefsMultiDevice").getNoiseInfoIv();return e?e.map(function(e){return new Uint8Array(o("WABase64").decodeB64(e))}):null},t.$4=function(t){var e=new(o("WABinary")).Binary(t);return[e.readByteArrayView(16),e.readByteArrayView(16),e.readByteArrayView(16),e.readByteArrayView(16)]},t.$6=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=o("WAWebDbEncryptionKey").DbEncKeyStore.getEncKeys()[0],r=yield self.crypto.subtle.encrypt({iv:t,name:"AES-CBC"},n.key,e);return r});function t(t,n){return e.apply(this,arguments)}return t})(),t.$2=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var r=yield(_||(_=n("Promise"))).all([this.$7(e.recoveryToken,t[0]),this.$7(e.staticKeyPair.pubKey,t[1]),this.$7(e.staticKeyPair.privKey,t[2]),e.certificateChainBuffer!=null?this.$7(e.certificateChainBuffer,t[3]):(_||(_=n("Promise"))).resolve(void 0)]),o=r[0],a=r[1],i=r[2],l=r[3];return e.certificateChainBuffer=l,e.recoveryToken=o,e.staticKeyPair.pubKey=a,e.staticKeyPair.privKey=i,e});function t(t,n){return e.apply(this,arguments)}return t})(),t.$7=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=o("WAWebDbEncryptionKey").DbEncKeyStore.getEncKeys()[0],r=yield self.crypto.subtle.decrypt({iv:t,name:"AES-CBC"},n.key,e);return r});function t(t,n){return e.apply(this,arguments)}return t})(),t.$3=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=!0;try{for(var n=yield o("WAWebCryptoCurve25519").keyPair(e.staticKeyPair.privKey),r=n.pubKey,a=new Uint8Array(r),i=new Uint8Array(e.staticKeyPair.pubKey),l=0;l<a.length;l++)if(a[l]!==i[l]){t=!1;break}}catch(e){o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Decrypted noise key failed validation."]))).tags("info-store"),t=!1}return t});function t(t){return e.apply(this,arguments)}return t})(),t.lockNoiseInfo=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield this.deriveKeyFromPasscode(e);this.createScreenLockIv();var n=yield this.get();if(!n||!n.staticKeyPair)return!1;try{return this.cachedPasscodeDerivedKey=t,yield this.set(n),!0}catch(e){this.cachedPasscodeDerivedKey=null}return!1});function t(t){return e.apply(this,arguments)}return t})(),t.passcodeUnlockNoiseInfo=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){if(t===void 0&&(t=!1),g==null)return null;var n;if(this.cachedPasscodeDerivedKey==null){var r;t?r=yield g.waitForPasscodeAfterIncorrectAttempt():r=yield g.waitForPasscode(),n=yield this.deriveKeyFromPasscode(r)}else n=this.cachedPasscodeDerivedKey;var a=yield this.getUnlockedNoiseInfo(e,n);return!a||!(yield this.$3(a))?(o("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Decrypted noise key was invalid."]))).tags("info-store"),this.passcodeUnlockNoiseInfo(e,!0)):(g.correctPasscodeEntered(n),o("WAWebCmd").Cmd.setSocketState(o("WAWebSocketConstants").SOCKET_STATE.OPENING),a)});function t(t,n){return e.apply(this,arguments)}return t})(),t.getUnlockedNoiseInfo=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var r=this,o=e.certificateChainBuffer,a=e.recoveryToken,i=e.staticKeyPair,l=i.privKey,s=i.pubKey;try{var u=yield(_||(_=n("Promise"))).all([a,s,l,o].map(function(e){return r.decryptNoiseWithPasscodeDerivedKey(e,t)}));if(u[0]&&u[1]&&u[2])return this.cachedPasscodeDerivedKey=t,{recoveryToken:u[0],staticKeyPair:{pubKey:u[1],privKey:u[2]},certificateChainBuffer:u[3]}}catch(e){return null}});function t(t,n){return e.apply(this,arguments)}return t})(),t.removeLockOnNoiseInfo=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=o("WAWebUserPrefsMultiDevice").getNoiseInfo();if(!t)return!1;var n=this.$1();if(!n)return!1;t=yield this.$2(t,n);var r=yield this.deriveKeyFromPasscode(e),a=yield this.getUnlockedNoiseInfo(t,r);if(a!=null){var i=yield this.$3(a);return i?(this.cachedPasscodeDerivedKey=null,yield this.set(a),o("WAWebUserPrefsScreenLock").setScreenLockSalt(null),o("WAWebUserPrefsScreenLock").setScreenLockIvString(""),yield o("WAWebUserPrefsScreenLock").setScreenLockIterations(null),!0):(o("WALogger").LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Decrypted noise key was invalid."]))).tags("info-store"),!1)}return!1});function t(t){return e.apply(this,arguments)}return t})(),t.deriveKeyFromPasscode=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=new TextEncoder().encode(e),n=yield self.crypto.subtle.importKey("raw",t,{name:C},!1,["deriveKey"]),r=yield this.getOrGenScreenLockSalt(),o=yield self.crypto.subtle.deriveKey({name:C,hash:"SHA-256",salt:r,iterations:yield this.getScreenLockIterationCount()},n,{name:y,length:h},!1,["encrypt","decrypt"]);return o});function t(t){return e.apply(this,arguments)}return t})(),t.getOrGenScreenLockSalt=function(){var e=null;return o("WAWebUserPrefsScreenLock").getScreenLockEnabled()||(e=new Uint8Array(h),self.crypto.getRandomValues(e),e=btoa(String.fromCharCode.apply(String,Array.from(new Uint8Array(e)))),o("WAWebUserPrefsScreenLock").setScreenLockSalt(e)),e=o("WAWebUserPrefsScreenLock").getScreenLockSalt(),e==null&&o("WAWebSocketLogoutJob").socketLogout(o("WAWebLogoutReasonConstants").LogoutReason.MissingScreenLockSalt),e=Uint8Array.from(atob(e),function(e){return e.charCodeAt(0)}),(_||(_=n("Promise"))).resolve(e)},t.createScreenLockIv=function(){var e=new Uint8Array(16);self.crypto.getRandomValues(e);var t=new(o("WABinary")).Binary(e).readByteArrayView(16);o("WAWebUserPrefsScreenLock").setScreenLockIvString(o("WABase64").encodeB64(t))},t.getScreenLockIvArray=function(){var e=o("WAWebUserPrefsScreenLock").getScreenLockIvString();return e?new Uint8Array(o("WABase64").decodeB64(e)):null},t.encryptNoiseWithPasscodeDerivedKey=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){if(e==null)return null;var n=this.getScreenLockIvArray();if(!n)return null;var r=yield self.crypto.subtle.encrypt({iv:n,name:y},t,e);return r});function t(t,n){return e.apply(this,arguments)}return t})(),t.decryptNoiseWithPasscodeDerivedKey=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){if(e==null)return null;var n=this.getScreenLockIvArray();if(!n)return null;var r=yield self.crypto.subtle.decrypt({iv:n,name:y},t,e);return r});function t(t,n){return e.apply(this,arguments)}return t})(),t.calculatePBKDF2Iterations=function(){var e=navigator.hardwareConcurrency;return b*Math.max(1,Number.isNaN(e)?1:e)},t.getScreenLockIterationCount=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield o("WAWebUserPrefsScreenLock").getScreenLockIterations();return(!o("WAWebUserPrefsScreenLock").getScreenLockEnabled()||e==null)&&(e=this.calculatePBKDF2Iterations(),yield o("WAWebUserPrefsScreenLock").setScreenLockIterations(e)),e});function t(){return e.apply(this,arguments)}return t})(),e})(),S=new v;l.waNoiseInfo=S}),98);
__d("WAWebProcessCertificate",["WALogger","WAVerifyChainCertificateWA6","WAWebDbEncryptionKey","WAWebUserPrefsInfoStore","WAWebUserPrefsScreenLock","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){var e,s,u,c,d;function m(e){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=t.certificate,a=t.isRegistered,i=t.serverStatic;o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[socket] processCertificate start"]))).tags("handshake");var l=o("WAVerifyChainCertificateWA6").verifyChainCertificateWA6(n,i);if(o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[socket] processCertificate finished with success: ",""])),l.success).tags("handshake"),!l.success)throw r("err")("[socket] processCertificate error: "+l.error);if(a&&!o("WAWebUserPrefsScreenLock").getScreenLockEnabled()){var m=l.value,p=m.intermediate,_=m.leaf;_&&p&&(o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[socket] persisting cert chain start"]))).tags("handshake"),o("WAWebDbEncryptionKey").DbEncKeyStore.waitForInit().then(function(){o("WAWebUserPrefsInfoStore").waNoiseInfo.setCertificateChain({intermediate:{key:p.key,notAfter:Number(p.notAfter),notBefore:Number(p.notBefore)},leaf:{key:_.key,notAfter:Number(_.notAfter),notBefore:Number(_.notBefore)}}).then(function(){o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[socket] persisting cert chain finished"]))).tags("handshake")}).catch(function(e){o("WALogger").ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["[socket] processCertificate: failed to set cert chain: ",""])),e).sendLogs("handhshake-set-cert-chain",{sampling:.01})})}))}}),p.apply(this,arguments)}l.verifyAndProcessCertificate=m}),98);
__d("WAWebWamEnumWebcSocketConnectReasonType",[],(function(t,n,r,o,a,i){var e=Object.freeze({PAGE_LOAD:0,RECONNECT:1});i.WEBC_SOCKET_CONNECT_REASON_TYPE=e}),66);
__d("WAWebWebcSocketConnectWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumWebcSocketConnectReasonType"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({WebcSocketConnect:[5450,{webcAuthHandshakeDuration:[1,e.TYPES.TIMER],webcSocketConnectDuration:[2,e.TYPES.TIMER],webcSocketConnectReason:[3,o("WAWebWamEnumWebcSocketConnectReasonType").WEBC_SOCKET_CONNECT_REASON_TYPE],webcSocketHostname:[4,e.TYPES.STRING]},[1,1,1],"regular"]},{WebcSocketConnect:[]});l.WebcSocketConnectWamEvent=s}),98);
__d("WAWebOpenChatSocket",["Promise","WABase64","WABinary","WAFrameSocket","WALogger","WANoiseHandshake","WANullthrows","WAResultOrError","WAWapDict","WAWebCommonSocketPlatformDetails","WAWebCryptoCurve25519","WAWebGetClientPayloadForLogin","WAWebGetClientPayloadForRegistration","WAWebOpenSocket","WAWebPageLoadLogging","WAWebProcessCertificate","WAWebProtobufsWa6.pb","WAWebSocketLogoutJob","WAWebUserPrefsInfoStore","WAWebUserPrefsMultiDevice","WAWebUserPrefsScreenLock","WAWebWamEnumWebcSocketConnectReasonType","WAWebWebcSocketConnectWamEvent","asyncToGeneratorRuntime","cr:4533","decodeProtobuf","encodeProtobuf","err"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E,k,I,T,D,x,$=1,P=6,N=new Uint8Array([87,65,P,o("WAWapDict").DICT_VERSION]),M="Noise_XX_25519_AESGCM_SHA256\0\0\0\0",w="Noise_IK_25519_AESGCM_SHA256\0\0\0\0",A="Noise_XXfallback_25519_AESGCM_SHA256";function F(e){return o("WAWebOpenSocket").openWebSocket(e)}function O(e,t,n){return B.apply(this,arguments)}function B(){return B=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,r){var a=yield o("WAWebUserPrefsMultiDevice").getRoutingInfo(),i=a?a.edgeRouting:null,l=i?o("WABase64").encodeB64UrlSafe(i):null,s=yield o("WAWebCryptoCurve25519").keyPair();return o("WAWebPageLoadLogging").startPageLoadQplMeasure("socket_open"),F(l).then((function(){var a=n("asyncToGeneratorRuntime").asyncToGenerator(function*(n){var a=void 0;if(o("WAWebPageLoadLogging").endPageLoadQplMeasure("socket_open"),t.markWebcSocketConnectDuration(),t.webcSocketConnectReason=o("WAWebPageLoadLogging").wasPageLoadQplLogged()?o("WAWebWamEnumWebcSocketConnectReasonType").WEBC_SOCKET_CONNECT_REASON_TYPE.RECONNECT:o("WAWebWamEnumWebcSocketConnectReasonType").WEBC_SOCKET_CONNECT_REASON_TYPE.PAGE_LOAD,i){var l=new(o("WABinary")).Binary;l.write("ED",0,1),l.writeUint8(i.byteLength>>16),l.writeUint16(i.byteLength&65535),l.writeBuffer(i),a=l.readByteArrayView()}var u=a?o("WABinary").Binary.build(a,N).readByteArrayView():N,c=new(o("WAFrameSocket")).FrameSocket(n,u),d=e?yield Q(K):null;if(o("WAWebPageLoadLogging").startPageLoadQplMeasure("auth_handshake"),t.startWebcAuthHandshakeDuration(),d!=null){var m=yield o("WAWebUserPrefsInfoStore").waNoiseInfo.get();return q(c,r,e,s,m==null?void 0:m.staticKeyPair,d)}return W(c,s,e,r)});return function(e){return a.apply(this,arguments)}})())}),B.apply(this,arguments)}function W(t,n,r,a){var i=new(o("WANoiseHandshake")).NoiseHandshake(t);i.start(M,N),o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[socket] doFullHandshake: openChatSocket send hello"]))).tags("handshake"),i.authenticate(n.pubKey);var l={clientHello:{ephemeral:n.pubKey}};return i.sendAndReceive(o("encodeProtobuf").encodeProtobuf(o("WAWebProtobufsWa6.pb").HandshakeMessageSpec,l).readByteArrayView()).then(function(e){return H(i,e,n,r,a)})}function q(e,t,a,i,l,v){if(l==null)return(x||(x=n("Promise"))).reject("resumeNoiseHandshake authKeyPair is null");var S=new(o("WANoiseHandshake")).NoiseHandshake(e);o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[socket] resumeNoiseHandshake started"]))).tags("handshake"),S.start(w,N),o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[socket] resumeNoiseHandshake authenticate with server static key"]))).tags("handshake"),S.authenticate(v),o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[socket] resumeNoiseHandshake authenticate with client ephemeral key"]))).tags("handshake"),S.authenticate(i.pubKey),o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["[socket] resumeNoiseHandshake EC Agreement 1"]))).tags("handshake"),S.mixIntoKey(o("WAWebCryptoCurve25519").sharedSecret(v,i.privKey)),o("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[socket] resumeNoiseHandshake encrypt client static key"]))).tags("handshake");var R=S.encrypt((x||(x=n("Promise"))).resolve(l.pubKey)).catch(function(e){return o("WALogger").ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["resumeNoiseHandshake failed to encrypt client static key: ",""])),e),(x||(x=n("Promise"))).reject(e)});o("WALogger").LOG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["[socket] resumeNoiseHandshake EC Agreement 2"]))).tags("handshake"),S.mixIntoKey(o("WAWebCryptoCurve25519").sharedSecret(v,l.privKey));var L=a?o("WAWebGetClientPayloadForLogin").getClientPayloadForLogin(t):o("WAWebGetClientPayloadForRegistration").getClientPayloadForRegistration(t),E=S.encrypt(x.resolve(L)).catch(function(e){return o("WALogger").ERROR(f||(f=babelHelpers.taggedTemplateLiteralLoose(["resumeNoiseHandshake failed to encrypt client login props: ",""])),e),(x||(x=n("Promise"))).reject(e)});return x.all([i.pubKey,E,R]).then(function(n){var s=n[0],u=n[1],c=n[2];o("WALogger").LOG(g||(g=babelHelpers.taggedTemplateLiteralLoose(["[socket] resumeNoiseHandshake send hello"]))).tags("handshake");var d={clientHello:{ephemeral:s,payload:u,static:c}};return S.sendAndReceive(o("encodeProtobuf").encodeProtobuf(o("WAWebProtobufsWa6.pb").HandshakeMessageSpec,d).readByteArrayView()).then(function(n){o("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[socket] resumeNoiseHandshake rcv hello"]))).tags("handshake");var s=o("decodeProtobuf").decodeProtobuf(o("WAWebProtobufsWa6.pb").HandshakeMessageSpec,n),u=s.serverHello,c=u||{},d=c.ephemeral,m=c.payload,p=c.static;if(p==null){if(o("WALogger").LOG(y||(y=babelHelpers.taggedTemplateLiteralLoose(["[socket] resumeNoiseHandshake continuing resume handshake"]))).tags("handshake"),!d)throw r("err")("serverHello missing serverEphemeral");if(!m)throw r("err")("serverHello missing certificateCiphertext");return S.authenticate(d),S.mixIntoKey(o("WAWebCryptoCurve25519").sharedSecret(d,i.privKey)),S.mixIntoKey(o("WAWebCryptoCurve25519").sharedSecret(d,l.privKey)),S.decrypt(m).then(function(){return o("WALogger").LOG(C||(C=babelHelpers.taggedTemplateLiteralLoose(["[socket] resumeNoiseHandshake deriving secrets"]))).tags("handshake"),S.finish()})}return o("WALogger").LOG(b||(b=babelHelpers.taggedTemplateLiteralLoose(["[socket] resumeNoiseHandshake failed: serverStaticCiphertext not null"]))),U(e,t,a,i,n)})})}function U(e,t,n,r,o){return V.apply(this,arguments)}function V(){return V=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r,a){var i=new(o("WANoiseHandshake")).NoiseHandshake(e);return i.start(A,N),i.authenticate(r.pubKey),o("WALogger").LOG(S||(S=babelHelpers.taggedTemplateLiteralLoose(["[socket] doFallbackHandshake continuing handshake with given server hello"]))),H(i,a,r,n,t)}),V.apply(this,arguments)}function H(e,t,a,i,l){o("WALogger").LOG(v||(v=babelHelpers.taggedTemplateLiteralLoose(["[socket] openChatSocket rcv hello"])));var s=o("decodeProtobuf").decodeProtobuf(o("WAWebProtobufsWa6.pb").HandshakeMessageSpec,t),u=s.serverHello;if(!u)throw r("err")("ServerHello payload error");var c=u.ephemeral,d=u.payload,m=u.static;if(c==null||m==null||d==null)throw r("err")("Missing server Ephemeral");e.authenticate(c),e.mixIntoKey(o("WAWebCryptoCurve25519").sharedSecret(c,a.privKey));var p=e.decrypt(m),_=p.then(function(e){return o("WAWebCryptoCurve25519").sharedSecret(e,a.privKey)});return e.mixIntoKey(_),(x||(x=n("Promise"))).all([p,e.decrypt(d),c]).then(function(t){var n=t[0],r=t[1],o=t[2];return G(e,n,r,o,i,l)})}function G(e,t,n,r,o,a){return z.apply(this,arguments)}function z(){return z=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,a,i,l,s){yield o("WAWebProcessCertificate").verifyAndProcessCertificate({certificate:a,serverStatic:t,isRegistered:l}),yield i;var u=l?o("WAWebGetClientPayloadForLogin").getClientPayloadForLogin(s):o("WAWebGetClientPayloadForRegistration").getClientPayloadForRegistration(s),c=yield o("WAWebUserPrefsInfoStore").waNoiseInfo.get();c==null&&(o("WALogger").LOG(R||(R=babelHelpers.taggedTemplateLiteralLoose(["[socket] Unable to decrypt noise data"]))).tags("launch-socket-chat","handshake"),yield o("WAWebSocketLogoutJob").socketLogout(),r("WANullthrows")(c,"Unexpected null: noiseData"));var d=r("WANullthrows")(c).staticKeyPair;return(x||(x=n("Promise"))).all([j(d,e,i),e.encrypt(x.resolve(u))]).then(function(t){var n=t[0],r=t[1],a={clientFinish:{static:n,payload:r}};return o("WALogger").LOG(L||(L=babelHelpers.taggedTemplateLiteralLoose(["[socket] continueFullHandshakeCore client finish and deriving secrets"]))),e.send(o("encodeProtobuf").encodeProtobuf(o("WAWebProtobufsWa6.pb").HandshakeMessageSpec,a).readByteArrayView()),e.finish()})}),z.apply(this,arguments)}function j(e,t,a){var i=(x||(x=n("Promise"))).resolve(e.pubKey),l=t.encrypt(i);if(!a)return(x||(x=n("Promise"))).reject(r("err")("staticAgreement called before serverKeys"));var s=o("WAWebCryptoCurve25519").sharedSecret(a,e.privKey);return t.mixIntoKey(s),l}var K=0;function Q(e){return X.apply(this,arguments)}function X(){return X=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){if(o("WAWebUserPrefsScreenLock").getScreenLockEnabled())return null;if(e>=$)return o("WALogger").LOG(E||(E=babelHelpers.taggedTemplateLiteralLoose(["[socket][unified] getCertficateChain handshake previously failed "," times. Falling back to full handshake"])),e).tags("handshake"),null;try{var t=yield o("WAWebUserPrefsInfoStore").waNoiseInfo.get();if(t==null)return o("WALogger").LOG(k||(k=babelHelpers.taggedTemplateLiteralLoose(["Unable to decrypt noise data for resume handshake"]))).tags("launch-socket-chat"),null;var n=t.certificateChainBuffer?o("WAWebUserPrefsInfoStore").waNoiseInfo.getCertficateChain(t.certificateChainBuffer):null;return o("WAWebCommonSocketPlatformDetails").makeServerInfoIfKnown(n)}catch(e){return o("WALogger").ERROR(I||(I=babelHelpers.taggedTemplateLiteralLoose(["[socket][unified] getCertficateChain error: ",", msg: ",", stack: ",""])),e.name,e.message,e.stack).tags("handshake"),null}}),X.apply(this,arguments)}function Y(e,t){return J.apply(this,arguments)}function J(){return J=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){try{var n=e||{passive:!1,pull:!0},r=new(o("WAWebWebcSocketConnectWamEvent")).WebcSocketConnectWamEvent,a=yield O(t,r,n);return o("WAWebPageLoadLogging").endPageLoadQplMeasure("auth_handshake"),r.markWebcAuthHandshakeDuration(),r.commit(),K=0,o("WAResultOrError").makeResult(a)}catch(e){o("WAWebPageLoadLogging").incrementPageLoadQplSocketError();var i=Z();return o("WALogger").LOG(T||(T=babelHelpers.taggedTemplateLiteralLoose(["[socket][unified] handshake failed with ",", msg: ",", network: ",""])),e.name,e.message,i).tags("handshake"),i&&(K++,o("WALogger").ERROR(D||(D=babelHelpers.taggedTemplateLiteralLoose(["[socket][unified] handshake failed. Retry count: ",""])),K).tags("handshake").sendLogs("handshake-error",{sampling:.01})),o("WAResultOrError").makeError("disconnected")}}),J.apply(this,arguments)}function Z(){return self.navigator!=null?self.navigator.onLine:!0}function ee(e){return te.apply(this,arguments)}function te(){return te=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=o("WAWebUserPrefsMultiDevice").isRegistered();return Y(e,t)}),te.apply(this,arguments)}l.default=ee}),98);
__d("WAWebStanzaValidation",["WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){u(e)}function u(t){t.tag!=="receipt"||t.attrs.type!=="sender"||t.attrs.recipient==null&&t.attrs.participant==null&&o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[stanza-validation] sender receipt without recipient nor participant"]))).sendLogs("sender-receipt-without-participant-nor-recipient-validation")}l.validateSentStanza=s}),98);
__d("WAWebCommsConfig",["WALogger","WANullthrows","WAWapJid","WAWebABProps","WAWebBackendEventBus","WAWebCmd","WAWebCommsProcessAck","WAWebCommsSendPing","WAWebEnvironment","WAWebNoop","WAWebOfflineResumePreAckHandler","WAWebOpenChatSocket","WAWebSocketConstants","WAWebStanzaValidation","WAWebUserPrefsMultiDevice","cr:7907","gkx"],(function(t,n,r,o,a,i,l){var e,s=9e5;function u(){return{jitter:.1,max:s,algo:{type:"fibonacci",first:1e3,second:1e3},relativeDelay:!1}}function c(t){var a=t||{passive:!1,pull:!1};return{maxRetries:Number.MAX_SAFE_INTEGER,openChatSocket:function(t,n){return o("WAWebABProps").getABPropConfigValue("web_comms_socket_reconnect_enabled")?a.signal=r("WANullthrows")(n):a.signal=new AbortController().signal,r("WAWebOpenChatSocket")(a).then(function(e){return t(),a.passive=!1,e})},healthCheckInterval:15,deadSocketTime:2e4,maxSocketLoopWaitTime:s,shouldCloseStaleSocket:!0,socketReconnectBackoffAlgo:u(),shouldBlockReceivingUntilSuccess:!0,handlers:{onConnect:function(){o("WAWebUserPrefsMultiDevice").isRegistered()&&(o("WAWebCmd").Cmd.setSocketState(o("WAWebSocketConstants").SOCKET_STATE.CONNECTED),o("WAWebBackendEventBus").BackendEventBus.triggerOpenSocketStream())},onDisconnect:function(){o("WAWebBackendEventBus").BackendEventBus.triggerSocketStreamDisconnected()},onSocketOpen:function(){o("WAWebCmd").Cmd.setSocketState(o("WAWebSocketConstants").SOCKET_STATE.PAIRING)},onSocketLoopIteration:function(t){o("WAWebCmd").Cmd.setSocketState(o("WAWebSocketConstants").SOCKET_STATE.OPENING)},onConnectionChange:r("WAWebNoop"),onOptimisticConnectionChange:r("WAWebNoop"),onBeforeCastStanzaForE2E:function(t,n){t.tag==="ack"&&!(n!=null&&n.preAck)&&!o("WAWebCmd").Cmd.isOfflineDeliveryEnd&&o("WAWebOfflineResumePreAckHandler").parseAndSerializeOfflinePreAck(t)},onCastStanza:function(a){r("gkx")("26259")&&a.tag==="ack"&&!(a.attrs.to instanceof o("WAWapJid").WapJid)&&o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["ack.to is a "," not a WapJid: ",""])),typeof a.attrs.to,a).sendLogs("send-string-jid"),r("gkx")("26258")||n("cr:7907")==null||n("cr:7907").sendNewStanzaToDevTool(a,!0),o("WAWebStanzaValidation").validateSentStanza(a)},onHandleAck:function(t){r("WAWebCommsProcessAck")(t)},onHandleStanza:function(t){r("gkx")("26258")||n("cr:7907")==null||n("cr:7907").sendNewStanzaToDevTool(t,!1)},onSendIq:o("WAWebStanzaValidation").validateSentStanza,onClockSkewUpdate:function(t){o("WAWebCommsSendPing").updateClockSkew(t)}},isPauseEnabled:r("WAWebEnvironment").isWindows}}l.getCommsConfig=c}),98);
__d("WAWebCommsHandleStanzaUtils",["WALogger","WAParsableWapNode","WAWeb-dexie","WAWebCreateNackFromStanza","WAWebPostIncomingMessageDropMetric","WAWebPostUnknownStanzaMetric"],(function(t,n,r,o,a,i,l){var e,s,u;function c(t,n){if(n instanceof o("WAParsableWapNode").XmppParsingFailure)return o("WAWebPostUnknownStanzaMetric").postUnknownStanzaMetric(t),o("WAWebPostIncomingMessageDropMetric").postIncomingMessageDropInvalidStanza(t),o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["handleMsg: error while parsing message: ",""])),n).tags("messaging").sendLogs("failedParsingMessageStanza",{sampling:.01}),o("WAWebCreateNackFromStanza").createNackFromStanza(t,o("WAWebCreateNackFromStanza").NackReason.ParsingError);if(n instanceof r("WAWeb-dexie").DexieError){o("WAWebPostIncomingMessageDropMetric").postIncomingMessageDropDBOperationFailed(t),o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["handleMsg: drop incoming message due to an internal error: ",", message: ",", stack: ",""])),n.name,n.message,n.stack).sendLogs("incoming-message-drop-db-operation-failed",{sampling:.01});return}return o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["handleMsg: drop incoming message due to an internal error: ",", message: ",", stack: ",""])),n.name,n.message,n.stack).sendLogs("incoming-message-drop-internal-error",{sampling:.01}),o("WAWebPostIncomingMessageDropMetric").postIncomingMessageDropInternalError(t),o("WAWebCreateNackFromStanza").createNackFromStanza(t,o("WAWebCreateNackFromStanza").NackReason.UnhandledError)}function d(e){if(Array.isArray(e.content)&&e.content.length>0){var t=e.content[0].tag;return t==="offer"||t==="accept"||t==="reject"}return!1}l.handleMessageParsingFailure=c,l.isCallReceipt=d}),98);
__d("WAWebHandlePaymentAmountUtils",["WALogger","err"],(function(t,n,r,o,a,i,l){var e,s=1e3;function u(e){e.assertTag("money");var t=parseFloat(e.attrString("value")),n=e.attrString("currency"),r=e.maybeAttrInt("offset"),o=r!=null&&r!==0?r:s,a=t*s/o;return{currency:n,amount1000:a}}function c(t){if(t.hasChild("amount")){var n=t.child("amount");return u(n.child("money"))}else if(t.hasAttr("amount")){var a=parseFloat(t.attrString("amount"));return{amount1000:a*s,currency:t.attrString("currency")}}throw o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Amount missing in pay or transaction node"]))),r("err")("Amount missing in pay or transaction node")}function d(e){return c(e)}l.getAmount1000AndCurrency=d}),98);
__d("WAWebPaymentStatusUtils",["$InternalEnum","WALogger","WAWebProtobufsWeb.pb"],(function(t,n,r,o,a,i,l){var e,s=n("$InternalEnum")({TYPE_UNSET:0,TYPE_P2P_SENT:1,TYPE_P2P_RCVD:2,TYPE_P2P_GRP:3,TYPE_P2P_NO_INFO:4,TYPE_FUTURE:5,TYPE_P2P_REQ_SENT:10,TYPE_P2P_REQ_RCVD:20,TYPE_P2P_REQ_SCHEDULED_PAYMENT_RCVD:21,TYPE_P2P_REQ_GRP:30,TYPE_P2M_SENT:100,TYPE_P2M_RCVD:200,TYPE_P2M_PAYOUT:300,TYPE_MISSING_DETAILS:400,TYPE_DEPOSIT:500,TYPE_REFUND:600,TYPE_WITHDRAWAL:700}),u=n("$InternalEnum")({STATUS_UNSET:0,REQUEST_PAY_INIT:11,REQUEST_PAY_SUCCESS:12,REQUEST_PAY_FAILED:13,REQUEST_PAY_FAILED_RISK:14,REQUEST_PAY_REJECTED:15,REQUEST_PAY_EXPIRED:16,REQUEST_PAY_FULFILLED:17,REQUEST_PAY_CANCELLED:18,REQUEST_PAY_CANCELLING:19,REQUEST_PAY_SCHEDULED_PAYMENT_SUCCESS:20,RECV_PAY_INIT:101,RECV_PAY_PENDING_SETUP:102,RECV_PAY_PENDING:103,RECV_PAY_RETRY_ON_FAILURE:104,RECV_PAY_FAILURE:105,RECV_PAY_SUCCESS:106,RECV_PAY_EXPIRED:107,RECV_PAY_FAILURE_RISK:108,RECV_PAY_WITHDRAWAL_PROCESSING:109,RECV_PAY_WITHDRAWAL_FAILURE:110,RECV_PAY_WITHDRAWAL_PERMANENT_FAILED:111,RECV_PAY_SENDER_CANCELED:112,SEND_PAY_INIT:401,SEND_PAY_PENDING_RECEIVER:402,SEND_PAY_PENDING:403,SEND_PAY_REFUND_PENDING:404,SEND_PAY_SUCCESS:405,SEND_PAY_FAILURE:406,SEND_PAY_FAILURE_RISK:407,SEND_PAY_REFUNDED:408,SEND_PAY_REFUND_FAILED:409,SEND_PAY_FAILURE_RECEIVER:410,SEND_PAY_REFUND_FAILED_PROCESSING:411,SEND_PAY_PENDING_REFUND:412,SEND_PAY_AUTH_CANCEL_FAILED_PROCESSING:413,SEND_PAY_AUTH_CANCEL_FAILED:414,SEND_PAY_AUTH_CANCELED:415,SEND_PAY_EXPIRED:416,SEND_PAY_AUTH_SUCCESS:417,SEND_PAY_AUTH_SUCCESS_CANCELING:418,SEND_PAY_IN_REVIEW:419,SEND_PAY_PENDING_PROCESSING:420,SEND_PAY_USER_CANCELED:421,WITHDRAWAL_INIT:601,WITHDRAWAL_PENDING:602,WITHDRAWAL_IN_REVIEW:603,WITHDRAWAL_SUCCESS:604,WITHDRAWAL_FAILED:605,WITHDRAWAL_USER_CANCELED:606,WITHDRAWAL_EXPIRED:607,WITHDRAWAL_ACTIVE:608}),c={TYPE_P2P:"p2p",TYPE_P2M:"p2m",TYPE_P2M_PAYOUT:"payout",TYPE_WITHDRAWAL:"withdrawal",TYPE_DEPOSIT:"deposit",TYPE_REFUND:"refund"},d={PENDING_RECEIVER_SETUP:"PENDING_RECEIVER_SETUP",PENDING_SETUP:"PENDING_SETUP",PENDING:"PENDING",INITIAL:"INITIAL",SUCCESS:"SUCCESS",COMPLETED:"COMPLETED",IN_REVIEW:"IN_REVIEW",FAILED:"FAILED",DECLINED:"DECLINED",FAILURE:"FAILURE",FAILED_RISK:"FAILED_RISK",FAILED_PROCESSING:"FAILED_PROCESSING",FAILED_RECEIVER_PROCESSING:"FAILED_RECEIVER_PROCESSING",REFUND_FAILED_PROCESSING:"REFUND_FAILED_PROCESSING",REFUNDED:"REFUNDED",REFUND_FAILED:"REFUND_FAILED",EXPIRED:"EXPIRED",CANCELED:"CANCELLED",AUTH_SUCCESS:"AUTH_SUCCESS",AUTH_CANCELED:"AUTH_CANCELED",AUTH_CANCEL_FAILED_PROCESSING:"AUTH_CANCEL_FAILED_PROCESSING",AUTH_CANCEL_FAILED:"AUTH_CANCEL_FAILED",COLLECT_SUCCESS:"COLLECT_SUCCESS",COLLECT_FAILED:"COLLECT_FAILED",COLLECT_REJECTED:"COLLECT_REJECTED",COLLECT_EXPIRED:"COLLECT_EXPIRED",COLLECT_CANCELED:"COLLECT_CANCELED",FAILED_DA:"FAILED_DA",FAILED_DA_FINAL:"FAILED_DA_FINAL",REFUND_FAILED_DA:"REFUND_FAILED_DA",COLLECT_FAILED_RISK:"COLLECT_FAILED_RISK",WITHDRAWAL_PROCESSING:"WITHDRAWAL_PROCESSING",WITHDRAWAL_FAILURE:"WITHDRAWAL_FAILURE",WITHDRAWAL_PERMANENT_FAILED:"WITHDRAWAL_PERMANENT_FAILED",WITHDRAWAL_ACTIVE:"WITHDRAWAL_ACTIVE"};function m(e,t){if(e==null)return o("WAWebProtobufsWeb.pb").PaymentInfo$Status.UNKNOWN_STATUS;switch(e){case u.SEND_PAY_INIT:case u.SEND_PAY_PENDING:case u.RECV_PAY_INIT:case u.RECV_PAY_PENDING:case u.RECV_PAY_RETRY_ON_FAILURE:case u.REQUEST_PAY_INIT:return o("WAWebProtobufsWeb.pb").PaymentInfo$Status.PROCESSING;case u.SEND_PAY_PENDING_RECEIVER:case u.SEND_PAY_FAILURE_RECEIVER:return o("WAWebProtobufsWeb.pb").PaymentInfo$Status.SENT;case u.REQUEST_PAY_SUCCESS:return t===s.TYPE_P2P_REQ_SENT?o("WAWebProtobufsWeb.pb").PaymentInfo$Status.WAITING_FOR_PAYER:o("WAWebProtobufsWeb.pb").PaymentInfo$Status.WAITING;case u.RECV_PAY_PENDING_SETUP:return o("WAWebProtobufsWeb.pb").PaymentInfo$Status.NEED_TO_ACCEPT;case u.SEND_PAY_SUCCESS:case u.RECV_PAY_SUCCESS:case u.REQUEST_PAY_FULFILLED:return o("WAWebProtobufsWeb.pb").PaymentInfo$Status.COMPLETE;case u.SEND_PAY_FAILURE:case u.SEND_PAY_FAILURE_RISK:case u.SEND_PAY_PENDING_REFUND:case u.SEND_PAY_REFUND_PENDING:case u.SEND_PAY_REFUND_FAILED:case u.SEND_PAY_REFUND_FAILED_PROCESSING:case u.RECV_PAY_FAILURE:case u.REQUEST_PAY_FAILED:case u.REQUEST_PAY_FAILED_RISK:return o("WAWebProtobufsWeb.pb").PaymentInfo$Status.COULD_NOT_COMPLETE;case u.SEND_PAY_REFUNDED:return o("WAWebProtobufsWeb.pb").PaymentInfo$Status.REFUNDED;case u.RECV_PAY_EXPIRED:case u.REQUEST_PAY_EXPIRED:case u.SEND_PAY_AUTH_CANCELED:case u.SEND_PAY_AUTH_CANCEL_FAILED:case u.SEND_PAY_AUTH_CANCEL_FAILED_PROCESSING:return o("WAWebProtobufsWeb.pb").PaymentInfo$Status.EXPIRED;case u.REQUEST_PAY_REJECTED:return o("WAWebProtobufsWeb.pb").PaymentInfo$Status.REJECTED;case u.REQUEST_PAY_CANCELLED:return o("WAWebProtobufsWeb.pb").PaymentInfo$Status.CANCELLED;case u.STATUS_UNSET:return o("WAWebProtobufsWeb.pb").PaymentInfo$Status.UNKNOWN_STATUS;case u.REQUEST_PAY_CANCELLING:return o("WAWebProtobufsWeb.pb").PaymentInfo$Status.UNKNOWN_STATUS;default:return o("WAWebProtobufsWeb.pb").PaymentInfo$Status.UNKNOWN_STATUS}}function p(e,t){if(!t)return u.STATUS_UNSET;var n=t.toUpperCase();switch(e){case s.TYPE_P2P_SENT:case s.TYPE_P2M_SENT:case s.TYPE_DEPOSIT:switch(n){case d.PENDING_RECEIVER_SETUP:return u.SEND_PAY_PENDING_RECEIVER;case d.FAILED_DA:return u.SEND_PAY_PENDING;case d.REFUND_FAILED_DA:return u.SEND_PAY_REFUND_PENDING;case d.FAILED_RISK:return u.SEND_PAY_FAILURE_RISK;case d.INITIAL:return u.SEND_PAY_INIT;case d.SUCCESS:case d.COMPLETED:return u.SEND_PAY_SUCCESS;case d.FAILURE:case d.FAILED:return u.SEND_PAY_FAILURE;case d.REFUNDED:return u.SEND_PAY_REFUNDED;case d.REFUND_FAILED:return u.SEND_PAY_REFUND_FAILED;case d.FAILED_RECEIVER_PROCESSING:return u.SEND_PAY_FAILURE_RECEIVER;case d.REFUND_FAILED_PROCESSING:return u.SEND_PAY_REFUND_FAILED_PROCESSING;case d.FAILED_DA_FINAL:return u.SEND_PAY_PENDING_REFUND;case d.AUTH_CANCEL_FAILED_PROCESSING:return u.SEND_PAY_AUTH_CANCEL_FAILED_PROCESSING;case d.AUTH_CANCEL_FAILED:return u.SEND_PAY_AUTH_CANCEL_FAILED;case d.AUTH_CANCELED:return u.SEND_PAY_AUTH_CANCELED;case d.EXPIRED:return u.SEND_PAY_EXPIRED;case d.IN_REVIEW:return u.SEND_PAY_IN_REVIEW;case d.PENDING:return u.SEND_PAY_PENDING_PROCESSING;case d.CANCELED:return u.SEND_PAY_USER_CANCELED}break;case s.TYPE_P2P_RCVD:case s.TYPE_P2M_RCVD:switch(n){case d.PENDING_SETUP:return u.RECV_PAY_PENDING_SETUP;case d.FAILED_DA:return u.RECV_PAY_PENDING;case d.FAILED_PROCESSING:return u.RECV_PAY_RETRY_ON_FAILURE;case d.SUCCESS:case d.COMPLETED:return u.RECV_PAY_SUCCESS;case d.FAILURE:case d.FAILED:return u.RECV_PAY_FAILURE;case d.EXPIRED:return u.RECV_PAY_EXPIRED;case d.FAILED_RISK:return u.RECV_PAY_FAILURE_RISK;case d.WITHDRAWAL_PROCESSING:return u.RECV_PAY_WITHDRAWAL_PROCESSING;case d.WITHDRAWAL_FAILURE:return u.RECV_PAY_WITHDRAWAL_FAILURE;case d.WITHDRAWAL_PERMANENT_FAILED:return u.RECV_PAY_WITHDRAWAL_PERMANENT_FAILED;case d.CANCELED:return u.RECV_PAY_SENDER_CANCELED}break;case s.TYPE_P2P_REQ_SENT:case s.TYPE_P2P_REQ_RCVD:switch(n){case d.COLLECT_SUCCESS:return u.REQUEST_PAY_SUCCESS;case d.COLLECT_FAILED:return u.REQUEST_PAY_FAILED;case d.COLLECT_FAILED_RISK:return u.REQUEST_PAY_FAILED_RISK;case d.COLLECT_REJECTED:return u.REQUEST_PAY_REJECTED;case d.COLLECT_EXPIRED:return u.REQUEST_PAY_EXPIRED;case d.COLLECT_CANCELED:return u.REQUEST_PAY_CANCELLED}break;case s.TYPE_P2P_REQ_SCHEDULED_PAYMENT_RCVD:switch(n){case d.COLLECT_SUCCESS:return u.REQUEST_PAY_SCHEDULED_PAYMENT_SUCCESS;case d.AUTH_SUCCESS:return u.SEND_PAY_AUTH_SUCCESS}break;case s.TYPE_REFUND:switch(n){case d.SUCCESS:case d.COMPLETED:return u.RECV_PAY_SUCCESS}break;case s.TYPE_WITHDRAWAL:switch(n){case d.PENDING:return u.WITHDRAWAL_PENDING;case d.IN_REVIEW:return u.WITHDRAWAL_IN_REVIEW;case d.SUCCESS:case d.COMPLETED:return u.WITHDRAWAL_SUCCESS;case d.FAILED:case d.DECLINED:return u.WITHDRAWAL_FAILED;case d.CANCELED:return u.WITHDRAWAL_USER_CANCELED;case d.EXPIRED:return u.WITHDRAWAL_EXPIRED;case d.WITHDRAWAL_ACTIVE:return u.WITHDRAWAL_ACTIVE}break;default:return u.STATUS_UNSET}return u.STATUS_UNSET}function _(e){if(e==null)return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.UNKNOWN;switch(e){case u.RECV_PAY_EXPIRED:case u.SEND_PAY_EXPIRED:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.EXPIRED_TXN;case u.RECV_PAY_FAILURE:case u.SEND_PAY_FAILURE:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.FAILED;case u.RECV_PAY_INIT:case u.SEND_PAY_INIT:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.INIT;case u.RECV_PAY_PENDING_SETUP:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.PENDING_SETUP;case u.RECV_PAY_PENDING:case u.SEND_PAY_PENDING:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.FAILED_DA;case u.RECV_PAY_RETRY_ON_FAILURE:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.FAILED_PROCESSING;case u.RECV_PAY_SUCCESS:case u.SEND_PAY_SUCCESS:case u.REQUEST_PAY_FULFILLED:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.SUCCESS;case u.REQUEST_PAY_CANCELLED:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.COLLECT_CANCELED;case u.REQUEST_PAY_CANCELLING:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.COLLECT_CANCELLING;case u.REQUEST_PAY_EXPIRED:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.COLLECT_EXPIRED;case u.REQUEST_PAY_FAILED_RISK:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.COLLECT_FAILED_RISK;case u.REQUEST_PAY_FAILED:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.COLLECT_FAILED;case u.REQUEST_PAY_INIT:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.COLLECT_INIT;case u.REQUEST_PAY_REJECTED:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.COLLECT_REJECTED;case u.REQUEST_PAY_SUCCESS:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.COLLECT_SUCCESS;case u.SEND_PAY_AUTH_CANCELED:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.AUTH_CANCELED;case u.SEND_PAY_AUTH_CANCEL_FAILED_PROCESSING:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.AUTH_CANCEL_FAILED_PROCESSING;case u.SEND_PAY_AUTH_CANCEL_FAILED:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.AUTH_CANCEL_FAILED;case u.SEND_PAY_FAILURE_RECEIVER:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.FAILED_RECEIVER_PROCESSING;case u.SEND_PAY_FAILURE_RISK:case u.RECV_PAY_FAILURE_RISK:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.FAILED_RISK;case u.SEND_PAY_PENDING_RECEIVER:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.PENDING_RECEIVER_SETUP;case u.SEND_PAY_PENDING_REFUND:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.FAILED_DA_FINAL;case u.SEND_PAY_REFUNDED:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.REFUNDED_TXN;case u.SEND_PAY_REFUND_FAILED_PROCESSING:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.REFUND_FAILED_PROCESSING;case u.SEND_PAY_REFUND_FAILED:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.REFUND_FAILED;case u.SEND_PAY_REFUND_PENDING:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.REFUND_FAILED_DA;case u.SEND_PAY_IN_REVIEW:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.IN_REVIEW;case u.STATUS_UNSET:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.UNKNOWN;default:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.UNKNOWN}}function f(t,n){if(t){var r=t.toLowerCase();switch(r){case c.TYPE_P2P:return n?s.TYPE_P2P_SENT:s.TYPE_P2P_RCVD;case c.TYPE_P2M:return n?s.TYPE_P2M_SENT:s.TYPE_P2M_RCVD;case c.TYPE_P2M_PAYOUT:return s.TYPE_P2M_PAYOUT;case c.TYPE_DEPOSIT:return s.TYPE_DEPOSIT;case c.TYPE_REFUND:return s.TYPE_REFUND;case c.TYPE_WITHDRAWAL:return s.TYPE_WITHDRAWAL;default:o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["parsePaymentTransactionType payment transaction string=",""])),r)}}return n?s.TYPE_P2P_SENT:s.TYPE_P2P_RCVD}function g(e){return e===o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.COMPLETED||e===o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.SUCCESS}function h(e){return g(e)?e:o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.COLLECT_INIT}l.PaymentTransactionType=s,l.NotificationTransactionStatus=u,l.PaymentTransactionTypeServerString=c,l.PaymentTransactionStatusServerString=d,l.getPaymentWebStatus=m,l.getNotificationTransactionStatus=p,l.getPaymentTxnWebStatus=_,l.getPaymentTransactionType=f,l.determinePaymentRequestFulfilledStatus=h}),98);
__d("WAWebPaymentNotificationParser",["WADeprecatedWapParser","WALogger","WAWebHandlePaymentAmountUtils","WAWebJidToWid","WAWebMsgKey","WAWebPaymentStatusUtils","WAWebUserPrefsMeUser"],(function(t,n,r,o,a,i,l){var e;function s(e){return e&&e.hasAttr("service")?e.attrString("service").toUpperCase()==="NOVI":!1}var u=new(r("WADeprecatedWapParser"))("paymentNotificationParser",function(e){return e.assertTag("notification"),e.assertAttr("type","pay"),{stanzaId:e.attrString("id"),from:e.attrWapJid("from"),transaction:e.hasChild("transaction")?c(e.child("transaction")):null,invite:d(e)}});function c(t){if(s(t))return o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Payment notification from Novi not supported."]))),null;var n=void 0,a=void 0,i=o("WAWebJidToWid").jidWithTypeToWid(t.attrJidWithType("sender")),l=o("WAWebJidToWid").jidWithTypeToWid(t.attrJidWithType("receiver")),u=o("WAWebUserPrefsMeUser").isMeAccount(i);t.hasAttr("group")?(n=o("WAWebJidToWid").jidWithTypeToWid(t.attrJidWithType("group")),a=o("WAWebJidToWid").jidWithTypeToWid(t.attrJidWithType("sender"))):u?n=l:n=i;var c=new(r("WAWebMsgKey"))({id:t.attrString("message-id"),fromMe:u,remote:n,participant:a}),d=o("WAWebPaymentStatusUtils").getPaymentTransactionType(t.attrString("transaction-type"),c.fromMe),m=o("WAWebHandlePaymentAmountUtils").getAmount1000AndCurrency(t),p=m.amount1000,_=m.currency;return{receiver:l,currency:_,amount1000:p,status:o("WAWebPaymentStatusUtils").getNotificationTransactionStatus(d,t.attrString("status")),ts:t.attrInt("ts"),type:d,msgKey:c}}function d(e){if(!e.hasChild("invite"))return null;var t=e.child("invite");return{type:t.maybeAttrString("type"),service:t.maybeAttrString("service"),inviteUsed:t.hasAttr("invite-used")?t.attrString("invite-used")==="1":null,from:o("WAWebJidToWid").chatJidToChatWid(e.attrChatJid("from")),timestamp:e.attrTime("t")}}l.isNoviTransaction=s,l.paymentNotificationParser=u,l.parseTransactionNode=c}),98);
__d("WAWebHandleMsgParser",["WADeprecatedWapParser","WALogger","WAParsableWapNode","WAWebAck","WAWebBackendJobs.flow","WAWebBizCoexGatingUtils","WAWebBotTypes","WAWebCountriesUtils","WAWebCreateNackFromStanza","WAWebCurrentUser","WAWebHandleMsgCommon","WAWebHandleMsgTypes.flow","WAWebHandlePaymentAmountUtils","WAWebJidToWid","WAWebLid1X1MigrationGating","WAWebLidMigrationUtils","WAWebMessagingGatingUtils","WAWebPaymentNotificationParser","WAWebPaymentStatusUtils","WAWebProtobufsWeb.pb","WAWebSimpleSignalPNToFBIDMigration","WAWebStatusGatingUtils","WAWebUserPrefsMeUser","WAWebUserPrefsNotifications","WAWebUsernameGatingUtils","WAWebWidFactory"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g,h=new(r("WADeprecatedWapParser"))("incomingMsgParser",function(e){var t,n;e.assertTag("message"),e.hasAttr("to")&&e.assertAttr("to",o("WAWebUserPrefsMeUser").getMeDevicePnOrThrow().toJid());var r=e.maybeChild("plaintext");r!=null&&r.throw("not to be present in e2ee messages");var a=e.mapChildrenWithTag("enc",function(e){var t;return{e2eType:e.attrEnumValues("type",o("WAWebBackendJobs.flow").CiphertextType.members()),encMediaType:o("WAWebBackendJobs.flow").EncMediaType.cast(e.maybeAttrString("mediatype")),ciphertext:e.contentBytes(),retryCount:(t=e.maybeAttrInt("count"))!=null?t:0,hideFail:e.maybeAttrString("decrypt-fail")==="hide"}}),i=e.maybeChild("device-identity"),l=i?i.contentBytes():null,s=b(e),u=C(e,a),c=y(e,a,s,u),d=v(e,c),m=R(e),p=S(e),_=k(e),f=(t=(n=e.maybeChild("rcat"))==null?void 0:n.contentBytes())!=null?t:null;return{encs:a,msgInfo:c,msgMeta:u,bizInfo:d,hsmInfo:p,paymentInfo:m,deviceIdentity:l,rcat:f,msgBotInfo:s,reportingTokenInfo:_}});function y(t,n,r,a){var i,l={externalId:t.attrString("id"),ts:t.attrTime("t"),edit:(i=t.maybeAttrInt("edit"))!=null?i:o("WAWebAck").EDIT_ATTR.NONE,isHsm:t.hasChild("hsm"),count:t.maybeAttrInt("count"),pushname:t.maybeAttrString("notify"),username:t.maybeAttrString("username"),displayName:t.maybeAttrString("display_name"),senderPn:t.hasAttr("sender_pn")?o("WAWebJidToWid").userJidToUserWid(t.attrUserJid("sender_pn")):null,senderLid:t.hasAttr("sender_lid")?o("WAWebJidToWid").userJidToUserWid(t.attrUserJid("sender_lid")):null,recipientLid:t.hasAttr("recipient_lid")?o("WAWebJidToWid").lidUserJidToUserLid(t.attrLidUserJid("recipient_lid")):null,recipientPn:t.hasAttr("recipient_pn")?o("WAWebJidToWid").userJidToUserWid(t.attrUserJid("recipient_pn")):null,peerRecipientPn:t.hasAttr("peer_recipient_pn")?o("WAWebJidToWid").userJidToUserWid(t.attrUserJid("peer_recipient_pn")):null,peerRecipientLid:t.hasAttr("peer_recipient_lid")?o("WAWebJidToWid").lidUserJidToUserLid(t.attrLidUserJid("peer_recipient_lid")):null,peerRecipientUsername:t.hasAttr("peer_recipient_username")?t.attrString("peer_recipient_username"):null,recipientLatestLid:t.hasAttr("recipient_latest_lid")?o("WAWebJidToWid").lidUserJidToUserLid(t.attrLidUserJid("recipient_latest_lid")):null,recipientUsername:t.hasAttr("recipient_username")?t.attrString("recipient_username"):null,participantLid:t.hasAttr("participant_lid")?o("WAWebJidToWid").lidUserJidToUserLid(t.attrLidUserJid("participant_lid")):null,participantPn:t.hasAttr("participant_pn")?o("WAWebJidToWid").userJidToUserWid(t.attrUserJid("participant_pn")):null,participantUsername:t.maybeAttrString("participant_username"),category:t.maybeAttrEnum("category",o("WAWebHandleMsgCommon").MSG_CATEGORY),offline:t.maybeAttrString("offline"),senderCountryCode:I(t.maybeChild("meta"))},_=o("WAWebJidToWid").jidWithTypeToWid(t.attrJidWithType("from"));_.isNewsletter()&&t.throw("unexpected `from` attribute with newsletter Jid");var f=t.hasAttr("participant")?o("WAWebJidToWid").deviceJidToDeviceWid(t.attrDeviceJid("participant")):null,g=t.hasAttr("recipient")?o("WAWebJidToWid").userJidToUserWid(t.attrUserJid("recipient")):null;if(o("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()){var h=!!(f!=null&&f.isHosted()&&(_.isStatus()||_.isGroup()||_.isBroadcast()));if(h)throw new(o("WAParsableWapNode")).XmppParsingFailure("incomingMsgParser",""+o("WAWebCreateNackFromStanza").NackReason.InvalidHostedCompanionStanza)}var y=n.every(function(e){return e.e2eType!==o("WAWebBackendJobs.flow").CiphertextType.Skmsg}),C=n.some(function(e){return e.retryCount>0}),b=_.isGroup()||_.isBroadcast()?f:_;if(g!=null&&b!=null&&!o("WAWebUserPrefsMeUser").isMeAccount(b))return t.throw("Invalid recipient from non peer device");var v,S=t.maybeChild("participants");if(S){var R=[];S.forEachChildWithTag("to",function(t){var n=o("WAWebJidToWid").userJidToUserWid(t.attrUserJid("jid")),r=t.maybeAttrString("eph_setting"),a=t.maybeAttrLidUserJid("peer_recipient_lid"),i=t.maybeAttrUserJid("peer_recipient_pn"),l=o("WAWebUsernameGatingUtils").usernameDisplayedEnabled()?t.maybeAttrString("peer_recipient_username"):null,s=t.maybeAttrLidUserJid("recipient_latest_lid"),u={wid:n};r!=null&&(u.ephSetting=r),a!=null&&(u.peerRecipientLid=o("WAWebJidToWid").lidUserJidToUserLid(a)),i!=null&&(u.peerRecipientPn=o("WAWebJidToWid").userJidToUserWid(i)),l!=null&&(u.peerRecipientUsername=l),s!=null&&(a==null&&i==null&&o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[broadcast] Received a recipient_latest_lid without a peer_recipient_lid nor peer_recipient_pn, this should not happen"]))),u.recipientLatestLid=o("WAWebJidToWid").lidUserJidToUserLid(s)),R.push(u)}),v=R}var L=a==null?void 0:a.targetChatJid;if(r&&_.isPnBot()&&L!=null){var E;return babelHelpers.extends({type:o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.CHAT},l,{chat:o("WAWebWidFactory").asUserWidOrThrow((E=a==null?void 0:a.targetChatJidLid)!=null?E:L),author:_,botParticipant:_})}else if(r&&_.isFbidBot()&&L!=null){var k=o("WAWebWidFactory").asUserWidOrThrow(L);return babelHelpers.extends({type:o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.CHAT},l,{chat:o("WAWebLid1X1MigrationGating").Lid1X1MigrationUtils.isLidMigrated()?k:o("WAWebLidMigrationUtils").toPnOrThrow(k),author:_,botParticipant:_})}else if(_.isUser()){var T=_;if(g!=null){if(!o("WAWebUserPrefsMeUser").isMeAccount(_))return t.throw("recipient on non peer chat message");T=g}var D=null,x=o("WAWebSimpleSignalPNToFBIDMigration").getDeprecatedPnChatForFbidThread(T);return x!=null&&(o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["parseMessageInfo: forwarding "," to ",""])),T.toLogString(),x.toLogString()),g!=null&&(D=g),T=x),babelHelpers.extends({type:o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.CHAT},l,{chat:o("WAWebWidFactory").asUserWidOrThrow(T),author:_,originalBotRecipient:D})}else if(_.isGroup()){var $;if(f==null)return t.throw("group message with no participant");var P=($=t.maybeAttrEnum("addressing_mode",o("WAWebHandleMsgCommon").STANZA_MSG_ADDRESSING_MODE))!=null?$:o("WAWebHandleMsgCommon").STANZA_MSG_ADDRESSING_MODE.pn;try{!o("WAWebUsernameGatingUtils").usernameDisplayedEnabled()&&f.isLid()&&l.participantPn==null&&l.displayName==null&&!o("WAWebUserPrefsMeUser").isMeAccount(f)&&(o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[lid group] missing participant_pn for Lid message. sw worker: ",""])),o("WAWebUserPrefsNotifications").getGlobalOfflineNotifications().toString()),o("WAWebCurrentUser").isEmployee()?(o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[lid group] chat id: "," participant lid: ",""])),_.toString(),f.toString()),o("WALogger").ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["[lid group] missing group mapping in message parser for employee"]))).sendLogs("[lid group] missing group mapping in message parser for employee")):o("WALogger").ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[lid group] missing group mapping in message parser"]))).sendLogs("[lid group] missing group mapping in message parser"))}catch(e){o("WALogger").ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["[lid group] could not report missing lid in group message parser ",""])),e)}return babelHelpers.extends({type:o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.GROUP},l,{chat:_,author:f,isDirect:y,addressingMode:P})}else if(_.isBroadcast()&&!_.isStatus()){if(f==null)return t.throw("broadcast message with no participant");if(o("WAWebUserPrefsMeUser").isMeAccount(f)){if(v==null){if(!C)return t.throw("peer broadcast message with no participants node");v=[]}return babelHelpers.extends({type:o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.PEER_BROADCAST},l,{chat:_,author:f,isDirect:y,bclParticipants:v,bclHashValidated:!1})}return babelHelpers.extends({type:o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.OTHER_BROADCAST},l,{chat:_,author:f,isDirect:y,ephSetting:t.maybeAttrString("eph_setting")})}else if(_.isBroadcast()&&_.isStatus()){var N,M;if(f==null)return t.throw("status message with no participant");var w=(N=(M=t.maybeChild("meta"))==null?void 0:M.maybeAttrString("status_setting"))!=null?N:void 0;if(o("WAWebUserPrefsMeUser").isMeAccount(f)&&y){if(v==null)return babelHelpers.extends({type:o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.DIRECT_PEER_STATUS},l,{chat:_,author:f,isDirect:y,statusSetting:w});var A=v.map(function(e){return e.wid});return babelHelpers.extends({type:o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.DIRECT_PEER_STATUS},l,{chat:_,author:f,directPeerStatusBclParticipants:A,bclHashValidated:!1,statusSetting:w})}return babelHelpers.extends({type:o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.OTHER_STATUS},l,{chat:_,author:f,isDirect:y,statusSetting:w})}return t.throw("Unrecognized message type")}function C(e,t){var n=o("WAWebJidToWid").jidWithTypeToWid(e.attrJidWithType("from")),r=e.hasAttr("participant")?o("WAWebJidToWid").deviceJidToDeviceWid(e.attrDeviceJid("participant")):null,a=n.isGroup()||n.isBroadcast()?r:n;if(a==null)return e.throw("incomingMsgParser: to have a sender");var i=e.hasChild("unavailable");!i&&t.length===0&&e.throw("incomingMsgParser: to have enc node children");var l=!1,s=!1;if(i){var u=e.maybeChild("unavailable");s=(u==null?void 0:u.maybeAttrString("hosted"))==="true",l=(u==null?void 0:u.maybeAttrString("type"))==="view_once"}var c=e.attrEnum("type",o("WAWebHandleMsgCommon").STANZA_MSG_TYPES),d=e.maybeChild("meta"),m=c===o("WAWebHandleMsgCommon").STANZA_MSG_TYPES.poll?d==null?void 0:d.attrEnumOrNullIfUnknown("polltype",o("WAWebHandleMsgCommon").POLL_TYPES):null,p;o("WAWebStatusGatingUtils").isStatusPrivateMentionsReceiveEnabled()&&(p=(d==null?void 0:d.maybeAttrString("status_mentioned"))==="true");var _={isUnavailable:i,isViewOnceUnavailable:l,isHostedMsgUnavailable:s,type:c,pollType:m,origin:d==null?void 0:d.maybeAttrEnum("origin",o("WAWebHandleMsgCommon").STANZA_MSG_ORIGIN),rawTs:e.attrString("t"),urlNumber:e.hasChild("url_number"),urlText:e.hasChild("url_text"),statusMentioned:p,appdata:d==null?void 0:d.maybeAttrEnum("appdata",o("WAWebHandleMsgCommon").APPDATA)};return d&&d.hasAttr(o("WAWebHandleMsgCommon").BIZ_SOURCE_ATTR)&&(_.bizSource=d.attrString(o("WAWebHandleMsgCommon").BIZ_SOURCE_ATTR)),d&&d.hasAttr("thread_msg_id")&&(_.threadMsgId=d.attrString("thread_msg_id")),d&&d.hasAttr("thread_msg_sender_jid")&&(_.threadMsgSenderJid=o("WAWebJidToWid").jidWithTypeToWid(d.attrJidWithType("thread_msg_sender_jid"))),d&&d.hasAttr("target_id")&&(_.targetId=d.attrString("target_id")),d&&d.hasAttr("target_sender_jid")&&(_.targetSenderJid=o("WAWebJidToWid").jidWithTypeToWid(d.attrJidWithType("target_sender_jid"))),d&&d.hasAttr("target_chat_jid")&&(_.targetChatJid=o("WAWebJidToWid").jidWithTypeToWid(d.attrJidWithType("target_chat_jid"))),d&&d.hasAttr("target_chat_jid_lid")&&(_.targetChatJidLid=o("WAWebJidToWid").jidWithTypeToWid(d.attrJidWithType("target_chat_jid_lid"))),d&&d.hasAttr("capi")&&d.attrString("capi")==="true"&&(_.capi=!0),c===o("WAWebHandleMsgCommon").STANZA_MSG_TYPES.event&&d&&d.hasAttr("event_type")&&(_.eventType=d.attrEnum("event_type",o("WAWebHandleMsgCommon").EVENT_TYPES)),d&&d.hasAttr("context_source")&&(_.context_source=d.attrString("context_source")),_}function b(e){var t=e.maybeChild("bot");if(t){var n=t.maybeAttrString("sender_timestamp_ms"),r=t.maybeAttrString("edit_target_id"),a=o("WAWebBotTypes").BotMsgEditType.cast(t.maybeAttrString("edit")),i;t.hasAttr("biz_bot")&&(t.attrString("biz_bot")==="1"?i=o("WAWebBotTypes").BizBotType.BIZ_1P:t.attrString("biz_bot")==="3"&&(i=o("WAWebBotTypes").BizBotType.BIZ_3P));var l=o("WAWebBotTypes").BotMsgBodyType.cast(t.maybeAttrString("type")),s={botSenderTimestampMs:n,botEditTargetId:r,botEditType:a,botMsgBodyType:l,bizBotType:i};return s}}function v(e,t){var n,r,a,i,l=!!(!(t==null||(n=t.author)==null)&&n.isBot()),s=!!(!(t==null||(r=t.chat)==null)&&r.isBot()),u=!s&&l;if(u)return{verifiedNameSerial:null,verifiedLevel:null,verifiedNameCert:null,privacyMode:null,nativeFlowName:null,campaignId:null};var c=e.hasChild("verified_name")?e.child("verified_name").contentBytes():null,d=e.maybeAttrEnum("verified_level",o("WAWebHandleMsgCommon").MSG_VERIFIED_LEVEL),m=e.hasAttr("verified_name")?e.attrInt("verified_name"):-1,p=e.maybeChild("biz"),_=null;if(p!=null){var f=o("WAWebHandleMsgTypes.flow").ActualActorsEnumType.cast(p.maybeAttrInt("actual_actors")),g=o("WAWebHandleMsgTypes.flow").HostStorageEnumType.cast(p.maybeAttrInt("host_storage")),h=p.maybeAttrInt("privacy_mode_ts");f!=null&&g!=null&&h!=null&&!l&&(_={actualActors:f,hostStorage:g,privacyModeTs:h})}var y=(a=p==null||(i=p.maybeChild("interactive"))==null||(i=i.maybeChild("native_flow"))==null?void 0:i.maybeAttrString("name"))!=null?a:p==null?void 0:p.maybeAttrString("native_flow_name"),C=p==null?void 0:p.maybeAttrString("campaign_id");return babelHelpers.extends({verifiedNameCert:c,verifiedLevel:d,verifiedNameSerial:m,privacyMode:_,nativeFlowName:y,campaignId:C},p&&{verifiedButtonsEnvelope:p.hasChild("buttons"),verifiedListEnvelope:p.hasChild("list"),verifiedHsmEnvelope:e.hasChild("hsm")})}function S(e){var t=e.maybeChild("hsm");if(t!=null){var n=t.maybeAttrString("tag"),r=t.maybeAttrString("category");if(n!=null||r!=null)return{tag:n,category:r}}return null}function R(e){var t=null,n=e.hasChild("pay")?e.child("pay"):null,r=e.hasChild("transaction")?e.child("transaction"):null,a=o("WAWebJidToWid").jidWithTypeToWid(e.attrJidWithType("from")).isGroup(),i=e.hasAttr("participant")?o("WAWebJidToWid").jidWithTypeToWid(e.attrJidWithType("participant")):null;if(o("WAWebPaymentNotificationParser").isNoviTransaction(n)||o("WAWebPaymentNotificationParser").isNoviTransaction(r))t={futureproofed:!0};else if(r){var l=o("WAWebPaymentNotificationParser").parseTransactionNode(r);l&&(L(a,i,o("WAWebWidFactory").createWid(l.receiver.toString()))?t={receiverJid:l.receiver.toString(),currency:l.currency,amount1000:l.amount1000,transactionTimestamp:l.ts,txnStatus:o("WAWebPaymentStatusUtils").getPaymentTxnWebStatus(l.status)}:t={receiverJid:l.receiver.toString(),currency:l.currency,amount1000:l.amount1000,transactionTimestamp:l.ts})}else if(n){var s=n.attrEnum("type",o("WAWebHandleMsgCommon").PAY_NODE_TYPES);switch(s){case o("WAWebHandleMsgCommon").PAY_NODE_TYPES.send:{var u=o("WAWebHandlePaymentAmountUtils").getAmount1000AndCurrency(n),c=u.amount1000,d=u.currency,m=n.hasAttr("receiver")?n.attrString("receiver"):e.attrString("recipient");L(a,i,o("WAWebWidFactory").createWid(m))?t={receiverJid:m,currency:d,amount1000:c,transactionTimestamp:e.attrInt("t"),txnStatus:o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.INIT}:t={receiverJid:m,currency:d,amount1000:c,transactionTimestamp:e.attrInt("t")};break}case o("WAWebHandleMsgCommon").PAY_NODE_TYPES.request:break;case o("WAWebHandleMsgCommon").PAY_NODE_TYPES.invite:break;default:break}}return t}function L(e,t,n){return!(e&&t!=null&&n!=null&&!o("WAWebUserPrefsMeUser").isMeAccount(t)&&!o("WAWebUserPrefsMeUser").isMeAccount(n))}var E=new(r("WADeprecatedWapParser"))("incomingMsgParserForAckOnly",function(e){e.assertTag("message");var t=null;try{t=e.attrEnum("type",o("WAWebHandleMsgCommon").STANZA_MSG_TYPES)}catch(e){o("WALogger").WARN(_||(_=babelHelpers.taggedTemplateLiteralLoose(["incomingMsgParserForAckOnly: failed to parse stanza type: ",""])),e)}var n=null;try{n=e.attrString("offline")!==""}catch(e){}var r=null;try{r=y(e,[],b(e))}catch(e){o("WALogger").WARN(f||(f=babelHelpers.taggedTemplateLiteralLoose(["incomingMsgParserForAckOnly: failed to parse msg info: ",""])),e)}return{type:t,externalId:e.attrString("id"),from:o("WAWebJidToWid").jidWithTypeToWid(e.attrJidWithType("from")),participant:e.hasAttr("participant")?o("WAWebJidToWid").deviceJidToDeviceWid(e.attrDeviceJid("participant")):null,msgInfo:r,offline:n}});function k(e){if(!o("WAWebMessagingGatingUtils").isReportingTokenReceivingEnabled())return null;var t=e.maybeChild("reporting");if(t==null)return null;var n={},r=t.maybeChild("reporting_token"),a=t.maybeChild("reporting_tag");return r!=null&&(n.reportingToken=r.contentBytes(),n.version=r.attrInt("v")),a!=null&&(n.reportingTag=a.contentBytes()),n}function I(e){var t=e==null?void 0:e.maybeAttrString("sender_country_code");if(t!=null)try{return o("WAWebCountriesUtils").asISOCountryCode(t)}catch(e){o("WAWebCurrentUser").isEmployee()&&o("WALogger").ERROR(g||(g=babelHelpers.taggedTemplateLiteralLoose(["Failed to parse sender country code: ",""])),t).sendLogs("failed-to-parse-sender-country-code",{sampling:.01})}}l.incomingMsgParser=h,l.incomingMsgParserForAckOnly=E}),98);
__d("WAWebSchemaDeferredMessagesStorage",["WAWebStorageMutationBuilder","WAWebStorageSchema","WAWebWorkerStorageUtils","WAWebWorkerStorageVersions"],(function(t,n,r,o,a,i,l){var e=o("WAWebStorageMutationBuilder").columnBuilder(),s=e.addColumn,u=e.addEncryptedColumn,c=e.addUserDefinedPrimaryKey;function d(){o("WAWebWorkerStorageUtils").getStorage().add("deferred_messages").version(o("WAWebWorkerStorageVersions").deferredMessagesStorageCreateTable(),[c("id"),s("type"),u("plaintext",o("WAWebStorageSchema").EncryptedValueType.ARRAY_BUFFER),s("info"),s("paymentInfo"),s("bizInfo")]).view(function(e){return{id:e.id,type:e.type,plaintext:e.plaintext,info:e.info,paymentInfo:e.paymentInfo,bizInfo:e.bizInfo}}).useDbMsgEncKeyForEncryptedCol(!0)}function m(){return o("WAWebWorkerStorageUtils").getStorage().table("deferred_messages")}l.addTable=d,l.getTable=m}),98);
__d("WAWebDBBulkPersistContact",["WABatcher","WAWebLidAwareContactsDB","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e=o("WABatcher").batch({delayMs:3e3},(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){return yield c(e),e.map(function(e){})});return function(t){return e.apply(this,arguments)}})());function s(t,n){return e(babelHelpers.extends({},n,{id:t.toJid()}))}function u(e){return Array.from(e.reduce(function(e,t){var n;return e.set(t.id,babelHelpers.extends({},(n=e.get(t.id))!=null?n:{},t)),e},new Map).values())}function c(e){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=u(e);yield r("WAWebLidAwareContactsDB").bulkCreateOrMerge(t,"DBBulkPersistContact.bulkPersistContactChanges")}),d.apply(this,arguments)}l.persistContactUpdateBatched=s}),98);
__d("WAWebHandlePushnameUpdate",["WALogger","WAWebBackendApi","WAWebDBBulkPersistContact","WAWebEnvironment","WAWebPromiseQueue","WAWebWidFactory","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s=new(o("WAWebPromiseQueue")).PromiseQueue;function u(e,t){return o("WAWebBackendApi").frontendSendAndReceive("updatePushname",{contactId:e,pushname:t})}function c(t,a,i){i===void 0&&(i=!1);var l=o("WAWebWidFactory").asUserWidOrThrow(t);return s.enqueue(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=void 0;(!i||r("WAWebEnvironment").isGuest)&&(t=yield u(l,a)),(t===!0||t===void 0)&&(o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["updatePushName: set pushname for ",""])),l.toLogString()),o("WAWebDBBulkPersistContact").persistContactUpdateBatched(l,{pushname:a}))}))}l.updatePushname=c}),98);
__d("WAWebEphemeralityResolver",["WALogger","WATimeUtils","WAWebEphemeralityTypes"],(function(t,n,r,o,a,i,l){var e,s,u,c;function d(t){if(!t)return o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["getDisappearingModeSettingForUser: empty contact"]))),null;var n=t.disappearingModeDuration,r=t.disappearingModeSettingTimestamp;return o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["getDisappearingModeSettingForUser: disappearing mode setting fetched for ",": duration="," settingTimestamp=",""])),t.id.toString(),n,r).tags("DM","DDM"),n==null||n===0?null:{duration:n,settingTimestamp:r!=null?r:0}}function m(e){var t=d(e);return t!=null?t.duration:null}function p(e){return e!=null?e:0}function _(e){return e!=null?e:o("WAWebEphemeralityTypes").DisappearingModeInitiator.ChangedInChat}function f(e){return e!=null?e:o("WATimeUtils").unixTime()}function g(e){return e!=null?e:o("WAWebEphemeralityTypes").DisappearingModeTrigger.ChatSettings}function h(e,t){var n=t===o("WAWebEphemeralityTypes").DisappearingModeInitiator.InitiatedByMe;return e!=null?e:n}function y(e){return e==null||e.duration==null&&e.settingTimestamp==null&&e.initiator==null?null:{duration:p(e.duration),settingTimestamp:f(e.settingTimestamp),initiator:_(e.initiator),disappearingModeTrigger:g(e.disappearingModeTrigger),initiatedByMe:h(e.initiatedByMe,e.initiator)}}function C(e,t){return(e==null?void 0:e.duration)===(t==null?void 0:t.duration)&&(e==null?void 0:e.settingTimestamp)===(t==null?void 0:t.settingTimestamp)&&(e==null?void 0:e.initiator)===(t==null?void 0:t.initiator)}function b(e,t){var n=m(e),r=m(t);if(n==null&&r==null)return o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[DMResolve] DM setting for chat is null"]))).tags("DM","DDM"),null;var a;n!=null&&(a={duration:n,settingTimestamp:o("WATimeUtils").unixTime(),initiator:o("WAWebEphemeralityTypes").DisappearingModeInitiator.InitiatedByMe,disappearingModeTrigger:o("WAWebEphemeralityTypes").DisappearingModeTrigger.AccountSettings,initiatedByMe:!0});var i;return r!=null&&(i={duration:r,settingTimestamp:o("WATimeUtils").unixTime(),initiator:o("WAWebEphemeralityTypes").DisappearingModeInitiator.InitiatedByOther,disappearingModeTrigger:o("WAWebEphemeralityTypes").DisappearingModeTrigger.AccountSettings,initiatedByMe:!1}),a!=null&&i!=null?i.duration<a.duration?i:a:a!=null?a:i}function v(e,t){var n=y(e);if(n==null&&t==null)return null;if(n!=null&&t==null)return{duration:n.duration,settingTimestamp:n.settingTimestamp,initiator:n.initiator===o("WAWebEphemeralityTypes").DisappearingModeInitiator.InitiatedByMe?o("WAWebEphemeralityTypes").DisappearingModeInitiator.ChangedInChat:n.initiator,disappearingModeTrigger:o("WAWebEphemeralityTypes").DisappearingModeTrigger.ChatSettings,initiatedByMe:n.initiator===o("WAWebEphemeralityTypes").DisappearingModeInitiator.InitiatedByMe};if(n==null&&t!=null)return{duration:t.duration,settingTimestamp:f(t.settingTimestamp),initiator:_(t.initiator),disappearingModeTrigger:g(t.disappearingModeTrigger),initiatedByMe:t.initiatedByMe};if(n!=null&&t!=null){var r,a;return n.settingTimestamp>((r=t.settingTimestamp)!=null?r:0)?babelHelpers.extends({},n):n.settingTimestamp<((a=t.settingTimestamp)!=null?a:0)?{duration:t.duration,settingTimestamp:f(t.settingTimestamp),initiator:_(t.initiator),disappearingModeTrigger:g(t.disappearingModeTrigger),initiatedByMe:t.initiatedByMe}:babelHelpers.extends({},n,{initiator:t.initiator===o("WAWebEphemeralityTypes").DisappearingModeInitiator.ChangedInChat?o("WAWebEphemeralityTypes").DisappearingModeInitiator.ChangedInChat:n.initiator})}}function S(e,t){o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[DMResolve] resolving new incoming chat DM settings"])));var n=y(e),r=p(t);if(n==null&&r===0)return null;if(n!=null&&r===0)return{duration:n.duration,settingTimestamp:n.settingTimestamp,initiator:n.initiator===o("WAWebEphemeralityTypes").DisappearingModeInitiator.InitiatedByMe?o("WAWebEphemeralityTypes").DisappearingModeInitiator.ChangedInChat:n.initiator,disappearingModeTrigger:n.disappearingModeTrigger,initiatedByMe:n.initiatedByMe};if(n==null&&r>0)return{duration:r,settingTimestamp:o("WATimeUtils").unixTime(),initiator:o("WAWebEphemeralityTypes").DisappearingModeInitiator.InitiatedByMe,disappearingModeTrigger:o("WAWebEphemeralityTypes").DisappearingModeTrigger.AccountSettings,initiatedByMe:!0};if(n!=null&&r>0){if(n.initiator===o("WAWebEphemeralityTypes").DisappearingModeInitiator.ChangedInChat||n.duration>0&&n.duration<r){var a=n.initiator,i=n.initiatedByMe;return a===o("WAWebEphemeralityTypes").DisappearingModeInitiator.InitiatedByMe&&(a=o("WAWebEphemeralityTypes").DisappearingModeInitiator.ChangedInChat,i=!0),{initiator:a,settingTimestamp:n.settingTimestamp,duration:n.duration,disappearingModeTrigger:n.disappearingModeTrigger,initiatedByMe:i}}return r<n.duration?{duration:r,settingTimestamp:o("WATimeUtils").unixTime(),initiator:o("WAWebEphemeralityTypes").DisappearingModeInitiator.InitiatedByMe,disappearingModeTrigger:o("WAWebEphemeralityTypes").DisappearingModeTrigger.AccountSettings,initiatedByMe:!0}:babelHelpers.extends({},n)}}l.getDisappearingModeSettingForUser=d,l.getEphemeralDurationForUser=m,l.resolveEphermalityDuration=p,l.resolveDisappearingModeInitiator=_,l.resolveSettingTimestamp=f,l.resolveDisappearingModeTrigger=g,l.resolveDisappearingModeInitiatedByMe=h,l.compareEphemeralityFields=C,l.resolveNewChatDMSettings=b,l.resolveExistingChatDMSettings=v,l.resolveNewIncomingChatDMSettings=S}),98);
__d("WAWebWamEnumPairedMediaType",[],(function(t,n,r,o,a,i){var e=Object.freeze({SD_PHOTO:0,HD_PHOTO:1,SD_VIDEO:2,HD_VIDEO:3,MOTION_PHOTO_PARENT:4,MOTION_PHOTO_CHILD:5,HEVC_VIDEO_PARENT:6,HEVC_VIDEO_CHILD:7});i.PAIRED_MEDIA_TYPE=e}),66);
__d("WAWebWamEnumPrivateAiFeatureName",[],(function(t,n,r,o,a,i){var e=Object.freeze({SUMMARIZATION:0,WRITE_WITH_AI:1,PSI:2,QUICK_RECAP:3,INCONGNITO:4,SIDE_CHAT:5,GROUP_AI:6,PSI_SEARCH:7});i.PRIVATE_AI_FEATURE_NAME=e}),66);
__d("WAWebWamEnumStickerMakerSourceType",[],(function(t,n,r,o,a,i){var e=Object.freeze({CUTOUT_IMAGE:1,WEB_STICKER_MAKER:2,IOS_STICKER_MAKER:3,ANDROID_STICKER_MAKER:4,TRANSPARENT_IMAGE:5,GIF:6});i.STICKER_MAKER_SOURCE_TYPE=e}),66);
__d("WAWebWamAddressingModeUtils",["WAWebHandleMsgCommon","WAWebWamEnumAddressingMode"],(function(t,n,r,o,a,i,l){"use strict";function e(e){switch(e){case!0:return o("WAWebWamEnumAddressingMode").ADDRESSING_MODE.LID;case!1:return o("WAWebWamEnumAddressingMode").ADDRESSING_MODE.PN}}function s(e){return e===o("WAWebHandleMsgCommon").STANZA_MSG_ADDRESSING_MODE.lid?o("WAWebWamEnumAddressingMode").ADDRESSING_MODE.LID:o("WAWebWamEnumAddressingMode").ADDRESSING_MODE.PN}function u(t){if(t.isLidAddressingMode!=null)return e(t.isLidAddressingMode)}l.getWamAddressingModeFromString=s,l.getAddressingModeMetricsFromGroupMetadata=u}),98);
__d("WAWebWamMessageUtils",["WALogger","WAWebMsgType","WAWebVcardParsingUtils"],(function(t,n,r,o,a,i,l){var e;function s(t,n){var r=[],a=t.type===o("WAWebMsgType").MSG_TYPE.VCARD,i=t.type===o("WAWebMsgType").MSG_TYPE.MULTI_VCARD;if(a)r.push(t.body);else if(i){var l;r.push.apply(r,((l=t.vcardList)!=null?l:[]).map(function(e){return e.vcard}))}var s=0,u=0,c=0;return r.filter(Boolean).forEach(function(t){var r=o("WAWebVcardParsingUtils").parseVcard(t),a=o("WAWebVcardParsingUtils").vcardLidWid(r)!=null,i=o("WAWebVcardParsingUtils").vcardPhoneNumberWids(r).length>0;a&&i?c++:a?u++:i?s++:o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[message-","] vcard with no PN or LID found"])),n).sendLogs("vcard-no-pn-or-lid",{sampling:.1})}),a||i?{pnOnlyVcardCount:s,lidOnlyVcardCount:u,pnAndLidVcardCount:c}:null}l.getVcardMsgWamData=s}),98);
__d("WAWebMessageHighRetryCountWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumE2eDeviceType","WAWebWamEnumInvisibleMessageCategoryType","WAWebWamEnumMediaType","WAWebWamEnumMessageType","WAWebWamEnumSizeBucket"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({MessageHighRetryCount:[3132,{deviceSizeBucket:[5,o("WAWebWamEnumSizeBucket").SIZE_BUCKET],e2eSenderType:[3,o("WAWebWamEnumE2eDeviceType").E2E_DEVICE_TYPE],invisibleMessageCategory:[6,o("WAWebWamEnumInvisibleMessageCategoryType").INVISIBLE_MESSAGE_CATEGORY_TYPE],isPq:[9,e.TYPES.BOOLEAN],isReceiverLidBased:[7,e.TYPES.BOOLEAN],isSenderLidBased:[8,e.TYPES.BOOLEAN],mediaType:[1,o("WAWebWamEnumMediaType").MEDIA_TYPE],messageType:[4,o("WAWebWamEnumMessageType").MESSAGE_TYPE],retryCount:[2,e.TYPES.INTEGER]},[1,20,20],"regular"]},{MessageHighRetryCount:[]});l.MessageHighRetryCountWamEvent=s}),98);
__d("WAWebPostMessageHighRetryCountMetric",["WAWebMessageHighRetryCountWamEvent","WAWebMessagingGatingUtils","WAWebWamGroupMetricCache","WAWebWamMsgUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e=5;function s(e,t){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){if(!(t<e)){var r=new(o("WAWebMessageHighRetryCountWamEvent")).MessageHighRetryCountWamEvent({retryCount:t,messageType:o("WAWebWamMsgUtils").getMessageTypeFromMsgInfoType(n.type)}),a=o("WAWebWamMsgUtils").getWamE2eSenderType(n.author);a!=null&&(r.e2eSenderType=a);var i=n.chat;if(i!=null&&i.isGroup()){var l=yield o("WAWebWamGroupMetricCache").getGroupMetrics(i);(l==null?void 0:l.deviceSizeBucket)!=null&&(r.deviceSizeBucket=l.deviceSizeBucket),(l==null?void 0:l.participantCount)!=null&&l.participantCount>o("WAWebMessagingGatingUtils").getGroupSizeBypassingSampling()&&(r.weight=0)}r.commit()}}),u.apply(this,arguments)}l.MAX_RETRY=e,l.maybePostMessageHighRetryCountMetric=s}),98);
__d("WAWebSendDeliveryReceiptJob",["WADeprecatedSendIq","WAJids","WAWap","WAWebCommsWapMd","WAWebOnlineDanglingReceipts","WAWebSendReceiptJobCommon","WAWebUserPrefsMeUser","WAWebWidToJid","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){function e(e,t,n,r,o,a){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r,a,i){var l=t.isUser()&&o("WAWebUserPrefsMeUser").isMeAccount(t)||r!=null&&o("WAWebUserPrefsMeUser").isMeAccount(r),s=i.hasInactiveMsg===!0&&!l,c=!s;u(e,t,n,r,c,l,a)}),s.apply(this,arguments)}function u(e,t,n,r,o,a,i){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r,a,i,l){var s=o("WAWap").DROP_ATTR;l?s=o("WAWebSendReceiptJobCommon").RECEIPT_TYPE.PEER_MSG:i?(s=o("WAWebSendReceiptJobCommon").RECEIPT_TYPE.SENDER,n&&o("WAWebSendReceiptJobCommon").logMixedSenderReceipt(n,t)):a||(s=o("WAWebSendReceiptJobCommon").RECEIPT_TYPE.INACTIVE);var u=o("WAJids").extractJidFromJidWithType(o("WAWebWidToJid").widToJidWithType(t)),c=o("WAWap").wap("receipt",{id:o("WAWap").CUSTOM_STRING(e),to:o("WAWap").JID(u),participant:(t.isGroup()||t.isBroadcast())&&r?o("WAWebCommsWapMd").DEVICE_JID(r):o("WAWap").DROP_ATTR,recipient:!l&&i&&n?o("WAWebCommsWapMd").USER_JID(n):o("WAWap").DROP_ATTR,type:s});o("WAWebOnlineDanglingReceipts").addOnlineDanglingReceipts(t,r||t,e),o("WADeprecatedSendIq").deprecatedCastStanza(c)}),c.apply(this,arguments)}l.sendDeliveryReceiptsAfterDecryption=e}),98);
__d("WAWebHandleMsgSendReceipt",["WALogger","WAWebBizCoexGatingUtils","WAWebCreateNackFromStanza","WAWebHandleMsgCommon","WAWebHandleMsgSendAck","WAWebHandleMsgTypes.flow","WAWebMsgProcessingApiUtils","WAWebPostMessageHighRetryCountMetric","WAWebSendDeliveryReceiptJob","WAWebSendReceiptJobCommon","WAWebSendRetryReceiptJob","WAWebUserPrefsMeUser","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u,c;function d(e,t,n){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,r){var a;o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["sendReceipt"])));var i=t.externalId,l=n.rawTs,d=n.type,m=o("WAWebMsgProcessingApiUtils").getFrom(t),p=null;if(t.type===o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.CHAT&&o("WAWebUserPrefsMeUser").isMeAccount(t.author))if(t.originalBotRecipient!=null)p=t.originalBotRecipient;else{var _;p=(_=t.preMatChat)!=null?_:t.chat}var f=t.type===o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.CHAT?null:(a=t.preMatChat)!=null?a:t.author,g=t.category===o("WAWebHandleMsgCommon").MSG_CATEGORY.peer,h=!t.chat.isBot()&&t.author.isBot();if(r.result==null)return o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(['sendReceipt: invalid e2eProcessResult "','"'])),r.result).sendLogs("send-receipt-missing-e2e-process-result"),o("WAWebHandleMsgSendAck").sendAck(i,m,d,f);e:{if(r.result===o("WAWebHandleMsgTypes.flow").E2EProcessResult.SUCCESS||r.result===o("WAWebHandleMsgTypes.flow").E2EProcessResult.SIGNAL_OLD_COUNTER_ERROR){if(h){var y,C,b;return t.type===o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.CHAT?(y=t.author,C=t.chat):(y=t.chat,b=t.author),o("WAWebSendReceiptJobCommon").sendBotInvokeResponseAcks([i],y,C,b)}else if(n.type===o("WAWebHandleMsgCommon").STANZA_MSG_TYPES.medianotify)return o("WAWebHandleMsgSendAck").sendAck(i,m,d,f);return o("WAWebSendDeliveryReceiptJob").sendDeliveryReceiptsAfterDecryption(i,m,p,f,g,r)}if(r.result===o("WAWebHandleMsgTypes.flow").E2EProcessResult.HSM_MISMATCH){o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(['sendReceipt: HSM mismatch, no receipt sent for "','"'])),i).sendLogs("send-receipt-skipping-hsm-mismatch-result");return}if(r.result===o("WAWebHandleMsgTypes.flow").E2EProcessResult.RETRY){if(m!=null&&m.isHosted()&&!o("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled())return o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Drop retry for coex when feature is disabled"]))),o("WAWebHandleMsgSendAck").sendAck(i,m,d,f);var v=r.retryCount==null?1:r.retryCount+1;yield o("WAWebSendRetryReceiptJob").sendRetryReceipt({retryCount:v,to:m,participant:f,recipient:p,externalId:i,rawTs:l,isPeer:g,retryReason:r.retryReason}),o("WAWebPostMessageHighRetryCountMetric").maybePostMessageHighRetryCountMetric(v,t);return}if(r.result===o("WAWebHandleMsgTypes.flow").E2EProcessResult.BACKFILL)return o("WAWebHandleMsgSendAck").sendAck(i,m,d,f);if(r.result===o("WAWebHandleMsgTypes.flow").E2EProcessResult.PARSE_VALIDATION_ERROR)return o("WAWebHandleMsgSendAck").sendNack(i,m,d,f,o("WAWebCreateNackFromStanza").NackReason.InvalidProtobuf,r.e2eFailureReason);if(r.result===o("WAWebHandleMsgTypes.flow").E2EProcessResult.PARSE_ERROR)return o("WAWebHandleMsgSendAck").sendNack(i,m,d,f,o("WAWebCreateNackFromStanza").NackReason.ParsingError);throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+r.result)}}),m.apply(this,arguments)}l.sendReceipt=d}),98);
__d("WAWebWamEnumCallStanzaType",[],(function(t,n,r,o,a,i){var e=Object.freeze({OFFER:0,ACCEPT:1,REJECT:2,VIDEO:3,TERMINATE:4,ENC_REKEY:5,RELAYLATENCY:6,TRANSPORT:7,PREACCEPT:8,GROUP_UPDATE:9,MUTE_V2:10,INTERRUPTION:11,FLOWCONTROL:12,NOTIFY:13,OFFER_NOTICE:14,CALL_RELAY:15,MUTE:16,SCREEN_SHARE:17,UNKNOWN:18});i.CALL_STANZA_TYPE=e}),66);
__d("WAWebOfflineCountTooHighWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumCallStanzaType","WAWebWamEnumEncryptionTypeCode","WAWebWamEnumInvisibleMessageCategoryType","WAWebWamEnumMediaType","WAWebWamEnumMessageType","WAWebWamEnumStanzaType"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({OfflineCountTooHigh:[2638,{callStanzaType:[7,o("WAWebWamEnumCallStanzaType").CALL_STANZA_TYPE],encryptionType:[9,o("WAWebWamEnumEncryptionTypeCode").ENCRYPTION_TYPE_CODE],invisibleMessageCategory:[8,o("WAWebWamEnumInvisibleMessageCategoryType").INVISIBLE_MESSAGE_CATEGORY_TYPE],mediaType:[3,o("WAWebWamEnumMediaType").MEDIA_TYPE],messageType:[4,o("WAWebWamEnumMessageType").MESSAGE_TYPE],notificationStanzaType:[6,e.TYPES.STRING],offlineCount:[2,e.TYPES.INTEGER],receiptStanzaType:[5,e.TYPES.STRING],stanzaType:[1,o("WAWebWamEnumStanzaType").STANZA_TYPE]},[1,1,1],"regular"]},{OfflineCountTooHigh:[]});l.OfflineCountTooHighWamEvent=s}),98);
__d("WAWebMaybePostOfflineCountTooHighMetric",["WALogger","WAWebBackendJobsCommon","WAWebOfflineCountTooHighWamEvent","WAWebWamEnumStanzaType","WAWebWamMsgUtils"],(function(t,n,r,o,a,i,l){var e,s=11;function u(t){var n,r=t.encs,a=t.msgInfo,i=t.msgMeta,l=parseInt(a.offline,10);if(!(Number.isNaN(l)||l<s)){var u=new(o("WAWebOfflineCountTooHighWamEvent")).OfflineCountTooHighWamEvent({offlineCount:l,stanzaType:o("WAWebWamEnumStanzaType").STANZA_TYPE.MESSAGE,mediaType:o("WAWebBackendJobsCommon").getMetricMediaType({encMediaType:(n=r.find(function(e){return e.encMediaType!=null}))==null?void 0:n.encMediaType,msgType:i.type,msgPollType:i.pollType})}),c=o("WAWebWamMsgUtils").getMessageTypeFromMsgInfoType(a.type);c!=null&&(u.messageType=c),u.commitAndWaitForFlush().catch(function(t){o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Failed to post OfflineCountTooHigh metric: ",""])),t).tags("messaging")})}}l.OFFLINE_COUNT_TOO_HIGH_THRESHOLD=s,l.maybePostOfflineCountTooHigh=u}),98);
__d("WAWebMsgProcessingDecryptEnc",["Promise","WAWebBackendJobs.flow","WAWebBotMessageSecret","WAWebMsgProcessingApiUtils","WAWebSignal","err"],(function(t,n,r,o,a,i,l){var e;function s(t,a,i,l){var s=t.ciphertext,u=t.e2eType;return u===o("WAWebBackendJobs.flow").CiphertextType.Skmsg?(function(){return a.isGroup()||a.isBroadcast()?i?o("WAWebSignal").Cipher.decryptGroupSignalProto(a,i,s):(e||(e=n("Promise"))).reject(r("err")("['messaging'] decryptEnc: receive msg from "+a.toString()+" without participant")):(e||(e=n("Promise"))).reject(r("err")("['messaging'] decryptEnc: Can not do skmsg for non group "+a.toString()))})():u===o("WAWebBackendJobs.flow").CiphertextType.Pkmsg||u===o("WAWebBackendJobs.flow").CiphertextType.Msg?(function(){var t=a.isUser()?a:i;if(!t)return(e||(e=n("Promise"))).reject(r("err")("['messaging'] decryptEnc: receive msg from "+a.toString()+" without participant"));var c=o("WAWebMsgProcessingApiUtils").shouldOmitSessionPersistence(u,l);return o("WAWebSignal").Cipher.decryptSignalProto(t,u,s,c)})():u===o("WAWebBackendJobs.flow").CiphertextType.Msmsg?o("WAWebBotMessageSecret").decryptMsmsgBotMessage(s,l):(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+u)})()}l.decryptEnc=s}),98);
__d("WAWebWamEnumMessageDistributionEnumType",[],(function(t,n,r,o,a,i){var e=Object.freeze({REGULAR_MESSAGE:0,DIRECT_MESSAGE:1,SENDER_KEY_DISTRIBUTION_MESSAGE:2});i.MESSAGE_DISTRIBUTION_ENUM_TYPE=e}),66);
__d("WAWebMsgProcessingDecryptApi",["WALogger","WAWebAdvSignatureApi","WAWebBackendJobs.flow","WAWebHandleMsgTypes.flow","WAWebMsgProcessingApiUtils","WAWebMsgProcessingDecryptEnc","WAWebMsgProcessingDecryptionHandler","WAWebOfflineResumeMsgProcessReporter","WAWebPostE2eMessageRecvMetric","WAWebSendRetryReceiptJob","WAWebSignalProtocolStore","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u,c;function d(e,t){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=e.bizInfo,r=e.deviceIdentity,a=e.encs,i=e.hsmInfo,l=e.msgBotInfo,d=e.msgInfo,m=e.msgMeta,_=e.paymentInfo,f=e.rcat,g=e.reportingTokenInfo,h=o("WAWebMsgProcessingApiUtils").getFrom(d);if(p(a,d),d.author.device!=null&&d.author.device!==0){var y=yield o("WAWebAdvSignatureApi").validateADVwithEncs(d.author,r,a,!!d.offline);if(!y)return o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["decryptE2EPayload: msgId::",", validateADVIdentity failed"])),d.externalId).tags("messaging"),{result:o("WAWebHandleMsgTypes.flow").E2EProcessResult.RETRY,retryCount:a[0].retryCount,retryReason:o("WAWebSendRetryReceiptJob").RetryReason.AdvFailure}}var C=!1,b=o("WAWebMsgProcessingDecryptionHandler").createDecryptionHandler(e);for(var v of a)try{if(!b.canDecryptNext(v))continue;var S=o("WAWebOfflineResumeMsgProcessReporter").msgProcessReporter.startMarker(o("WAWebOfflineResumeMsgProcessReporter").msgProcessReporter.stage.Decryption),R=yield o("WAWebMsgProcessingDecryptEnc").decryptEnc(v,h,d.author,e);S==null||S(),o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["decryptE2EPayload: msgId::"," e2eType:"," done"])),d.externalId,v.e2eType).tags("messaging"),o("WAWebPostE2eMessageRecvMetric").postSuccessE2eMessageRecvMetric({enc:v,from:h,msgMeta:m,msgInfo:d,msgBotInfo:l,error:null});var L={retryCount:v.retryCount,e2eType:v.e2eType,encMediaType:v.encMediaType,hideFail:v.hideFail},E=yield t({decrypted:R,info:d,paymentInfo:_,e2eInfo:L,bizInfo:n,hsmInfo:i,msgMeta:m,rcat:f,msgBotInfo:l,reportingTokenInfo:g});E.hasInactiveMsg&&(C=!0),o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["processDecryptedProto: msgId::"," e2eType:"," done"])),d.externalId,v.e2eType).tags("messaging")}catch(e){b.handleError(v,e)}return yield o("WAWebSignalProtocolStore").getSignalProtocolStore().flushBufferToDiskIfNotMemOnlyMode(),b.getResult(C)}),m.apply(this,arguments)}function p(t,n){t.length===2&&t[0].e2eType===o("WAWebBackendJobs.flow").CiphertextType.Skmsg&&o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["decryptE2EPayload: msgId::"," skMsg is out of order"])),n.externalId).tags("messaging").sendLogs("handleMsg: invalid encs order",{sampling:.01})}l.decryptE2EPayload=d}),98);
__d("WAWebMessageProcessUtils",["WALogger","WANullthrows","WAWebApiChat","WAWebApiContact","WAWebCurrentUser","WAWebLid1X1MigrationGating","WAWebLidMigrationUtils","WAWebWidFactory","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g;function h(e){return y.apply(this,arguments)}function y(){return y=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.lid,n=e.lidOrigin;if(o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["selectChatForOneOnOneMessage input: ",", ",""])),t.toLogString(),n),o("WAWebLid1X1MigrationGating").Lid1X1MigrationUtils.isLidMigrated()){var r=yield b(t);return o("WAWebCurrentUser").isEmployee()&&o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["selectChatForOneOnOneMessage migrated output: ",", ",""])),r.accountLid,r.chatId),r}var a=C(t,n);return o("WAWebCurrentUser").isEmployee()&&o("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["selectChatForOneOnOneMessage pre-migrated output: ",", ",""])),a.accountLid,a.chatId),a}),y.apply(this,arguments)}function C(t,n){if(o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["select chat (unmigrated): select for ",""])),t.toLogString()),n==null){o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["select chat (unmigrated): this is a general Lid chat, return phone number"])));var a=r("WANullthrows")(o("WAWebApiContact").getPhoneNumber(t),"cannot select chat for incoming general Lid chat: no PN for Lid");return{chatId:a}}return o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["select chat (unmigrated): this is a non-general Lid chat, return Lid"]))),{chatId:t}}function b(e){return v.apply(this,arguments)}function v(){return v=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){o("WALogger").LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["select chat (migrated): select for lid ",""])),e.toLogString());var t=yield o("WAWebApiChat").getChatRecordByAccountLid(e);if(t.length>1)throw o("WALogger").LOG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["select chat (migrated): error: multiple chats for account_lid."]))),r("err")("selectChatForOneOnOneMessageAfterMigration: found multiple chats for unique index account_lid");if(t.length===1){var n=r("WANullthrows")(t[0].id,"chat id should never be null");return o("WALogger").LOG(f||(f=babelHelpers.taggedTemplateLiteralLoose(["select chat (migrated): found by account_lid. chat id: ",", lid ",""])),n.toString(),e.toLogString()),{accountLid:e,chatId:o("WAWebWidFactory").asUserWidOrThrow(o("WAWebWidFactory").createWid(n))}}return o("WALogger").LOG(g||(g=babelHelpers.taggedTemplateLiteralLoose(["select chat (migrated): assigning lid for new chat"]))),{accountLid:e,chatId:e}}),v.apply(this,arguments)}l.selectChatForOneOnOneMessage=h}),98);
__d("WAWebProcessPhoneNumberMapping",["Promise","WAArrayUtils","WALogger","WAWebApiContact","WAWebDBCreateLidPnMappings","WAWebHandleMsgTypes.flow","WAWebUpdateLidMetadataJob","WAWebUserPrefsMeUser","WAWebUsernameGatingUtils","WAWebWidFactory","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u;function c(e){var t=e.data,n=e.lid,r=e.processingResult,o=e.shouldWaitForJob;r.push({jobArgs:{lid:n,data:t},shouldWaitForJob:o})}function d(t){return t.preMatChat!=null?(o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[extractMapping] using preMatChat"]))),t.preMatChat):t.chat}function m(e,t){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n,r=[],a=e.author,i=e.peerRecipientPn,l=e.recipientLatestLid,s=e.recipientPn,u=d(e),m=o("WAWebWidFactory").asUserLidOrThrow(a);if(o("WAWebUserPrefsMeUser").isMeAccount(a)){var p=t==null?void 0:t.origin;if(s!=null)n={lid:o("WAWebWidFactory").asUserLidOrThrow(u),pn:o("WAWebWidFactory").asUserWidOrThrow(s),learningSource:"other"},c({lid:o("WAWebWidFactory").asUserLidOrThrow(u),data:{shareOwnPn:!1},shouldWaitForJob:!0,processingResult:r});else if(i!=null)l!=null?n={lid:o("WAWebWidFactory").asUserLidOrThrow(u),pn:i,latestLid:l,learningSource:"recipient-latest-lid"}:n={lid:o("WAWebWidFactory").asUserLidOrThrow(u),pn:i,learningSource:"peer-lid-message"};else{var _=yield o("WAWebApiContact").getContactRecord(u);(_==null||(_==null?void 0:_.shareOwnPn)!==!0)&&c({lid:o("WAWebWidFactory").asUserLidOrThrow(u),data:{shareOwnPn:!0},shouldWaitForJob:!1,processingResult:r})}if(p!=="ctwa"){var f=o("WAWebUsernameGatingUtils").usernameDisplayedEnabled()&&e.author.isLid()&&e.chat.isLid();i==null&&!f&&(n="missing-peer-recipient-pn")}return{mapping:n,lidMetadataUpdates:r}}var g=e.displayName;g!=null&&c({lid:m,data:{displayNameLID:g},shouldWaitForJob:!0,processingResult:r});var h=e.senderPn;return h!=null&&(n={lid:m,pn:o("WAWebWidFactory").asUserWidOrThrow(h),learningSource:"other"}),h==null&&c({lid:m,data:{shareOwnPn:!0},shouldWaitForJob:!0,processingResult:r}),{mapping:n,lidMetadataUpdates:r}}),p.apply(this,arguments)}function _(e){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t,n=e.author,r=e.peerRecipientLid,a=e.recipientLatestLid,i=e.recipientLid,l=d(e);if(o("WAWebUserPrefsMeUser").isMeAccount(n)){var s=o("WAWebWidFactory").asUserWidOrThrow(l);i!=null?t={lid:i,pn:s,learningSource:"other"}:r!=null?a!=null?t={pn:s,lid:r,latestLid:a,learningSource:"recipient-latest-lid"}:t={lid:r,pn:s,learningSource:"peer-pn-message"}:t="missing-peer-recipient-lid"}var u=e.senderLid;return u!=null&&(t={lid:o("WAWebWidFactory").asUserLidOrThrow(u),pn:o("WAWebWidFactory").asUserWidOrThrow(n),learningSource:"other"}),{mapping:t,lidMetadataUpdates:[]}}),f.apply(this,arguments)}function g(e){return h.apply(this,arguments)}function h(){return h=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.msgInfo,n=e.msgMeta,r=t.author;return r.isLid()?m(t,n):_(t)}),h.apply(this,arguments)}function y(e){return C.apply(this,arguments)}function C(){return C=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.msgInfo,n=o("WAWebUsernameGatingUtils").usernameDisplayedEnabled()&&t.participantUsername!=null;if(!n&&t.chat.isGroup()&&t.author.isLid()&&!o("WAWebUserPrefsMeUser").isMeAccount(t.author)&&t.participantPn==null&&t.displayName==null&&o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[extractMappingsForGroupOrStatusBroadcastMessage] participantPn is missing for group message from LID author"]))),e.bclParticipant){e.msgInfo;var r=b(e.bclParticipant);return r==null?{lidMetadataUpdates:[]}:{mapping:r,lidMetadataUpdates:[]}}var a,i=[],l=t.author,u=t.participantLid,d=t.participantPn;d!=null?a={lid:o("WAWebWidFactory").asUserLidOrThrow(l),pn:d,learningSource:"other"}:u!=null&&!n&&(a={lid:u,pn:o("WAWebWidFactory").asUserWidOrThrow(l),learningSource:"other"});var m=t.displayName;return!o("WAWebUserPrefsMeUser").isMeAccount(l)&&m!=null&&c({lid:o("WAWebWidFactory").asUserLidOrThrow(l),data:{displayNameLID:m},shouldWaitForJob:!0,processingResult:i}),{mapping:a,lidMetadataUpdates:i}}),C.apply(this,arguments)}function b(e){var t=e.wid,n=e.recipientLatestLid;if(t.isLid()){var r=t,a=e.peerRecipientPn;if(a==null){var i=o("WAWebUsernameGatingUtils").usernameDisplayedEnabled();return i?null:"missing-peer-recipient-pn"}return n?{lid:r,latestLid:n,pn:a,learningSource:"recipient-latest-lid"}:{lid:r,pn:a,learningSource:"peer-lid-message"}}var l=e.peerRecipientLid,s=t;return l==null?"missing-peer-recipient-lid":n?{lid:l,latestLid:n,pn:s,learningSource:"recipient-latest-lid"}:{lid:l,pn:s,learningSource:"peer-pn-message"}}function v(e){var t=e.flushImmediately,n=e.mapping;return n.learningSource==="recipient-latest-lid"?o("WAWebDBCreateLidPnMappings").createLidPnMappings({mappings:[{lid:n.lid,pn:n.pn},{lid:n.latestLid,pn:n.pn}],flushImmediately:t,learningSource:"recipient-latest-lid"}):o("WAWebDBCreateLidPnMappings").createLidPnMappings({mappings:[{lid:n.lid,pn:n.pn}],flushImmediately:t,learningSource:n.learningSource})}function S(e){return R.apply(this,arguments)}function R(){return R=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.msgInfo.chat;return t.isUser()?g(e):t.isGroup()||t.isBroadcast()?y(e):{lidMetadataUpdates:[]}}),R.apply(this,arguments)}function L(e,t,n){return E.apply(this,arguments)}function E(){return E=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,r){if(e.type===o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.PEER_BROADCAST){var a=e.bclParticipants.map(function(n){return k({msgInfo:e,msgMeta:t,bclParticipant:n},r)}),i=yield(u||(u=n("Promise"))).all(a);return{type:"peer-broadcast",mappings:i}}return{type:"not-peer-broadcast",mapping:yield k({msgInfo:e,msgMeta:t},r)}}),E.apply(this,arguments)}function k(e,t){return I.apply(this,arguments)}function I(){return I=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n,r,a=yield S(e),i=a.lidMetadataUpdates,l=a.mapping,s=o("WAArrayUtils").groupByAndMap(i,function(e){return e.shouldWaitForJob?"waitForJob":"fireAndForget"},function(e){return e.jobArgs}),u=(n=s.get("waitForJob"))!=null?n:[],c=(r=s.get("fireAndForget"))!=null?r:[];return c.length>0&&o("WAWebUpdateLidMetadataJob").updateLidMetadataJob(c),u.length>0&&(yield o("WAWebUpdateLidMetadataJob").updateLidMetadataJob(u)),l!=null&&typeof l=="object"&&(yield v({mapping:l,flushImmediately:t})),l}),I.apply(this,arguments)}l.processPhoneNumberMappings=L}),98);
__d("WAWebProcessMsgInfoForLid",["Promise","WAJids","WALogger","WAWebApiContact","WAWebGetPlatformFromStanzaId","WAWebHandleMsgCommon","WAWebHandleMsgTypes.flow","WAWebLid1X1MigrationGating","WAWebLidMigrationUtils","WAWebLidStatusMigrationGating","WAWebLidStatusMigrationUtils","WAWebMessageProcessUtils","WAWebProcessPhoneNumberMapping","WAWebUsernameGatingUtils","WAWebWidFactory","WAWebWorkerSafeBackendApi","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m;function p(e){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=t.chatWid,a=t.mapping,i=t.msgInfo,l=t.msgMeta,d=null,m=l==null?void 0:l.origin,p=m==="ctwa";if(p){if(!n.isLid())throw r("err")("received ctwa message but remote id is not Lid");d=n}else if((l==null?void 0:l.targetSenderJid)!=null)d=o("WAWebLidMigrationUtils").toUserLidOrThrow(o("WAWebWidFactory").asUserWidOrThrow(i.chat));else if(a==null){var _=o("WAWebUsernameGatingUtils").usernameDisplayedEnabled(),f=_&&i.type===o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.CHAT&&i.author.isLid()&&n.isLid(),g=f&&i.username!=null,h=f&&i.username==null;if(g||h)d=o("WAWebLidMigrationUtils").toUserLidOrThrow(n);else if(_&&i.type===o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.PEER_BROADCAST&&n.isLid())d=o("WAWebLidMigrationUtils").toUserLidOrThrow(n);else if(_&&i.type===o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.OTHER_BROADCAST&&i.participantUsername!=null&&n.isLid())d=o("WAWebLidMigrationUtils").toUserLidOrThrow(n);else throw o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["findDestinationChatForSingleMapping: missing pn-lid mapping in 1-1 message, sender: ",""])),o("WAWebGetPlatformFromStanzaId").getPlatformFromStanzaId(i.externalId)).sendLogs("misssing-pn-lid-mapping-in-1-1-message"),r("err")("findDestinationChatForSingleMapping: missing pn-lid mapping in 1-1 message")}else if(a==="missing-peer-recipient-pn"){var y;if(o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["findDestinationChatForSingleMapping: missing peer recipient pn in 1-1 message from device ",""])),(y=i.author.device)!=null?y:0).sendLogs("misssing-peer-recipient-pn-in-1-1-message"),n.isLid()&&o("WAWebApiContact").lidPnCache.getPhoneNumber(n)!=null&&(d=n),d==null){o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["findDestinationChatForSingleMapping: missing peer recipient pn and local mapping, processing message anyway"])));return}}else if(a==="missing-peer-recipient-lid"){if(o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["findDestinationChatForSingleMapping: missing peer recipient lid in 1-1 message"]))).sendLogs("misssing-peer-recipient-lid-in-1-1-message"),o("WAWebWorkerSafeBackendApi").workerSafeFireAndForget("syncContactListJob",{contactIds:[n],shouldSyncDevice:!1,mode:"query"}),d=o("WAWebApiContact").lidPnCache.getCurrentLid(n),d==null)throw r("err")("findDestinationChatForSingleMapping: missing peer recipient lid in 1-1 message")}else d=a.lid;var C=yield o("WAWebMessageProcessUtils").selectChatForOneOnOneMessage({lid:d,lidOrigin:m}),b=C.chatId;return b.isSameAccountAndAddressingMode(n)?{accountLid:C.accountLid}:{newRemote:b,accountLid:C.accountLid}}),_.apply(this,arguments)}function f(e){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.msgInfo,a=e.msgMeta,i=yield o("WAWebProcessPhoneNumberMapping").processPhoneNumberMappings(t,a,t.offline==null);if(t.category!==o("WAWebHandleMsgCommon").MSG_CATEGORY.peer){if(t.type===o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.OTHER_STATUS){var l=o("WAWebWidFactory").asUserWidOrThrow(t.author),s=o("WAWebWidFactory").asUserWidOrThrow(o("WAWebLidStatusMigrationUtils").matWidConvert(l));if(!l.equals(s)){var u;o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["maybeProcesMsgInfoForLid: converting status message from "," to "," based on migration stage ",""])),t.author.toLogString(),s.toLogString(),o("WAWebLidStatusMigrationGating").getLidStatusMigrationStage()),t.author=o("WAWebWidFactory").createDeviceWidFromUserAndDevice(s.user,s.server,(u=t.author.device)!=null?u:o("WAJids").DEFAULT_DEVICE_ID)}return}var c=o("WAWebLid1X1MigrationGating").Lid1X1MigrationUtils.isLidMigrated()||t.author.isLid()||t.chat.isLid();if(c)if(t.type===o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.PEER_BROADCAST){if(i.type!=="peer-broadcast")throw r("err")("maybeProcesMsgInfoForLid: mappings type is not the expected peer-broadcast");i.type;var _=i.mappings.map((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,n){var r=t.bclParticipants[n],i=yield p({msgInfo:t,msgMeta:a,mapping:e,chatWid:r.wid});(i==null?void 0:i.newRemote)!=null&&(r.preMatWid=r.wid,r.wid=o("WAWebWidFactory").asUserWidOrThrow(i.newRemote))});return function(t,n){return e.apply(this,arguments)}})());yield(m||(m=n("Promise"))).all(_)}else{if(i.type!=="not-peer-broadcast")throw r("err")("maybeProcesMsgInfoForLid: mappings type is not the expected not-peer-broadcast");i.type;var f=t.type===o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.OTHER_BROADCAST,g=f?t.author:t.chat;if(!g.isRegularUser())return;var h=yield p({msgInfo:t,msgMeta:a,mapping:i.mapping,chatWid:g});if(h==null)return;var y=h.accountLid,C=h.newRemote;if(y!=null&&(t.accountLid=y),C==null)return;f?(t.preMatChat=t.author,t.author=C):(t.preMatChat=g,t.chat=C)}}}),g.apply(this,arguments)}l.maybeProcesMsgInfoForLid=f}),98);
__d("WAWebHandleMsg",["Promise","WALogger","WAParsableWapNode","WATimeUtils","WAWebCreateNackFromStanza","WAWebDBReportingTokenUtils","WAWebGetMessageCache","WAWebHandleMsgCommon","WAWebHandleMsgMetaUtils","WAWebHandleMsgParser","WAWebHandleMsgProcess","WAWebHandleMsgSendReceipt","WAWebHandleMsgTypes.flow","WAWebMaybePostOfflineCountTooHighMetric","WAWebMessageDedupUtils","WAWebMessageInsertDebugPlaceholder","WAWebMessageQueue","WAWebMsgProcessingApiUtils","WAWebMsgProcessingDecryptApi","WAWebMsgType","WAWebOfflineHandler","WAWebPostIncomingMessageDropMetric","WAWebPostUnknownStanzaMetric","WAWebProcessMsgInfoForLid","WAWebSetUsernameJob","WAWebUsernameGatingUtils","WAWebWidFactory","asyncToGeneratorRuntime","cr:4122","gkx"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f;function g(e){return h.apply(this,arguments)}function h(){return h=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var a=o("WAWebHandleMsgParser").incomingMsgParser.parse(t);if(a.error){var i;r("gkx")("26258")?o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["handleMsg: error while parsing message stanza"]))).tags("messaging"):o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["handleMsg: error while parsing message stanza: ",", node: ",""])),a.error,t.toString()).tags("messaging"),o("WAWebPostUnknownStanzaMetric").postUnknownStanzaMetric(t);var l=o("WAWebHandleMsgParser").incomingMsgParserForAckOnly.parse(t);if(l.error)return l.error instanceof o("WAParsableWapNode").XmppParsingFailure?o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["failedParsingMessage: ",""])),l.error).tags("messaging").sendLogs("failedParsing: ack not parsed XMPP",{sampling:.01}):o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["failedParsingMessage:"]))).tags("messaging").sendLogs("failedParsing: ack not parsed",{sampling:.01}),o("WAWebPostIncomingMessageDropMetric").postIncomingMessageDropInvalidStanza(t),(f||(f=n("Promise"))).resolve(o("WAWebCreateNackFromStanza").createNackFromStanza(t,o("WAWebCreateNackFromStanza").NackReason.ParsingError));var h=l.success,C=h.externalId,b=h.msgInfo,v=h.offline,S=h.type,R=o("WAWebCreateNackFromStanza").NackReason.ParsingError;return S==null?(R=o("WAWebCreateNackFromStanza").NackReason.UnrecognizedStanzaType,o("WAWebPostIncomingMessageDropMetric").postIncomingMessageDropUnknownMessageType(t)):a.error instanceof o("WAParsableWapNode").XmppParsingFailure&&((i=a.error)==null?void 0:i.reason)===""+o("WAWebCreateNackFromStanza").NackReason.InvalidHostedCompanionStanza?(R=o("WAWebCreateNackFromStanza").NackReason.InvalidHostedCompanionStanza,o("WAWebPostIncomingMessageDropMetric").postIncomingMessageDropInvalidHostedCompanionStanza(t)):o("WAWebPostIncomingMessageDropMetric").postIncomingMessageDropInvalidStanza(t),o("WAWebMessageInsertDebugPlaceholder").maybeInsertDebugPlaceholder({externalId:C,nackReason:R,msgInfo:b,offline:v}),a.error instanceof o("WAParsableWapNode").XmppParsingFailure?o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["failedParsingMessage: "," ",""])),C,a.error).tags("messaging").sendLogs("failedParsing: ack parsed XMPP",{sampling:.01}):o("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["failedParsingMessage: ",""])),C).tags("messaging").sendLogs("failedParsing: ack parsed",{sampling:.01}),(f||(f=n("Promise"))).resolve(o("WAWebCreateNackFromStanza").createNackFromStanza(t,R))}var L=a.success;o("WAWebMaybePostOfflineCountTooHighMetric").maybePostOfflineCountTooHigh(L);var E=L.encs,k=L.msgBotInfo,I=L.msgInfo,T=L.msgMeta,D=o("WAWebMsgProcessingApiUtils").messageInfoToKey(I);I.clientReceivedTsMillis=o("WATimeUtils").unixTimeMs(),I.offline!=null&&(o("WAWebOfflineHandler").OfflineMessageHandler.addOfflinePendingMessage(),o("WAWebOfflineHandler").OfflineMessageHandler.offlineStanzaReceivedAfterComplete());var x=1;return o("WAWebMessageDedupUtils").isPengingMessageCacheEnabled()&&(x=o("WAWebMessageDedupUtils").addPendingMessage(D,I.ts,E)),o("WAWebOfflineHandler").OfflineMessageHandler.isResumeFromRestartComplete()&&delete L.msgInfo.offline,n("cr:4122")!=null&&n("cr:4122").isNextMessagePostponed(t,g)?(o("WAWebHandleMsgSendReceipt").sendReceipt(L.msgInfo,L.msgMeta,{result:o("WAWebHandleMsgTypes.flow").E2EProcessResult.SUCCESS}),null):o("WAWebMessageQueue").onMessageQueue({chatWid:I.chat,isOffline:!!L.msgInfo.offline,msgCategory:I.category,action:(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e;if(o("WALogger").LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["handleMessage: chat::"," msgId::",', start processing message, offline="','"'])),I.chat.toLogString(),I.externalId,(e=I.offline)!=null?e:"").tags("messaging"),I.msgProcessStartTsMillis=o("WATimeUtils").unixTimeMs(),yield o("WAWebProcessMsgInfoForLid").maybeProcesMsgInfoForLid({msgInfo:I,msgMeta:T}),o("WAWebUsernameGatingUtils").usernameDisplayedEnabled()){var t=[];if(I.type===o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.GROUP){var n=o("WAWebSetUsernameJob").maybeCreateSetUsernameInfoJobArg({userId:o("WAWebWidFactory").asUserWidOrThrow(I.author),username:I.participantUsername});n&&t.push(n)}else if(I.type===o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.PEER_BROADCAST)I.bclParticipants.forEach(function(e){var n,r=o("WAWebSetUsernameJob").maybeCreateSetUsernameInfoJobArg({userId:o("WAWebWidFactory").asUserWidOrThrow((n=e.peerRecipientLid)!=null?n:e.wid),username:e.peerRecipientUsername});r&&t.push(r)});else{var r=o("WAWebSetUsernameJob").maybeCreateSetUsernameInfoJobArg({userId:o("WAWebWidFactory").asUserWidOrThrow(I.author),username:I.username,usernameCountryCode:I.senderCountryCode});r&&t.push(r);var a;I.peerRecipientLid?a=o("WAWebWidFactory").asUserWidOrThrow(I.peerRecipientLid):I.chat.isLid()&&(a=o("WAWebWidFactory").asUserWidOrThrow(I.chat));var i=o("WAWebSetUsernameJob").maybeCreateSetUsernameInfoJobArg({userId:a,username:I.peerRecipientUsername});i&&t.push(i)}t.length>0&&(yield o("WAWebSetUsernameJob").setUsernamesJob(t))}var l=o("WAWebMsgProcessingApiUtils").messageInfoToKey(I);if(T.isUnavailable){o("WAWebDBReportingTokenUtils").maybeStoreReportingTag({msgKey:l,stanzaId:I.externalId,msgTs:I.ts,incomingMsgReportingTokenInfo:L.reportingTokenInfo}),o("WALogger").LOG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["handleMessage: msgId::",", get fanout placeholder"])),I.externalId).tags("messaging");var s=o("WAWebHandleMsgTypes.flow").PlaceholderType.FANOUT;return k!=null?s=o("WAWebHandleMsgTypes.flow").PlaceholderType.BOT_UNAVAILABLE_FANOUT:T.isHostedMsgUnavailable===!0?s=o("WAWebHandleMsgTypes.flow").PlaceholderType.HOSTED_UNAVAILABLE_FANOUT:T.isViewOnceUnavailable===!0&&(s=o("WAWebHandleMsgTypes.flow").PlaceholderType.VIEW_ONCE_UNAVAILABLE_FANOUT),yield o("WAWebHandleMsgProcess").processPlaceholderMsg({type:o("WAWebMsgType").MSG_TYPE.CIPHERTEXT,msgMeta:T,msgInfo:I,placeholderType:s}),o("WAWebHandleMsgSendReceipt").sendReceipt(I,T,{result:o("WAWebHandleMsgTypes.flow").E2EProcessResult.BACKFILL}),null}var u=yield o("WAWebMsgProcessingDecryptApi").decryptE2EPayload(L,o("WAWebHandleMsgProcess").processDecryptedMessageProto);return I.offline!=null&&o("WAWebOfflineHandler").OfflineMessageHandler.processMessageDecryptResult(u.result),u.result!==o("WAWebHandleMsgTypes.flow").E2EProcessResult.SUCCESS&&o("WAWebDBReportingTokenUtils").maybeStoreReportingTag({msgKey:l,stanzaId:I.externalId,msgTs:I.ts,incomingMsgReportingTokenInfo:L.reportingTokenInfo}),u.result===o("WAWebHandleMsgTypes.flow").E2EProcessResult.SIGNAL_OLD_COUNTER_ERROR&&y(L)?o("WAWebGetMessageCache").getMessageCache().addMessages([{duplicateMsgReceiptInfo:{externalId:I.externalId,from:o("WAWebMsgProcessingApiUtils").getFrom(I),author:I.author,msgInfo:I,msgMeta:T,enc:u.failedEnc||E[0],hasHideFailEnc:E.some(function(e){return e.hideFail}),msgReceivedTimes:x}}],I.offline==null):I.offline==null||I.category===o("WAWebHandleMsgCommon").MSG_CATEGORY.peer||T.type===o("WAWebHandleMsgCommon").STANZA_MSG_TYPES.medianotify||u.result!==o("WAWebHandleMsgTypes.flow").E2EProcessResult.SUCCESS&&u.result!==o("WAWebHandleMsgTypes.flow").E2EProcessResult.SIGNAL_OLD_COUNTER_ERROR?o("WAWebHandleMsgSendReceipt").sendReceipt(I,T,u):o("WAWebGetMessageCache").getMessageCache().addMessages([{receiptInfo:{externalId:I.externalId,from:o("WAWebMsgProcessingApiUtils").getFrom(I),author:I.author}}],!1),null});function t(){return e.apply(this,arguments)}return t})()})}),h.apply(this,arguments)}function y(e){var t=e.encs,n=e.msgMeta,r=t.some(function(e){return e.hideFail});return r?o("WAWebHandleMsgMetaUtils").isReactionMsgMeta(n)||o("WAWebHandleMsgMetaUtils").isPollVoteMsgMeta(n):n.type===o("WAWebHandleMsgCommon").STANZA_MSG_TYPES.text||n.type===o("WAWebHandleMsgCommon").STANZA_MSG_TYPES.media||n.type===o("WAWebHandleMsgCommon").STANZA_MSG_TYPES.medianotify||n.type===o("WAWebHandleMsgCommon").STANZA_MSG_TYPES.poll}l.default=g}),98);
__d("WAWebHandleMsgReceiptParser",["WADeprecatedWapParser","WALogger","WAWebAck","WAWebHandleMsgTypes.flow","WAWebJidToWid","WAWebUserPrefsMeUser"],(function(t,n,r,o,a,i,l){var e,s,u={delivery:(s=o("WAWebAck")).ACK.RECEIVED,read:s.ACK.READ,played:s.ACK.PLAYED,inactive:s.ACK.INACTIVE,"server-error":s.ACK.CONTENT_GONE,sender:s.ACK.RECEIVED,"read-self":s.ACK.READ,"played-self":s.ACK.PLAYED,peer_msg:s.ACK.PEER},c=new(r("WADeprecatedWapParser"))("incomingMsgReceiptParser",function(e){e.assertTag("receipt"),e.hasAttr("to")&&e.assertAttr("to",o("WAWebUserPrefsMeUser").getMeDevicePnOrThrow().toJid());var t=e.hasAttr("type")?e.attrEnumOrNullIfUnknown("type",u):o("WAWebAck").ACK.RECEIVED,n={stanzaId:e.attrString("id"),from:o("WAWebJidToWid").jidWithTypeToWid(e.attrJidWithType("from")),offline:e.maybeAttrString("offline")},r=babelHelpers.extends({},n,{ack:t!=null?t:o("WAWebAck").ACK.RECEIVED,ackString:e.maybeAttrString("type")}),a=e.maybeChild("error");a!=null&&a.hasAttr("reason")&&a.attrString("reason")==="lid"&&a.attrString("type")==="feature-incapable"&&(r.ack=o("WAWebAck").ACK.SENT);var i=e.maybeChild("participants");if(i==null)return p(r,e);var l=i.hasAttr("message_id");return l?m(n,i):d(r,i)});function d(e,t){var n=t.mapChildrenWithTag("user",function(e){try{var t=o("WAWebJidToWid").deviceJidToDeviceWid(e.attrDeviceJid("jid")),n=e.attrTime("t");return{participant:t,ts:n}}catch(e){return null}}),r=n.filter(Boolean);return babelHelpers.extends({},e,{type:"aggregated_by_type",externalId:t.attrString("key"),receipts:r})}function m(t,n){var r=[];return n.forEachChildWithTag("user",function(t){try{var n,a=o("WAWebJidToWid").deviceJidToDeviceWid(t.attrDeviceJid("jid")),i=t.attrTime("t"),l=t.maybeAttrString("type"),s=(n=t.maybeAttrEnum("type",u))!=null?n:o("WAWebAck").ACK.RECEIVED;r.push({participant:a,ack:s,ackString:l,ts:i})}catch(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["parseAggregateByMessageReceipt: failed: ",""])),t).sendLogs("failed-to-parse-aggregeated-by-message-receipt",{sampling:.001})}}),babelHelpers.extends({},t,{type:"aggregated_by_message",externalId:n.attrString("message_id"),receipts:r})}function p(e,t){var n=t.hasAttr("participant")?o("WAWebJidToWid").deviceJidToDeviceWid(t.attrDeviceJid("participant")):null,r=t.hasAttr("recipient")?o("WAWebJidToWid").userJidToUserWid(t.attrUserJid("recipient")):null,a=t.maybeAttrString("type")==="view",i;t.hasChild("list")?i=t.child("list").mapChildrenWithTag("item",function(e){return a?e.attrString("server_id"):e.attrString("id")}):i=[];var l;if(t.hasChild("biz")){var s=t.child("biz"),u=o("WAWebHandleMsgTypes.flow").ActualActorsEnumType.cast(s.maybeAttrInt("actual_actors")),c=o("WAWebHandleMsgTypes.flow").HostStorageEnumType.cast(s.maybeAttrInt("host_storage")),d=s.maybeAttrInt("privacy_mode_ts");u!=null&&c!=null&&d!=null&&(l={actualActors:u,hostStorage:c,privacyModeTs:d})}a||i.push(e.stanzaId);var m=!1;return n!=null&&n.isBot()&&t.hasAttr("is_lid")&&(m=t.attrString("is_lid")==="true"),babelHelpers.extends({},e,{type:"simple",externalIds:i,participant:n,recipient:r,ts:t.attrTime("t"),biz:l,isLidBot:m})}l.RECEIPT_TYPES_TO_ACK=u,l.msgReceiptParser=c}),98);
__d("WAWebWamEnumReceiptAggregationType",[],(function(t,n,r,o,a,i){var e=Object.freeze({NONE:0,MULTI_MESSAGES:1,MULTI_PARTICIPANTS:2,AGGREGATE_BY_ID:3});i.RECEIPT_AGGREGATION_TYPE=e}),66);
__d("WAWebWamEnumReceiptStanzaStage",[],(function(t,n,r,o,a,i){var e=Object.freeze({OVERALL:0,WAITING_IN_E2E_QUEUE:6,WAITING_IN_UNORDERED_QUEUE:7,PARSE:1,WAITING_TO_PROCESS:2,PROCESS:3,WAITING_TO_ACK:5,ACK:4});i.RECEIPT_STANZA_STAGE=e}),66);
__d("WAWebReceiptStanzaReceiveWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumMediaType","WAWebWamEnumMessageType","WAWebWamEnumReceiptAggregationType","WAWebWamEnumReceiptStanzaStage"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({ReceiptStanzaReceive:[2496,{dbReadsCount:[12,e.TYPES.INTEGER],dbWritesCount:[13,e.TYPES.INTEGER],mediaType:[2,o("WAWebWamEnumMediaType").MEDIA_TYPE],messageType:[10,o("WAWebWamEnumMessageType").MESSAGE_TYPE],processingDeferred:[14,e.TYPES.BOOLEAN],receiptAggregation:[11,o("WAWebWamEnumReceiptAggregationType").RECEIPT_AGGREGATION_TYPE],receiptStanzaDuration:[1,e.TYPES.TIMER],receiptStanzaHasOrphaned:[6,e.TYPES.BOOLEAN],receiptStanzaOfflineCount:[3,e.TYPES.INTEGER],receiptStanzaProcessedCount:[8,e.TYPES.INTEGER],receiptStanzaRetryVer:[5,e.TYPES.INTEGER],receiptStanzaStage:[9,o("WAWebWamEnumReceiptStanzaStage").RECEIPT_STANZA_STAGE],receiptStanzaTotalCount:[7,e.TYPES.INTEGER],receiptStanzaType:[4,e.TYPES.STRING],stanzaBatchSize:[15,e.TYPES.INTEGER],stanzaProcessCount:[16,e.TYPES.INTEGER]},[1,1e3,2e3],"regular"]},{ReceiptStanzaReceive:[]});l.ReceiptStanzaReceiveWamEvent=s}),98);
__d("WAWebCreateReceiptStanzaReceiveMetric",["WAWebAck","WAWebHandleMsgReceiptParser","WAWebReceiptStanzaReceiveWamEvent","WAWebWamEnumMessageType","WAWebWamEnumReceiptStanzaStage","WAWebWid"],(function(t,n,r,o,a,i,l){function e(){var e=new(o("WAWebReceiptStanzaReceiveWamEvent")).ReceiptStanzaReceiveWamEvent({receiptStanzaStage:o("WAWebWamEnumReceiptStanzaStage").RECEIPT_STANZA_STAGE.OVERALL,receiptStanzaTotalCount:1});return function(t){var n=t.ackString,r=t.from,a=t.offline,i=t.receipts;if(e.messageType=s(r),a!=null){var l=parseInt(a,10);Number.isNaN(l)||(e.receiptStanzaOfflineCount=l)}n==null?e.receiptStanzaType=o("WAWebAck").ACK_STRING.DELIVERY:o("WAWebHandleMsgReceiptParser").RECEIPT_TYPES_TO_ACK[n]!=null&&(e.receiptStanzaType=n),(i==null?void 0:i.length)!=null&&(e.receiptStanzaTotalCount=i.length),e.markReceiptStanzaDuration(),e.commit()}}function s(e){return r("WAWebWid").isStatus(e)?o("WAWebWamEnumMessageType").MESSAGE_TYPE.STATUS:r("WAWebWid").isGroup(e)?o("WAWebWamEnumMessageType").MESSAGE_TYPE.GROUP:r("WAWebWid").isBroadcast(e)?o("WAWebWamEnumMessageType").MESSAGE_TYPE.BROADCAST:r("WAWebWid").isNewsletter(e)?o("WAWebWamEnumMessageType").MESSAGE_TYPE.CHANNEL:o("WAWebWamEnumMessageType").MESSAGE_TYPE.INDIVIDUAL}l.createReceiptStanzaReceiveMetric=e}),98);
__d("WAWebHandleAckPeerSimpleReceipt",["WAWebApiPeerMessageStore","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){function e(e){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){yield o("WAWebApiPeerMessageStore").deletePeerMessage(e.stanzaId)}),s.apply(this,arguments)}l.handleAckPeerSimpleReceipt=e}),98);
__d("WAWebHandleBotInvokeMsgReceipt",["WAWebAck","WAWebMessageReceiptBatcher","WAWebMsgKey","WAWebOfflineHandler","WAWebOrchestratorNonPersistedJob","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){function e(e){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.ack,n=e.ackString,a=e.externalIds,i=e.from,l=e.offline,s=e.recipient,u=e.ts,c=l!=null&&!o("WAWebOfflineHandler").OfflineMessageHandler.isResumeFromRestartComplete();if(n!==o("WAWebAck").ACK_STRING.READ||s==null||!i.isBot())throw r("err")("handleBotOneToOneInvokeSimpleReadReceipt: unexpected receipt");var d=a.map(function(e){return new(r("WAWebMsgKey"))({id:e,remote:s,fromMe:!0})}),m=d.map(function(e){return e.toString()}),p=o("WAWebMessageReceiptBatcher").receiptBatcher.acceptOtherReceipt({ack:t,ts:u,receiverId:i,msgKeys:m,isBotInvoke:!0});return c||(yield o("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("receiptBatcherRunActiveBatches",function(){return o("WAWebMessageReceiptBatcher").receiptBatcher.runActiveBatches()}).waitUntilCompleted()),p}),s.apply(this,arguments)}l.handleBotOneToOneInvokeSimpleReadReceipt=e}),98);
__d("WAWebHandleMsgReceiptUtils",["WAWebAck"],(function(t,n,r,o,a,i,l){function e(e){return e===o("WAWebAck").ACK_STRING.READ||e===o("WAWebAck").ACK_STRING.READ_SELF||e===o("WAWebAck").ACK_STRING.PLAYED||e===o("WAWebAck").ACK_STRING.PLAYED_SELF}function s(e){return e.receipts.map(function(t){return{type:"simple",stanzaId:e.externalId,externalIds:[e.externalId],from:e.from,participant:t.participant,recipient:null,ts:t.ts,ack:e.ack,ackString:e.ackString,offline:e.offline,biz:null,isLidBot:!1}})}function u(e){return e.receipts.map(function(t){return{type:"simple",stanzaId:e.externalId,externalIds:[e.externalId],from:e.from,participant:t.participant,recipient:null,ts:t.ts,ack:t.ack,ackString:t.ackString,offline:e.offline,biz:null,isLidBot:!1}})}l.isReadOrPlayedReceipt=e,l.deaggregateGroupedByTypeReceipt=s,l.deaggregateGroupedByMessageReceipt=u}),98);
__d("WAWebHandleDirectChatReceipt",["Promise","WAJids","WALogger","WAWebAck","WAWebHandleMsgReceiptCommon","WAWebHandleMsgReceiptUtils","WAWebMessageReceiptBatcher","WAWebMsgKey","WAWebOfflineHandler","WAWebSimpleSignalPNToFBIDMigration","WAWebUserPrefsIndexedDBStorage","WAWebUserPrefsKeys","WAWebUserPrefsMeUser","WAWebWid","WAWebWidFactory","asyncToGeneratorRuntime","err","gkx"],(function(t,n,r,o,a,i,l){var e,s,u,c;function d(e){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var a=t.ackString,i=t.biz,l=t.externalIds,d=t.from,m=t.offline,p=t.recipient,_=t.ts,f=t.ack,g=a===o("WAWebAck").ACK_STRING.SENDER,h=!g&&o("WAWebUserPrefsMeUser").isMeAccount(d),y;if(h||g){if(!p)throw r("gkx")("26258")?o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["error: invalid sender/peer receipt without recipient"]))):o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["error: invalid sender/peer receipt without recipient"]))).sendLogs("handleChatSimpleReceipt: failed"),r("err")("handleChatSimpleReceipt: invalid sender/peer receipt without recipient");y=p}else{var C;y=o("WAWebWidFactory").asUserWidOrThrow(d);var b=((C=o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(o("WAWebUserPrefsKeys").HASHED_KEYS.USER_PRIVACY_SETTINGS))==null?void 0:C.readReceipts)==="none";b&&(f===o("WAWebAck").ACK.READ||f===o("WAWebAck").ACK.PLAYED)&&(f=o("WAWebAck").ACK.RECEIVED)}var v=o("WAWebSimpleSignalPNToFBIDMigration").getDeprecatedPnChatForFbidThread(y);v!=null&&(o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["handleChatSimpleReceipt: forwarding "," to ",""])),y.toLogString(),v.toLogString()),y=o("WAWebWidFactory").asUserWidOrThrow(v));var S;y!=null&&r("WAWebWid").isWid(y)&&y===o("WAWebWidFactory").createWid(o("WAJids").PSA_JID)&&(S=o("WAWebWidFactory").createWid(o("WAJids").PSA_JID));var R=l.map(function(e){return new(r("WAWebMsgKey"))({id:e,remote:y,fromMe:!h,participant:S})});h&&f===o("WAWebAck").ACK.PLAYED&&o("WAWebHandleMsgReceiptCommon").handleViewOnceOpenedIfNecessary(R);var L=R.map(function(e){return e.toString()});m!=null&&o("WAWebOfflineHandler").OfflineMessageHandler.offlineStanzaReceivedAfterComplete();var E=m!=null&&!o("WAWebOfflineHandler").OfflineMessageHandler.isResumeFromRestartComplete(),k=(c||(c=n("Promise"))).resolve();return h?p!=null&&o("WAWebHandleMsgReceiptUtils").isReadOrPlayedReceipt(a)&&l.length>0&&(k=o("WAWebMessageReceiptBatcher").receiptBatcher.acceptPeerReceipt({ack:f,ts:_,msgKeys:L,isOffline:E,remote:y})):k=o("WAWebMessageReceiptBatcher").receiptBatcher.acceptOtherReceipt({ack:f,ts:_,receiverId:d,msgKeys:L,privacyMode:i,isSender:g}),E||o("WAWebMessageReceiptBatcher").receiptBatcher.runActiveBatches(),k}),m.apply(this,arguments)}l.handleChatSimpleReceipt=d}),98);
__d("WAWebHandleGroupChatReceipt",["WALogger","WAWebAck","WAWebHandleMsgReceiptCommon","WAWebHandleMsgReceiptUtils","WAWebMessageReceiptBatcher","WAWebMsgKey","WAWebOfflineHandler","WAWebOrchestratorNonPersistedJob","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime","err","gkx"],(function(t,n,r,o,a,i,l){var e,s,u;function c(e){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=t.ack,a=t.ackString,i=t.externalIds,l=t.from,c=t.isLidBot,d=t.offline,m=t.participant,p=t.recipient,_=t.ts;if(!m)throw o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["error: got group ack without participant."]))).sendLogs("handleGroupSimpleReceipt: failed"),r("err")("handleGroupSimpleReceipt: got group ack without participant.");var f=o("WAWebWidFactory").asUserWidOrThrow(m),g=a===o("WAWebAck").ACK_STRING.SENDER,h=!g&&o("WAWebUserPrefsMeUser").isMeAccount(f),y;if(h){if(!p)throw r("gkx")("26258")?o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["error: invalid sender/peer receipt without recipient"]))):o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["error: invalid sender/peer receipt without recipient"]))).sendLogs("handleGroupSimpleReceipt: failed"),r("err")("handleGroupSimpleReceipt: invalid sender/peer receipt without recipient");y=p}else y=f.isLid()||c?o("WAWebUserPrefsMeUser").getMeLidUserOrThrow():o("WAWebUserPrefsMeUser").getMePnUserOrThrow();var C=i.map(function(e){return new(r("WAWebMsgKey"))({id:e,remote:l,fromMe:!h,participant:y})});h&&n===o("WAWebAck").ACK.PLAYED&&o("WAWebHandleMsgReceiptCommon").handleViewOnceOpenedIfNecessary(C);var b=C.map(function(e){return e.toString()});d!=null&&o("WAWebOfflineHandler").OfflineMessageHandler.offlineStanzaReceivedAfterComplete();var v=d!=null&&!o("WAWebOfflineHandler").OfflineMessageHandler.isResumeFromRestartComplete(),S;return h?p!=null&&o("WAWebHandleMsgReceiptUtils").isReadOrPlayedReceipt(a)&&i.length>0&&(S=o("WAWebMessageReceiptBatcher").receiptBatcher.acceptPeerReceipt({isOffline:v,ack:n,ts:_,msgKeys:b,remote:l})):S=o("WAWebMessageReceiptBatcher").receiptBatcher.acceptOtherReceipt({ack:n,ts:_,receiverId:m,msgKeys:b}),v||(yield o("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("receiptBatcherRunActiveBatches",function(){return o("WAWebMessageReceiptBatcher").receiptBatcher.runActiveBatches()}).waitUntilCompleted()),S}),d.apply(this,arguments)}l.handleGroupSimpleReceipt=c}),98);
__d("WAWebHandleNewsletterReceipt",["WAAckLevel","WALogger","WAWebAck","WAWebHandleMsgReceiptCommon","WAWebMessageReceiptBatcher","WAWebMsgKey","WAWebOfflineHandler","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){var e,s;function u(e){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=t.ack,a=t.ackString,i=t.externalIds,l=t.from,u=t.offline,c=t.participant,d=t.stanzaId,m=t.ts,p="[receipt][newsletter]["+d+"]";if(a==="view")return o("WAWebHandleMsgReceiptCommon").updateMsgViewed(i.map(function(e){return parseInt(e,10)}),l);if(n!==o("WAAckLevel").ACK.READ&&n!==o("WAAckLevel").ACK.PLAYED)throw o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose([""," ACK should be READ or PLAYED, "," received instead"])),p,n),r("err")("handleNewsletterSimpleReceipt: only READ/PLAYED ack for newsletters");var _=(a===o("WAWebAck").ACK_STRING.READ_SELF||a===o("WAWebAck").ACK_STRING.PLAYED_SELF)&&c!=null&&o("WAWebWidFactory").asUserWidOrThrow(c).equals(o("WAWebUserPrefsMeUser").getMePnUserOrThrow());if(!_)throw o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose([""," only peer receipts are accepted"])),p),r("err")("handleNewsletterSimpleReceipt: only peer receipts for newsletters");var f=i.map(function(e){return new(r("WAWebMsgKey"))({id:e,remote:l,fromMe:!1})}),g=f.map(function(e){return e.toString()});u!=null&&o("WAWebOfflineHandler").OfflineMessageHandler.offlineStanzaReceivedAfterComplete();var h=u!=null&&!o("WAWebOfflineHandler").OfflineMessageHandler.isResumeFromRestartComplete(),y=o("WAWebMessageReceiptBatcher").receiptBatcher.acceptPeerReceipt({isOffline:h,ack:n,ts:m,remote:l,msgKeys:g});return h||(yield o("WAWebMessageReceiptBatcher").receiptBatcher.runActiveBatches()),y}),c.apply(this,arguments)}l.handleNewsletterSimpleReceipt=u}),98);
__d("WAWebHandleStatusReceipt",["Promise","WAJids","WALogger","WAWebAck","WAWebMessageReceiptBatcher","WAWebMsgKey","WAWebOfflineHandler","WAWebUserPrefsIndexedDBStorage","WAWebUserPrefsKeys","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s;function u(e){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var a,i=t.ack,l=t.ackString,u=t.externalIds,c=t.offline,d=t.participant,m=t.recipient,p=t.ts,_=u[0];if(!d){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["error: got status ack without participant"]))).sendLogs("handleStatusSimpleReceipt: failed");return}var f=o("WAWebUserPrefsMeUser").getMePnUserOrThrow(),g=o("WAWebWidFactory").asUserWidOrThrow(d),h=o("WAWebUserPrefsMeUser").isMeAccount(g),y=((a=o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(o("WAWebUserPrefsKeys").HASHED_KEYS.USER_PRIVACY_SETTINGS))==null?void 0:a.readReceipts)==="none";if(!(!h&&(y||l!==o("WAWebAck").ACK_STRING.READ))){var C=o("WAWebWidFactory").createWid(o("WAJids").STATUS_JID),b=new(r("WAWebMsgKey"))({id:_,remote:C,fromMe:!h,participant:m!=null?m:f}),v=[b.toString()],S=c!=null&&!o("WAWebOfflineHandler").OfflineMessageHandler.isResumeFromRestartComplete(),R=(s||(s=n("Promise"))).resolve();return h?R=o("WAWebMessageReceiptBatcher").receiptBatcher.acceptPeerReceipt({ts:p,msgKeys:v,ack:i,isOffline:S,remote:C}):R=o("WAWebMessageReceiptBatcher").receiptBatcher.acceptOtherReceipt({ack:i,ts:p,receiverId:g,msgKeys:v}),S||o("WAWebMessageReceiptBatcher").receiptBatcher.runActiveBatches(),R}}),c.apply(this,arguments)}l.handleStatusSimpleReceipt=u}),98);
__d("WAWebReceiptAck",["WAWap","WAWebCommsWapMd"],(function(t,n,r,o,a,i,l){function e(e,t,n,r){return o("WAWap").wap("ack",{to:o("WAWebCommsWapMd").JID(e),id:o("WAWap").CUSTOM_STRING(t),class:"receipt",type:o("WAWap").MAYBE_CUSTOM_STRING(n),participant:r&&r!==e?o("WAWebCommsWapMd").DEVICE_JID(r):o("WAWap").DROP_ATTR})}l.buildReceiptAck=e}),98);
__d("WAWebHandleMsgReceipt",["Promise","WALogger","WAWebAck","WAWebCreateReceiptStanzaReceiveMetric","WAWebHandleAckPeerSimpleReceipt","WAWebHandleBotInvokeMsgReceipt","WAWebHandleDirectChatReceipt","WAWebHandleGroupChatReceipt","WAWebHandleMsgReceiptParser","WAWebHandleMsgReceiptUtils","WAWebHandleNewsletterReceipt","WAWebHandleStatusReceipt","WAWebNewsletterGatingUtils","WAWebReceiptAck","asyncToGeneratorRuntime","err","gkx"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g,h;function y(e){return C.apply(this,arguments)}function C(){return C=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=o("WAWebCreateReceiptStanzaReceiveMetric").createReceiptStanzaReceiveMetric(),n=o("WAWebHandleMsgReceiptParser").msgReceiptParser.parse(e);if(n.error)throw o("WALogger").ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Parsing Error: ",""])),n.error.toString()),n.error;var a=n.success,i=a.ack,l=a.ackString,s=a.from,u=a.offline,c=a.stanzaId,h;if(a.type==="simple")if(i===o("WAWebAck").ACK.CONTENT_GONE)h=o("WAWebReceiptAck").buildReceiptAck(s,c,l,null);else{try{o("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(['handleSimpleReceipt: receipt "','" for msg: ',""])),i,r("gkx")("26258")?"...":c),yield b(a)}catch(e){o("WALogger").WARN(p||(p=babelHelpers.taggedTemplateLiteralLoose(['handleSimpleReceipt: receipt "','" for msg: '," failed: ",""])),i,r("gkx")("26258")?"...":c,r("gkx")("26258")?"...":e).tags("messaging")}h=o("WAWebReceiptAck").buildReceiptAck(s,c,l,a.participant)}else if(a.type==="aggregated_by_type"){try{o("WALogger").LOG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["handleAggregateReceipt: ",' receipt(s) "','" for msg: ',""])),a.receipts.length,i,r("gkx")("26258")?"...":a.externalId),yield v(a)}catch(e){}h=o("WAWebReceiptAck").buildReceiptAck(s,c,l,null)}else if(a.type==="aggregated_by_message"){try{o("WALogger").LOG(f||(f=babelHelpers.taggedTemplateLiteralLoose(["handleAggregateByMessageReceipt: "," receipt(s) for msg: ",""])),a.receipts.length,r("gkx")("26258")?"...":a.externalId),yield S(a)}catch(e){o("WALogger").ERROR(g||(g=babelHelpers.taggedTemplateLiteralLoose(["handleAggregateByMessageReceipt: failed: ",""])),e).sendLogs("handle-aggregate-by-message-receipt-failed",{sampling:.001})}h=o("WAWebReceiptAck").buildReceiptAck(s,c,l,null)}else a.type;return u==null&&t(a),h}),C.apply(this,arguments)}function b(t){var a=t.ack,i=t.ackString,l=t.from,u=t.recipient;if(a===o("WAWebAck").ACK.PEER)return o("WAWebHandleAckPeerSimpleReceipt").handleAckPeerSimpleReceipt(t);if(l.isNewsletter())return o("WAWebNewsletterGatingUtils").isNewsletterEnabled()?o("WAWebHandleNewsletterReceipt").handleNewsletterSimpleReceipt(t):(h||(h=n("Promise"))).resolve();if(l.isBot()&&u!=null&&i===o("WAWebAck").ACK_STRING.READ)return o("WAWebHandleBotInvokeMsgReceipt").handleBotOneToOneInvokeSimpleReadReceipt(t);if(l.isStatus())return o("WAWebHandleStatusReceipt").handleStatusSimpleReceipt(t);if(l.isUser())return o("WAWebHandleDirectChatReceipt").handleChatSimpleReceipt(t);if(l.isGroup())return o("WAWebHandleGroupChatReceipt").handleGroupSimpleReceipt(t);if(l.isBroadcast()){if(!t.participant)return o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["error: missing participant for broadcast receipt ",""])),l.toString()).sendLogs("handleSimpleReceipt: failed"),(h||(h=n("Promise"))).reject(r("err")("handleSimpleReceipt: missing participant for broadcast receipt "+l.toString()));var c=babelHelpers.extends({},t,{from:t.participant,participant:null});return o("WAWebHandleDirectChatReceipt").handleChatSimpleReceipt(c)}return o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["error: unsupported type for ",""])),l.toString()).sendLogs("handleSimpleReceipt: failed"),(h||(h=n("Promise"))).reject(r("err")("handleSimpleReceipt: unsupported type for "+l.toString()))}function v(e){var t=e.ack,a=e.from;return t===o("WAWebAck").ACK.CONTENT_GONE?(o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["error: reupload receipts cannot be aggregated"]))).sendLogs("handleAggregateReceipt: failed"),(h||(h=n("Promise"))).reject(r("err")("handleAggregateReceipt: failed"))):!a.isGroup()&&!a.isBroadcast()?(o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["handleAggregateReceipt: aggregate receipts should come only from group, broadcast"]))).sendLogs("handleAggregateReceipt: failed"),(h||(h=n("Promise"))).reject(r("err")("handleAggregateReceipt: failed"))):(h||(h=n("Promise"))).all(o("WAWebHandleMsgReceiptUtils").deaggregateGroupedByTypeReceipt(e).map(b))}function S(e){return(h||(h=n("Promise"))).all(o("WAWebHandleMsgReceiptUtils").deaggregateGroupedByMessageReceipt(e).map(b))}l.default=y}),98);
__d("WAWebCommsHandleMessagingStanza",["WAParsableWapNode","WAWebCommsHandleStanzaUtils","WAWebCreateNackFromStanza","WAWebHandleMsg","WAWebHandleMsgReceipt","WAWebPostUnknownStanzaMetric","WAWebWid"],(function(t,n,r,o,a,i,l){function e(e){var t=e.attrs;switch(e.tag){case"message":{var n=e.attrs.from;if(!r("WAWebWid").isNewsletter(n==null?void 0:n.toString()))return r("WAWebHandleMsg")(e).catch(function(t){return o("WAWebCommsHandleStanzaUtils").handleMessageParsingFailure(e,t)})}break;case"receipt":try{if(!o("WAWebCommsHandleStanzaUtils").isCallReceipt(e)&&t.type!=="retry")return r("WAWebHandleMsgReceipt")(e)}catch(t){return t instanceof o("WAParsableWapNode").XmppParsingFailure?(o("WAWebPostUnknownStanzaMetric").postUnknownStanzaMetric(e),o("WAWebCreateNackFromStanza").createNackFromStanza(e,o("WAWebCreateNackFromStanza").NackReason.ParsingError)):o("WAWebCreateNackFromStanza").createNackFromStanza(e,o("WAWebCreateNackFromStanza").NackReason.UnhandledError)}}}l.handleMessagingStanza=e}),98);
__d("WAWebContactManagementGating",["WAWebABProps","WAWebPrimaryFeatures"],(function(t,n,r,o,a,i,l){function e(){return s()&&u()}function s(){return o("WAWebPrimaryFeatures").primaryFeatureEnabled("companion_contact_change_enabled")}function u(){return o("WAWebABProps").getABPropConfigValue("native_contact_companion_change_enabled")}function c(){var e=Number.parseInt(o("WAWebABProps").getABPropConfigValue("native_contact_companion_nux_learn_more_article_id"),10);return Number.isNaN(e)&&(e=0x43bafc6a5bf34),e}l.contactManagementEnabled=e,l.getNativeContactLearnMoreArticleId=c}),98);
__d("WAWebDomAttrToData",["WACamelCase"],(function(t,n,r,o,a,i,l){function e(e){return r("WACamelCase")(e.replace(/^data-/,""))}l.default=e}),98);
__d("WAWebDomElementMatches",[],(function(t,n,r,o,a,i){var e=Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;function l(t,n){return t instanceof HTMLElement?e.call(t,n):!1}i.default=l}),66);
__d("WAWebCopyPasteCopyable.react",["WAWebClassnames","WAWebDomAttrToData","WAWebDomElementMatches","WAWebExternalLink.react","WAWebURLUtils","isStringNullOrEmpty","react","stylex"],(function(t,n,r,o,a,i,l){var e=["ref","forwardedRef"],s=["element","ref"],u=["appTextTemplate","plainText","prePlainText","xstyle"],c,d,m=c||(c=r("react")),p="copyable-text",_="."+p,f="data-plain-text",g=r("WAWebDomAttrToData")(f),h="data-pre-plain-text",y=r("WAWebDomAttrToData")(h),C="data-app-text-template",b=r("WAWebDomAttrToData")(C);function v(e){return e instanceof HTMLElement&&r("WAWebDomElementMatches")(e,_)}function S(e){return e.dataset[y]}function R(e){return e.dataset[g]}function L(e){return e.dataset[b]}function E(e){var t=Array.from(e.querySelectorAll(_));return t.filter(function(e){return!t.some(function(t){return t!==e&&t.contains(e)})})}function k(e){return m.jsx("code",babelHelpers.extends({},F(e)))}k.displayName=k.name+" [from "+i.id+"]";function I(e){return m.jsx("del",babelHelpers.extends({},F(e)))}I.displayName=I.name+" [from "+i.id+"]";function T(e){return m.jsx("div",babelHelpers.extends({},F(e)))}T.displayName=T.name+" [from "+i.id+"]";function D(e){return m.jsx("em",babelHelpers.extends({},F(e)))}D.displayName=D.name+" [from "+i.id+"]";function x(t){var n,r=t.ref,o=t.forwardedRef,a=babelHelpers.objectWithoutPropertiesLoose(t,e),i=F(a);return m.jsx("img",babelHelpers.extends({ref:o!=null?o:r},i,{tabIndex:i.onClick?0:-1,alt:(n=i.alt)!=null?n:""}))}x.displayName=x.name+" [from "+i.id+"]";function $(e){var t=F(e),n=t.href;return!r("isStringNullOrEmpty")(n)&&!r("WAWebURLUtils").hasValidUrlScheme(n)?m.jsx("span",{}):m.jsx(o("WAWebExternalLink.react").ExternalLinkEl,babelHelpers.extends({},t))}$.displayName=$.name+" [from "+i.id+"]";function P(e){return m.jsx("span",babelHelpers.extends({},F(e)))}P.displayName=P.name+" [from "+i.id+"]";function N(e){return m.jsx("strong",babelHelpers.extends({},F(e)))}N.displayName=N.name+" [from "+i.id+"]";function M(e){return m.jsx("blockquote",babelHelpers.extends({},F(e)))}M.displayName=M.name+" [from "+i.id+"]";function w(e){var t=e.element,n=e.ref,r=babelHelpers.objectWithoutPropertiesLoose(e,s);return m.jsx(t,babelHelpers.extends({},F(r),{ref:n}))}w.displayName=w.name+" [from "+i.id+"]";var A=w;function F(e){var t=e.appTextTemplate,n=e.plainText,a=e.prePlainText,i=e.xstyle,l=babelHelpers.objectWithoutPropertiesLoose(e,u),s=babelHelpers.extends({},l);return s.className=o("WAWebClassnames").classnamesConvertMeToStylexPlease(l.className,p),n!=null&&(s[f]=n),a!=null&&(s[h]=a),t!=null&&(s[C]=t),i!=null&&(s.className=o("WAWebClassnames").classnamesConvertMeToStylexPlease(s.className,(d||(d=r("stylex")))(i))),s}l.COPYABLE_CSS_CLASS=p,l.PLAIN_TEXT_DATA_ATTR=g,l.APP_TEXT_TEMPLATE_DATA_ATTR=b,l.isCopyable=v,l.getPrePlainTextData=S,l.getPlainTextData=R,l.getAppTextTemplateData=L,l.findCopyableChildren=E,l.CopyableCode=k,l.CopyableDel=I,l.CopyableDiv=T,l.CopyableEm=D,l.CopyableImg=x,l.CopyableLink=$,l.CopyableSpan=P,l.CopyableStrong=N,l.CopyableBlockQuote=M,l.Copyable=A}),98);
__d("WAWebCopyPasteSelectable.react",["cx","WAWebClassnames","WAWebCopyPasteCopyable.react","WAWebDomElementMatches","WAWebExternalLink.react","WAWebURLUtils","react"],(function(t,n,r,o,a,i,l,s){var e=["ref","forwardedRef"],u=["element","ref"],c=["appTextTemplate","className","plainText","prePlainText","selectable","selectAll"],d,m=d||(d=r("react")),p="_aupe",_=o("WAWebCopyPasteCopyable.react").COPYABLE_CSS_CLASS+" "+p,f="."+p,g=_,h="_aupf",y="."+h;function C(e){if(!e)return!1;if(!(e instanceof HTMLElement)){var t=e.parentElement;return C(t)}return r("WAWebDomElementMatches")(e,f)||r("WAWebDomElementMatches")(e,f+" *")}function b(e){return e?e instanceof HTMLElement?r("WAWebDomElementMatches")(e,y):b(e.parentElement):!1}function v(e){if(!(e instanceof HTMLElement))return[];var t=C(e);if(t)return Array.from(e.childNodes);var n=Array.from(e.querySelectorAll(f));return n.filter(function(e){return!n.some(function(t){return t!==e&&t.contains(e)})})}function S(e){return e instanceof HTMLElement?!!e.querySelector(f):!1}function R(e){return e?e instanceof HTMLElement?r("WAWebDomElementMatches")(e,y+" *"):R(e.parentElement):!1}function L(e){if(!R(e))return null;for(var t=e,n=0,r=5,o;t&&n<r;){if(b(t)&&t instanceof HTMLElement){o=t;break}t=t.parentElement,n++}return o}function E(e){var t=A(e);return e.selectable?m.jsx(o("WAWebCopyPasteCopyable.react").CopyableCode,babelHelpers.extends({},t)):m.jsx("code",babelHelpers.extends({},t))}E.displayName=E.name+" [from "+i.id+"]";function k(e){var t=A(e);return e.selectable?m.jsx(o("WAWebCopyPasteCopyable.react").CopyableDel,babelHelpers.extends({},t)):m.jsx("del",babelHelpers.extends({},t))}k.displayName=k.name+" [from "+i.id+"]";function I(e){var t=A(e);return e.selectable?m.jsx(o("WAWebCopyPasteCopyable.react").CopyableDiv,babelHelpers.extends({},t)):m.jsx("div",babelHelpers.extends({},t))}I.displayName=I.name+" [from "+i.id+"]";function T(e){var t=A(e);return e.selectable?m.jsx(o("WAWebCopyPasteCopyable.react").CopyableEm,babelHelpers.extends({},t)):m.jsx("em",babelHelpers.extends({},t))}T.displayName=T.name+" [from "+i.id+"]";function D(t){var n,r=t.ref,a=t.forwardedRef,i=babelHelpers.objectWithoutPropertiesLoose(t,e),l=A(i);return i.selectable?m.jsx(o("WAWebCopyPasteCopyable.react").CopyableImg,babelHelpers.extends({forwardedRef:r},l)):m.jsx("img",babelHelpers.extends({ref:r},l,{tabIndex:l.onClick?0:-1,alt:(n=i.alt)!=null?n:""}))}D.displayName=D.name+" [from "+i.id+"]";function x(e){var t=A(e),n=e.href;return n!=null&&n!==""&&!r("WAWebURLUtils").hasValidUrlScheme(n)?m.jsx("span",{}):e.selectable?m.jsx(o("WAWebCopyPasteCopyable.react").CopyableLink,babelHelpers.extends({dir:"ltr",dataTab:e.dataTab},t)):m.jsx(o("WAWebExternalLink.react").ExternalLinkEl,babelHelpers.extends({dataTab:e.dataTab},t))}x.displayName=x.name+" [from "+i.id+"]";function $(e){var t=A(e);return e.selectable?m.jsx(o("WAWebCopyPasteCopyable.react").CopyableSpan,babelHelpers.extends({},t)):m.jsx("span",babelHelpers.extends({},t))}$.displayName=$.name+" [from "+i.id+"]";function P(e){var t=A(e);return e.selectable?m.jsx(o("WAWebCopyPasteCopyable.react").CopyableStrong,babelHelpers.extends({},t)):m.jsx("strong",babelHelpers.extends({},t))}P.displayName=P.name+" [from "+i.id+"]";function N(e){var t=A(e);return e.selectable?m.jsx(o("WAWebCopyPasteCopyable.react").CopyableBlockQuote,babelHelpers.extends({},t)):m.jsx("blockquote",babelHelpers.extends({},t))}N.displayName=N.name+" [from "+i.id+"]";function M(e){var t=e.element,n=e.ref,r=babelHelpers.objectWithoutPropertiesLoose(e,u),a=A(r);return r.selectable?m.jsx(o("WAWebCopyPasteCopyable.react").Copyable,babelHelpers.extends({element:t},a,{ref:n})):m.jsx(t,babelHelpers.extends({},a,{ref:n}))}M.displayName=M.name+" [from "+i.id+"]";var w=M;function A(e){var t,n=e.appTextTemplate,r=e.className,a=e.plainText,i=e.prePlainText,l=e.selectable,s=e.selectAll,u=babelHelpers.objectWithoutPropertiesLoose(e,c),d=u;if(l&&(d.plainText=a,d.prePlainText=i,d.appTextTemplate=n),d.className=o("WAWebClassnames").classnamesConvertMeToStylexPlease(r,"_ao3e",(t={},t[p]=l,t[h]=l&&s,t)),l){var m=u["data-testid"],_=s===!0?"select-all selectable-text":"selectable-text";d["data-testid"]=m!=null?m+" "+_:_}return d}l.SELECTABLE_INPUT_CSS_CLASS=g,l.isSelectable=C,l.isSelectAll=b,l.findSelectableChildren=v,l.hasSelectableChildren=S,l.findSelectAllParent=L,l.SelectableCode=E,l.SelectableDel=k,l.SelectableDiv=I,l.SelectableEm=T,l.SelectableImg=D,l.SelectableLink=x,l.SelectableSpan=$,l.SelectableStrong=P,l.SelectableBlockQuote=N,l.Selectable=w}),98);
__d("WAWebCryptoEncryptionSaltHelper",["Promise","WALogger","WAWebLogoutReasonConstants","WAWebSocketLogoutJob","WAWebUserPrefsMeUser","WAWebUserPrefsMultiDevice","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s;function u(){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=128,r=!!o("WAWebUserPrefsMeUser").getMaybeMePnUser(),a=null;return r||(a=new Uint8Array(t),self.crypto.getRandomValues(a),a=btoa(String.fromCharCode.apply(String,Array.from(new Uint8Array(a)))),yield o("WAWebUserPrefsMultiDevice").setWebEncSalt(a)),a=o("WAWebUserPrefsMultiDevice").getWebEncSalt(),a==null&&(o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[DB ENC CRITICAL ERROR] null returned for local enc salt"]))),o("WAWebSocketLogoutJob").socketLogout(o("WAWebLogoutReasonConstants").LogoutReason.MissingEncSalt)),a=Uint8Array.from(atob(a),function(e){return e.charCodeAt(0)}),(s||(s=n("Promise"))).resolve(a)}),c.apply(this,arguments)}function d(){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield o("WAWebUserPrefsMultiDevice").setWebEncSalt(null)}),m.apply(this,arguments)}l.getOrGenSalt=u,l.deleteSalt=d}),98);
__d("WAWebInvocationInterface",["WANullthrows"],(function(t,n,r,o,a,i,l){var e;function s(t){e=t}function u(){return r("WANullthrows")(e,"InvocationInterface was not inited")}function c(e,t){return u().sendLogs(e,t)}l.set=s,l.get=u,l.sendLogs=c}),98);
__d("WAWebCryptoEncKeyHelper",["Promise","WAWebBackendEventBus","WAWebCryptoEncryptionSaltHelper","WAWebDbEncryptionKey","WAWebInvocationInterface","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s=null;function u(){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){s==null&&(s=o("WAWebCryptoEncryptionSaltHelper").getOrGenSalt());var e=yield s;if(!(!e||e.constructor!==Uint8Array))return o("WAWebDbEncryptionKey").DbEncKeyStore.init(e)}),c.apply(this,arguments)}function d(){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){s==null&&(s=o("WAWebCryptoEncryptionSaltHelper").getOrGenSalt());var e=yield s;!e||e.constructor!==Uint8Array||o("WAWebInvocationInterface").get().initDatabaseEncnKey(e)}),m.apply(this,arguments)}function p(e){return o("WAWebInvocationInterface").get().generateFinalDbEncryptionAndFtsKey(e)}function _(){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield(e||(e=n("Promise"))).all([o("WAWebDbEncryptionKey").DbEncKeyStore.deleteKeys(),o("WAWebInvocationInterface").get().deleteDbEncKeyCache()])}),f.apply(this,arguments)}o("WAWebBackendEventBus").BackendEventBus.onLogout(function(){s=(e||(e=n("Promise"))).resolve(null)}),l.initEncSalt=u,l.initEncSaltForInvoker=d,l.generateFinalDbEncryptionAndFtsKeyForInvoker=p,l.deleteEncKeysAndCache=_}),98);
__d("WAWebDBDeviceListFanout",["WALogger","WAWebApiDeviceList","WAWebBizCoexGatingUtils","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e;function s(e){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=t.chatWidSetToIncludeHostedInFanoutOneToOneChatOnly,r=t.shouldMergeAltDevices,a=r===void 0?!1:r,i=t.wids,l=yield o("WAWebApiDeviceList").getDeviceIds(i,a),s=new Map;return l.forEach(function(t,r){if(t){var a=t.devices;a.forEach(function(e){var r=e.id===99||e.isHosted===!0,a=!1;if(o("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&n!=null&&(a=(n==null?void 0:n.isUser())===!0),!(r&&!a)){var i=o("WAWebWidFactory").createDeviceWidFromDeviceListPk(t.id,e.id,e.isHosted);o("WAWebUserPrefsMeUser").isMeDevice(i)||s.set(i.toString(),i)}})}else{var l=o("WAWebWidFactory").asUserWidOrThrow(i[r]);o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["getFanOutList: no device is found for ",", just send to the primary device"])),l.toString()).tags("messaging"),o("WAWebUserPrefsMeUser").isMeAccount(l)||s.set(l.toString(),l)}}),Array.from(s.values())}),u.apply(this,arguments)}l.getFanOutList=s}),98);
__d("WAWebDeleteAllCacheStorage",["Promise","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i){var e;function l(){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=window.caches;if(t!=null){var r=yield t.keys();yield(e||(e=n("Promise"))).all(r.map(function(e){return t.delete(e)}))}}),s.apply(this,arguments)}i.default=l}),66);
__d("WAWebDexieBootstrap",["WAWeb-dexie","WAWebNoop"],(function(t,n,r,o,a,i,l){"use strict";function e(){r("WAWeb-dexie").Promise.PSD.onunhandled=r("WAWebNoop"),r("WAWeb-dexie").Promise.PSD.txRelaxedDurabilityEnabled=!0}l.patchDexie=e}),98);
__d("WAWebDisplayType",[],(function(t,n,r,o,a,i){var e={CONVERSATION:"CONVERSATION",MSG_INFO:"MSG_INFO",STARRED_MSGS:"STARRED_MSGS",KEPT_MSGS:"KEPT_MSGS",GALLERY:"GALLERY",GALLERY_LINKS:"GALLERY_LINKS",REPLY_STAGE:"REPLY_STAGE",QUOTED_MSG:"QUOTED_MSG",CONTACT_CARD:"CONTACT_CARD",ORDER:"ORDER",STATUS:"STATUS",EDITING:"EDITING",ANNOUNCEMENT:"ANNOUNCEMENT",NEWSLETTER:"NEWSLETTER",NEWSLETTER_PREVIEW:"NEWSLETTER_PREVIEW",CHANNEL_ALERTS_MSGS:"CHANNEL_ALERTS_MSGS",REPORTED_MSG:"REPORTED_MSG",BOT_INVOKE_RESPONSE:"BOT_INVOKE_RESPONSE",ALL_REPLIES:"ALL_REPLIES",BOT_REELS_PLUGIN:"BOT_REELS_PLUGIN",COMMENT:"COMMENT",MESSAGE_HISTORY_BUNDLE:"MESSAGE_HISTORY_BUNDLE"};function l(t){return t===e.ANNOUNCEMENT||t===e.NEWSLETTER}var s=[e.CONVERSATION,e.ANNOUNCEMENT,e.NEWSLETTER,e.BOT_INVOKE_RESPONSE,e.ALL_REPLIES];function u(e){return c.includes(e)}var c=[e.STARRED_MSGS,e.REPORTED_MSG,e.CONTACT_CARD,e.GALLERY,e.GALLERY_LINKS];function d(e){return s.includes(e)}i.DISPLAY_TYPE=e,i.isWideDisplay=l,i.isMsgGalleryDisplay=u,i.isConversationDisplay=d}),66);
__d("WAWebE2eMessageSendWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumAddressingMode","WAWebWamEnumAgentEngagementEnumType","WAWebWamEnumBotType","WAWebWamEnumDeviceType","WAWebWamEnumE2eCiphertextType","WAWebWamEnumE2eDestination","WAWebWamEnumE2eDeviceType","WAWebWamEnumE2eFailureReason","WAWebWamEnumEditType","WAWebWamEnumEncryptionTypeCode","WAWebWamEnumGroupEncryptionType","WAWebWamEnumInvisibleMessageCategoryType","WAWebWamEnumMediaType","WAWebWamEnumMessageDistributionEnumType","WAWebWamEnumRevokeType","WAWebWamEnumTypeOfGroupEnum"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({E2eMessageSend:[476,{agentEngagementType:[15,o("WAWebWamEnumAgentEngagementEnumType").AGENT_ENGAGEMENT_ENUM_TYPE],botType:[17,o("WAWebWamEnumBotType").BOT_TYPE],e2eBackfill:[18,e.TYPES.BOOLEAN],e2eCiphertextType:[5,o("WAWebWamEnumE2eCiphertextType").E2E_CIPHERTEXT_TYPE],e2eCiphertextVersion:[6,e.TYPES.INTEGER],e2eDestination:[4,o("WAWebWamEnumE2eDestination").E2E_DESTINATION],e2eFailureReason:[2,o("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON],e2eReceiverDeviceType:[19,o("WAWebWamEnumE2eDeviceType").E2E_DEVICE_TYPE],e2eReceiverType:[8,o("WAWebWamEnumDeviceType").DEVICE_TYPE],e2eSuccessful:[1,e.TYPES.BOOLEAN],editType:[14,o("WAWebWamEnumEditType").EDIT_TYPE],encRetryCount:[9,e.TYPES.INTEGER],encryptionType:[23,o("WAWebWamEnumEncryptionTypeCode").ENCRYPTION_TYPE_CODE],groupEncryptionState:[22,o("WAWebWamEnumGroupEncryptionType").GROUP_ENCRYPTION_TYPE],invisibleMessageCategory:[21,o("WAWebWamEnumInvisibleMessageCategoryType").INVISIBLE_MESSAGE_CATEGORY_TYPE],isLid:[12,e.TYPES.BOOLEAN],isPq:[25,e.TYPES.BOOLEAN],isSimpleSignal:[24,e.TYPES.BOOLEAN],localAddressingMode:[16,o("WAWebWamEnumAddressingMode").ADDRESSING_MODE],messageDistributionType:[20,o("WAWebWamEnumMessageDistributionEnumType").MESSAGE_DISTRIBUTION_ENUM_TYPE],messageIsInvisible:[10,e.TYPES.BOOLEAN],messageMediaType:[7,o("WAWebWamEnumMediaType").MEDIA_TYPE],retryCount:[3,e.TYPES.INTEGER],revokeType:[11,o("WAWebWamEnumRevokeType").REVOKE_TYPE],typeOfGroup:[13,o("WAWebWamEnumTypeOfGroupEnum").TYPE_OF_GROUP_ENUM]},[1,20,20],"regular"]},{E2eMessageSend:[]});l.E2eMessageSendWamEvent=s}),98);
__d("WAWebFaqUrl",["WAWebContactManagementGating","WAWebL10N","WAWebMarketingMessagesUserFeedbackGatingUtils"],(function(t,n,r,o,a,i,l){var e="https://faq.whatsapp.com",s="web";function u(t){return e+"/"+t+"?lang="+r("WAWebL10N").getNormalizedLocale()}function c(){return e+"/"+s+"?lang="+r("WAWebL10N").getNormalizedLocale()}function d(){return u(0x79906783e9933)}function m(){return u(6480469855345352)}function p(){return u(643460927283235)}function _(){return u(852892549070029)}function f(){return u(0xc1283bbc02b3b)}function g(){return u(835452491239734)}function h(){return u(0x56a45447edb82)}function y(){return u(820124435853543)}function C(){return u(820124435853543)}function b(){return u(0x414dd2b3a1a38)}function v(){return u(0x4980fdb4e5495)}function S(){return u(0x3be312350eb3d)}function R(){return u(0x3f215e45fc90d)}function L(){return u(677428350267326)}function E(){return u(819881299156447)}function k(){return u(531205362155587)}function I(){return u(0x8405a487f8377)}function T(){return u(0x40421f1052904)}function D(){return u(807378207138241)}function x(){return u(0x4de70ed612d6b)}function $(){return u(393169153028916)}function P(){return u(806293963922749)}function N(){return u(794517045178057)}function M(){return u(0xdc23a28a3d069)}function w(){return u(0x3d103721f87f0)}function A(){return u(673193694148537)}function F(){return u(728928448599090)}function O(){return u(0x3d38afd59867c)}function B(){return u(676672070766141)}function W(){return u(854037192262196)}function q(e,t){var n=u(854037192262196)+"&cms_platform="+e;return t!=null?n+"&helpref="+t:n}function U(){return u(846698564598022)}function V(){return u(0x4352f2adeca1c)}function H(){return u(570221114584995)}function G(){return u(366296225670044)}function z(){return u(625069579217642)}function j(){return u(812356880201038)}function K(){return u(0x7f0b2f1b2c60e)}function Q(){return u(0x4ae517f8c1e42)}function X(){return u(832060577920049)}function Y(){return u(821275555582352)}function J(){return u(498814665492149)}function Z(){return u(0x6a887e3994892)}function ee(){return u(0xa5d8a23a1f33e)}function te(){return u(626403979060997)}function ne(){return u(831150864932965)}function re(){return u(0x7e2cb5df443c)}function oe(){return u(6614640168569481)}function ae(){return u(0x5816219bc6da1)}function ie(){return u(0xd2e254c141b4)}function le(){return u(671443411431514)}function se(){return u(0x4aeb70db527d3)}function ue(){return u(0xdf5f14a88ba1)}function ce(){return u(682987820062997)}function de(){return u(0x523c1805dd173)}function me(){return u(652713330395407)}function pe(){return u(0xbab98e7dd597)}function _e(){return u(919039336073667)}function fe(){return u(673193694148537)}function ge(){return u(0x4aa9d245180bb)}function he(){return u(422435220869520)}function ye(){return u(0x62259b06f65d0)}function Ce(){return u(653480766448040)}function be(){return u(526463418847093)}function ve(){return u(0x47c7a5f284a82)}function Se(){return"https://www.facebook.com/privacy/policy"}function Re(){return"https://www.facebook.com/privacy/genai"}function Le(){return"https://www.facebook.com/privacy/guide/generative-ai"}function Ee(){return"https://www.facebook.com/legal/ai-terms"}function ke(){return"https://www.whatsapp.com/legal/brazil-privacy-notice/why-and-how-we-process-data"}function Ie(){return"https://www.facebook.com/privacy/genai"}function Te(){return"https://www.facebook.com/help/contact/2503286619871400"}function De(){return u(0x3f2d2cbd41088)}function xe(){return u(6485307734928964)}function $e(){return u(6485307734928964)}function Pe(){return u(306908962283012)}function Ne(){return u(785493319976156)}function Me(){return u(704225315054890)}function we(){return u(0xdc23a28a3d069)}function Ae(){return u(434854355461483)}function Fe(){return u(0x3d9111abd1522)}function Oe(){return u(360977646301595)}function Be(){return u(684323127185056)}function We(){return u(0x566e31f78e0b2)}function qe(){return u(414631957536067)}function Ue(){return u(445453537819972)}function Ve(){return u(764072925284841)}function He(){return u(515115256843064)}function Ge(){return u(o("WAWebContactManagementGating").getNativeContactLearnMoreArticleId())}function ze(){return u(0xc01cf66d59161)}function je(){return u(0x78ed36c5dcc0a)}function Ke(){return u(0x6b6dc84a63837)}function Qe(){return u(0x65d0a8ea5ce82)}function Xe(){return o("WAWebMarketingMessagesUserFeedbackGatingUtils").isMMMessageLevelFeedbackNotInterestedMenuEnabled()?u(0x3a64d5ff15ce8):u(849628780369041)}function Ye(){return u(0x3cf8b510ac7b3)}function Je(){return u(471097579286138)}function Ze(){return u(925016942750794)}function et(){return u(0xc38fcd98588b5)}function tt(){return u(0x81ff896ec8e7b)}function nt(){return u(0x40f14c3d8a34d)}function rt(){return"https://www.whatsapp.com/usephone"}function ot(){return"https://business.whatsapp.com/policy#policies_for_whatsapp_commerce_features"}function at(){return u(717472490411581)}function it(){return"https://business.whatsapp.com/policy?lang="+r("WAWebL10N").getNormalizedLocale()}function lt(){return"https://business.whatsapp.com/?lang="+r("WAWebL10N").getNormalizedLocale()}function st(){return u(361005896189245)}function ut(){return u(0x3c176e69dcbf0)}function ct(){return u(0x4047e189c6f13)}function dt(){return u(813462751272572)}function mt(){return u(829033686455542)}function pt(){return u(0x43c034e1473e6)}function _t(){return u(0x3c601ac2e47ea)}function ft(){return u(0x4c4f0ab002a27)}function gt(){return u(0x5586e377c54fe)}function ht(){return u(0x55f94b56578b1)}function yt(){return u(0x7eb709a45f84f)}l.FAQ_BASE_URL=e,l.PLATFORM=s,l.getFullUrl=u,l.getFaqUrl=c,l.getDeleteAccountUrl=d,l.getNewsletterActivityInforUrl=m,l.getBusinessFaqUrl=p,l.getCannotConnectFaqUrl=_,l.getCiphertextFaqUrl=f,l.getFanoutPlaceholderFaqUrl=g,l.getCodeChangeFaqUrl=h,l.getMDCodeChangeFaqUrl=y,l.getE2EFaqUrl=C,l.getE2EEnterpriseFaqUrl=b,l.getWAChatFaqUrl=v,l.getFrequentlyForwardedFaqUrl=S,l.getMembershipApprovalModeFaqUrl=R,l.getNonVerifiedTransitionFaqUrl=L,l.getNotificationChromeFaqUrl=E,l.getNotificationEdgeFaqUrl=k,l.getNotificationFirefoxFaqUrl=I,l.getNotificationOperaFaqUrl=T,l.getNotificationSafariFaqUrl=D,l.getRevokeFaqUrl=x,l.getSuspiciousLinkFaqUrl=$,l.getUnverifiedTransitionFaqUrl=P,l.getVerifiedHighFaqUrl=N,l.getBlueFaqUrl=M,l.getVerifiedLowUnknownFaqUrl=w,l.getEphemeralFaqUrl=A,l.getKICFaqUrl=F,l.getViewOnceFaqUrl=O,l.getSupportChatFaqUrl=B,l.getSupportChatSafetyFaqUrl=W,l.getSupportChatSafetyFaqUrlWithPlatform=q,l.getDefenseModeFaqUrl=U,l.getCatalogCartOnOffFaqUrl=V,l.getCommunityHomeNuxUrl=H,l.getExitCommunityUrl=G,l.getCommunityCreatorPrivacyUrl=z,l.getCommunityMemberPrivacyUrl=j,l.getCommunityBecomingOwnerUrl=K,l.getLinkDeviceFaqUrl=Q,l.getJioMartPostcodeChangeLearnMoreLink=X,l.getDBErrorFaqUrl=Y,l.getHowToExitAndDeleteGroupsFaq=J,l.getRemoveFromCommunityFaqUrl=Z,l.getViewOnceScreenshotProtectionUrl=ee,l.getPhoneNumberHidingFaqUrl=te,l.getCagPhoneNumberHidingFaqUrl=ne,l.getControlsWhenMessagingBusinessFaqUrl=re,l.getMessageEditFaqUrl=oe,l.getNewsletterUpdateEditFaqUrl=ae,l.getAboutCommunitiesFaqUrl=ie,l.getNewsletterPrivacyLegacyFaqUrl=le,l.getNewsletterPrivacyMultiAdminFaqUrl=se,l.getNewsletterGuidelinesFaqUrl=ue,l.getNewsletterGeosuspendFaqUrl=ce,l.getNewsletterMetricsEstimatedFaqUrl=de,l.getNewsletterMetricsUnavailableFaqUrl=me,l.getMemberAddedGroupsUrl=pe,l.getReportToAdminFaqUrl=_e,l.getOrderEphemeralExemptionUrl=fe,l.getSafetyToolsFaqUrl=ge,l.getSearchTheWebFaqUrl=he,l.getScreenLockLearnMoreUrl=ye,l.getMessageHistoryOnLinkedDevicesFAQUrl=Ce,l.getRequestAccountInfoFAQUrl=be,l.getIndiaEcommerceComplianceFaqUrl=ve,l.getBotPrivacyPolicyUrl=Se,l.getPrivacyPolicyGenaiUrl=Re,l.getMetaGenAiGuideUrl=Le,l.getBotTermsUrl=Ee,l.getWhatsappPrivacyPolicyBrazilUrl=ke,l.getWhatsappBrazilBizBotRightsUrl=Ie,l.getWhatsappBrazilBizBotObjectUrl=Te,l.getBotLearnMoreUrl=De,l.getBizBot1pLearnMoreUrl=xe,l.getBizBotTosLearnMoreUrl=$e,l.getBizBot3pDataSharingUrl=Pe,l.getConsumerTransparencyHCAUrl=Ne,l.getAvatarFaqUrl=Me,l.getWhatsAppBusinessPremiumFaqUrl=we,l.getSharingBusinessInfoForAdsFaqUrl=Ae,l.getSagaFaqUrl=Fe,l.getNewsletterAdminInviteFaqUrlV2=Oe,l.getReportUnlawfulContentWebFaqUrl=Be,l.getCoexHostedFaqUrl=We,l.getBlockingReportingFaqUrl=qe,l.getDisableLinkPreviewsFaqUrl=Ue,l.getChatLockSecretCodeFaqUrl=Ve,l.getAccountTakeOverFaqUrl=He,l.getNativeContactLearnMoreFaqUrl=Ge,l.getAntiBrigadingFaqUrl=ze,l.getEventsLearnMoreFaqUrl=je,l.getCommunityGroupsVisibilityFaqUrl=Ke,l.getBizQuickRepliesFaqUrl=Qe,l.marketingMessageFeedbackLearnMoreURL=Xe,l.marketingMessageUserControlsStopLearnMoreURL=Ye,l.marketingMessageUserControlsResumeLearnMoreURL=Je,l.sharingCustomerRelatedActivityLearnMoreURL=Ze,l.getNewsletterReportLearnMoreUrl=et,l.getSeeExamplesOfScamsUrl=tt,l.getHowToReport=nt,l.getWhatsappUsePhoneFallbackUrl=rt,l.getWhatsappBusinessCommercePolicyUrl=ot,l.getRestrictedAccountLearnMoreUrl=at,l.getWhatsAppBusinessPolicyUrl=it,l.getWhatsAppBusinessHomeUrl=lt,l.getMessagingBestPracticeUrl=st,l.getSMBLinkedCatalogUrl=ut,l.getGuestFAQUrl=ct,l.getSMBIndividualNewChatMessageCappingHCAUrl=dt,l.getConsumerIndividualNewChatMessageCappingHCAUrl=mt,l.getNewsletterQuestionResponsePrivacyBannerFAQUrl=pt,l.getGroupHistoryFAQUrl=_t,l.getGroupMemberTagUrl=ft,l.getOpenGroupLearnMoreUrl=gt,l.getPaidPartnershipLabelFaqUrl=ht,l.getBotSessionTransparencyUrl=yt}),98);
__d("WAWebFbtCommon",["fbt"],(function(t,n,r,o,a,i,l,s){var e={WhatsApp:function(){return s._(/*BTDS*/"WhatsApp")},"WhatsApp Business":function(){return s._(/*BTDS*/"WhatsApp\u00a0Business")},"WhatsApp Web":function(){return s._(/*BTDS*/"WhatsApp Web")},"WhatsApp for Desktop":function(){return s._(/*BTDS*/"WhatsApp for Desktop")},"WhatsApp for Windows":function(){return s._(/*BTDS*/"WhatsApp pour Windows")},"WhatsApp Business on Web":function(){return s._(/*BTDS*/"WhatsApp\u00a0Business sur le Web")},BETA:function(){return s._(/*BTDS*/"BETA")},Message:function(){return s._(/*BTDS*/"Message")},Block:function(){return s._(/*BTDS*/"Bloquer")},Report:function(){return s._(/*BTDS*/"Signaler")},Next:function(){return s._(/*BTDS*/"Suivant")},Cancel:function(){return s._(/*BTDS*/"Annuler")},Close:function(){return s._(/*BTDS*/"Fermer")},Continue:function(){return s._(/*BTDS*/"Continuer")},Unblock:function(){return s._(/*BTDS*/"D\u00e9bloquer")},"Learn more":function(){return s._(/*BTDS*/"En savoir plus")},"Archive instead":function(){return s._(/*BTDS*/"Non, archiver")},Submit:function(){return s._(/*BTDS*/"Envoyer")},"Try again":function(){return s._(/*BTDS*/"R\u00e9essayer")},Search:function(){return s._(/*BTDS*/"Rechercher")},Undo:function(){return s._(/*BTDS*/"Annuler")},OK:function(){return s._(/*BTDS*/"OK")},"GOT IT":function(){return s._(/*BTDS*/"COMPRIS")},Unfollow:function(){return s._(/*BTDS*/"Ne plus suivre")},"Untitled Channel":function(){return s._(/*BTDS*/"Cha\u00eene sans titre")},Admin:function(){return s._(/*BTDS*/"Admin")},"In Your Contacts":function(){return s._(/*BTDS*/"Sont dans vos contacts")},"In your contacts":function(){return s._(/*BTDS*/"Sont dans vos contacts")},"Search name or number":function(){return s._(/*BTDS*/"Rechercher un nom ou un num\u00e9ro")},"Search name, number or username":function(){return s._(/*BTDS*/"Rechercher par nom, num\u00e9ro ou nom de profil")},"Not in your contacts":function(){return s._(/*BTDS*/"Ne sont pas dans vos contacts")},"No results found":function(){return s._(/*BTDS*/"Aucun r\u00e9sultat trouv\u00e9")},"Request review":function(){return s._(/*BTDS*/"Demander un examen")},Followers:function(){return s._(/*BTDS*/"Followers")},"Try Again":function(){return s._(/*BTDS*/"R\u00e9essayer")},"End-to-end encrypted":function(){return s._(/*BTDS*/"Chiffr\u00e9 de bout en bout")},"Leave Group":function(){return s._(/*BTDS*/"Quitter le groupe")},"Exit Group":function(){return s._(/*BTDS*/"Quitter le groupe")},"Exit Community":function(){return s._(/*BTDS*/"Quitter la communaut\u00e9")},"Report to WhatsApp":function(){return s._(/*BTDS*/"Signaler \u00e0 WhatsApp")},Archive:function(){return s._(/*BTDS*/"Archiver")},Add:function(){return s._(/*BTDS*/"Ajouter")},"Context menu":function(){return s._(/*BTDS*/"Menu contextuel")}};function u(t){var n=e[t];return n()}l.default=u}),226);
__d("WAWebSWBusActions",[],(function(t,n,r,o,a,i){var e={REQUEST_STREAMING_INFO:"GET_STREAMING_INFO",REQUEST_RMR:"REQUEST_RMR",SEND_STREAMING_CHUNK:"SEND_STREAMING_CHUNK",EXP_BACKOFF:"EXP_BACKOFF",LOG:"LOG",UPLOAD_LOGS:"UPLOAD_LOGS",SET_L10N:"SET_L10N",STREAMING_SUPPORTED:"STREAMING_SUPPORTED",REMOVE_PP:"REMOVE_PP",LOGOUT:"LOGOUT",CLEAN_ASSETS:"CLEAN_ASSETS",ACTIVE_TAB:"ACTIVE_TAB",STOP_COMMS:"STOP_COMMS",HEARTBEAT:"HEARTBEAT",WAM_UPLOAD:"WAM_UPLOAD"},l=e;i.default=l}),66);
__d("WAWebSWBus",["Promise","WALogger","WAWebBuildConstants","WAWebNoop","WAWebSWBusActions","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){var e,s,u,c=[r("WAWebSWBusActions").HEARTBEAT],d=(function(){function e(t){var o=this;this.$1=function(t){if(!(t.data==null||t.data.action==null)){var a=t.data;if(!(t.ports==null||t.ports.length===0)){var i=t.ports;if(!(!e.isSW()&&window.navigator.serviceWorker&&t.source!==window.navigator.serviceWorker.controller)){var l;typeof t.waitUntil=="function"?l=function(n){return t.waitUntil(n)}:l=r("WAWebNoop"),l((u||(u=n("Promise"))).resolve(o.requestHandler(a)).then(function(e){i[0].postMessage(e)}).catch(function(e){i[0].postMessage({error:e&&e.toString()})}))}}}},this.requestHandler=t}var t=e.prototype;return t.init=function(){var t=e.isSW()?self:window.navigator.serviceWorker;try{if(!t)return;t.addEventListener("message",this.$1)}catch(e){}},e.isSW=function(){return typeof window=="undefined"},e.getRequestor=function(r){if(e.isSW()){if(typeof r=="string")return self.clients.get(r)}else return window.navigator.serviceWorker?window.navigator.serviceWorker.ready.then(function(){return window.navigator.serviceWorker?window.navigator.serviceWorker.controller:null}):(u||(u=n("Promise"))).resolve(null);return(u||(u=n("Promise"))).resolve(r)},e.broadcast=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,o){if(!e.isSW())throw r("err")("Broadcast called from non-serviceworker.");var a=yield self.clients.matchAll();return a.length===0?(u||(u=n("Promise"))).reject(r("err")("No clients available.")):(u||(u=n("Promise"))).all(a.map(function(n){return e.request(n,t,o)}))});function o(e,n){return t.apply(this,arguments)}return o})(),e.request=function(a,i,l){var t,s=o("WAWebBuildConstants").VERSION_STR,c=new MessageChannel,d=new(u||(u=n("Promise")))(function(t,n){return c.port1.onmessage=function(e){var r;(r=e.data)!=null&&r.error?n(e.data.error):t(e.data)},e.getRequestor(a).then(function(e){if(!e)return n(r("err")("No ServiceWorker controlling this client."));e.postMessage({action:i,message:l,version:s},[c.port2])})});return d},e})();l.default=d}),98);
__d("WAWebFeatureDetectionSwSupport",["WAPromiseTimeout","WAWebBoolFunc","WAWebEventEmitter","WAWebModernizr","WAWebSWBus","WAWebSWBusActions","WAWebUA"],(function(t,n,r,o,a,i,l){var e="Modernizr"in window,s=o("WAWebModernizr").getModernizr(),u=(function(t){function n(){var n;n=t.call(this)||this,n.supported=e?s.serviceworker:"serviceWorker"in navigator,n._checkAlive=function(){var e,t=(e=navigator.serviceWorker)==null?void 0:e.controller;return!!t},n._checkStreamingSupport=function(){var e;if(!n.supported||!n.alive||o("WAWebUA").UA.isSafari){n._streamingSupported=!1;return}if(n._streamingSupportedPromise)return n._streamingSupported;var t=(e=navigator.serviceWorker)==null?void 0:e.controller;t&&(n._streamingSupportedPromise=o("WAPromiseTimeout").promiseTimeout(r("WAWebSWBus").request(t,r("WAWebSWBusActions").STREAMING_SUPPORTED),100).catch(o("WAWebBoolFunc").returnFalse).then(function(e){return delete n._streamingSupportedPromise,n.streamingSupported=e,e}))},n._setSupported=function(e){n.supported=e},e&&s.on("serviceworker",n._setSupported);var a=n;return Object.defineProperty(n,"streamingSupported",{get:function(){return a._checkStreamingSupport(),a._streamingSupported},set:function(t){t!==a._streamingSupported&&a.trigger("change:streamingSupported",t),a._streamingSupported=t}}),Object.defineProperty(n,"alive",{get:function(){return a._checkAlive()}}),n}return babelHelpers.inheritsLoose(n,t),n})(r("WAWebEventEmitter")),c=new u;l.default=c}),98);
__d("WAWebFetchPrekeysJob",["WAJids","WAParsableXmlNode","WASmaxPreKeysFetchKeyBundlesRPC","WAWebBackendErrors","WAWebWidFactory","WAWebWidToJid","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){function e(e,t){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){t===void 0&&(t=!1);var n=yield o("WASmaxPreKeysFetchKeyBundlesRPC").sendFetchKeyBundlesRPC({userArgs:e.map(function(e){return{userJid:o("WAWebWidToJid").widToDeviceJid(e),hasUserReasonIdentity:t}})});if(n.name==="FetchKeyBundlesResponseServerError"){var a=n.value.errorServerErrors.value;throw new(o("WAWebBackendErrors")).ServerStatusCodeError(Number(a.code),"fetchPrekeys: server error: "+a.code+" "+a.text)}else if(n.name==="FetchKeyBundlesResponseRequestError"){var i=n.value.errorRequestErrorsFetch.value;throw new(o("WAWebBackendErrors")).ServerStatusCodeError(Number(i.code),"fetchPrekeys: request error: "+i.code+" "+i.text)}var l=[],s=[],u=[];for(var c of n.value.listUser){var d=c.userFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup;e:{var m=d;if((typeof m=="object"&&m!==null||typeof m=="function")&&m.name==="FetchKeyBundlesUserSuccess"&&"value"in m){var p,_,f=m.value,g=f.deviceIdentityMixin,h=f.elementValue,y=f.preKeyMixin,C=f.registrationElementValue,b=f.skeyIdKeyIDMixin,v=f.skeySignatureElementValue,S=f.skeyValueKeyDataMixin,R={deviceIdentity:(p=g==null?void 0:g.deviceIdentityElementValue)!=null?p:null,identity:h,skey:{id:o("WAParsableXmlNode").convertBytesToUint(b.elementValue,3),pubkey:S.elementValue,signature:v},key:y?{id:o("WAParsableXmlNode").convertBytesToUint(y.keyIdKeyIDMixin.elementValue,3),pubkey:(_=y.keyValueKeyDataMixin)==null?void 0:_.elementValue}:null,regId:o("WAParsableXmlNode").convertBytesToUint(C,4),wid:o("WAWebWidFactory").createWid(c.jid)};R.wid.device!=null&&R.wid.device!==o("WAJids").DEFAULT_DEVICE_ID?s.push(R):l.push(R);break e}if((typeof m=="object"&&m!==null||typeof m=="function")&&m.name==="FetchKeyBundlesUserErrorFallback"&&"value"in m){var L=m.value,E=L.errorCode,k=L.errorText;u.push(r("err")("fetchPrekeys: list item error: "+E+" "+k));break e}if((typeof m=="object"&&m!==null||typeof m=="function")&&m.name==="FetchKeyBundlesUserError"&&"value"in m){var I=m.value,T=I.errorCode,D=I.errorText;u.push(r("err")("fetchPrekeys: list item error: "+T+" "+D));break e}throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+m)}}if(l.length===0&&s.length===0&&u.length===0)throw r("err")("fetchPrekeys: empty key info");return{prekeyBundles:[].concat(l,s),errors:u}}),s.apply(this,arguments)}l.fetchPrekeys=e}),98);
__d("WAWebFtsStorageConsts",[],(function(t,n,r,o,a,i){var e="fts-storage";i.DATABASE_NAME=e}),66);
__d("WAWebGuestWamConstants",[],(function(t,n,r,o,a,i){var e=1,l=2,s="guest";i.WAM_IN_MEMORY_BUFFERING_DURATION_IN_SECS_FOR_GUEST=e,i.WAM_BUFFER_ROTATE_INTERVAL_IN_SECS_FOR_GUEST=l,i.WAM_GUEST_TAB_ID=s}),66);
__d("WAWebIdentityApiUtils",["WABinary","WAWebSignalCommonUtils","WAWebSignalProtocolStore","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){function e(e,t){for(var n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return e[n]-t[n];return e.length-t.length}function s(e){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield c(e);return t.map(function(t,n){if(t==null)throw r("err")("getAllIdentityKeys: missing identity key for device "+String(e[n]));return t})}),u.apply(this,arguments)}function c(e){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield o("WAWebSignalProtocolStore").getPersistSignalProtocolStore().bulkLoadIdentityKey(e.map(function(e){return o("WAWebSignalCommonUtils").createSignalAddress(e)}));return t.map(function(e){return e==null?null:new Uint8Array(o("WAWebSignalCommonUtils").strToBuffer(e))})}),d.apply(this,arguments)}function m(t){var n=new(o("WABinary")).Binary;return t.sort(e).forEach(function(e){n.writeByteArray(e)}),n.readByteArrayView()}l.getAllIdentityKeysBytesOrThrow=s,l.getAllIdentityKeysBytes=c,l.identityKeysToBinary=m}),98);
__d("WAWebInitWaitForEvents",["WAWebEventsWaitForOfflineDeliveryEnd","WAWebEventsWaitForReadyForOffline"],(function(t,n,r,o,a,i,l){function e(){o("WAWebEventsWaitForReadyForOffline").initWaitForOfflineProcessReady(),o("WAWebEventsWaitForOfflineDeliveryEnd").initWaitForOfflineDeliveryEnd()}l.initOfflineResumeWaitForEvents=e}),98);
__d("WAWebWamEnumProjectCode",[],(function(t,n,r,o,a,i){var e=Object.freeze({DIT:1,DIRECTORY_SEARCH:2});i.PROJECT_CODE=e}),66);
__d("WAWebWamEnumSignCredentialResult",[],(function(t,n,r,o,a,i){var e=Object.freeze({SUCCESS:1,ERROR_BAD_REQUEST:2,ERROR_SERVER:3,ERROR_OTHER:4,ERROR_CLIENT_NETWORK:5});i.SIGN_CREDENTIAL_RESULT=e}),66);
__d("WAWebSignCredentialWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumApplicationState","WAWebWamEnumProjectCode","WAWebWamEnumSignCredentialResult"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({SignCredential:[2242,{applicationState:[6,o("WAWebWamEnumApplicationState").APPLICATION_STATE],isFromWameta:[8,e.TYPES.BOOLEAN],overallT:[4,e.TYPES.TIMER],projectCode:[7,o("WAWebWamEnumProjectCode").PROJECT_CODE],retryCount:[2,e.TYPES.INTEGER],signCredentialResult:[1,o("WAWebWamEnumSignCredentialResult").SIGN_CREDENTIAL_RESULT],signCredentialT:[3,e.TYPES.TIMER],waConnectedToChatd:[5,e.TYPES.BOOLEAN]},[1,1,1],"regular"]},{SignCredential:[]});l.SignCredentialWamEvent=s}),98);
__d("privateStatsToken",["Promise","WAACSTokenUtils","WADeprecatedSendIq","WADeprecatedWapParser","WAErrors","WALogger","WAPromiseRetryLoop","WATimeUtils","WAWamPrivateStatsToken","WAWamStorage","WAWap"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=3,m=new(r("WADeprecatedWapParser"))("issuePrivateStatsToken",function(e){var t=e.child("sign_credential"),n=t.child("signed_credential"),r=n.contentBytes(),o=t.child("acs_public_key"),a=o.contentBytes();return{signedCredential:r,acsPublicKey:a}});function p(e){switch(e.errorCode){case 400:return"bad-request";case 500:return"internal-server-error";case 501:return"feature-not-implemented";case 503:return"service-unavailable";default:return"unknown"}}function _(t){var r=o("WATimeUtils").monotonicTime(),a={overallStartTime:r,retryStartTime:r,retryAttemptsLeft:d},i=o("WAACSTokenUtils").getBlindedToken(),l=i.blindedToken,_=i.blindingFactor,f=i.token,g=function(i){a.retryAttemptsLeft<d&&(a.retryStartTime=o("WATimeUtils").monotonicTime());var r=o("WAWap").wap("iq",{id:o("WAWap").generateId(),to:o("WAWap").S_WHATSAPP_NET,type:"get",xmlns:"privatestats"},o("WAWap").wap("sign_credential",{version:"1"},o("WAWap").wap("blinded_credential",null,l))),g=t||o("WADeprecatedSendIq").deprecatedSendIqWithoutRetry;return g(r,m).then(function(t){if(!t.success){var n=p(t);o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["issuePrivateStatsToken: failed ",""])),n),n!=="internal-server-error"||a.retryAttemptsLeft<=0?i({result:null,metric:babelHelpers.extends({},a,{result:n})}):a.retryAttemptsLeft--;return}var r=t.result,l=r.acsPublicKey,u=r.signedCredential,c=o("WAWamPrivateStatsToken").unblindToken(u,_,l);if(c==null){o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["issuePrivateStatsToken: failed to unblind the signed token"]))),i({result:null,metric:babelHelpers.extends({},a,{result:"decryption-error"})});return}i({result:{token:f,sharedSecret:o("WAACSTokenUtils").getSharedSecret({token:f,unblindedSignedToken:c})},metric:babelHelpers.extends({},a,{result:"success"})})}).catch(function(e){if(e instanceof o("WAErrors").Disconnected)o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["issuePrivateStatsToken: Disconnected"]))),a.retryAttemptsLeft<=0?i({result:null,metric:babelHelpers.extends({},a,{result:"disconnected"})}):a.retryAttemptsLeft--;else return(c||(c=n("Promise"))).reject(e)})},h=new(o("WAPromiseRetryLoop")).PromiseRetryLoop({name:"issuePrivateStatsToken",timer:{algo:{type:"exponential",first:250},max:1e3},code:g});return h.start(),h.promise()}function f(e){return o("WAWamStorage").redeemPrivateStatsToken().then(function(t){return t?{result:t}:_(e).then(function(e){var t=babelHelpers.extends({},e),n=e.result;return n?o("WAWamStorage").savePrivateStatsToken(n).then(function(){return t}):t})})}l.issuePrivateStatsToken=_,l.getToken=f}),98);
__d("WAWebIssuePrivateStatsToken",["WADeprecatedSendIq","WALogger","WASemaphore","WATimeUtils","WAWebSignCredentialWamEvent","WAWebWamEnumApplicationState","WAWebWamEnumSignCredentialResult","asyncToGeneratorRuntime","privateStatsToken"],(function(t,n,r,o,a,i,l){var e,s=3;function u(e){return e==="success"?o("WAWebWamEnumSignCredentialResult").SIGN_CREDENTIAL_RESULT.SUCCESS:e==="bad-request"?o("WAWebWamEnumSignCredentialResult").SIGN_CREDENTIAL_RESULT.ERROR_BAD_REQUEST:e==="internal-server-error"?o("WAWebWamEnumSignCredentialResult").SIGN_CREDENTIAL_RESULT.ERROR_SERVER:e==="disconnected"?o("WAWebWamEnumSignCredentialResult").SIGN_CREDENTIAL_RESULT.ERROR_CLIENT_NETWORK:e==="feature-not-implemented"||e==="service-unavailable"||e==="decryption-error"||e==="unknown"?o("WAWebWamEnumSignCredentialResult").SIGN_CREDENTIAL_RESULT.ERROR_OTHER:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+e)})()}function c(e){var t=e.overallStartTime,n=e.result,r=e.retryAttemptsLeft,a=e.retryStartTime,i=u(n);new(o("WAWebSignCredentialWamEvent")).SignCredentialWamEvent({signCredentialResult:i,overallT:o("WATimeUtils").monotonicTimeSince(t),signCredentialT:o("WATimeUtils").monotonicTimeSince(a),retryCount:s-r,waConnectedToChatd:n!=="disconnected",applicationState:document.visibilityState==="visible"?o("WAWebWamEnumApplicationState").APPLICATION_STATE.FOREGROUND:o("WAWebWamEnumApplicationState").APPLICATION_STATE.BACKGROUND}).commit()}var d=new(o("WASemaphore")).Semaphore(1);function m(){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=yield d.acquire();try{var n=yield o("privateStatsToken").getToken(o("WADeprecatedSendIq").deprecatedSendIqWithoutRetry),r=n.metric,a=n.result;return r!=null&&c(r),a||o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Couldn't get a private stats token"]))),a}finally{t.release()}}),p.apply(this,arguments)}l.getToken=m}),98);
__d("WAWebKeyboardContext",["react"],(function(t,n,r,o,a,i,l){var e,s=(e||(e=o("react"))).createContext,u=s({isKeyboardUser:!1,setIsKeyboardUser:function(){}});l.default=u}),98);
__d("WAWebLazyLoadedRetriable",["Promise","WALogger","WANullthrows","WAPromiseDelays","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){var e,s,u,c;function d(t){return function(n,r){o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Loadable error: ",""])),n.stack);var a=r>1?"s":"",i="loadable:"+t+" failed to load after ["+r+"] attempt"+a;o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Failed to load a component"]))).sendLogs(i)}}var m=10;function p(e,t){var a=d(t),i="INIT",l,s=0;return function d(){switch(i){case"INIT":case"FAILURE":return i="INFLIGHT",l=e().then(function(e){return e||a(r("err")("Lazyload response is empty"),s),i="SUCCESS",e}).catch((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){if(o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Lazyload failure for component ",""])),t),i="FAILURE",s++,s<=m)return yield o("WAPromiseDelays").delayMs(s*1e3),d();throw a(e,s),e});return function(t){return e.apply(this,arguments)}})()),l;case"INFLIGHT":case"SUCCESS":return r("WANullthrows")(l);default:return(c||(c=n("Promise"))).reject(r("err")("retriable_promise_hoc:promiseStatus is invalid"))}}}l.default=p}),98);
__d("WAWebUserPrefsIsLoggedIn",["WAWebUserPrefsMultiDevice"],(function(t,n,r,o,a,i,l){var e=!1;function s(){return o("WAWebUserPrefsMultiDevice").isRegistered()&&u()}function u(){return e}function c(t){e=t}l.isLoggedIn=s,l.setIsConnectedAsRegistered=c}),98);
__d("WAWebStorageHooksGatingUtils",["WAWebABProps"],(function(t,n,r,o,a,i,l){function e(){return o("WAWebABProps").getABPropConfigValue("web_dexie_hooks_support_enabled")}l.dexieHooksSupportEnabled=e}),98);
__d("WAWebStorageChatHookExpectAccountLid",["WALogger","WAWebCurrentUser","WAWebLid1X1MigrationGating","WAWebLidMigrationUtils","WAWebSchemaChat","WAWebWid","WAWebWidFactory","err"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m={type:"creating",callback:function(n,a){if(r("WAWebWid").isRegularUserNoImply(a.id)&&(o("WAWebLidMigrationUtils").toLid(o("WAWebWidFactory").createWid(a.id))==null&&(o("WAWebLidMigrationUtils").logLidMetadata(),o("WAWebCurrentUser").isEmployee()&&(o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["lid mapping is missing for ",""])),a.id),o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Lid mapping is missing during creation"]))).sendLogs("lid-mapping-missing-during-chat-creation")),o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Lid mapping is missing for chat creation"])))),o("WAWebLid1X1MigrationGating").Lid1X1MigrationUtils.isLidMigrated()&&a.accountLid==null)){o("WAWebLidMigrationUtils").logLidMetadata();var t=o("WAWebWidFactory").createWid(a.id);throw o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["cannot insert chat row for "," because accountLid is missing (migrated). isEmployee? ",". keys: ",""])),t.toLogString(),o("WAWebCurrentUser").isEmployee(),Object.keys(a)),o("WAWebCurrentUser").isEmployee()&&o("WALogger").ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Lid is missing in chat table"]))).sendLogs("lid-missing-migrated-client"),r("err")("Lid is missing in chat table")}}};function p(){o("WAWebSchemaChat").getChatTable().addHook(m)}l.initializeHook=p}),98);
__d("WAWebStorageChatHookExpectLidOriginType",["WAWebSchemaChat","WAWebWid","err"],(function(t,n,r,o,a,i,l){var e={type:"creating",callback:function(t,n){if(r("WAWebWid").isStringLid(n.id)&&n.lidOriginType==null)throw r("err")("Lid origin type is missing in chat table")}};function s(){o("WAWebSchemaChat").getChatTable().addHook(e)}l.initializeHook=s}),98);
__d("WAWebStorageInitializeHooks",["WAWebStorageChatHookExpectAccountLid","WAWebStorageChatHookExpectLidOriginType"],(function(t,n,r,o,a,i,l){function e(){o("WAWebStorageChatHookExpectAccountLid").initializeHook(),o("WAWebStorageChatHookExpectLidOriginType").initializeHook()}l.initializeHooks=e}),98);
__d("WAWebModelStorage",["WAWebABPropsCache","WAWebModelStorageInitialize","WAWebStorageHooksGatingUtils","WAWebStorageInitializeHooks","WAWebUserPrefsIndexedDBStorage","asyncToGeneratorRuntime","once"],(function(t,n,r,o,a,i,l){function e(e){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){yield o("WAWebModelStorageInitialize").initializeWithoutGKs(e),yield o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.init(),u()}),s.apply(this,arguments)}var u=r("once")(function(){o("WAWebABPropsCache").waitForABPropConfigsReady().then(function(){o("WAWebStorageHooksGatingUtils").dexieHooksSupportEnabled()&&o("WAWebStorageInitializeHooks").initializeHooks()})});Object.keys(o("WAWebModelStorageInitialize")).forEach(function(e){e==="default"||e==="__esModule"||(l[e]=o("WAWebModelStorageInitialize")[e])}),l.initialize=e}),98);
__d("WAWebSchemaReadReceipt",["WAWebOffdStorageUtils","WAWebStorageMutationBuilder"],(function(t,n,r,o,a,i,l){var e=o("WAWebStorageMutationBuilder").columnBuilder(),s=e.addColumn,u=e.addUserDefinedPrimaryKey;function c(){o("WAWebOffdStorageUtils").getStorage().add("read-receipt").version(o("WAWebOffdStorageUtils").getStorage().versions.version(0),[u("id"),s("externalIds")]).delete(o("WAWebOffdStorageUtils").getStorage().versions.version(3)).view(function(e){return e})}l.addTable=c}),98);
__d("WAWebOffdStorage",["WALogger","WAWeb-dexie","WAWebDbRolloutUtil","WAWebDexieCastTypes","WAWebOffdStorageUtils","WAWebSchemaDanglingReceipt","WAWebSchemaPeerReadReceipt","WAWebSchemaPendingDeviceSync","WAWebSchemaReadReceipt","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s;function u(){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){return s==null&&(yield o("WAWebDbRolloutUtil").loadSchemaVersions(),o("WAWebOffdStorageUtils").createStorage(),o("WAWebSchemaReadReceipt").addTable(),o("WAWebSchemaDanglingReceipt").addTable(),o("WAWebSchemaPeerReadReceipt").addTable(),o("WAWebSchemaPendingDeviceSync").addTable(),s=o("WAWebOffdStorageUtils").getStorage().initialize().catch(function(t){throw o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed!"]))).verbose().sendLogs("Failed to initialize offd storage",{sendLogsType:o("WALogger").SendLogsType.CRASH_OR_UNRECOVERABLE_ERROR_SAD}),t})),s}),c.apply(this,arguments)}function d(){return o("WAWebOffdStorageUtils").destroyStorage().catch(function(){return o("WAWebDexieCastTypes").dexieCastToPromise(new(r("WAWeb-dexie"))(o("WAWebOffdStorageUtils").DATABASE_NAME).delete())}).finally(function(){s=null})}l.initialize=u,l.destroy=d}),98);
__d("WAWebThreadMetadata",["WAWebBackendApi"],(function(t,n,r,o,a,i,l){var e=null;function s(t){e=t,o("WAWebBackendApi").frontendFireAndForget("updateChatPreviewT",{threadMeta:t.chatTimestamp})}function u(){return e}function c(){var t,n=(t=e)==null?void 0:t.chatTimestamp;n!=null&&o("WAWebBackendApi").frontendFireAndForget("resetChatPreviewT",{chatIds:Object.keys(n)}),e=null}l.setOfflineThreadMeta=s,l.getOfflineThreadMetaPreview=u,l.resetThreadMeta=c}),98);
__d("WAWebNonBlockingOfflineResumeManager",["WALogger","WAShiftTimer","WAWebApiPendingDeviceSync","WAWebBackendApi","WAWebBrokerGlobalAppState","WAWebChatThreadLogging","WAWebCmd","WAWebHandleMsgTypes.flow","WAWebHandleOfflineAbProps","WAWebJSHaltDetector","WAWebMessageQueue","WAWebOffdStorageUpdateOfflinePeerReceipts","WAWebOfflineResumeConst","WAWebOfflineResumeMsgProcessReporter","WAWebOfflineResumeTypes.flow","WAWebOfflineResumeUtils","WAWebSignalProtocolStore","WAWebThreadMetadata","WAWebUserPrefsGeneral","WAWebWamEnumWebcScenarioType","WAWebWamMemoryStat","WAWebWamOfflineResumeReporter","WAWebWorkerSafeBackendApi","asyncToGeneratorRuntime","gkx"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g,h,y,C,b=100,v;function S(e){return v!=null&&v.updateOptions(e),v==null&&(v=new L(e)),v}function R(){v=null}var L=(function(){function t(e){var t=this;this.$9=null,this.$11=new(o("WAShiftTimer")).ShiftTimer(function(){o("WAWebCmd").Cmd.handleOfflineProgressUpdate(),t.$11.onOrAfter(o("WAWebOfflineResumeConst").UI_UPDATE_TIME_MS)}),this.$12=95,this.resumeType=o("WAWebOfflineResumeTypes.flow").ResumeType.NonBlocking,e!=null&&e.mainScreenLoaded&&(this.$6=!0),this.$13()}var a=t.prototype;return a.updateOptions=function(t){var e;this.$6=(e=t==null?void 0:t.mainScreenLoaded)!=null?e:!1},a.$13=function(){this.offlineMessagePreviewCounter=-1,this.$2=0,this.$3=0,this.$4=!1,this.$5=null,this.$1=o("WAWebOfflineResumeConst").ResumeStatus.INIT},a.$14=function(n){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][non-blocking] offline resume stage: "," -> ",""])),this.$1,n),this.$1=n},a.processOfflinePreview=function(t){if(o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logOfflinePreviewT(),this.$6&&(o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[resume-from-open-tab] reset offline delivery end to false"]))),o("WAWebCmd").Cmd.resetOfflineDeliveryState()),this.isResumeFromRestartComplete())o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][non-blocking] Offline session is complete when receiving offline preview ib."]))),o("WAWebOfflineResumeUtils").exceedResumeWithOpenTabLimit(t.message,t.receipt)&&(o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][non-blocking] restart client due to exceed the LIMIT, message: ",", receipt: ",""])),t.message,t.receipt),o("WAWebOfflineResumeUtils").refreshWindow()),o("WAWebJSHaltDetector").jsHaltDetector.restartDetection(),this.$14(o("WAWebOfflineResumeConst").ResumeStatus.RESUME_WITH_OPEN_TAB),this.$15(t.message,t.receipt),o("WAWebBackendApi").frontendFireAndForget("updateChatSortListener",{enable:!1}),self.setTimeout(function(){o("WAWebBackendApi").frontendFireAndForget("updateChatSortListener",{enable:!0})},7e3);else if(this.$1===o("WAWebOfflineResumeConst").ResumeStatus.INIT)r("WAWebBrokerGlobalAppState").initOrUpdateTracking(o("WAWebWamEnumWebcScenarioType").WEBC_SCENARIO_TYPE.OFFLINE_RESUME),o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logOfflineCount(t),o("WAWebOfflineResumeMsgProcessReporter").msgProcessReporter.activate(t),this.offlineMessagePreviewCounter=t.message,this.$5=!1,this.$4=!0,this.$2=0,this.$10=Date.now(),o("WAWebSignalProtocolStore").enableMemSignalStore(),o("WAWebCmd").Cmd.handleOfflineProgressUpdate(),o("WAWebJSHaltDetector").jsHaltDetector.restartDetection(),this.$11.onOrAfter(o("WAWebOfflineResumeConst").UI_UPDATE_TIME_MS),this.$14(o("WAWebOfflineResumeConst").ResumeStatus.RESUME_ON_RESTART),this.$15(t.message,t.receipt),this.$6?o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["[resume-from-open-tab] Main screen is loaded"]))):this.$7=o("WAWebOfflineResumeUtils").loadMainScreen({});else{var e=this.$10;if(e!=null){var n=Date.now()-e;n<o("WAWebOfflineResumeConst").OFFLINE_PREVIEW_PERIOD_MS?(o("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][non-blocking] Accept multiple offline preview ibs during offline resume, delay ","."])),n),this.offlineMessagePreviewCounter+=t.message,this.$5=!1,this.$4=!0,o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logOfflineCount(t)):r("gkx")("26258")?o("WALogger").LOG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][non-blocking] Reject multiple offline preview ib during offline resume, delay ","."])),n):o("WALogger").ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][non-blocking] Reject multiple offline preview ibs during offline resume, delay ",""])),n).sendLogs("offline-multiple-preview")}this.$16()}},a.getOfflineDeliveryProgress=function(){return this.offlineMessagePreviewCounter===0?this.$12:Math.min(Math.ceil(100*this.$2/this.offlineMessagePreviewCounter),this.$12)},a.processOfflineSessionComplete=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t,n=this;if(self.setTimeout(function(){o("WAWebBackendApi").frontendFireAndForget("updateChatSortListener",{enable:!0})},3e3),(t=this.$9)==null||t.cancel(),this.$9=null,this.$1===o("WAWebOfflineResumeConst").ResumeStatus.COMPLETE){o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logLastStanzaT(),o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.commit();return}else if(this.$1===o("WAWebOfflineResumeConst").ResumeStatus.RESUME_WITH_OPEN_TAB){yield o("WAWebMessageQueue").waitForOnlineMessageQueue(),yield o("WAWebApiPendingDeviceSync").doPendingDeviceSync(),this.$14(o("WAWebOfflineResumeConst").ResumeStatus.COMPLETE),o("WAWebCmd").Cmd.offlineDeliveryEnd();return}else this.$1===o("WAWebOfflineResumeConst").ResumeStatus.INIT&&(this.$5=!1,this.$4=!0,o("WAWebCmd").Cmd.handleOfflineProgressUpdate(),!this.$6&&!this.$7&&(this.$7=o("WAWebOfflineResumeUtils").loadMainScreen({})));return yield this.$7,this.$8=0,self.setTimeout(function(){n.$8>o("WAWebOfflineResumeConst").OFFLINE_STANZA_COUNT_LIMIT&&(o("WALogger").WARN(f||(f=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][non-blocking] "," received after offline completion marker. Refreshing window due to potential server issue."])),n.$8),o("WAWebOfflineResumeUtils").refreshWindow())},o("WAWebOfflineResumeConst").OFFLINE_STANZA_COUNT_CHECK_TIMEOUT_MS),this.$14(o("WAWebOfflineResumeConst").ResumeStatus.COMPLETE),this.$17()});function t(t){return e.apply(this,arguments)}return t})(),a.isResumeFromRestartComplete=function(){return this.$1!==o("WAWebOfflineResumeConst").ResumeStatus.RESUME_ON_RESTART&&this.$1!==o("WAWebOfflineResumeConst").ResumeStatus.INIT},a.isResumeFromRestartInProgress=function(){return this.$1!==o("WAWebOfflineResumeConst").ResumeStatus.INIT&&!o("WAWebCmd").Cmd.isOfflineDeliveryEnd},a.isResumeOnSocketDisconnectInProgress=function(){return this.$1===o("WAWebOfflineResumeConst").ResumeStatus.RESUME_WITH_OPEN_TAB},a.isResumeComplete=function(){return this.$1===o("WAWebOfflineResumeConst").ResumeStatus.COMPLETE},a.getHasMessagesToDownload=function(){return this.$5},a.getFinishedDownloading=function(){return this.getOfflineDeliveryProgress()===100},a.shouldUseOfflineResumeScreen=function(){return this.offlineMessagePreviewCounter>this.$2},a.processDecryptResult=function(t){this.$16(),this.$2+=1,t===o("WAWebHandleMsgTypes.flow").E2EProcessResult.RETRY&&(this.$3+=1)},a.offlineStanzaReceivedAfterComplete=function(){this.isResumeFromRestartComplete()&&(this.$8+=1)},a.newOfflineStanza=function(t,n){o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logAddOfflineSizeBytes(n),o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logOldestStanzaTime(t),this.$16()},a.getResumeUIProgressBarType=function(){return!o("WAWebCmd").Cmd.isOfflineDeliveryEnd&&this.offlineMessagePreviewCounter>=b?o("WAWebOfflineResumeTypes.flow").ResumeUIProgressBarType.Toastbar:o("WAWebOfflineResumeTypes.flow").ResumeUIProgressBarType.None},a.$16=function(){this.$9&&this.$9.onOrAfter(o("WAWebOfflineResumeConst").OFFLINE_STANZA_TIMEOUT_MS)},a.$15=function(t,n){var e,r=this;(e=this.$9)==null||e.cancel(),this.$9=new(o("WAShiftTimer")).ShiftTimer(function(){if(r.$1!==o("WAWebOfflineResumeConst").ResumeStatus.COMPLETE){o("WALogger").LOG(g||(g=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][non-blocking]: offline session completed by timeout"])));var e=o("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][non-blocking] offline resume finished by timeout"])));o("WAWebHandleOfflineAbProps").isNonBlockingOfflineResumeExpEnabled()&&(e=e.tags("offline-resume-experimental")),e.sendLogs("non-blocking-offline-resume-timeout",{sampling:.01}),r.processOfflineSessionComplete(t+n),r.$9=null,o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logMissedOfflineComplete()}}),this.$9.onOrAfter(o("WAWebOfflineResumeConst").OFFLINE_STANZA_TIMEOUT_MS)},a.$17=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield o("WAWebMessageQueue").waitForOfflineMessageQueue(),o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logOfflineDecryptionErrorCount(this.$3),o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logLastStanzaT(),o("WAWebThreadMetadata").resetThreadMeta(),o("WALogger").LOG(y||(y=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][non-blocking] _onOfflineComplete: waitForOfflineMsgThread done, total decryption error: ",""])),this.$3),this.$3=0,yield o("WAWebOfflineResumeUtils").clearOfflineSnapShot(),this.$12=97,yield this.$7,yield o("WAWebOffdStorageUpdateOfflinePeerReceipts").updatePeerReceipts(),this.$12=99,o("WALogger").LOG(C||(C=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][non-blocking] _onOfflineComplete: clearOfflineSnapShot done."]))),o("WAWebCmd").Cmd.offlineDeliveryEnd(),o("WAWebUserPrefsGeneral").setOfflinePushCount(0),this.$11.forceRunNow(),this.$11.cancel(),o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.commit(),o("WAWebSignalProtocolStore").enablePersistSignalStore(),o("WAWebOfflineResumeUtils").runReceiptCleanUpLoop(),o("WAWebWorkerSafeBackendApi").workerSafeFireAndForget("processAllOrphanPaymentNotifications"),o("WAWebChatThreadLogging").uploadChatThreadLoggingEvents(),r("WAWebBrokerGlobalAppState").initOrUpdateTracking(o("WAWebWamEnumWebcScenarioType").WEBC_SCENARIO_TYPE.IDLE),o("WAWebWamMemoryStat").setCurrentMemoryScenario(o("WAWebWamEnumWebcScenarioType").WEBC_SCENARIO_TYPE.IDLE),self.setTimeout(function(){o("WAWebApiPendingDeviceSync").doPendingDeviceSync()},o("WAWebOfflineResumeConst").OFFLINE_DEVICE_SYNC_DELAY)});function t(){return e.apply(this,arguments)}return t})(),t})();l.getOrCreateInstance=S,l.clearInstance=R,l.OfflineNonBlockingResumeStageManager=L}),98);
__d("WAWebOfflineResumeMainThread",["WAWebABProps","WAWebBlockingOfflineResumeManager","WAWebNonBlockingOfflineResumeManager"],(function(t,n,r,o,a,i,l){function e(e){e.initState({getBlockingStageManager:function(){return o("WAWebABProps").getABPropConfigValue("web_offline_stage_manager_singleton_enabled")?(o("WAWebNonBlockingOfflineResumeManager").clearInstance(),o("WAWebBlockingOfflineResumeManager").getOrCreateInstance()):new(o("WAWebBlockingOfflineResumeManager")).OfflineBlockingResumeStageManager},getNonblockingStageManager:function(t){return o("WAWebABProps").getABPropConfigValue("web_offline_stage_manager_singleton_enabled")?(o("WAWebBlockingOfflineResumeManager").clearInstance(),o("WAWebNonBlockingOfflineResumeManager").getOrCreateInstance(t)):new(o("WAWebNonBlockingOfflineResumeManager")).OfflineNonBlockingResumeStageManager(t)}})}l.setupMainThreadResume=e}),98);
__d("WAWebWamEnumTsExternalEventSource",[],(function(t,n,r,o,a,i){var e=Object.freeze({CALL:1,VIDEO:2,PTT_RECORD:3,PTT_PLAY:4,MESSAGE_SEND_BACKGROUND:5});i.TS_EXTERNAL_EVENT_SOURCE=e}),66);
__d("WAWebTsExternalWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumTsExternalEventSource"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({TsExternal:[4574,{relativeTimestampMs:[1,e.TYPES.INTEGER],tsDuration:[2,e.TYPES.INTEGER],tsExternalEventSource:[3,o("WAWebWamEnumTsExternalEventSource").TS_EXTERNAL_EVENT_SOURCE],tsSessionId:[4,e.TYPES.INTEGER],tsTimestampMs:[5,e.TYPES.INTEGER],unifiedSessionId:[6,e.TYPES.STRING]},[1,1,1],"regular"]},{TsExternal:[]});l.TsExternalWamEvent=s}),98);
__d("WAWebUnifiedSessionSocketManager",["WALogger","WAWebCmd","WAWebUserPrefsAppStateSync"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g,h,y={DISCONNECTED:"DISCONNECTED",CONNECTED:"CONNECTED"},C=(function(){function t(){this.$1=!1,this.$2=y.DISCONNECTED,this.$3=null,this.$4=!1}var n=t.prototype;return n.init=function(n){var t=this;if(n===void 0&&(n=null),this.$4){o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[unified-session-socket] init() called multiple times - ignoring"])));return}this.$4=!0,this.$3=n;var r=o("WAWebUserPrefsAppStateSync").getAllCriticalDataSynced(),a=o("WAWebCmd").Cmd.isMainStreamReadyMd;this.$1=r,this.$2=r&&a?y.CONNECTED:y.DISCONNECTED,o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[unified-session-socket] Initialized with state: hasSynced=",", isStreamOpen=",", stream=",""])),String(r),String(a),this.$2),o("WAWebCmd").Cmd.on("main_stream_mode_ready_from_bridge",function(){t.$5()}),o("WAWebCmd").Cmd.on("on_critical_sync_done_from_bridge",function(){t.$5()}),o("WAWebCmd").Cmd.on("open_socket_stream_from_bridge",function(){t.$6()}),o("WAWebCmd").Cmd.on("socket_stream_disconnected_from_bridge",function(){t.$7()})},n.isConnected=function(){return this.$2===y.CONNECTED},n.isInitialized=function(){return this.$4},n.$8=function(t){var e;if(this.$2=t?y.CONNECTED:y.DISCONNECTED,!this.$4){o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[unified-session-socket] Skipping callback: socket manager not yet initialized"])));return}(e=this.$3)==null||e.call(this)},n.$5=function(){if(o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[unified-session-socket] Socket Ready: Transitioning to CONNECTED state"]))),this.$1===!0&&this.isConnected()){o("WALogger").WARN(d||(d=babelHelpers.taggedTemplateLiteralLoose(["[unified-session-socket] Skip transition to CONNECTED state. Reason: socket is already connected"])));return}var e=o("WAWebUserPrefsAppStateSync").getAllCriticalDataSynced();if(!e){o("WALogger").WARN(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[unified-session-socket] Skip transition to CONNECTED state. Reason: critical sync is not complete"])));return}this.$1=e,this.$8(!0)},n.$6=function(){if(o("WALogger").LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["[unified-session-socket] Socket Open: Transitioning to CONNECTED state"]))),this.$1===!1){o("WALogger").WARN(_||(_=babelHelpers.taggedTemplateLiteralLoose(["[unified-session-socket] Skip transition to CONNECTED state. Reason: Critical Sync is not complete"])));return}if(this.isConnected()){o("WALogger").WARN(f||(f=babelHelpers.taggedTemplateLiteralLoose(["[unified-session-socket] Skip transition to CONNECTED state. Reason: socket is already connected"])));return}this.$8(!0)},n.$7=function(){if(o("WALogger").LOG(g||(g=babelHelpers.taggedTemplateLiteralLoose(["[unified-session-socket] Socket Disconnect: Transitioning to DISCONNECTED state"]))),this.isConnected()===!1){o("WALogger").WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[unified-session-socket] Skip transition to DISCONNECTED state. Reason: Socket is already disconnected"])));return}this.$8(!1)},t})();l.UnifiedSessionSocketManager=C}),98);
__d("WAWebUnifiedSession",["$InternalEnum","WALogger","WASmaxUnifiedSessionShareRPC","WATimeUtils","WAWebUnifiedSessionSocketManager","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u=7*o("WATimeUtils").DAY_MILLISECONDS,c=3*o("WATimeUtils").DAY_MILLISECONDS,d=n("$InternalEnum")({InitialRender:"initial-render",Foreground:"foreground"}),m=(function(){function t(e){this.$1=null,this.$2=0,this.$3=!1,this.$4=e}var r=t.prototype;return r.getSocketStreamChangeHandler=function(){var e=this;return function(){return e.$5()}},r.getSessionId=function(){return this.$1},r.getSequence=function(){return++this.$2},r.clearSessionId=function(){this.$1=null},r.generateSessionId=function(n){try{var t=(p()+c)%u,r=this.$1;this.$1=String(t),this.$3=!1,this.$2=0,this.$6()}catch(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[unified-session] Error generating session id: ",""])),t).sendLogs("unified-session-generate-error")}},r.$6=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(this.$4.isConnected()!==!1){var e=this.$1;if(e!=null&&!this.$3)try{yield o("WASmaxUnifiedSessionShareRPC").sendShareRPC({unifiedSessionId:e}),this.$3=!0}catch(e){o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[unified-session] failed to send session id: ",""])),e).sendLogs("send-unified-session-id-failed")}}});function t(){return e.apply(this,arguments)}return t})(),r.$5=function(){this.$4.isInitialized()&&this.$4.isConnected()&&this.$6()},t})();function p(){return Date.now()+o("WATimeUtils").getClockSkew()}var _=(function(){var e=new(o("WAWebUnifiedSessionSocketManager")).UnifiedSessionSocketManager,t=new m(e);return e.init(t.getSocketStreamChangeHandler()),t})();l.UnifiedSessionGenReason=d,l.UnifiedSessionManager=_}),98);
__d("WAWebTimeSpentLoggingExternal",["WAWebABProps","WAWebClock","WAWebTimeSpentLoggingSession","WAWebTsExternalWamEvent","WAWebUnifiedSession"],(function(t,n,r,o,a,i,l){var e=1e3,s=new Set;function u(){return s.size>0}function c(e){var t=o("WAWebTimeSpentLoggingSession").getOrInitTimeSpentSession(),n={source:e,tsSessionId:t.id,startTimeMs:t.relativeTimestampMs};if(o("WAWebABProps").getABPropConfigValue("unified_session_log_ts_event")){n.tsTimestampMs=o("WAWebClock").Clock.getServerTimeMs();var r=o("WAWebUnifiedSession").UnifiedSessionManager.getSessionId();r!=null&&(n.unifiedSessionId=r)}m(n),s.add(n);var a=!1;return function(){a||(_(n),a=!0)}}function d(t,n){var r=n-t.startTimeMs;if(!(r<e)){var a={tsSessionId:t.tsSessionId,tsDuration:Math.floor(r/1e3),tsExternalEventSource:t.source,relativeTimestampMs:t.startTimeMs};return o("WAWebABProps").getABPropConfigValue("unified_session_log_ts_event")&&(t.tsTimestampMs!=null&&(a.tsTimestampMs=t.tsTimestampMs),t.unifiedSessionId!=null&&(a.unifiedSessionId=t.unifiedSessionId)),a}}function m(e){e.intervalTimeoutId=self.setTimeout(function(){return p(e)},o("WAWebABProps").getABPropConfigValue("ts_session_duration_ms")/2)}function p(e){o("WAWebTimeSpentLoggingSession").markTimeSpentActivity();var t=o("WAWebTimeSpentLoggingSession").getOrInitTimeSpentSession(),n=t.relativeTimestampMs,r=d(e,n);r!=null&&(new(o("WAWebTsExternalWamEvent")).TsExternalWamEvent(r).commit(),e.startTimeMs=n,m(e))}function _(e){e.intervalTimeoutId!=null&&self.clearTimeout(e.intervalTimeoutId),s.delete(e);var t=o("WAWebTimeSpentLoggingSession").getOrInitTimeSpentSession(),n=t.relativeTimestampMs,r=d(e,n);r!=null&&new(o("WAWebTsExternalWamEvent")).TsExternalWamEvent(r).commit()}l.tsExternalEventsInProgress=u,l.beginTsExternalEvent=c}),98);
__d("WAWebTsBitArrayWamEvent",["WAWebWamCodegenUtils"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({TsBitArray:[4332,{bitarrayHigh:[1,e.TYPES.INTEGER],bitarrayLength:[2,e.TYPES.INTEGER],bitarrayLow:[3,e.TYPES.INTEGER],cumulativeBits:[4,e.TYPES.INTEGER],relativeTimestampMs:[5,e.TYPES.INTEGER],sessionSeq:[6,e.TYPES.INTEGER],tsSessionId:[7,e.TYPES.INTEGER],tsTimestampMs:[8,e.TYPES.INTEGER],unifiedSessionId:[9,e.TYPES.STRING]},[1,1,1],"regular"]},{TsBitArray:[]});l.TsBitArrayWamEvent=s}),98);
__d("WAWebTimeSpentLoggingBitArray",["Promise","WALogger","WAWebABProps","WAWebPermanentStorage","WAWebTsBitArrayWamEvent","compactMap"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m;function p(e,t){for(var n,o,a,i=""+e.bitmap[0],l=1;l<e.bitmap.length;++l)i+=":"+e.bitmap[l];var s=[e.sessionId,e.sessionSeq,e.sessionCum,e.startTime,e.bitmapLen,(n=e.relativeStartTimeMs)!=null?n:"",(o=e.tsTimestampMs)!=null?o:"",(a=e.unifiedSessionId)!=null?a:""],u=s.join(":")+"$"+i,c=r("WAWebPermanentStorage").getItem(t);if(c==null)return r("WAWebPermanentStorage").setItem(t,u),[e];var d=h(c);return d.push(e),r("WAWebPermanentStorage").setItem(t,c+"_"+u),d}function _(t,a){var i=p(t,a);(m||(m=n("Promise"))).all(i.map(g)).then(function(){return r("WAWebPermanentStorage").removeItem(a)}).catch(function(){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[time-spent] error flushing events for ","."])),a)})}function f(e,t){var a=r("WAWebPermanentStorage").getItem(e);if(a!=null){var i=h(a);if(i==null){o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[time-spent] error parsing stashed bitarray data (",")"])),e);return}(m||(m=n("Promise"))).all(i.map(t)).then(function(){return r("WAWebPermanentStorage").removeItem(e)}).catch(function(){o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[time-spent] error flushing events for ","."])),e)})}}function g(e){var t,n,r=Number(e.sessionId),a=new(o("WAWebTsBitArrayWamEvent")).TsBitArrayWamEvent({tsSessionId:Number.isSafeInteger(r)?r:-1,bitarrayLength:e.bitmapLen,bitarrayLow:e.bitmap[0],bitarrayHigh:(t=e.bitmap[1])!=null?t:void 0,cumulativeBits:e.sessionCum,relativeTimestampMs:(n=e.relativeStartTimeMs)!=null?n:void 0,sessionSeq:e.sessionSeq});return o("WAWebABProps").getABPropConfigValue("unified_session_log_ts_event")&&(e.tsTimestampMs!=null&&(a.tsTimestampMs=e.tsTimestampMs),e.unifiedSessionId!=null&&(a.unifiedSessionId=e.unifiedSessionId)),a.commitAndWaitForFlush()}function h(e){return e.length===0?[]:r("compactMap")(e.split("_"),y)}function y(e){var t,n,r,a=e.split("$"),i=a[0],l=a[1],s=babelHelpers.arrayLikeToArray(a).slice(2);if(s.length||!l){o("WALogger").WARN(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Invalid stashed time spent event"])));return}var u=i.split(":");if(!(u.length>=5&&u.length<=8)){o("WALogger").WARN(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Invalid stashed time spent event"])));return}var m=new Int32Array(l.split(":").map(function(e){return Number(e)})),p={sessionId:u[0],sessionSeq:Number(u[1]),sessionCum:Number(u[2]),startTime:Number(u[3]),bitmapLen:Number(u[4]),bitmap:m};return(t=u[5])!=null&&t.length&&(p.relativeStartTimeMs=Number(u[5])),(n=u[6])!=null&&n.length&&(p.tsTimestampMs=Number(u[6])),(r=u[7])!=null&&r.length&&(p.unifiedSessionId=u[7]),p}l.stashBitarrayData=p,l.stashAndFlushBitarray=_,l.flushBitarrays=f,l.postTsBitArrayEvent=g,l.parseStashedBitarrayData=h}),98);
__d("WAWebWamTimeSpentArray",["WALogger","WAShiftTimer","WAWebABProps","WAWebClock","WAWebUnifiedSession"],(function(t,n,r,o,a,i,l){var e,s=2,u=s*32,c=(function(){function t(e){var t=this;this.sequenceId=0,this.ship=function(e){var n,r=t.bitmap;if(r){var a=Date.now();a>t.lastActiveInMS&&(t.bitmapLength=Math.min(u,Math.ceil(a/1e3-t.startTimeInSec)));var i={sessionId:t.sessionId,startTime:t.startTimeInSec,bitmap:r,bitmapLen:t.bitmapLength,sessionSeq:t.sequenceId,sessionCum:t.cumulativeBitsSet,relativeStartTimeMs:(n=t.relativeStartTimeMs)!=null?n:void 0};if(o("WAWebABProps").getABPropConfigValue("unified_session_log_ts_event")){var l=t.startTimeInSec*1e3;i.tsTimestampMs=o("WAWebClock").Clock.getServerTimeMs()-(a-l);var s=o("WAWebUnifiedSession").UnifiedSessionManager.getSessionId();s!=null&&(i.unifiedSessionId=s)}var c=e||t.loggingCallback;c(i),t.timer.cancel(),t.bitmap=null}},this.loggingCallback=e.loggingCallback,this.timer=new(o("WAShiftTimer")).ShiftTimer(this.ship);var n=e.getSessionData,r=e.postUpdate;n!=null&&(this.fetchAndUpdateSession=function(){var e=n(),r=e.id,o=e.relativeTimeMs;t.sessionId=r,t.relativeStartTimeMs=o,t.cumulativeBitsSet=0}),this.postUpdate=r,this.$1(),this.$2(Math.floor(Date.now()/1e3))}var n=t.prototype;return n.$1=function(){this.fetchAndUpdateSession!=null?this.fetchAndUpdateSession():(this.sessionId=d(),this.cumulativeBitsSet=0,this.sequenceId=-1)},n.$2=function(n){var t;this.fetchAndUpdateSession!=null&&this.fetchAndUpdateSession(),o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[time-spent] _initArray at time ",""])),n),this.startTimeInSec=n,this.lastActiveInMS=this.startTimeInSec*1e3,this.bitmap=new Int32Array(s),this.bitmap[0]=1,this.bitmapLength=1,this.cumulativeBitsSet+=1,this.sequenceId+=1,(t=this.postUpdate)==null||t.call(this);var r=u*1e3;this.timer.debounceAndCap(r,r)},n.$3=function(t){var e=t-this.startTimeInSec;this.bitmap&&(e<0||e>=u)&&this.ship(),this.bitmap?(this.bitmap[e>>5]|=1<<(e&31),this.bitmapLength=e+1,this.cumulativeBitsSet+=1,this.lastActiveInMS=t*1e3):this.$2(t)},n.update=function(t){var e;t>=this.lastActiveInMS&&t-this.lastActiveInMS<1e3||(this.$3(Math.floor(t/1e3)),(e=this.postUpdate)==null||e.call(this))},n.shipAndEndSession=function(t){this.ship(t),this.$1()},t})();function d(){return Math.floor(2147483648*Math.random()).toString(36)}l.default=c}),98);
__d("WAWebTimeSpentLoggingSession",["WALogger","WAShiftTimer","WATimeUtils","WAWebABProps","WAWebClock","WAWebTimeSpentLoggingBitArray","WAWebTimeSpentLoggingExternal","WAWebUnifiedSession","WAWebUserPrefsKeys","WAWebUserPrefsStore","WAWebWamTimeSpentArray"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_=Math.pow(2,31)-1,f=null,g=null,h=new(o("WAShiftTimer")).ShiftTimer(function(){f!=null&&(r("WAWebUserPrefsStore").set(o("WAWebUserPrefsKeys").KEYS.TIME_SPENT_SESSION,f),o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[time-spent] persisted session"]))))});function y(e){if(e===void 0&&(e=!1),e){h.forceRunNow();return}var t=10;h.onOrBefore(t*1e3)}function C(){var e=r("WAWebUserPrefsStore").get(o("WAWebUserPrefsKeys").KEYS.TIME_SPENT_SESSION);if(e==null||typeof e!="object"){o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[time-spent] no session to restore"]))),f=null;return}var t=e.cumulativeBitsSet,n=e.id,a=e.lastActivityTimestampMs,i=e.relativeTimestampMs,l=e.sequenceId,d=e.startTimestampMs,m=e.tsTimestampMs,p=e.unifiedSessionId;if(typeof n!="number"||typeof d!="number"||typeof a!="number"||typeof t!="number"||typeof l!="number"||typeof i!="number"||typeof m!="number"&&m!=null||typeof p!="string"&&p!=null){o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[time-spent] malformed ts session: ",""])),JSON.stringify(e)),f=null;return}f={id:n,startTimestampMs:d,lastActivityTimestampMs:a,cumulativeBitsSet:t,sequenceId:l,relativeTimestampMs:i,tsTimestampMs:m!=null?m:null,unifiedSessionId:p!=null?p:null},o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[time-spent] restored ts session: ",""])),JSON.stringify(f))}function b(){var e=o("WATimeUtils").unixTimeMs(),t=null,n=null;if(o("WAWebABProps").getABPropConfigValue("unified_session_log_ts_event")){var r;t=o("WAWebClock").Clock.getServerTimeMs(),n=(r=o("WAWebUnifiedSession").UnifiedSessionManager.getSessionId())!=null?r:null}if(f==null||e-f.lastActivityTimestampMs>=S()&&!o("WAWebTimeSpentLoggingExternal").tsExternalEventsInProgress()){g=f,o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["[time-spent] initializing session"])));var a={id:Math.floor(Math.random()*_),startTimestampMs:e,lastActivityTimestampMs:e,cumulativeBitsSet:0,sequenceId:-1,relativeTimestampMs:0,tsTimestampMs:t,unifiedSessionId:n};return f=a,y(!0),a}return f.relativeTimestampMs=e-f.startTimestampMs,f.tsTimestampMs=t,f.unifiedSessionId=n,f}function v(){b().lastActivityTimestampMs=o("WATimeUtils").unixTimeMs(),y()}function S(){return o("WAWebABProps").getABPropConfigValue("ts_session_duration_ms")}function R(){return o("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[time-spent] creating time spent array"]))),new(r("WAWebWamTimeSpentArray"))({getSessionData:function(){var e=b();return{relativeTimeMs:e.relativeTimestampMs,id:e.id.toString()}},postUpdate:v,loggingCallback:function(t){o("WAWebTimeSpentLoggingBitArray").stashAndFlushBitarray(L(t),o("WAWebUserPrefsKeys").KEYS.TIME_SPENT_BITARRAY_EVENT)}})}function L(e){var t=b(),n=Number(e.sessionId);if(t.id!==n){var r;if(g!=null&&((r=g)==null?void 0:r.id)===n)t=g;else return o("WALogger").WARN(p||(p=babelHelpers.taggedTemplateLiteralLoose(["[time-spent] processing array data for an expired session, but no session found"]))),e}return t.cumulativeBitsSet+=e.sessionCum,t.sequenceId++,e.sessionSeq=t.sequenceId,e.sessionCum=t.cumulativeBitsSet,y(!0),e}l.restoreTimeSpentSession=C,l.getOrInitTimeSpentSession=b,l.markTimeSpentActivity=v,l.createTimeSpentArray=R,l.preprocessTsArrayData=L}),98);
__d("WAWebWamEnumPsBufferUploadResult",[],(function(t,n,r,o,a,i){var e=Object.freeze({SUCCESS:1,ERROR_PARSING:2,ERROR_DECODING:3,ERROR_CREDENTIAL:4,ERROR_OTHER:5,ERROR_CLIENT_NETWORK:6,ERROR_WAIT_FOR_TOKEN:7,ERROR_SERVER_OTHER:8,SKIPPED_NO_NETWORK:9,SKIPPED_NO_DATA:10,ERROR_ACCESS_TOKEN:11});i.PS_BUFFER_UPLOAD_RESULT=e}),66);
__d("WAWebWamEnumPsTokenNotReadyReason",[],(function(t,n,r,o,a,i){var e=Object.freeze({NO_REASON:0,REASON_UNKNOWN:1,REASON_WAIT_FOR_FIRST_TOKEN:2,REASON_INVALID_SHARED_KEY:3,REASON_INVALID_FACTOR:4,REASON_GEN_FACTOR_FAILURE:5,REASON_COMPUTE_HMAC_FAILURE:6,REASON_BLIND_FAILURE:7,REASON_UNBLIND_FAILURE:8,REASON_LAST_SIGNREQ_NETWORK_FAILURE:9,REASON_LAST_SIGNREQ_SERVER_ERROR:10,REASON_LAST_SIGNREQ_BAD_REQUEST:11,REASON_LAST_SIGNREQ_OTHER_ERROR:12,REASON_WAIT_FOR_GEN_TOKEN:13,REASON_GEN_SHAREDKEY_FAILURE:14,REASON_WAIT_FOR_GEN_FIRST_TOKEN:15});i.PS_TOKEN_NOT_READY_REASON=e}),66);
__d("WAWebWamEnumPsUploadReason",[],(function(t,n,r,o,a,i){var e=Object.freeze({REASON_PS_PINGER:0,REASON_PS_OFFCYCLE:1});i.PS_UPLOAD_REASON=e}),66);
__d("WAWebPsBufferUploadWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumApplicationState","WAWebWamEnumPsBufferUploadResult","WAWebWamEnumPsTokenNotReadyReason","WAWebWamEnumPsUploadReason"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({PsBufferUpload:[2244,{applicationState:[6,o("WAWebWamEnumApplicationState").APPLICATION_STATE],isFromWamsys:[12,e.TYPES.BOOLEAN],isRealtime:[15,e.TYPES.BOOLEAN],isUserSampled:[14,e.TYPES.BOOLEAN],psBufferSequenceNumber:[13,e.TYPES.INTEGER],psBufferUploadHttpResponseCode:[3,e.TYPES.INTEGER],psBufferUploadResult:[1,o("WAWebWamEnumPsBufferUploadResult").PS_BUFFER_UPLOAD_RESULT],psBufferUploadT:[2,e.TYPES.TIMER],psDitheredT:[11,e.TYPES.INTEGER],psForceUpload:[10,e.TYPES.BOOLEAN],psTokenNotReadyReason:[4,o("WAWebWamEnumPsTokenNotReadyReason").PS_TOKEN_NOT_READY_REASON],psUploadReason:[9,o("WAWebWamEnumPsUploadReason").PS_UPLOAD_REASON],waConnectedToChatd:[5,e.TYPES.BOOLEAN]},[1,1,100],"regular"]},{PsBufferUpload:[]});l.PsBufferUploadWamEvent=s}),98);
__d("WAWebWamConstants",[],(function(t,n,r,o,a,i){var e=5e4,l=5,s=100,u=64e3,c=5,d=120;i.WAM_MAX_BUFFER_SIZE=e,i.WAM_PROTOCOL_VERSION=l,i.WAM_WORKER_DATA_BATCH_SIZE=s,i.WAM_MAX_BUFFER_SIZE_FOR_UPLOAD=u,i.WAM_IN_MEMORY_BUFFERING_DURATION_IN_SECS=c,i.WAM_BUFFER_ROTATE_INTERVAL_IN_SECS=d}),66);
__d("WAWebWamEnumPsIdAction",[],(function(t,n,r,o,a,i){var e=Object.freeze({CREATED:1,ROTATED:2,DELETED:3});i.PS_ID_ACTION=e}),66);
__d("WAWebPsIdUpdateWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumPsIdAction"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({PsIdUpdate:[2862,{isFromWamsys:[4,e.TYPES.BOOLEAN],psIdAction:[2,o("WAWebWamEnumPsIdAction").PS_ID_ACTION],psIdKey:[1,e.TYPES.INTEGER],psIdRotationFrequence:[3,e.TYPES.INTEGER]},[1,1,1],"regular"]},{PsIdUpdate:[]});l.PsIdUpdateWamEvent=s}),98);
__d("WAWebWebWamForceFlushWamEvent",["WAWebWamCodegenUtils"],(function(t,n,r,o,a,i,l){var e=o("WAWebWamCodegenUtils").defineEvents({WebWamForceFlush:[3264,{},[1,1,1],"regular"]},{WebWamForceFlush:[]});l.WebWamForceFlushWamEvent=e}),98);
__d("WAWebWamUtils",["WABase64","WABinary","WALogger","WAQplUploader","WAWebEnvironment","WAWebGuestWamConstants","WAWebPsIdUpdateWamEvent","WAWebUserPrefsGeneral","WAWebWamCodegenUtils","WAWebWamConstants","WAWebWamEnumAppBuildType","WAWebWamEnumWebcEnvCode","WAWebWamGlobals","WAWebWebWamForceFlushWamEvent","cr:9565","err","gkx"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m=(e=n("cr:9565"))!=null?e:{},p=m.getWindowsAppBuild;function _(){new(o("WAWebWebWamForceFlushWamEvent")).WebWamForceFlushWamEvent().commitAndWaitForFlush(!0).finally(function(){return o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["force flushed all wam buffers"]))).tags("wam")}),o("WAQplUploader").forceQplUpload().finally(function(){return o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[qpl] force flushed all buffers"]))).tags("qpl")})}function f(e,t,n){new(o("WAWebPsIdUpdateWamEvent")).PsIdUpdateWamEvent({psIdAction:e,psIdKey:t,psIdRotationFrequence:n}).commit()}function g(e,t){var n=JSON.parse(t),r=o("WAWebWamCodegenUtils").events[e];if(r==null){o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["WAM: commitWorkerWamEvent failed, "," is not defined"])),e).sendLogs("wam-worker-event-undefined-error");return}new r(n).commit()}function h(e,t){var n,r=JSON.parse(t),a=r.value;o("WAWebWamGlobals").Global.set((n={},n[e]=a,n))}function y(e){var t=e.action,n=e.name,r=e.payload;return t==="commit"?g(n,r):h(n,r)}function C(e){var t=!0;try{var n=new(o("WABinary")).Binary(o("WABase64").decodeB64(e));t=n.size()>o("WAWebWamConstants").WAM_MAX_BUFFER_SIZE_FOR_UPLOAD}catch(e){o("WALogger").ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["dropping invalid wam buffer"])))}return t}function b(e){return e==="regular"?"regular":e==="realtime"?"realtime":"private"}function v(){var e=p==null?void 0:p();return e!=null?e:r("gkx")("26258")?o("WAWebWamEnumAppBuildType").APP_BUILD_TYPE.RELEASE:r("gkx")("26259")?o("WAWebWamEnumAppBuildType").APP_BUILD_TYPE.BETA:o("WAWebWamEnumAppBuildType").APP_BUILD_TYPE.ALPHA}function S(){if(r("gkx")("26259"))return o("WAWebWamEnumWebcEnvCode").WEBC_ENV_CODE.INTERN;if(r("gkx")("26258"))return o("WAWebWamEnumWebcEnvCode").WEBC_ENV_CODE.PROD;if(r("gkx")("26256"))return o("WAWebWamEnumWebcEnvCode").WEBC_ENV_CODE.E2E;throw r("err")("invalid env")}function R(){return o("WAWebUserPrefsGeneral").getWhatsAppWebExternalBetaJoinedIdb()}function L(e){if(r("gkx")("26256")){var t=window.__je2e_recordWAMEvent;(t||typeof t=="function")&&t(babelHelpers.extends({name:e.$className},e.all))}}function E(e,t){if(r("gkx")("26256")){var n=window.__je2e_recordWAMEvent;(n||typeof n=="function")&&n({name:e,value:t})}}function k(){return r("WAWebEnvironment").isGuest?o("WAWebGuestWamConstants").WAM_IN_MEMORY_BUFFERING_DURATION_IN_SECS_FOR_GUEST:o("WAWebWamConstants").WAM_IN_MEMORY_BUFFERING_DURATION_IN_SECS}function I(){return r("WAWebEnvironment").isGuest?o("WAWebGuestWamConstants").WAM_BUFFER_ROTATE_INTERVAL_IN_SECS_FOR_GUEST:o("WAWebWamConstants").WAM_BUFFER_ROTATE_INTERVAL_IN_SECS}l.forceFlushAllWamAndQplBuffers=_,l.logPsIdUpdate=f,l.processWorkerWamDataRow=y,l.isWamBufferTooBigToUpload=C,l.getChannelFromBufferKey=b,l.getAppBuild=v,l.getWamEnv=S,l.getAppIsBetaRelease=R,l.maybeForwardWamEventToJestE2e=L,l.maybeForwardWamAttributeToJestE2e=E,l.getInMemoryBufferingDurationInSecs=k,l.getBufferRotateIntervalInSecs=I}),98);
__d("WAWebWamStorage",["WALogger","WAWebWAWCStorage","WAWebWamConstants","WAWebWamUtils","asyncToGeneratorRuntime","err","getErrorSafe","gkx"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g,h,y;function C(e,t,n){return b.apply(this,arguments)}function b(){return b=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var a=yield r("WAWebWAWCStorage").idb();return a.wam.add({key:e,buffer:n,channel:t},e).catch(function(e){o("WALogger").LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["add failed: ","\n",""],["add failed: ","\\n",""])),e,e==null?void 0:e.stack)})}),b.apply(this,arguments)}function v(e,t,n){return S.apply(this,arguments)}function S(){return S=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var a=0;try{a=yield r("WAWebWAWCStorage").idb().then(function(r){return r.wam.update(e,{key:e,buffer:n,channel:t})})}catch(e){var i=r("getErrorSafe")(e);o("WALogger").LOG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["update failed: ","\n",""],["update failed: ","\\n",""])),i,i.stack)}return a!==0}),S.apply(this,arguments)}function R(e){return L.apply(this,arguments)}function L(){return L=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t={};try{yield r("WAWebWAWCStorage").idb().then(function(n){return n.wam.where("channel").equals(e).modify(function(e,n){t[e.key]=e.buffer,delete n.value})})}catch(e){var n=r("getErrorSafe")(e);o("WALogger").LOG(f||(f=babelHelpers.taggedTemplateLiteralLoose(["deleteAll failed: ","\n",""],["deleteAll failed: ","\\n",""])),n,n.stack)}return t}),L.apply(this,arguments)}function E(e){return k.apply(this,arguments)}function k(){return k=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=-1,a=65536;try{var i=yield r("WAWebWAWCStorage").idb();yield i.transaction("rw",["wam_meta"],n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var n=yield i.wam_meta.where("streamId").equals(e).count();n===0?(yield i.wam_meta.add({streamId:e,seqNum:1}),t=1):yield i.wam_meta.where("streamId").equals(e).modify(function(e){return t=e.seqNum+1,t>=a&&(t=1),e.seqNum=t,e})}))}catch(e){var l=r("getErrorSafe")(e);o("WALogger").LOG(g||(g=babelHelpers.taggedTemplateLiteralLoose(["getNextSequenceNumberForStream failed: ","\n",""],["getNextSequenceNumberForStream failed: ","\\n",""])),l,l.stack)}if(t===-1)throw r("gkx")("26258")||o("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[wam] getNextSequenceNumberForStream failed"]))).sendLogs("getNextSequenceNumberForStreamFailed"),r("err")("could not get seq number for streamId "+e);return t}),k.apply(this,arguments)}function I(t){return r("WAWebWAWCStorage").idb().then(function(e){return e.ps_meta.bulkDelete(t)}).catch(function(t){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["removePsMeta failed: ","\n",""],["removePsMeta failed: ","\\n",""])),t,t==null?void 0:t.stack)})}function T(){return r("WAWebWAWCStorage").idb().then(function(e){return e.ps_meta.toArray()}).catch(function(e){return o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["getPsMeta failed: ","\n",""],["getPsMeta failed: ","\\n",""])),e,e==null?void 0:e.stack),[]})}function D(e){return r("WAWebWAWCStorage").idb().then(function(t){return t.ps_meta.bulkPut(e)}).catch(function(e){o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["addPsMeta failed: ","\n",""],["addPsMeta failed: ","\\n",""])),e,e==null?void 0:e.stack)})}function x(e){return r("WAWebWAWCStorage").idb().then(function(t){return t.ps_meta.update(e.key,e)}).catch(function(e){o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["updatePsMeta failed: ","\n",""],["updatePsMeta failed: ","\\n",""])),e,e==null?void 0:e.stack)})}function $(){return r("WAWebWAWCStorage").idb().then(function(e){return e.ps_tokens.get("token")}).catch(function(e){o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["getPsToken failed: ","\n",""],["getPsToken failed: ","\\n",""])),e,e==null?void 0:e.stack)})}function P(e){return r("WAWebWAWCStorage").idb().then(function(t){return t.transaction("rw",["ps_tokens"],function(){return t.ps_tokens.put(e)})}).catch(function(e){o("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["savePsToken failed: ","\n",""],["savePsToken failed: ","\\n",""])),e,e==null?void 0:e.stack)})}function N(e,t){return M.apply(this,arguments)}function M(){return M=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield r("WAWebWAWCStorage").idb();return n.transaction("rw",["core_wam","core_wam_meta"],function(){return n.core_wam.put(t).then(function(){return n.core_wam_meta.put(e)})})}),M.apply(this,arguments)}function w(e){return A.apply(this,arguments)}function A(){return A=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield r("WAWebWAWCStorage").idb();return t.core_wam.where("streamId").equals(e).modify({finished:!0})}),A.apply(this,arguments)}function F(e){return O.apply(this,arguments)}function O(){return O=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield r("WAWebWAWCStorage").idb();return t.core_wam_meta.get({streamId:e})}),O.apply(this,arguments)}function B(){return W.apply(this,arguments)}function W(){return W=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield r("WAWebWAWCStorage").idb();return e.core_wam.toArray()}),W.apply(this,arguments)}function q(){return U.apply(this,arguments)}function U(){return U=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield r("WAWebWAWCStorage").idb();return e.transaction("rw",["core_wam","core_wam_meta"],function(){return e.core_wam.clear().then(function(){return e.core_wam_meta.clear()})})}),U.apply(this,arguments)}function V(e){return H.apply(this,arguments)}function H(){return H=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield r("WAWebWAWCStorage").idb();return t.core_wam.delete(e)}),H.apply(this,arguments)}function G(e){return z.apply(this,arguments)}function z(){return z=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield r("WAWebWAWCStorage").idb();return t.transaction("rw",["worker_wam_events"],function(){return t.worker_wam_events.put(e)})}),z.apply(this,arguments)}function j(){return K.apply(this,arguments)}function K(){return K=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield r("WAWebWAWCStorage").idb();try{yield e.transaction("rw",["worker_wam_events"],n("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield e.worker_wam_events.limit(o("WAWebWamConstants").WAM_WORKER_DATA_BATCH_SIZE).modify(function(e,t){o("WAWebWamUtils").processWorkerWamDataRow(e),delete t.value})}));var t=yield e.worker_wam_events.count();return t>0}catch(e){var a=r("getErrorSafe")(e);return o("WALogger").LOG(y||(y=babelHelpers.taggedTemplateLiteralLoose(["processWorkerWamData failed: ","\n",""],["processWorkerWamData failed: ","\\n",""])),a,a.stack),!1}}),K.apply(this,arguments)}var Q={add:C,update:v,deleteAll:R,getNextSequenceNumberForStream:E,addCoreWamBuffer:N,finishAllCoreWamBuffers:w,getCoreWamStartingSequenceNumber:F,getAllCoreWamBuffers:B,nukeAllCoreWamBuffers:q,removeWamBufferByKey:V,storeWorkerWamData:G,processWorkerWamData:j,removePsMeta:I,getPsMeta:T,addPsMeta:D,updatePsMeta:x,getPsToken:$,savePsToken:P},X=Q;l.default=X}),98);
__d("WAWebProfilePicConstants",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum").Mirrored(["Remove","Set"]),l="pps.whatsapp.net";i.ProfilePicCommand=e,i.DEFAULT_HOSTNAME=l}),66);
__d("WAWebWamChatPSALogger",["WAWebChatMuteWamEvent","WAWebChatPsaActionWamEvent","WAWebChatPsaReadWamEvent","WAWebChatPsaRemoveWamEvent","WAWebWamEnumActionConducted","WAWebWamEnumChatMuteNotificationChoice","WAWebWamEnumMuteChatType","WAWebWamEnumPsaMessageActionType","WAWebWamEnumPsaMessageRemoveAction","WAWebWamEnumPsaMessageRemoveEntryPoint","WAWebWamEnumReadEntryPoint","WAWebWamEnumWaOfficialAccountName","WAWebWamMsgUtils"],(function(t,n,r,o,a,i,l){function e(e){if(e.campaignId!=null){var t;new(o("WAWebChatPsaReadWamEvent")).ChatPsaReadWamEvent({messageMediaType:e.getWamMediaType(),psaMsgId:e.id.id.toString(),psaCampaignId:(t=e.campaignId)==null?void 0:t.toString(),readEntryPoint:o("WAWebWamEnumReadEntryPoint").READ_ENTRY_POINT.CHAT}).commit()}}function s(e,t){new(o("WAWebChatMuteWamEvent")).ChatMuteWamEvent({actionConducted:o("WAWebWamEnumActionConducted").ACTION_CONDUCTED.MUTE,chatMuteNotificationChoice:o("WAWebWamEnumChatMuteNotificationChoice").CHAT_MUTE_NOTIFICATION_CHOICE.NO_NOTIFICATIONS_WHEN_MUTED,muteChatType:o("WAWebWamEnumMuteChatType").MUTE_CHAT_TYPE.ONE_ON_ONE,muteDuration:t,muteEntryPoint:e,waOfficialAccountName:o("WAWebWamEnumWaOfficialAccountName").WA_OFFICIAL_ACCOUNT_NAME.WHATSAPP_CHATPSA}).commit()}function u(e){new(o("WAWebChatMuteWamEvent")).ChatMuteWamEvent({actionConducted:o("WAWebWamEnumActionConducted").ACTION_CONDUCTED.UNMUTE,muteChatType:o("WAWebWamEnumMuteChatType").MUTE_CHAT_TYPE.ONE_ON_ONE,muteEntryPoint:e,waOfficialAccountName:o("WAWebWamEnumWaOfficialAccountName").WA_OFFICIAL_ACCOUNT_NAME.WHATSAPP_CHATPSA}).commit()}function c(e){var t;new(o("WAWebChatPsaActionWamEvent")).ChatPsaActionWamEvent({messageMediaType:e.getWamMediaType(),psaCampaignId:(t=e.campaignId)==null?void 0:t.toString(),psaMessageActionType:o("WAWebWamEnumPsaMessageActionType").PSA_MESSAGE_ACTION_TYPE.SAVE,psaMsgId:e.id.id.toString()}).commit()}function d(e){var t;new(o("WAWebChatPsaActionWamEvent")).ChatPsaActionWamEvent({messageMediaType:o("WAWebWamMsgUtils").getWamMediaType(e),psaCampaignId:(t=e.campaignId)==null?void 0:t.toString(),psaMessageActionType:o("WAWebWamEnumPsaMessageActionType").PSA_MESSAGE_ACTION_TYPE.DELETE,psaMsgId:e.id.id.toString()}).commit()}function m(e){var t;new(o("WAWebChatPsaActionWamEvent")).ChatPsaActionWamEvent({messageMediaType:e.getWamMediaType(),psaCampaignId:(t=e.campaignId)==null?void 0:t.toString(),psaMessageActionType:o("WAWebWamEnumPsaMessageActionType").PSA_MESSAGE_ACTION_TYPE.FORWARD,psaMsgId:e.id.id.toString()}).commit()}function p(e,t,n){new(o("WAWebChatPsaActionWamEvent")).ChatPsaActionWamEvent({messageMediaType:e,psaCampaignId:t==null?void 0:t.toString(),psaMessageActionType:o("WAWebWamEnumPsaMessageActionType").PSA_MESSAGE_ACTION_TYPE.MEDIA_PLAY,psaMsgId:n.toString()}).commit()}function _(e,t,n){e?new(o("WAWebChatPsaRemoveWamEvent")).ChatPsaRemoveWamEvent({lastReceivedMediaType:e.getWamMediaType(),lastReceivedMessageTs:e.t,lastReceivedMsgId:e.id.id.toString(),psaMessageRemoveAction:f(t),psaMessageRemoveEntryPoint:g(n),waOfficialAccountName:o("WAWebWamEnumWaOfficialAccountName").WA_OFFICIAL_ACCOUNT_NAME.WHATSAPP_CHATPSA}).commit():new(o("WAWebChatPsaRemoveWamEvent")).ChatPsaRemoveWamEvent({psaMessageRemoveAction:f(t),psaMessageRemoveEntryPoint:g(n),waOfficialAccountName:o("WAWebWamEnumWaOfficialAccountName").WA_OFFICIAL_ACCOUNT_NAME.WHATSAPP_CHATPSA}).commit()}function f(e){switch(e){case 1:return o("WAWebWamEnumPsaMessageRemoveAction").PSA_MESSAGE_REMOVE_ACTION.BLOCK;case 2:return o("WAWebWamEnumPsaMessageRemoveAction").PSA_MESSAGE_REMOVE_ACTION.UNBLOCK;case 3:return o("WAWebWamEnumPsaMessageRemoveAction").PSA_MESSAGE_REMOVE_ACTION.ARCHIVE;case 4:return o("WAWebWamEnumPsaMessageRemoveAction").PSA_MESSAGE_REMOVE_ACTION.UNARCHIVE;case 5:return o("WAWebWamEnumPsaMessageRemoveAction").PSA_MESSAGE_REMOVE_ACTION.CLEAR;case 6:return o("WAWebWamEnumPsaMessageRemoveAction").PSA_MESSAGE_REMOVE_ACTION.DELETE_ALL}}function g(e){switch(e){case 1:return o("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT.BLOCK_FROM_CONTACT_INFO;case 2:return o("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT.BLOCK_FROM_CHAT;case 3:return o("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT.UNBLOCK_FROM_CONTACT_INFO;case 4:return o("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT.UNBLOCK_FROM_CHAT;case 5:return o("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT.UNBLOCK_FROM_PRIVACY_SETTINGS;case 6:return o("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT.ARCHIVE_FROM_CHAT_LIST;case 7:return o("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT.ARCHIVE_FROM_DELETE_OPTION;case 8:return o("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT.UNARCHIVE_FROM_ARCHIVED_CHAT_LIST;case 9:return o("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT.CLEAR_FROM_CONTACT_INFO;case 10:return o("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT.CLEAR_FROM_CHAT_LIST;case 11:return o("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT.DELETE_ALL_FROM_CHAT_LIST;case 12:return o("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT.DELETE_ALL_FROM_CONTACT_INFO;case 13:return o("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT.DELETE_ALL_FROM_CONVERSATION;case 14:return o("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT.CLEAR_FROM_CONVERSATION}}l.logChatPSARead=e,l.logChatPSAMute=s,l.logChatPSAUnmute=u,l.logChatPSAStar=c,l.logChatPSADelete=d,l.logChatPSAForward=m,l.logChatPSAMediaPlay=p,l.logChatPSARemove=_}),98);
__d("WAWebSendReadReceiptJob",["Promise","WAJids","WALogger","WANullthrows","WATimeUtils","WAWebAck","WAWebApiChat","WAWebDBMsgUtils","WAWebHandlePlaceholderWam","WAWebLidMigrationUtils","WAWebModelStorageUtils","WAWebMsgGetters","WAWebMsgKey","WAWebMsgType","WAWebPrivacySettings","WAWebSchemaMessage","WAWebSendReceiptJobCommon","WAWebUserPrefsGeneral","WAWebUserPrefsMeUser","WAWebWamChatPSALogger","WAWebWid","WAWebWidFactory","asyncToGeneratorRuntime","justknobx"],(function(t,n,r,o,a,i,l){var e,s,u,c=o("WAWebWidFactory").createWid(o("WAJids").STATUS_JID);function d(e,t){return e.isNewsletter()||e.isStatus()&&t!=null&&t.isPSA()||r("WAWebWid").isPSA(e)?o("WAWebSendReceiptJobCommon").RECEIPT_TYPE.READ_SELF:e.isGroup()?o("WAWebSendReceiptJobCommon").RECEIPT_TYPE.READ:o("WAWebUserPrefsGeneral").getUserPrivacySettings().readReceipts===o("WAWebPrivacySettings").ALL_NONE.none?o("WAWebSendReceiptJobCommon").RECEIPT_TYPE.READ_SELF:o("WAWebSendReceiptJobCommon").RECEIPT_TYPE.READ}function m(e,t,n){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a,i){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["markChatRead"])));var l=Date.now().toString(),s=String(t.id),c=yield o("WAWebApiChat").queryPendingReadReceiptMsgRows(s);c.sort(function(e,t){var n=e.rowId||0,r=t.rowId||0;return n-r});var m=a?String(a):null,p=c.length-1;if(m){for(p;p>=0&&c[p].id!==m;p--);p<0&&(p=c.length-1)}var _=null,f=[];for(p;p>=0;p--){var g=c[p],h=t.msgs.get(g.id);h&&r("WAWebWid").isPSA(t.id)&&o("WAWebWamChatPSALogger").logChatPSARead(h),g.rowId!=null&&(_==null||g.rowId>_)&&(_=g.rowId);var C=r("WAWebMsgKey").fromString(g.id);if(g.type===o("WAWebMsgType").MSG_TYPE.CIPHERTEXT){o("WAWebHandlePlaceholderWam").postPlaceholderActivityViewEvent([g]);continue}var b=g.broadcastId||g.from,v=g.author||g.from;f.push({id:C.id,sender:o("WAWebWidFactory").createWidFromWidLike(v),chat:o("WAWebWidFactory").createWidFromWidLike(b)})}var S=y(f),R=S[0],L=S[1];return yield(u||(u=n("Promise"))).all([].concat(Array.from(R.keys(),function(e){var n=R.get(e);if(n){var r;return t.trusted?r=d(t.id):r=o("WAWebSendReceiptJobCommon").RECEIPT_TYPE.READ_SELF,o("WAWebSendReceiptJobCommon").sendAggregateReceipts({to:e,type:r,t:l,groupedReceipt:n})}}),Array.from(L.keys(),function(e){var t=R.get(e);if(t)return o("WAWebSendReceiptJobCommon").sendAggregateReceipts({to:e,type:o("WAWebSendReceiptJobCommon").RECEIPT_TYPE.READ_SELF,t:l,groupedReceipt:t})}))),o("WAWebApiChat").markMessageAndChatAsRead({lastReadRowId:_,chatId:s,keepChatUnread:!1,threadId:i})}),p.apply(this,arguments)}function _(e,t,n){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var a=e.id;if(!o("WAWebMsgGetters").getIsStatus(e)){o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["markStatusRead: message is not a status."])));return}if(!(a.fromMe&&!r("justknobx")._("5152"))){var i=o("WAWebMsgGetters").getIsGroupStatus(e)?e.id.remote:c,l=n==null||n.sendReceipt===!0;l&&(yield o("WAWebSendReceiptJobCommon").sendAggregateReceipts({to:i,type:d(i,r("WANullthrows")(a.participant)),t:String(t),groupedReceipt:new Map([[r("WANullthrows")(a.participant),[a.id]]])}));var u={ack:o("WAWebAck").ACK.READ};a.participant&&a.participant.isPSA()&&(u.statusPSAReadTimestamp=t);var m=[babelHelpers.extends({id:a.toString()},u)],p=o("WAWebLidMigrationUtils").getAlternateMsgKey(a);p&&m.push(babelHelpers.extends({id:p.toString()},u)),yield o("WAWebSchemaMessage").getMessageTable().bulkMergeOnly(m)}}),f.apply(this,arguments)}function g(e){return h.apply(this,arguments)}function h(){return h=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=String(o("WATimeUtils").unixTime()),r=y(e.filter(function(e){return!o("WAWebUserPrefsMeUser").isSerializedWidMe(e.sender)}).map(function(e){return{chat:e.msgKey.remote,sender:o("WAWebWidFactory").createWidFromWidLike(e.sender),id:e.msgKey.id}})),a=r[0];yield(u||(u=n("Promise"))).all(Array.from(a.keys(),function(e){var n=a.get(e);if(n)return o("WAWebSendReceiptJobCommon").sendAggregateReceipts({to:e,type:o("WAWebSendReceiptJobCommon").RECEIPT_TYPE.READ_SELF,t:t,groupedReceipt:n})}))}),h.apply(this,arguments)}function y(e){var t=new Map,n=new Map;return e.forEach(function(e){var r,o,a=e.chat,i=e.id,l=e.sender,s=!a.isBot()&&l.isBot(),u=s?n:t,c=(r=u.get(a))!=null?r:new Map,d=(o=c.get(l))!=null?o:[];d.push(i),c.set(l,d),u.set(a,c)}),[t,n]}function C(e,t){return b.apply(this,arguments)}function b(){return b=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var a=String(e),i=yield v(a);if(i.length){var l=i.map(function(t){var n=r("WAWebMsgKey").fromString(t.latestEditMsgKey),a=t.author||t.from;return{id:n.id,sender:o("WAWebWidFactory").createWidFromWidLike(a),chat:o("WAWebWidFactory").createWidFromWidLike(e)}}),s=y(l),u=s[0],c=s[1],m=u.get(e),p=c.get(e),_=Date.now().toString();if(m){var f;t.trusted?f=d(e):f=o("WAWebSendReceiptJobCommon").RECEIPT_TYPE.READ_SELF,yield o("WAWebSendReceiptJobCommon").sendAggregateReceipts({to:e,type:f,t:_,groupedReceipt:m})}return p&&(yield o("WAWebSendReceiptJobCommon").sendAggregateReceipts({to:e,type:o("WAWebSendReceiptJobCommon").RECEIPT_TYPE.READ_SELF,t:_,groupedReceipt:p})),o("WAWebModelStorageUtils").getStorage().lock(["message"],(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e[0],n=new Set(l.map(function(e){return e.id})),o=(yield v(a)).filter(function(e){return n.has(r("WAWebMsgKey").fromString(e.latestEditMsgKey).id)}),i=o.map(function(e){return{id:e.id,pendingReadReceipt:null}});i.length>0&&(yield t.bulkCreateOrMerge(i))});return function(t){return e.apply(this,arguments)}})())}}),b.apply(this,arguments)}function v(e){return o("WAWebSchemaMessage").getMessageTable().equals(["from","pendingReadReceipt"],[e,o("WAWebDBMsgUtils").PendingReadReceiptType.MessageEdit],{shouldDecrypt:!1})}l.getReadReceiptType=d,l.markChatRead=m,l.markStatusRead=_,l.sendAddOnReadReceipts=g,l.groupMsgIdsByChatThenSender=y,l.markEditedMsgsRead=C}),98);
__d("WAWebManagePhoneNumberMappingJob",["WALogger","WAWebApiContact","WAWebWidFactory","WAWebWorkerSafeBackendApi","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u;function c(e){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=new Set;o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["ensurePhoneNumberToLidMapping: ",""])),t.length),t.forEach(function(e){if(e.isUser()&&!(e.isBot()||e.isHosted()||e.isLid()||e.isPSA())){var t=o("WAWebApiContact").getCurrentLid(o("WAWebWidFactory").asUserWidOrThrow(e));t==null&&n.add(e.user)}});var r=Array.from(n).map(function(e){return o("WAWebWidFactory").createUserWidOrThrow(e)});if(o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["ensurePhoneNumberToLidMapping: "," wids: ",""])),r.length,r.map(function(e){return e.toString()}).join()),r.length!==0){var a=!1;yield o("WAWebWorkerSafeBackendApi").workerSafeSendAndReceive("syncContactListJob",{contactIds:r,shouldSyncDevice:a,mode:"query"})}}),d.apply(this,arguments)}l.ensurePhoneNumberToLidMapping=c}),98);
__d("WAWebProcessKeyBundle",["Promise","WAJids","WALogger","WAWebSignal","WAWebSignalCommonUtils","WAWebSignalProtocolStore","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){var e,s,u,c;function d(e){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var a=0,i=0,l=[],d=[];for(var m of t)m.wid.device!=null&&m.wid.device!==o("WAJids").DEFAULT_DEVICE_ID?d.push(m):l.push(m),!m.key&&!m.wid.isBot()&&a++;if(l.length===0&&d.length===0)throw r("err")("establishE2ESession: no keys in the response");try{var p=[].concat(l,d).map(function(e){return o("WAWebSignalCommonUtils").createSignalAddress(e.wid).toString()});yield o("WAWebSignalProtocolStore").getPersistSignalProtocolStore().bulkLoadIdentityKey(p),o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["establishE2ESession: warmed up identity cache: "," records"])),p.length)}catch(e){o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["establishE2ESession: failed to warm up identity cache: ",""])),e)}var _=function(t){return o("WAWebSignal").Session.createSignalSession(t).then(function(){i++}).catch(function(e){o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["createSignalSession: failed for device "," with error ",""])),t.wid,e).sendLogs("createSignalSession-fail")})};return yield(c||(c=n("Promise"))).all(l.map(_)),yield c.all(d.map(_)),{depletedPrekeyCount:a,processedPrekeyCount:i}}),m.apply(this,arguments)}l.processKeyBundles=d}),98);
__d("WAWebManageE2ESessionsJob",["Promise","WALogger","WAResolvable","WAWebAppTracker","WAWebEventsWaitForOfflineDeliveryEnd","WAWebFetchPrekeysJob","WAWebManagePhoneNumberMappingJob","WAWebProcessKeyBundle","WAWebRunInBatches","WAWebSignal","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g,h=new Map,y={SESSION_CHECK:50,PROCESS_KEY_BUNDLES:1};function C(e,t){return b.apply(this,arguments)}function b(){return b=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r){r===void 0&&(r=!1),yield o("WAWebEventsWaitForOfflineDeliveryEnd").waitForOfflineDeliveryEnd(),o("WAWebAppTracker").AppTracker.start(o("WAWebAppTracker").AppTrackerType.PreKeyProcessing),o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["ensureE2ESessions: "," wids: ",""])),t.length,t.map(function(e){return e.toString()}).join());try{yield o("WAWebManagePhoneNumberMappingJob").ensurePhoneNumberToLidMapping(t)}catch(e){o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["ensureE2ESessions: "," wids: ensurePhoneNumberToLidMapping call have failed: ",""])),t.length,e).sendLogs("ensureE2ESessions",{sampling:.01})}var a=new(o("WAResolvable")).Resolvable,i=[],l=[];t.forEach(function(e){if(!e.isUserNotPSA()){o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["ensureE2ESessions: "," wids: can only estabilish session with user wid"])),t.length);return}var n=h.get(e);n?i.push(n):(l.push(e),h.set(e,a.promise))});var C=0,b=0;try{if(l.length>0){var v=[];yield o("WAWebRunInBatches").runInBatches(l,(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield o("WAWebSignal").Session.hasSignalSessions(e);v.push.apply(v,t)});return function(t){return e.apply(this,arguments)}})(),{batchSize:y.SESSION_CHECK});var S=[];if(l.forEach(function(e,t){v[t]||S.push(e)}),S.length>0){o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["ensureE2ESessions: "," wids: fetch prekeys for "," wids"])),t.length,S.length);var R=yield o("WAWebFetchPrekeysJob").fetchPrekeys(S,r),L=R.errors,E=R.prekeyBundles;o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["ensureE2ESessions: "," wids: fetch prekeys for "," wids: fetched ",", errors:",""])),t.length,S.length,E.length,L.length);var k=0;if(yield o("WAWebRunInBatches").runInBatches(E,(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t,n,r=yield o("WAWebProcessKeyBundle").processKeyBundles([].concat(e));b+=(t=r.depletedPrekeyCount)!=null?t:0,k+=(n=r.processedPrekeyCount)!=null?n:0});return function(t){return e.apply(this,arguments)}})(),{batchSize:y.PROCESS_KEY_BUNDLES}),o("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["ensureE2ESessions: "," wids: successfully established "," E2E sessions out of "," requested"])),t.length,k,t.length),L.length>0)throw L[0];C=S.length}}a.resolve()}catch(e){throw o("WALogger").WARN(p||(p=babelHelpers.taggedTemplateLiteralLoose(["ensureE2ESessions: "," wids: request failed: ",""])),t.length,e),a.resolve(e),o("WAWebAppTracker").AppTracker.stop(o("WAWebAppTracker").AppTrackerType.PreKeyProcessing),e}finally{l.forEach(function(e){h.delete(e)})}try{var I=(yield(g||(g=n("Promise"))).all(i)).find(Boolean);if(I)throw I}catch(e){throw o("WALogger").WARN(_||(_=babelHelpers.taggedTemplateLiteralLoose(["ensureE2ESessions: "," wids: deduped requests failed: ",""])),t.length,e),o("WAWebAppTracker").AppTracker.stop(o("WAWebAppTracker").AppTrackerType.PreKeyProcessing),e}finally{o("WAWebAppTracker").AppTracker.stop(o("WAWebAppTracker").AppTrackerType.PreKeyProcessing)}return o("WALogger").LOG(f||(f=babelHelpers.taggedTemplateLiteralLoose(["ensureE2ESessions: "," wids: "," existing sessions, "," requested, "," requests deduplicated"])),t.length,l.length-C,C,i.length),{missedPrekeyCount:C,depletedPrekeyCount:b}}),b.apply(this,arguments)}l.ensureE2ESessions=C}),98);
__d("WAWebMsgFanoutTypes",[],(function(t,n,r,o,a,i){var e=Object.freeze({CHAT:"chat",GROUP_DIRECT:"groupDirect"});i.FANOUT_TYPE=e}),66);
__d("WAWebPostE2eMessageSendMetric",["WAWebBackendJobsCommon","WAWebE2eMessageSendWamEvent","WAWebWamEnumAgentEngagementEnumType","WAWebWamEnumEditType","WAWebWamMsgUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=e.to,n=e.retryCount,r=e.type,a=e.msg,i=e.editType,l=i===void 0?o("WAWebWamEnumEditType").EDIT_TYPE.NOT_EDITED:i,s=new(o("WAWebE2eMessageSendWamEvent")).E2eMessageSendWamEvent({e2eCiphertextVersion:o("WAWebBackendJobsCommon").CIPHERTEXT_VERSION,isLid:t.isLid(),retryCount:n,editType:l,botType:o("WAWebWamMsgUtils").getWamBotType(t,a==null?void 0:a.bizBotType)}),u=o("WAWebBackendJobsCommon").getMetricE2eDestination(t);return u!=null&&(s.e2eDestination=u),r!=null&&(s.e2eCiphertextType=o("WAWebBackendJobsCommon").getMetricE2eCiphertextType(r)),a&&(s.messageMediaType=o("WAWebWamMsgUtils").getWamMediaType(a),t.isBot()&&(a.id.remote.isBot()?s.agentEngagementType=o("WAWebWamEnumAgentEngagementEnumType").AGENT_ENGAGEMENT_ENUM_TYPE.DIRECT_CHAT:s.agentEngagementType=o("WAWebWamEnumAgentEngagementEnumType").AGENT_ENGAGEMENT_ENUM_TYPE.INVOKED)),s}function s(t){var n=e(t);n.e2eSuccessful=!0,n.commit()}function u(t){var n=e(t);n.e2eSuccessful=!1,n.weight=1,n.commit()}l.postSuccessDirectE2eMessageSendMetric=s,l.postFailureDirectE2eMessageSendMetric=u}),98);
__d("WAWebRegistration",["Promise","WALogger","WAWebCryptoCurve25519","WAWebCryptoLibraryUtilsApi","WAWebSignalKeyApi","WAWebSignalStoreApi","WAWebUserPrefsInfoStore","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s;function u(){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield o("WAWebCryptoCurve25519").keyPair(),t=new Uint8Array(24);return self.crypto.getRandomValues(t),(s||(s=n("Promise"))).resolve(o("WAWebUserPrefsInfoStore").waNoiseInfo.set({recoveryToken:t.buffer,staticKeyPair:e,certificateChainBuffer:void 0}))}),c.apply(this,arguments)}function d(){return r("WAWebCryptoLibraryUtilsApi").makeRegistrationId()}function m(){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=d();yield o("WAWebSignalStoreApi").waSignalStore.clearCredential();var r=yield o("WAWebSignalKeyApi").generateIdentityKeyPair();try{yield(s||(s=n("Promise"))).all([o("WAWebSignalStoreApi").waSignalStore.setRegistrationInfo({registrationId:t,identityKeyPair:r}),o("WAWebSignalStoreApi").waSignalStore.rotateSignedPreKey(o("WAWebCryptoCurve25519").toSignalCurveKeyPair(r),o("WAWebSignalKeyApi").generateSignedKeyPair)])}catch(t){throw o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["failed to refreshSignalCredentials: ",""])),t),t}}),p.apply(this,arguments)}l.refreshNoiseCredentials=u,l.refreshSignalCredentials=m}),98);
__d("WAWebWorkerStorage",["WALogger","WAWeb-dexie","WAWebDbRolloutUtil","WAWebDexieBootstrap","WAWebDexieCastTypes","WAWebSchemaDeferredMessagesStorage","WAWebSchemaLocalStorage","WAWebStorage","WAWebWorkerStorageUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s;function u(){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){return o("WAWebDexieBootstrap").patchDexie(),s==null&&(yield o("WAWebDbRolloutUtil").loadSchemaVersions(),o("WAWebWorkerStorageUtils").createStorage(),o("WAWebSchemaLocalStorage").addTable(),o("WAWebSchemaDeferredMessagesStorage").addTable(),s=o("WAWebWorkerStorageUtils").getStorage().initialize().catch(function(t){var n="Unknown error";throw t instanceof o("WAWebStorage").AlreadyInitializedError||t instanceof o("WAWebStorage").NoSuchDatabaseError?n=t.toString():t instanceof r("WAWeb-dexie").DexieError&&(n="Unknown DexieError"),o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[worker] Failed to initialize model storage: ",""])),n).verbose().sendLogs("failed-to-initialize-model-storage",{sendLogsType:o("WALogger").SendLogsType.CRASH_OR_UNRECOVERABLE_ERROR_SAD}),t})),s}),c.apply(this,arguments)}function d(){return o("WAWebWorkerStorageUtils").destroyStorage().catch(function(){return o("WAWebDexieCastTypes").dexieCastToPromise(new(r("WAWeb-dexie"))(o("WAWebWorkerStorageUtils").DATABASE_NAME).delete())}).finally(function(){s=null})}l.getLocalStorageTable=o("WAWebSchemaLocalStorage").getTable,l.getDeferredMessagesTable=o("WAWebSchemaDeferredMessagesStorage").getTable,l.initialize=u,l.destroy=d}),98);
__d("WAWebLruMediaStorageUtils",["invariant","WAWebIdb","WAWebStorage","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l,s){var e="lru-media-storage-idb",u=null;function c(){var t=new(r("WAWebIdb"))(e);u=new(o("WAWebStorage")).Storage(t)}function d(){return u!=null||s(0,56300),u}function m(){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(u==null)throw r("err")("[lru-media-storage-idb] Storage should be created first before being destroyed");try{yield u.purge()}finally{u=null}}),p.apply(this,arguments)}c(),l.getStorage=d,l.destroyStorage=m}),98);
__d("WAWebUserPrefsClearLocalState",["Promise","WAWebLoggerImpl","WAWebPermanentStorage","WAWebTemporaryStorage","WAWebUserPrefsKeys","WAWebUserPrefsStore","WAWebUserPrefsTypes","asyncToGeneratorRuntime","gkx"],(function(t,n,r,o,a,i,l){var e;function s(){var e=r("WAWebUserPrefsStore").get(o("WAWebUserPrefsKeys").KEYS.PRESERVED_USER_KEYS,{storage:r("WAWebPermanentStorage")}),t=e instanceof Array?[].concat(o("WAWebUserPrefsTypes").LS_PRESERVE_KEYS,e.filter(function(e){return typeof e=="string"})):o("WAWebUserPrefsTypes").LS_PRESERVE_KEYS;return r("WAWebUserPrefsStore").getKeys(r("WAWebPermanentStorage"),t,!0)}function u(){return r("WAWebUserPrefsStore").getKeys(r("WAWebTemporaryStorage"),o("WAWebUserPrefsTypes").TS_PRESERVE_KEYS,!0)}function c(){r("WAWebTemporaryStorage").clear(u())}function d(){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=s(),a=[r("WAWebTemporaryStorage").clear(u()),r("WAWebPermanentStorage").clear(t)];r("gkx")("26258")&&a.push(o("WAWebLoggerImpl").Logger.clearLogs()),yield(e||(e=n("Promise"))).all(a)}),m.apply(this,arguments)}l.clearAllTemporaryStorageData=c,l.clearAllLocalState=d}),98);
__d("WAWebTasksTaskType",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({CANONICAL_ENT_TOKEN_REFRESH:"canonicalEntTokenRefresh",CLEAN_TC_TOKENS:"cleanTcTokens",LOG_DAILY_STATS:"logDailyStats",LOG_DB_ROW_COUNTS:"logDbRowCounts",ROTATE_KEY:"rotateKey",SYNC_AB_PROPS:"syncAbProps",SYNC_CONTACTS:"syncContacts",MONITOR_DB_STORAGE:"monitorDbStorage",REPORT_SYNCD_ACTION_STAT:"reportSyncdActionStat",LT_HASH_CHECK:"ltHashCheck",REQUEST_ALL_SYNCD_MISSING_KEYS:"requestAllSyncdMissingKeys",REPORT_SYNCD_KEY_STATS:"reportSyncdKeyStats",SYNCD_SYNC_ALL_COLLECTIONS:"syncdSyncAllCollections",CLEAN_ORPHAN_ADD_ONS:"cleanOrphanAddOns",CLEAN_PAST_PARTICIPANTS:"cleanPastParticipants",CLEAN_EXPIRED_UTM:"cleanExpiredUtm",SEND_NON_MESSAGE_DATA_REQUEST:"sendNonMessageDataRequest",LOG_HISTORY_SYNC_STATUS_AFTER_PAIRING:"logHistorySyncStatusAfterPairing",DELETE_NEWSLETTER_PREVIEW_CHATS:"deleteNewsletterPreviewChats",REPORT_DB_VERSIONS:"reportDbVersions",UPDATE_EXPIRED_TEXT_STATUS:"updateExpiredTextStatus",RESTART_RECENT_SYNC:"restartRecentSync",CLEANUP_REPORTING_TABLE:"cleanupReportingTable",CLEANUP_3PD_SIGNALS_TABLE:"cleanup3PDSignalsTable",FETCH_QUICK_PROMOTIONS:"fetchQuickPromotions",WAFFLE_SCHEDULED_TASKS:"waffleScheduledTasks",CLEAR_GALAXY_FLOWS_CACHE:"clearGalaxyFlowsCache",CLEAR_FALCO_BUFFER:"clearFalcoBuffer",SEND_WAM_FINGERPRINT:"sendWamFingerprint",INACTIVE_GROUP_LID_MIGRATION:"inactiveGroupLidMigration"});i.TaskType=e}),66);
__d("privateStatsUpload",["Promise","WABase64","WACryptoHmac","WALogger","WAPromiseRetryLoop","WATimeUtils","WAWamStorage","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h="https://dit.whatsapp.net/deidentified_telemetry",y="245118376424571|3e7d275052f1522bf3200afcf53841a7",C=0,b="WAMEventBuffer.dat",v=3,S=9,R=111e3,L=3067002,E=3067003,k=3067004;function I(e){return{result:e.result,httpResponseCode:e.httpResponseCode,uploadTime:o("WATimeUtils").monotonicTimeSince(e.uploadStartTime)}}function T(e,t,n,r){return D.apply(this,arguments)}function D(){return D=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r,a,i){if((yield o("WAWamStorage").privateStatsKillSwitchGetBlockedToken())===y)return o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Removing private stats buffer without submitting it (kill switch)"]))),o("WAWamStorage").removeBufferByKey(a.key).then(function(){t()});var l=o("WATimeUtils").monotonicTime(),d=yield i();if(d==null){o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Couldn't get token to submit a private stats buffer"]))),t();return}var m=new FormData;m.append("access_token",y);var p=yield o("WACryptoHmac").hmacSha256(d.sharedSecret,a.content),_=o("WABase64").encodeB64UrlSafe(d.token,!0),f=o("WABase64").encodeB64UrlSafe(p,!0),v=_+"+"+f;m.append("credential",v),m.append("message",new Blob([a.content],{type:"application/octet-stream"}),b),m.append("meta_data",JSON.stringify({t:o("WATimeUtils").unixTime(),p:C}));var S={method:"POST",body:m,"Content-Type":"multipart/form-data"},R;try{R=yield fetch(h,S)}catch(e){o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Upload of a private stats buffer failed: ",""])),e),r({uploadStartTime:l,result:"error-other"});return}var L=R.status,E=function(n){t({uploadStartTime:l,httpResponseCode:L,result:n})},k=function(t){r({uploadStartTime:l,httpResponseCode:L,result:t})};switch(L){case 200:return o("WAWamStorage").removeBufferByKey(a.key).then(function(){E("success")});case 429:E("error-server-other");return;case 401:return(g||(g=n("Promise"))).all([o("WAWamStorage").privateStatsKillSwitchSet(y),o("WAWamStorage").removeBufferByKey(a.key)]).then(function(){E("error-access-token")});case 400:{var I=yield x(R),T=I.result,D=I.shouldRetry,$={uploadStartTime:l,httpResponseCode:L,result:T};D==="retry"?r($):t($);return}case 500:k("error-server-other");return}o("WALogger").WARN(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Unsupported response status code from PrivateStats upload request: ",""])),L),k("error-other")}),D.apply(this,arguments)}function x(e){return $.apply(this,arguments)}function $(){return $=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield e.json().catch(function(){});if(typeof t!="object")return o("WALogger").WARN(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Unable to parse error response 400 from PrivateStats upload request or parsed response is not an object"]))),{result:"error-other",shouldRetry:"retry"};var n=t.error;if(typeof n!="object")return o("WALogger").WARN(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Incorrect or missing error entry in the error response 400 from PrivateStats upload request"]))),{result:"error-other",shouldRetry:"retry"};var r=n.code,a=n.error_subcode;if(typeof r!="number"||typeof a!="number")return o("WALogger").WARN(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Incorrect code or subcode in the error response 400 from PrivateStats upload request"]))),{result:"error-other",shouldRetry:"retry"};switch(r){case S:return{result:"error-server-other",shouldRetry:"no-retry"};case R:switch(a){case L:return{result:"error-parsing",shouldRetry:"retry"};case E:return{result:"error-decoding",shouldRetry:"retry"};case k:return{result:"error-credential",shouldRetry:"retry"};default:return o("WALogger").WARN(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Unsupported subcode value in the error response 400 from PrivateStats upload request: ",""])),a),{result:"error-other",shouldRetry:"retry"}}default:return o("WALogger").WARN(f||(f=babelHelpers.taggedTemplateLiteralLoose(["Unsupported code value in the error response 400 from PrivateStats upload request: ",""])),r),{result:"error-other",shouldRetry:"retry"}}}),$.apply(this,arguments)}function P(e,t){var r=e.map(function(e){var n=v,r=[],a=new(o("WAPromiseRetryLoop")).PromiseRetryLoop({name:"uploadPrivateStatsBuffer",timer:{algo:{type:"exponential",first:250},max:1e3},code:function(a){return T(a,function(e){var t=I(e);r.push(t),n<=0?a():n--},e,t)}});return a.start(),a.promise().then(function(t){if(t!=null){var n=I(t);r.push(n)}return{uploadedBufferKey:(t==null?void 0:t.result)==="success"?e.key:null,metrics:r}})});return(g||(g=n("Promise"))).all(r).then(function(e){var t=e.reduce(function(e,t){return e.push.apply(e,t.metrics),e},[]),n=e.reduce(function(e,t){return t.uploadedBufferKey!=null&&e.push(t.uploadedBufferKey),e},[]);return{uploadedBufferKeys:n,metrics:t}})}function N(e){return o("WAWamStorage").getFinishedStreamBuffers("private").then(function(t){return P(t,e)})}l.upload_UNSAFE_INTERNAL_DO_NOT_USE=P,l.uploadFinishedPrivateStatsBuffers=N}),98);
__d("WAWebUploadPrivateStatsBackend",["WABackoffUtils","WABase64","WALogger","WAPromiseDelays","WAPromiseLoop","WAWebIssuePrivateStatsToken","WAWebNetworkStatus","WAWebPsBufferUploadWamEvent","WAWebWamEnumApplicationState","WAWebWamEnumPsBufferUploadResult","asyncToGeneratorRuntime","privateStatsUpload"],(function(t,n,r,o,a,i,l){var e;function s(e,t){var r=new Uint8Array(o("WABase64").decodeB64(e));return d(t,(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var n=yield o("privateStatsUpload").upload_UNSAFE_INTERNAL_DO_NOT_USE([{key:t,content:r}],o("WAWebIssuePrivateStatsToken").getToken),a=n.metrics,i=n.uploadedBufferKeys;a.map(c),i.length===0&&e(t),e(void 0)});return function(t){return e.apply(this,arguments)}})())}function u(e){return e==="success"?o("WAWebWamEnumPsBufferUploadResult").PS_BUFFER_UPLOAD_RESULT.SUCCESS:e==="error-server-other"?o("WAWebWamEnumPsBufferUploadResult").PS_BUFFER_UPLOAD_RESULT.ERROR_SERVER_OTHER:e==="error-parsing"?o("WAWebWamEnumPsBufferUploadResult").PS_BUFFER_UPLOAD_RESULT.ERROR_PARSING:e==="error-decoding"?o("WAWebWamEnumPsBufferUploadResult").PS_BUFFER_UPLOAD_RESULT.ERROR_DECODING:e==="error-credential"?o("WAWebWamEnumPsBufferUploadResult").PS_BUFFER_UPLOAD_RESULT.ERROR_CREDENTIAL:e==="error-other"?o("WAWebWamEnumPsBufferUploadResult").PS_BUFFER_UPLOAD_RESULT.ERROR_OTHER:e==="error-access-token"?o("WAWebWamEnumPsBufferUploadResult").PS_BUFFER_UPLOAD_RESULT.ERROR_ACCESS_TOKEN:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+e)})()}function c(e){var t=e.httpResponseCode,n=e.result,r=e.uploadTime,a=u(n);new(o("WAWebPsBufferUploadWamEvent")).PsBufferUploadWamEvent({psBufferUploadResult:a,psBufferUploadT:r,psBufferUploadHttpResponseCode:t,applicationState:document.visibilityState==="visible"?o("WAWebWamEnumApplicationState").APPLICATION_STATE.FOREGROUND:o("WAWebWamEnumApplicationState").APPLICATION_STATE.BACKGROUND}).commit()}function d(t,a){return o("WAPromiseLoop").promiseLoop((function(){var i=n("asyncToGeneratorRuntime").asyncToGenerator(function*(n,i,l){var s=o("WAPromiseDelays").delayMs(o("WABackoffUtils").expBackoff(l,12e4,1e3,.1));try{return yield r("WAWebNetworkStatus").waitIfOffline(),yield a(n)}catch(r){return l>1?(o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[wam] sendLogs failure error: ",""])),String(r)),n(t)):s}});return function(e,t,n){return i.apply(this,arguments)}})())}l.default=s}),98);
__d("WAWebStatsUploadJob",["Promise","WALogger","WASmaxStatsSendBufferRPC","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u,c;function d(e,t){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["fieldStatsUpload:sendSendBufferRPC start"])));var a=yield o("WASmaxStatsSendBufferRPC").sendSendBufferRPC({addT:r,addElementValue:t});o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["fieldStatsUpload:sendSendBufferRPC end"])));var i;if(a.name==="SendBufferResponseSuccess")return o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["fieldStatsUpload:sendSendBufferRPC SendBufferResponseSuccess"]))),(c||(c=n("Promise"))).resolve();a.name==="SendBufferResponseErrorNoRetry"?i=a.value.errorSendBufferNoRetryError.value:(a.name,i=a.value.errorIQErrorServiceUnavailableMixin);var l=i,d=l.code,m=l.text;return{errorCode:parseInt(d,10),errorText:m}}),m.apply(this,arguments)}l.default=d}),98);
__d("WAWebUploadStatsBackend",["WABackoffUtils","WABase64","WALogger","WAPromiseDelays","WAPromiseLoop","WAPromiseTimeout","WATimeUtils","WAWebBackendErrors","WAWebNetworkStatus","WAWebStatsUploadJob","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e;function s(e,t){var a=new Uint8Array(o("WABase64").decodeB64(e)),i=o("WATimeUtils").unixTime();return u(t,(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var n=yield r("WAWebStatsUploadJob")(a,i);if(n!=null&&n.errorCode){if(n.errorCode>=500)throw new(o("WAWebBackendErrors")).ServerStatusCodeError(n.errorCode,n.errorText);e(t)}e(void 0)});return function(t){return e.apply(this,arguments)}})())}function u(t,r){return o("WAPromiseLoop").promiseLoop((function(){var a=n("asyncToGeneratorRuntime").asyncToGenerator(function*(n,a,i){try{return yield m(),yield r(n)}catch(r){return i>1?(o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[wam] sendLogs failure error: ",""])),String(r)),n(t)):c(i)}});return function(e,t,n){return a.apply(this,arguments)}})())}function c(e){return o("WAPromiseDelays").delayMs(o("WABackoffUtils").expBackoff(e,12e4,1e3,.1))}var d=30;function m(){return o("WAPromiseTimeout").promiseTimeout(r("WAWebNetworkStatus").waitIfOffline(),d*1e3,"wamUploadWaitForOnline")}l.default=s}),98);
__d("WAWebUserPrefsTabMutex",["WANullthrows","WAWebLocalStorage","WAWebPermanentStorage","WAWebUserPrefsKeys","WAWebUserPrefsStore"],(function(t,n,r,o,a,i,l){var e="x"+Math.round(Math.random()*1e9);function s(){return r("WAWebUserPrefsStore").getPSIgnoringCache(o("WAWebUserPrefsKeys").KEYS.WHATSAPP_MUTEX)}function u(t){var n=t&&e+":"+t;r("WAWebUserPrefsStore").set(o("WAWebUserPrefsKeys").KEYS.WHATSAPP_MUTEX,n,{storage:r("WAWebPermanentStorage")})}function c(){r("WAWebUserPrefsStore").set(o("WAWebUserPrefsKeys").KEYS.WHATSAPP_MUTEX,null,{storage:r("WAWebPermanentStorage")})}function d(e){var t=e?JSON.parse(e):"";return t&&t.toString().split(/:/).pop()}function m(t){if(t.key!==o("WAWebUserPrefsKeys").KEYS.WHATSAPP_MUTEX)return!1;var n=t.newValue||"";return!n.includes(e)}function p(){return(s()||"").includes(e)}function _(){var t={wa_tab_src:e};r("WANullthrows")(r("WAWebLocalStorage")).setItem(o("WAWebUserPrefsKeys").KEYS.LOCAL_TAKEOVER_OK,JSON.stringify(t)),r("WANullthrows")(r("WAWebLocalStorage")).removeItem(o("WAWebUserPrefsKeys").KEYS.LOCAL_TAKEOVER_OK)}function f(t){if(t.key!==o("WAWebUserPrefsKeys").KEYS.LOCAL_TAKEOVER_OK)return!1;var n=t.newValue||"";return!n.includes(e)}function g(e){r("WAWebUserPrefsStore").setTS(o("WAWebUserPrefsKeys").KEYS.NO_TAKEOVER,e)}function h(){return!!r("WAWebUserPrefsStore").getTS(o("WAWebUserPrefsKeys").KEYS.NO_TAKEOVER)}l.THIS_TAB=e,l.getMutex=s,l.setMutex=u,l.removeMutex=c,l.parseMutex=d,l.mutexFilter=m,l.currentTabHasMutex=p,l.localTakeoverSuccess=_,l.takeoverFilter=f,l.setNoTakeover=g,l.getNoTakeover=h}),98);
__d("WAWebWamClientErrorsWamEvent",["WAWebWamCodegenUtils"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({WamClientErrors:[1144,{isFromWamsys:[27,e.TYPES.BOOLEAN],wamClientBufferDropErrorCount:[28,e.TYPES.INTEGER],wamClientBufferFetchErrorCount:[29,e.TYPES.INTEGER],wamClientBufferRotateErrorCount:[43,e.TYPES.INTEGER],wamClientBufferStoreErrorCount:[30,e.TYPES.INTEGER],wamClientCorruptedBuffersCount:[42,e.TYPES.INTEGER],wamClientDroppedEventCount:[2,e.TYPES.INTEGER],wamClientDroppedEventCountNoEnoughStorage:[41,e.TYPES.INTEGER],wamClientDroppedEventSize:[3,e.TYPES.INTEGER],wamClientErrorFlags:[1,e.TYPES.BOOLEAN],wamClientMetadataReadErrorCount:[37,e.TYPES.INTEGER],wamClientMetadataWriteErrorCount:[38,e.TYPES.INTEGER],wamClientPrivateDroppedEventCount:[24,e.TYPES.INTEGER],wamClientPrivateDroppedEventSize:[25,e.TYPES.INTEGER],wamClientPrivateRealtimeDroppedEventCount:[34,e.TYPES.INTEGER],wamClientPrivateRealtimeDroppedEventSize:[35,e.TYPES.INTEGER],wamClientPrivateRealtimeRejectedEventCount:[36,e.TYPES.INTEGER],wamClientPrivateRejectedEventCount:[31,e.TYPES.INTEGER],wamClientRealtimeDroppedEventCount:[22,e.TYPES.INTEGER],wamClientRealtimeDroppedEventSize:[23,e.TYPES.INTEGER],wamClientRealtimeRejectedEventCount:[32,e.TYPES.INTEGER],wamClientRejectedEventCount:[33,e.TYPES.INTEGER],wamErrorBadCurrentEventBufferChecksum:[18,e.TYPES.BOOLEAN],wamErrorBadEventBuffer:[16,e.TYPES.BOOLEAN],wamErrorBadFileHeader:[15,e.TYPES.BOOLEAN],wamErrorBadFileSize:[8,e.TYPES.BOOLEAN],wamErrorBadHeaderChecksum:[17,e.TYPES.BOOLEAN],wamErrorBadRotatedEventBufferChecksum:[19,e.TYPES.BOOLEAN],wamErrorCloseFile:[11,e.TYPES.BOOLEAN],wamErrorCreateWamFile:[14,e.TYPES.BOOLEAN],wamErrorFseekFile:[9,e.TYPES.BOOLEAN],wamErrorOpenFile:[10,e.TYPES.BOOLEAN],wamErrorOpenPsUploadQueueFile:[26,e.TYPES.BOOLEAN],wamErrorOpenWamFile:[13,e.TYPES.BOOLEAN],wamErrorPersistence:[20,e.TYPES.BOOLEAN],wamErrorReadFile:[7,e.TYPES.BOOLEAN],wamErrorRemoveFile:[12,e.TYPES.BOOLEAN],wamErrorWriteEventBuffer:[6,e.TYPES.BOOLEAN],wamErrorWriteFile:[4,e.TYPES.BOOLEAN],wamErrorWriteHeader:[5,e.TYPES.BOOLEAN],wamFirstErrorReadMetadata:[39,e.TYPES.BOOLEAN],wamFirstErrorWriteMetadata:[40,e.TYPES.BOOLEAN]},[1,1,1],"regular"]},{WamClientErrors:[]});l.WamClientErrorsWamEvent=s}),98);
__d("WAWebWamEnumFormatter",[],(function(t,n,r,o,a,i){function e(e,t){if(t==null||typeof t!="object"||!("$enumMappings"in t))return e;var n={};for(var r in e){var o=e[r];if(n[r]=o,typeof o=="number"){var a=t.$enumMappings;if(a!=null&&typeof a=="object"){var i=a[r];if(i!=null&&typeof i=="object"){var l=i[String(o)];typeof l=="string"&&(n[r]=String(o)+" ("+l+")")}}}}return n}i.formatWamEventForLogging=e}),66);
__d("WAWebWamPrivateStats",["Promise","WALogger","WARandomHex","WAResolvable","WATimeUtils","WAWebWamEnumPsIdAction","WAWebWamGlobals","WAWebWamStorage","WAWebWamUtils","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){var e,s,u,c={},d={},m={};o("WAWebWamGlobals").PrivateStatsAllIds.map(function(e){c[e.keyHashInt]=e.key,d[e.key]=e.keyHashInt,m[e.key]={value:e.keyHashInt,rotationPeriodDays:e.rotationPeriodDays}}),c[0]="none",d.none=0,m.none={value:"none",rotationPeriodDays:-1};var p=null;function _(){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(p!=null)return p.promise;var e=new(o("WAResolvable")).Resolvable;p=e;var t=[],n=yield r("WAWebWamStorage").getPsMeta(),a=new Set;n.map(function(e){a.add(e.key),m[e.key]===void 0?t.push(e.key):m[e.key].value=e.value});var i=Object.keys(m).filter(function(e){return!a.has(e)}).map(function(e){return e!=="none"&&(m[e].value=o("WARandomHex").randomHex(16)),{key:e,value:m[e].value,rotateInDays:m[e].rotationPeriodDays,creationTs:o("WATimeUtils").unixTime()}});yield r("WAWebWamStorage").addPsMeta(i),yield r("WAWebWamStorage").removePsMeta(t),i.map(function(e){return o("WAWebWamUtils").logPsIdUpdate(o("WAWebWamEnumPsIdAction").PS_ID_ACTION.CREATED,d[e.key],e.rotateInDays)}),t.map(function(e){return o("WAWebWamUtils").logPsIdUpdate(o("WAWebWamEnumPsIdAction").PS_ID_ACTION.DELETED,d[e],m[e].rotationPeriodDays)}),e.resolve()}),f.apply(this,arguments)}function g(){var e=new Map;return o("WAWebWamGlobals").PrivateStatsAllIds.forEach(function(t){e.set(t.keyHashInt,String(m[t.key].value))}),e}function h(e){if(p==null)throw r("err")("can't call getPrivateStatsKeyFromInt without initializing");return c[e]}function y(e){if(e==="regular")throw r("err")("tried to get psId for regular channel event");if(p==null)throw r("err")("can't call getLatestPrivateStatsIdValueFromKey without initializing");return m[e].value}function C(){return b.apply(this,arguments)}function b(){return b=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=[];if(p==null)throw r("err")("can't call maybeRotatePsIds without initializing");try{yield p.promise;var a=yield r("WAWebWamStorage").getPsMeta();yield(u||(u=n("Promise"))).all(a.map((function(){var r=n("asyncToGeneratorRuntime").asyncToGenerator(function*(n){try{var r=n.creationTs,a=n.key,i=n.rotateInDays;R(r,i)&&(t.push(a),yield v(a))}catch(t){o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["error while rotating PS id for key ",""])),n.key)}});return function(e){return r.apply(this,arguments)}})()))}catch(e){o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["error while rotating PS ids ",""])),e)}return t}),b.apply(this,arguments)}function v(e){return S.apply(this,arguments)}function S(){return S=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=o("WARandomHex").randomHex(16);m[e].value=t,yield r("WAWebWamStorage").updatePsMeta({key:e,rotateInDays:m[e].rotationPeriodDays,value:t,creationTs:o("WATimeUtils").unixTime()}),o("WAWebWamUtils").logPsIdUpdate(o("WAWebWamEnumPsIdAction").PS_ID_ACTION.ROTATED,d[e],m[e].rotationPeriodDays)}),S.apply(this,arguments)}function R(e,t){if(t===-1||e==null)return!1;var n=t*o("WATimeUtils").DAY_SECONDS,r=Math.floor(o("WATimeUtils").unixTime()/n)*n;return e<r}l.initPrivateStats=_,l.getPrivateStatsIdsForCoreWam=g,l.getPrivateStatsKeyFromInt=h,l.getLatestPrivateStatsIdValueFromKey=y,l.maybeRotatePsIds=C}),98);
__d("WAWebWamInterop",["Promise","WACustomError","WATimeUtils","WAWamStorage","WAWebUserPrefsGeneral","WAWebWamPrivateStats","WAWebWamStorage","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s=function(r,a){return(e||(e=n("Promise"))).reject(new(o("WACustomError")).UnimplementedMethod("saveBuffer not implemented yet"))},u=function(r){return(e||(e=n("Promise"))).resolve()},c=function(r){return(e||(e=n("Promise"))).reject(new(o("WACustomError")).UnimplementedMethod("getStartingSequenceRow not implemented yet"))},d=function(){return(e||(e=n("Promise"))).reject(new(o("WACustomError")).UnimplementedMethod("getBuffers not implemented yet"))},m=function(){return(e||(e=n("Promise"))).reject(new(o("WACustomError")).UnimplementedMethod("nukeMetrics not implemented yet"))},p=function(r){return(e||(e=n("Promise"))).reject(new(o("WACustomError")).UnimplementedMethod("finishBuffer not implemented yet"))},_=function(){return(e||(e=n("Promise"))).reject(new(o("WACustomError")).UnimplementedMethod("updatePrivateStatsIds not implemented yet"))},f=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var o=yield r("WAWebWamStorage").getPsToken();return o?t({redeemCount:o.redeemCount,creationTs:o.creationTs},{maxExpirySeconds:86400})?r("WAWebWamStorage").savePsToken(babelHelpers.extends({},o,{redeemCount:o.redeemCount+1})).then(function(){return o.token}):(e||(e=n("Promise"))).resolve(null):null});return function(n){return t.apply(this,arguments)}})();function g(e){return r("WAWebWamStorage").savePsToken({key:"token",token:e,creationTs:o("WATimeUtils").unixTime(),redeemCount:1})}function h(){return(e||(e=n("Promise"))).resolve(o("WAWebUserPrefsGeneral").getPsKillSwitchToken())}function y(t){return o("WAWebUserPrefsGeneral").setPsKillSwitchToken(t),(e||(e=n("Promise"))).resolve()}var C={getStreamId:function(){return 1},saveBuffer:s,finishBuffer:p,getStartingSequenceRow:c,getBuffers:d,removeBufferByKey:u,nukeMetrics:m,updatePrivateStatsIds:_,redeemPrivateStatsToken:f,savePrivateStatsToken:g,privateStatsKillSwitchGetBlockedToken:h,privateStatsKillSwitchSet:y};function b(){o("WAWamStorage").startWamStorage(C)}l.startWamStore=b}),98);
__d("WAWebWamBeaconing",["WATimeUtils","WAWebUserPrefsGeneral"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("WAWebUserPrefsGeneral").getWamBeaconingSettings(),n=t.find(function(t){return t.key===e}),r=null;if(n==null||s(n.ts)){var a=o("WATimeUtils").unixTime(),i=Math.random()<=.01,l={key:e,ts:a,value:i?1:null};n==null?t.push(l):(n.value=l.value,n.ts=a),r=l.value}else{if(n.value==null)return null;r=++n.value}return o("WAWebUserPrefsGeneral").setWamBeaconingSettings(t),r}function s(e){var t=Math.floor(o("WATimeUtils").unixTime()/o("WATimeUtils").DAY_SECONDS),n=Math.floor(e/o("WATimeUtils").DAY_SECONDS);return t!==n}l.maybeGetEventSequenceNumber=e}),98);
__d("WAWebWamLibProtocol",["WABinary"],(function(t,n,r,o,a,i,l){var e=8,s=0,u=1,c=2,d=4;function m(e,t,n){return f(e,t,n,s)}function p(e,t,n,r){var o=r?u:u|d;return f(e,t,n,o)}function _(e,t,n,r){var o=r?c:c|d;return f(e,t,n,o)}function f(e,t,n,r){if(n==null)r===s&&g(e,t,r);else if(typeof n=="number"&&n===(n|0))n===0?g(e,t,r|16):n===1?g(e,t,r|32):-128<=n&&n<128?(g(e,t,r|48),e.writeInt8(n)):-32768<=n&&n<32768?(g(e,t,r|64),e.writeInt16(n)):(g(e,t,r|80),e.writeInt32(n));else if(typeof n=="number")g(e,t,r|112),e.writeFloat64(n);else if(typeof n=="string"){var a=o("WABinary").numUtf8Bytes(n);a<256?(g(e,t,r|128),e.writeUint8(a)):a<65536?(g(e,t,r|144),e.writeUint16(a)):(g(e,t,r|160),e.writeUint32(a)),e.writeString(n)}}function g(t,n,r){n<256?(t.writeUint8(r),t.writeUint8(n)):(t.writeUint8(r|e),t.writeUint16(n))}l.writeGlobalAttribute=m,l.writeEvent=p,l.writeField=_}),98);
__d("WAWebWamLibContext",["WABase64","WABinary","WALogger","WAWebEventSampling","WAWebWamBeaconing","WAWebWamCodegenUtils","WAWebWamConstants","WAWebWamLibProtocol","WAWebWamPrivateStats"],(function(t,n,r,o,a,i,l){var e,s=47,u=3433,c=6005,d=0,m=1,p=2,_=2147483647,f=(function(){function t(e,t,n){this.bufferKey=e,this.buffer=new(o("WABinary")).Binary(void 0,!0),this.buffer.writeString("WAM"),this.buffer.writeUint8(o("WAWebWamConstants").WAM_PROTOCOL_VERSION),this.buffer.writeUint8(1),this.buffer.writeUint16(t),this.bufferKey==="regular"?this.buffer.writeUint8(d):this.bufferKey==="realtime"?this.buffer.writeUint8(m):this.buffer.writeUint8(p),this.eventsWritten=0,this.prevGlobals={},this.dirtyGlobals={},this.unsavedPortion=null,this.saveKey=String(Math.random()*1e9|0),this.$1(n)}var n=t.prototype;return n.size=function(){return this.buffer.size()},n.set=function(t,n){this.dirtyGlobals[String(t)]=n,this.unsavedPortion&&this.unsavedPortion.set(t,n)},n.write=function(n){var t,r=this.buffer;this.set(s,n.commitTime);var a=o("WAWebWamBeaconing").maybeGetEventSequenceNumber(this.bufferKey);a!=null&&this.set(u,a),n.wamChannel==="private"&&this.set(c,o("WAWebWamPrivateStats").getLatestPrivateStatsIdValueFromKey(this.bufferKey).toString()),this.$2();for(var i=n.all,l=Object.keys(i),d=-1,m=!1,p=0;p<l.length;p++){var f=i[l[p]];f!=null&&(d=p,m=!0)}var g=(t=o("WAWebEventSampling").getClientEventSamplingWeight(n.id))!=null?t:n.weight;o("WAWebWamLibProtocol").writeEvent(r,n.id,-g,m);for(var h=0;h<=d;h++){var y=l[h],C=o("WAWebWamCodegenUtils").metrics.getEvent(n.$className,y),b=C.id,v=C.type,S=i[y];if(S!=null){if(typeof S=="boolean"&&(S=S?1:0),m=h<d,v==="timer"&&S>_){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[wam] invalid value for timer field ",".",""])),n.$className,y).sendLogs("wam-event-validation-error");continue}o("WAWebWamLibProtocol").writeField(r,b,S,m)}}this.eventsWritten++,this.unsavedPortion&&this.unsavedPortion.write(n)},n.stringBuffer=function(){return this.eventsWritten>0?o("WABase64").encodeB64(this.buffer.peek(function(e){return e.readByteArrayView()})):""},n.getBuffer=function(){return this.buffer},n.$1=function(t){var e=(function(e){return e==="regular"||e==="realtime"?"regular":"private"})(this.bufferKey);for(var n in t){var r=t[n],a=o("WAWebWamCodegenUtils").metrics.getGlobal(n),i=a.channels.includes(e);r!==void 0&&i&&this.set(o("WAWebWamCodegenUtils").metrics.getGlobal(n).id,r)}},n.$2=function(){var e=this.dirtyGlobals,t=this.prevGlobals;for(var n in e){var r=e[n];if(typeof r=="boolean")r=r?1:0;else if(r===void 0)r=null;else if(Number.isNaN(r))continue;if(r!==t[n]||n===String(s)||n===String(c)){t[n]=r;var a=parseInt(n,10);o("WAWebWamLibProtocol").writeGlobalAttribute(this.buffer,a,r)}}this.dirtyGlobals={}},t})();l.WamContext=f}),98);
__d("WAWebWam",["Promise","SiteData","WALogger","WANullthrows","WAResolvable","WAShiftTimer","WATimeUtils","WAWebABProps","WAWebABPropsLocalStorage","WAWebBrowserApi","WAWebBuildConstants","WAWebCrashlog","WAWebEnvironment","WAWebEventSampling","WAWebGuestWamUtils","WAWebIsOfficialClient","WAWebMiscBrowserUtils","WAWebUploadPrivateStatsBackend","WAWebUploadStatsBackend","WAWebUserPrefsIsLoggedIn","WAWebUserPrefsTabMutex","WAWebWamClientErrorsWamEvent","WAWebWamConstants","WAWebWamEnumDeviceClassification","WAWebWamEnumPlatformType","WAWebWamEnumWebcWebPlatformType","WAWebWamGlobals","WAWebWamInterop","WAWebWamLibContext","WAWebWamPlatform","WAWebWamPrivateStats","WAWebWamRuntimeProvider","WAWebWamStorage","WAWebWamUtils","asyncToGeneratorRuntime","gkx","isStringNullOrEmpty","justknobx"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g,h,y,C=[],b=[],v=!1,S="1",R={commit:E(w),set:E(F),resumeJobs:E(U),initialize:E(O)};function L(){for(C=o("WAWebWamGlobals").PrivateStatsAllIds.map(function(e){return e.key}),o("WAWebWamPrivateStats").initPrivateStats().catch(function(t){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[WAM] failed to initialise private stats for wam runtime "])))}),o("WAWebWamInterop").startWamStore(),y=new(o("WAShiftTimer")).ShiftTimer(function(e){var t=!r("WAWebEnvironment").isGuest&&!o("WAWebUserPrefsTabMutex").currentTabHasMutex();if(t){o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[wam] bg tab, skipping WAM processing"])));return}V(e).catch(function(e){o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[WAM] failed to execute pending jobs for wam runtime "])))})}),o("WAWebWamRuntimeProvider").setWamRuntime(R);b.length;){var t=b.pop();t&&t()}v=!0}function E(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(v)return e.apply(void 0,n);b.push(function(){e.apply(void 0,n)})}}var k={},I=0,T=[],D=!1,x=!1,$=null,P=new(o("WAResolvable")).Resolvable,N=!1,M=!1;function w(e,t){var a;if(t===void 0&&(t=!1),e.commitTime!=null&&e.commitTime!==0)return o("WALogger").WARN(c||(c=babelHelpers.taggedTemplateLiteralLoose(["wam:commit redundant commit! ",""])),e.$className),(h||(h=n("Promise"))).resolve();e.wamChannel;var i=(a=o("WAWebEventSampling").getClientEventSamplingWeight(e.id))!=null?a:e.weight;if(i!==0&&Math.random()*i>1)return e.commitTime=o("WATimeUtils").unixTimeWithoutClockSkewCorrection(),(h||(h=n("Promise"))).resolve();A(e),o("WAWebWamUtils").maybeForwardWamEventToJestE2e(e);var l;return e.wamChannel==="realtime"?l=r("justknobx")._("4680")?"realtime":"all":r("WAWebEnvironment").isGuest||t?l="all":l="none",W({job:e,flushWamBuffers:l})}function A(e,t){e.commitTime=t!=null?t:o("WATimeUtils").unixTimeWithoutClockSkewCorrection()}function F(e,t){return o("WAWebWamUtils").maybeForwardWamAttributeToJestE2e(e.name,String(t)),W({job:[e,t],flushWamBuffers:"none"})}function O(){return B.apply(this,arguments)}function B(){return B=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e;if($)return(h||(h=n("Promise"))).resolve($);var t=r("WAWebMiscBrowserUtils").info(),a=babelHelpers.extends({appVersion:o("WAWebBuildConstants").VERSION_BASE_WITH_WINDOWS_BUILD,appBuild:o("WAWebWamUtils").getAppBuild(),platform:o("WAWebWamEnumPlatformType").PLATFORM_TYPE.WEBCLIENT,webcWebArch:ie(),appIsBetaRelease:yield o("WAWebWamUtils").getAppIsBetaRelease(),browser:t.name||null,browserVersion:t.ua||null,deviceName:t.os||null,deviceVersion:t.version||null,memClass:o("WAWebBrowserApi").getMemClass(),numCpu:o("WAWebBrowserApi").getNumCpu(),webcEnv:o("WAWebWamUtils").getWamEnv(),webcTabId:o("WAWebUserPrefsTabMutex").THIS_TAB,webcWebPlatform:o("WAWebWamEnumWebcWebPlatformType").WEBC_WEB_PLATFORM_TYPE[o("WAWebWamPlatform").getWamPlatform()],ocVersion:o("WAWebIsOfficialClient").isOfficialClient?1:0,deviceClassification:o("WAWebWamEnumDeviceClassification").DEVICE_CLASSIFICATION.DESKTOP,webcRevision:r("SiteData").client_revision,abKey2:o("WAWebABProps").getABPropConfigValue("wam_disable_abkey_attribute")?null:(e=o("WAWebABPropsLocalStorage").getABKey())!=null?e:""},r("WAWebEnvironment").isGuest?o("WAWebGuestWamUtils").getGuestWamOverrides():{});return $=a,o("WAWebWamGlobals").Global.commitOnSet=!1,o("WAWebWamGlobals").Global.set($),o("WAWebWamGlobals").Global.commitOnSet=!0,Object.keys(a).forEach(function(e){return o("WAWebWamUtils").maybeForwardWamAttributeToJestE2e(e,String(a[e]))}),a}),B.apply(this,arguments)}function W(e){var t=e.flushWamBuffers,n=e.job;return T.push(n),D?t!=="none"?(N=!1,M=!0,self.setTimeout(function(){return y.forceRunNow(t)},1)):y.onOrBefore(o("WAWebWamUtils").getInMemoryBufferingDurationInSecs()*1e3):t==="realtime"&&r("justknobx")._("3237")?self.setTimeout(function(){return y.forceRunNow("realtime")},1):t!=="none"&&(y.cancel(),N=!0,M=!1),P.promise}function q(){D=!1,y.cancel();var e=P;return P=new(o("WAResolvable")).Resolvable,e}function U(){D=!0,M=!1,T.length>0&&y.onOrBefore(o("WAWebWamUtils").getInMemoryBufferingDurationInSecs()*1e3),N&&(N=!1,M=!0,y.forceRunNow())}function V(e){return H.apply(this,arguments)}function H(){return H=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=M,a=!(e==="realtime"&&r("justknobx")._("3237")),i=a?q():null,l,s;if(e==="realtime"){l=["realtime"];var u=T.reduce(function(e,t){var n=e[0],r=e[1];return!Array.isArray(t)&&t.wamChannel==="realtime"?n.push(t):r.push(t),[n,r]},[[],[]]);s=u[0],T=u[1]}else l=["regular","realtime","none"].concat(C),s=[].concat(T),T=[];try{var c=yield O();if(e!=="realtime"){var d=yield o("WAWebWamPrivateStats").maybeRotatePsIds();yield(h||(h=n("Promise"))).all(d.map(function(e){return G(e,c)}))}yield(h||(h=n("Promise"))).all(l.map(function(e){return Y(e,s,t,c)}))}finally{a&&(i==null||i.resolve(),U())}}),H.apply(this,arguments)}function G(e,t){return z.apply(this,arguments)}function z(){return z=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){return yield Z(e,t),k[e]=yield j(e,t),k[e]}),z.apply(this,arguments)}function j(e,t){return K.apply(this,arguments)}function K(){return K=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){return new(o("WAWebWamLibContext")).WamContext(e,yield r("WAWebWamStorage").getNextSequenceNumberForStream(S),t)}),K.apply(this,arguments)}function Q(e,t){return X.apply(this,arguments)}function X(){return X=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n,r=(n=k[e])!=null?n:yield j(e,t);return k[e]=r,r}),X.apply(this,arguments)}function Y(e,t,n,r){return J.apply(this,arguments)}function J(){return J=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r){var a=o("WAWebWamUtils").getChannelFromBufferKey(e),i;try{i=yield Q(e,r)}catch(e){o("WALogger").WARN(d||(d=babelHelpers.taggedTemplateLiteralLoose(["[wam] _executePendingForContext failed to get context ",""])),String(e!=null&&e.stack?e.stack:e));return}try{for(var l=0;l<t.length;l++){if(i.size()>o("WAWebWamConstants").WAM_MAX_BUFFER_SIZE){var s=yield G(e,r);if(s==null)break;i=s}var u=t[l];if(Array.isArray(u)){var p=u[0],_=u[1],f=a==="realtime"?"regular":a;p.channels.includes(f)&&(r[p.name]=_,i.set(p.id,_))}else{var c=u;((c.wamChannel==="regular"||c.wamChannel==="realtime")&&c.wamChannel===a||c.wamChannel==="private"&&e===o("WAWebWamPrivateStats").getPrivateStatsKeyFromInt(c.privateStatsIdInt))&&i.write(c)}}var g=o("WATimeUtils").unixTimeWithoutClockSkewCorrection();if(i.eventsWritten>0&&(n||i.size()>o("WAWebWamConstants").WAM_MAX_BUFFER_SIZE||g>=I+o("WAWebWamUtils").getBufferRotateIntervalInSecs()||!x)){var h=o("WAWebUserPrefsIsLoggedIn").isLoggedIn();if(!h){i.buffer.size()>o("WAWebWamConstants").WAM_MAX_BUFFER_SIZE?k[e]=null:yield Z(e,r);return}yield te(e)}else yield Z(e,r)}catch(t){o("WALogger").WARN(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[wam] _executePending error ",""])),String(t!=null&&t.stack?t.stack:t)),o("WAWebCrashlog").upload({reason:"wam-error"}),new(o("WAWebWamClientErrorsWamEvent")).WamClientErrorsWamEvent({wamClientBufferDropErrorCount:1}).commit(),k[e]=null}}),J.apply(this,arguments)}function Z(e,t){return ee.apply(this,arguments)}function ee(){return ee=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){if(k[e]){var n=k[e].stringBuffer();if(n){var a=r("WANullthrows")(k[e]).unsavedPortion;if(!(a&&a.eventsWritten===0)){var i=r("WANullthrows")(k[e]).saveKey;try{if(a){var l=yield r("WAWebWamStorage").update(i,e,n);if(!k[e])return;if(l)r("WANullthrows")(k[e]).unsavedPortion=yield j(e,t);else{k[e]=k[e].unsavedPortion,yield Z(e,t);return}}else{if(yield r("WAWebWamStorage").add(i,e,n),!k[e])return;r("WANullthrows")(k[e]).unsavedPortion=yield j(e,t)}}catch(e){o("WALogger").WARN(p||(p=babelHelpers.taggedTemplateLiteralLoose(["[wam] save WamStorage failed to save ",""])),String(e))}}}}}),ee.apply(this,arguments)}function te(e){return ne.apply(this,arguments)}function ne(){return ne=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t;try{t=yield r("WAWebWamStorage").deleteAll(e)}catch(e){t={},o("WALogger").WARN(_||(_=babelHelpers.taggedTemplateLiteralLoose(["[wam] sendAllLogs failed to read because ",""])),String(e))}var a=t;if(k[e]){k[e].unsavedPortion&&!(k[e].saveKey in a)&&(k[e]=k[e].unsavedPortion);var i=r("WANullthrows")(k[e]).saveKey;a[i]=r("WANullthrows")(k[e]).stringBuffer()}var l=yield(h||(h=n("Promise"))).all(Object.entries(a).map(function(t){var n=t[0],r=t[1];return re(r,n,o("WAWebWamUtils").getChannelFromBufferKey(e))})),s=l.filter(Boolean);if(s.length!==l.length&&(I=o("WATimeUtils").unixTimeWithoutClockSkewCorrection(),x=!0),k[e]&&!s.includes(k[e].saveKey)&&(k[e]=null),s.length!==0){var u=s.reduce(function(e,t){return e+a[t].length},0);u<o("WAWebWamConstants").WAM_MAX_BUFFER_SIZE?yield(h||(h=n("Promise"))).all(s.map((function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){try{yield r("WAWebWamStorage").add(t,e,a[t])}catch(e){o("WALogger").WARN(f||(f=babelHelpers.taggedTemplateLiteralLoose(["sendAllLogs: adding to WamStorage failed"])))}});return function(e){return t.apply(this,arguments)}})())):(k[e]=null,new(o("WAWebWamClientErrorsWamEvent")).WamClientErrorsWamEvent({wamClientBufferDropErrorCount:1}).commit(),o("WALogger").WARN(g||(g=babelHelpers.taggedTemplateLiteralLoose(["wam dropped "," buffers! ("," bytes)"])),s.length,u))}}),ne.apply(this,arguments)}function re(e,t,n){return oe.apply(this,arguments)}function oe(){return oe=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,a){return e===""||e[0]==="["?(h||(h=n("Promise"))).resolve():o("WAWebWamUtils").isWamBufferTooBigToUpload(e)?(new(o("WAWebWamClientErrorsWamEvent")).WamClientErrorsWamEvent({wamClientBufferDropErrorCount:1}).commit(),(h||(h=n("Promise"))).resolve()):a==="private"?r("WAWebUploadPrivateStatsBackend")(e,t):r("WAWebUploadStatsBackend")(e,t)}),oe.apply(this,arguments)}var ae=new Map([["sandcastle","dev"],["trunkstable","C1"]]);function ie(){var e=r("gkx")("26256");if(e)return"jest-e2e";if(!r("isStringNullOrEmpty")(o("WAWebBuildConstants").PUSH_PHASE)){var t;return(t=ae.get(o("WAWebBuildConstants").PUSH_PHASE))!=null?t:o("WAWebBuildConstants").PUSH_PHASE}}l.Wam=R,l.initWamRuntime=L,l.sendAllLogs=te}),98);
__d("fbjs/lib/emptyFunction",["emptyFunction"],(function(t,n,r,o,a,i){"use strict";a.exports=n("emptyFunction")}),null);
__d("fbjs/lib/warning",["warning"],(function(t,n,r,o,a,i){"use strict";a.exports=n("warning")}),null);
__d("prop-types/lib/ReactPropTypesSecret",[],(function(t,n,r,o,a,i){"use strict";var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";a.exports=e}),null);
__d("prop-types/checkPropTypes",["fbjs/lib/invariant","fbjs/lib/warning","prop-types/lib/ReactPropTypesSecret"],(function(t,n,r,o,a,i){"use strict";var e;function l(e,t,n,r,o){}a.exports=l}),null);
__d("prop-types/prop-types",["fbjs/lib/emptyFunction","fbjs/lib/invariant","fbjs/lib/warning","prop-types/checkPropTypes","prop-types/lib/ReactPropTypesSecret"],(function(t,n,r,o,a,i){var e=function(){n("fbjs/lib/invariant")(0,1492)},l=function(){return e},s;e.isRequired=e;var u={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:l,element:e,instanceOf:l,node:e,objectOf:l,oneOf:l,oneOfType:l,shape:l};u.checkPropTypes=n("fbjs/lib/emptyFunction"),u.PropTypes=u,a.exports=u}),null);
__d("prop-types",["ReactFbPropTypes","prop-types/prop-types"],(function(t,n,r,o,a,i){a.exports=n("prop-types/prop-types")}),null);
/**
 * License: https://www.facebook.com/legal/license/l6Md91cKJ3N/
 */
__d("react-loadable-5.5.0",["Promise","prop-types","react"],(function(t,n,r,o,a,i){"use strict";var e,l,s=typeof Symbol=="function"&&typeof(typeof Symbol=="function"?Symbol.iterator:"@@iterator")=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==(typeof Symbol=="function"?Symbol.prototype:"@@prototype")?"symbol":typeof e};function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function d(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=e||(e=n("react")),p=[],_=[];function f(e){return(typeof __webpack_modules__=="undefined"?"undefined":s(__webpack_modules__))!=="object"?!1:e().every(function(e){return typeof e!="undefined"&&typeof __webpack_modules__[e]!="undefined"})}function g(e){var t=e(),n={loading:!0,loaded:null,error:null};return n.promise=t.then(function(e){return n.loading=!1,n.loaded=e,e}).catch(function(e){throw n.loading=!1,n.error=e,e}),n}function h(e){var t={loading:!1,loaded:{},error:null},r=[];try{Object.keys(e).forEach(function(n){var o=g(e[n]);o.loading?t.loading=!0:(t.loaded[n]=o.loaded,t.error=o.error),r.push(o.promise),o.promise.then(function(e){t.loaded[n]=e}).catch(function(e){t.error=e})})}catch(e){t.error=e}return t.promise=(l||(l=n("Promise"))).all(r).then(function(e){return t.loading=!1,e}).catch(function(e){throw t.loading=!1,e}),t}function y(e){return e&&e.__esModule?e.default:e}function C(e,t){return m.createElement(y(e),t)}function b(e,t){var r,o;if(!t.loading)throw new Error("react-loadable requires a `loading` component");var a=Object.assign({loader:null,loading:null,delay:200,timeout:null,render:C,webpack:null,modules:null},t),i=null;function l(){return i||(i=e(a.loader)),i.promise}return p.push(l),typeof a.webpack=="function"&&_.push(function(){if(f(a.webpack))return l()}),o=r=(function(t){d(n,t);function n(r){u(this,n);var o=c(this,t.call(this,r));return o.retry=function(){o.setState({error:null,loading:!0,timedOut:!1}),i=e(a.loader),o._loadModule()},l(),o.state={error:i.error,pastDelay:!1,timedOut:!1,loading:i.loading,loaded:i.loaded},o}return n.preload=function(){return l()},n.prototype.componentWillMount=function(){this._mounted=!0,this._loadModule()},n.prototype._loadModule=function(){var e=this;if(this.context.loadable&&Array.isArray(a.modules)&&a.modules.forEach(function(t){e.context.loadable.report(t)}),!!i.loading){typeof a.delay=="number"&&(a.delay===0?this.setState({pastDelay:!0}):this._delay=setTimeout(function(){e.setState({pastDelay:!0})},a.delay)),typeof a.timeout=="number"&&(this._timeout=setTimeout(function(){e.setState({timedOut:!0})},a.timeout));var t=function(){e._mounted&&(e.setState({error:i.error,loaded:i.loaded,loading:i.loading}),e._clearTimeouts())};i.promise.then(function(){t()}).catch(function(e){t()})}},n.prototype.componentWillUnmount=function(){this._mounted=!1,this._clearTimeouts()},n.prototype._clearTimeouts=function(){clearTimeout(this._delay),clearTimeout(this._timeout)},n.prototype.render=function(){return this.state.loading||this.state.error?m.createElement(a.loading,{isLoading:this.state.loading,pastDelay:this.state.pastDelay,timedOut:this.state.timedOut,error:this.state.error,retry:this.retry}):this.state.loaded?a.render(this.state.loaded,this.props):null},n})(m.Component),r.contextTypes={loadable:n("prop-types").shape({report:n("prop-types").func.isRequired})},o}function v(e){return b(g,e)}function S(e){if(typeof e.render!="function")throw new Error("LoadableMap requires a `render(loaded, props)` function");return b(h,e)}v.Map=S;var R=(function(e){d(t,e);function t(){return u(this,t),c(this,e.apply(this,arguments))}return t.prototype.getChildContext=function(){return{loadable:{report:this.props.report}}},t.prototype.render=function(){return m.Children.only(this.props.children)},t})(m.Component);R.propTypes={report:n("prop-types").func.isRequired},R.childContextTypes={loadable:n("prop-types").shape({report:n("prop-types").func.isRequired}).isRequired},v.Capture=R;function L(e){for(var t=[];e.length;){var r=e.pop();t.push(r())}return(l||(l=n("Promise"))).all(t).then(function(){if(e.length)return L(e)})}v.preloadAll=function(){return new(l||(l=n("Promise")))(function(e,t){L(p).then(e,t)})},v.preloadReady=function(){return new(l||(l=n("Promise")))(function(e,t){L(_).then(e,e)})},a.exports=v}),null);
__d("react-loadable",["react-loadable-5.5.0"],(function(t,n,r,o,a,i){a.exports=n("react-loadable-5.5.0")}),null);
__d("WAWebLoadable",["react","react-loadable"],(function(t,n,r,o,a,i,l){var e=["forwardedRefDoNotUse"],s=["ref"],u,c=u||(u=r("react"));function d(t){var n=t.loader,o=t.loading,a=r("react-loadable")({loader:n,loading:function(t){return t.pastDelay?o(t):null},render:function(n,r){var t=r.forwardedRefDoNotUse,o=babelHelpers.objectWithoutPropertiesLoose(r,e);return c.jsx(n,babelHelpers.extends({ref:t},o))}});function l(e){var t=e.ref,n=babelHelpers.objectWithoutPropertiesLoose(e,s);return c.jsx(a,babelHelpers.extends({forwardedRefDoNotUse:t},n))}return l.displayName=l.name+" [from "+i.id+"]",l}l.default=d}),98);
__d("WAWebUseIsKeyboardUser",["WAWebKeyboardContext","react"],(function(t,n,r,o,a,i,l){var e,s=(e||(e=o("react"))).useContext;function u(){return s(r("WAWebKeyboardContext"))}l.default=u}),98);
__d("useWAWebStaticButtonA11y",["WAWebKeyboardIsKeyActivation","react"],(function(t,n,r,o,a,i,l){var e,s=(e||(e=o("react"))).useRef;function u(e){}function c(e,t){var n,o,a=s(),i=function(t){a.current=t},l=function(t){if(r("WAWebKeyboardIsKeyActivation")(t)){var e;t.stopPropagation(),t.preventDefault(),(e=a.current)==null||e.click()}},c=(t==null?void 0:t.disabled)===!0,d=c?u:e;return[i,{"aria-disabled":(n=t==null?void 0:t.disabled)!=null?n:void 0,onClick:d,onKeyPress:l,role:"button",tabIndex:c?-1:(o=t==null?void 0:t.tabIndex)!=null?o:0}]}l.default=c}),98);
__d("WDSIconIcClose.react",["WDSSvgComponentBase.react","react","stylex"],(function(t,n,r,o,a,i,l){var e=["height","iconXstyle","viewBox","width"],s,u,c=s||(s=r("react")),d="ic-close";function m(t){var n=t.height,o=t.iconXstyle,a=t.viewBox,i=t.width,l=babelHelpers.objectWithoutPropertiesLoose(t,e),s;if(a){var m=a.height,p=m===void 0?0:m,_=a.width,f=_===void 0?0:_,g=a.x,h=g===void 0?0:g,y=a.y,C=y===void 0?0:y;s=[h,C,f,p].join(" ")}var b=24,v=24;return(n!=null||i!=null)&&(b=n,v=i),c.jsx(r("WDSSvgComponentBase.react"),babelHelpers.extends({},l,{children:c.jsxs("svg",{viewBox:s!=null?s:"0 0 24 24",height:b,width:v,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(o),fill:"none",children:[c.jsx("title",{children:d}),c.jsx("path",{d:"M12 13.4L7.09999 18.3C6.91665 18.4834 6.68332 18.575 6.39999 18.575C6.11665 18.575 5.88332 18.4834 5.69999 18.3C5.51665 18.1167 5.42499 17.8834 5.42499 17.6C5.42499 17.3167 5.51665 17.0834 5.69999 16.9L10.6 12L5.69999 7.10005C5.51665 6.91672 5.42499 6.68338 5.42499 6.40005C5.42499 6.11672 5.51665 5.88338 5.69999 5.70005C5.88332 5.51672 6.11665 5.42505 6.39999 5.42505C6.68332 5.42505 6.91665 5.51672 7.09999 5.70005L12 10.6L16.9 5.70005C17.0833 5.51672 17.3167 5.42505 17.6 5.42505C17.8833 5.42505 18.1167 5.51672 18.3 5.70005C18.4833 5.88338 18.575 6.11672 18.575 6.40005C18.575 6.68338 18.4833 6.91672 18.3 7.10005L13.4 12L18.3 16.9C18.4833 17.0834 18.575 17.3167 18.575 17.6C18.575 17.8834 18.4833 18.1167 18.3 18.3C18.1167 18.4834 17.8833 18.575 17.6 18.575C17.3167 18.575 17.0833 18.4834 16.9 18.3L12 13.4Z",fill:"currentColor"})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),98);
__d("WAWebSystemTheme",["WAWebEventEmitter","WAWebUserPrefsMultiDevice"],(function(t,n,r,o,a,i,l){var e=(function(e){function t(){var t;return t=e.call(this)||this,t.mediaQuery=window.matchMedia("(prefers-color-scheme: dark)"),t.theme=t.getCurrentTheme(),t.handleThemeChange=function(){var e=t.getCurrentTheme();!o("WAWebUserPrefsMultiDevice").isRegistered()||e===t.theme||(t.theme=e,t.trigger("system_theme_change",e))},t.mediaQuery.addListener(t.handleThemeChange),t}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.getCurrentTheme=function(){return this.mediaQuery.matches?"dark":"light"},t})(r("WAWebEventEmitter")),s=new e,u=s;l.default=u}),98);
__d("WAWebThemeContext",["WAWebSystemTheme","WAWebUserPrefsGeneral","bx","react"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=s.createContext,c=s.useContext,d={light:[{id:"bg-chat-light",selectors:["[data-asset-chat-background-light]"],low:{default:r("bx").getURL(r("bx")("9548"))},high:{default:r("bx").getURL(r("bx")("9548"))}},{id:"bg-chat-dark",selectors:["[data-asset-chat-background-dark]"],low:{default:r("bx").getURL(r("bx")("9547"))},high:{default:r("bx").getURL(r("bx")("9547"))}}],dark:[{id:"bg-chat-dark",selectors:["[data-asset-chat-background-dark]"],low:{default:r("bx").getURL(r("bx")("9547"))},high:{default:r("bx").getURL(r("bx")("9547"))}}],lightRefreshed:[{id:"bg-chat-beige",selectors:["[data-asset-chat-background-beige]"],low:{default:r("bx").getURL(r("bx")("31422"))},high:{default:r("bx").getURL(r("bx")("31422"))}},{id:"bg-chat-light-refreshed",selectors:["[data-asset-chat-background-light]"],low:{default:r("bx").getURL(r("bx")("31402"))},high:{default:r("bx").getURL(r("bx")("31402"))}},{id:"bg-chat-dark-refreshed",selectors:["[data-asset-chat-background-dark]"],low:{default:r("bx").getURL(r("bx")("31401"))},high:{default:r("bx").getURL(r("bx")("31401"))}}],darkRefreshed:[{id:"bg-chat-dark-refreshed",selectors:["[data-asset-chat-background-dark]"],low:{default:r("bx").getURL(r("bx")("31401"))},high:{default:r("bx").getURL(r("bx")("31401"))}}],smbLight:[{id:"bg-chat-beige-smb",selectors:["[data-asset-chat-background-beige]"],low:{default:r("bx").getURL(r("bx")("25218"))},high:{default:r("bx").getURL(r("bx")("25218"))}},{id:"bg-chat-light-smb",selectors:["[data-asset-chat-background-light]"],low:{default:r("bx").getURL(r("bx")("25229"))},high:{default:r("bx").getURL(r("bx")("25229"))}},{id:"bg-chat-dark-smb",selectors:["[data-asset-chat-background-dark]"],low:{default:r("bx").getURL(r("bx")("25221"))},high:{default:r("bx").getURL(r("bx")("25221"))}}],smbDark:[{id:"bg-chat-dark-smb",selectors:["[data-asset-chat-background-dark]"],low:{default:r("bx").getURL(r("bx")("25221"))},high:{default:r("bx").getURL(r("bx")("25221"))}}]};function m(){return o("WAWebUserPrefsGeneral").getSystemThemeMode()?r("WAWebSystemTheme").getCurrentTheme():o("WAWebUserPrefsGeneral").getTheme()}function p(e){o("WAWebUserPrefsGeneral").setTheme(e),f(e)}function _(){return m()==="dark"}function f(e){var t=document.body,n=e==="dark";t==null||t.classList.toggle("dark",n),g()}function g(){var e=getComputedStyle(document.body).getPropertyValue("--navbar-background"),t=document.querySelectorAll('meta[name="theme-color"]');t.forEach(function(t){t.setAttribute("content",e)})}var h={theme:r("WAWebSystemTheme").getCurrentTheme(),systemThemeMode:!0,setTheme:p,setSystemThemeMode:o("WAWebUserPrefsGeneral").setSystemThemeMode},y=u(h);function C(){return c(y)}function b(){return C().theme==="dark"}l.THEME_ASSETS=d,l.getTheme=m,l.setTheme=p,l.isDarkTheme=_,l.applyThemeToUI=f,l.resetPwaTitlebarColor=g,l.ThemeContext=y,l.useTheme=C,l.useIsDarkTheme=b}),98);
__d("WAWebWebcMessageSendWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumMediaType","WAWebWamEnumMessageType"],(function(t,n,r,o,a,i,l){var e=o("WAWebWamCodegenUtils").defineEvents({WebcMessageSend:[2072,{messageIsForward:[3,o("WAWebWamCodegenUtils").TYPES.BOOLEAN],messageMediaType:[2,o("WAWebWamEnumMediaType").MEDIA_TYPE],messageSendT:[4,o("WAWebWamCodegenUtils").TYPES.TIMER],messageType:[1,o("WAWebWamEnumMessageType").MESSAGE_TYPE]},[1,1,1],"regular"]},{WebcMessageSend:[]});l.WebcMessageSendWamEvent=e}),98);
__d("useWAWebGroupColors",["WALogger","WAWebThemeContext"],(function(t,n,r,o,a,i,l){var e,s="var(--wds-emerald-400)",u="var(--wds-sky-blue-300)",c="#e542a3",d="#a5b337",m="var(--wds-cobalt-400)",p="var(--wds-yellow-500)",_="var(--wds-green-500)",f="var(--wds-purple-400)",g="var(--wds-purple-500)",h="var(--wds-green-400)",y="var(--wds-orange-500)",C="var(--wds-pink-400)",b="#7d9ef1",v="var(--wds-orange-400)",S="var(--wds-teal-400)",R="#b4876e",L="var(--wds-yellow-400)",E="var(--wds-emerald-400)",k="var(--wds-sky-blue-300)",I="#e26ab6",T="#a5b337",D="var(--wds-orange-300)",x="var(--wds-cobalt-300)",$="var(--wds-yellow-400)",P="var(--wds-green-400)",N="var(--wds-purple-300)",M="var(--wds-red-300)",w="var(--wds-purple-400)",A="var(--wds-teal-300)",F="var(--wds-pink-300)",O="#d88deb",B="var(--wds-orange-400)",W="var(--wds-teal-400)",q="var(--wds-yellow-300)",U={color_light_1:{color:"xijeqtt",$$css:!0},color_light_2:{color:"xkgnp4b",$$css:!0},color_light_3:{color:"x240ipn",$$css:!0},color_light_4:{color:"xskf257",$$css:!0},color_light_5:{color:"xebwusc",$$css:!0},color_light_6:{color:"x3wc6wf",$$css:!0},color_light_7:{color:"x8s8ybf",$$css:!0},color_light_8:{color:"x162sf37",$$css:!0},color_light_9:{color:"x197m9ru",$$css:!0},color_light_10:{color:"x98wywu",$$css:!0},color_light_11:{color:"x1y1pzmv",$$css:!0},color_light_12:{color:"xkgndj",$$css:!0},color_light_13:{color:"x1454dyk",$$css:!0},color_light_14:{color:"xcwjfjl",$$css:!0},color_light_15:{color:"xgz8yji",$$css:!0},color_light_16:{color:"xyaa4h1",$$css:!0},color_light_17:{color:"x1n9d4q5",$$css:!0},background_light_1:{backgroundColor:"x6wgc6a",$$css:!0},background_light_2:{backgroundColor:"x17y5562",$$css:!0},background_light_3:{backgroundColor:"x1cu8r8a",$$css:!0},background_light_4:{backgroundColor:"xznryv8",$$css:!0},background_light_5:{backgroundColor:"x1n3fz2",$$css:!0},background_light_6:{backgroundColor:"xx4wtn9",$$css:!0},background_light_7:{backgroundColor:"x18a7xdx",$$css:!0},background_light_8:{backgroundColor:"x1vwqcvr",$$css:!0},background_light_9:{backgroundColor:"x1qcddwk",$$css:!0},background_light_10:{backgroundColor:"x1lrj34z",$$css:!0},background_light_11:{backgroundColor:"x1hvcrje",$$css:!0},background_light_12:{backgroundColor:"x1yh949v",$$css:!0},background_light_13:{backgroundColor:"x1tcvzfv",$$css:!0},background_light_14:{backgroundColor:"x1fu2t9j",$$css:!0},background_light_15:{backgroundColor:"x1fwelf4",$$css:!0},background_light_16:{backgroundColor:"xfhxl41",$$css:!0},background_light_17:{backgroundColor:"x18um00n",$$css:!0},color_dark_1:{color:"xijeqtt",$$css:!0},color_dark_2:{color:"xkgnp4b",$$css:!0},color_dark_3:{color:"x1hncw2u",$$css:!0},color_dark_4:{color:"xskf257",$$css:!0},color_dark_5:{color:"xs7ovuj",$$css:!0},color_dark_6:{color:"x1wxwh9x",$$css:!0},color_dark_7:{color:"x1n9d4q5",$$css:!0},color_dark_8:{color:"x98wywu",$$css:!0},color_dark_9:{color:"x18hhy9w",$$css:!0},color_dark_10:{color:"xbpqssb",$$css:!0},color_dark_11:{color:"x162sf37",$$css:!0},color_dark_12:{color:"x7y2iuh",$$css:!0},color_dark_13:{color:"xah1503",$$css:!0},color_dark_14:{color:"xyee0rz",$$css:!0},color_dark_15:{color:"xcwjfjl",$$css:!0},color_dark_16:{color:"xgz8yji",$$css:!0},color_dark_17:{color:"xly5uq6",$$css:!0},background_dark_1:{backgroundColor:"x6wgc6a",$$css:!0},background_dark_2:{backgroundColor:"x17y5562",$$css:!0},background_dark_3:{backgroundColor:"x1xd7cei",$$css:!0},background_dark_4:{backgroundColor:"xznryv8",$$css:!0},background_dark_5:{backgroundColor:"x3yiujs",$$css:!0},background_dark_6:{backgroundColor:"x1sim4je",$$css:!0},background_dark_7:{backgroundColor:"x18um00n",$$css:!0},background_dark_8:{backgroundColor:"x1lrj34z",$$css:!0},background_dark_9:{backgroundColor:"x1g15lxm",$$css:!0},background_dark_10:{backgroundColor:"x1jb1lhd",$$css:!0},background_dark_11:{backgroundColor:"x1vwqcvr",$$css:!0},background_dark_12:{backgroundColor:"xxln43k",$$css:!0},background_dark_13:{backgroundColor:"xcpx4u6",$$css:!0},background_dark_14:{backgroundColor:"x1vnpq5e",$$css:!0},background_dark_15:{backgroundColor:"x1fu2t9j",$$css:!0},background_dark_16:{backgroundColor:"x1fwelf4",$$css:!0},background_dark_17:{backgroundColor:"xd7yu05",$$css:!0}};function V(t,n,r){var a=U[n+"_"+r+"_"+t];return a==null&&(o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(['Group color id "','" does not have a corresponding style'])),t),a=U[n+"_"+r+"_1"]),a}function H(e,t){var n=o("WAWebThemeContext").useTheme(),r=n.theme;return V(e,t,r)}function G(e){var t=o("WAWebThemeContext").useTheme(),n=t.theme;return n==="light"?z(e):j(e)}function z(e){return e===1?[.024,.812,.612,1]:e===2?[.325,.741,.922,1]:e===3?[.898,.259,.639,1]:e===4?[.647,.702,.216,1]:e===5?[0,.482,.988,1]:e===6?[.773,.529,.188,1]:e===7?[.114,.667,.38,1]:e===8?[.498,.4,1,1]:e===9?[.369,.278,.871,1]:e===10?[.145,.827,.4,1]:e===11?[.769,.325,.176,1]:e===12?[1,.18,.455,1]:e===13?[.49,.62,.945,1]:e===14?[.98,.396,.2,1]:e===15?[.008,.651,.596,1]:e===16?[.706,.529,.431,1]:e===17?[1,.725,.22,1]:[.40000000596,.466666668653,.505882382393,1]}function j(e){switch(e){case 1:return[.024,.812,.612,1];case 2:return[.325,.741,.922,1];case 3:return[.886,.416,.714,1];case 4:return[.647,.702,.216,1];case 5:return[.988,.592,.459,1];case 6:return[.325,.651,.992,1];case 7:return[1,.725,.22,1];case 8:return[.145,.827,.4,1];case 9:return[.655,.569,1,1];case 10:return[.984,.314,.38,1];case 11:return[.498,.4,1,1];case 12:return[.259,.78,.722,1];case 13:return[1,.447,.631,1];case 14:return[.847,.553,.922,1];case 15:return[.98,.396,.2,1];case 16:return[.008,.651,.596,1];case 17:return[1,.824,.475,1];default:return[.525490224361,.588235318661,.627451002598,1]}}l.useGroupsColorStyle=H,l.useGroupsColorRGBValue=G}),98);
__d("WAWebSpamConstants",["WAWebMsgType"],(function(t,n,r,o,a,i,l){var e,s=Object.freeze({Block:"block_dialog",OverflowMenuBlock:"overflow_menu_block",OverflowMenuReport:"overflow_menu_report",MediaViewer:"media_viewer",MessageMenu:"message_menu",CommunityHome:"community_home",AccountInfoReport:"account_info_report",AccountInfoReportAsGuestUser:"account_info_report_as_guest_user",GroupInfoReport:"group_info_report",GroupSpamBannerReport:"group_spam_banner_report",OneToOneChatSpamBannerReport:"1_1_spam_banner_report",OneToOneOldSpamBannerBlock:"1_1_old_spam_banner_block",BizSpamBannerBlock:"biz_spam_banner_block",ChatListBlock:"chat_list_block",ChatListNoInsubBlock:"chat_list_noinsub_block",NotificationBlock:"notification_block",StatusPostReport:"status_post_report",NewsletterInfoReport:"newsletter_info_report",ChatFmxCardReportAsGuestUser:"chat_fmx_card_report_as_guest_user",ChatFmxCardSafetyToolsReport:"chat_fmx_card_safety_tools_report",ChatFmxCardSafetyToolsReportSuspicious:"chat_fmx_card_safety_tools_report_suspicious",GroupFmxCardLeave:"group_fmx_card_leave",GroupFmxCardLeaveNonSuspicious:"group_fmx_card_leave_non_suspicious",GroupInfoLeaveReportUpsell:"group_info_leave_report_upsell",GroupChatlistLeaveReportUpsell:"group_chatlist_leave_report_upsell",GroupOverflowMenuLeaveReportUpsell:"group_overflow_menu_leave_report_upsell",GroupSafetyCheckModalUpsell:"group_safety_check_bottom_sheet",CommentActions:"comment_actions_bottom_sheet",NewsletterQuestionResponseReport:"newsletter_question_response_report",GalaxyFlowsContextMenuReport:"extension_menu_report"}),u=new Set([(e=o("WAWebMsgType")).MSG_TYPE.CHAT,e.MSG_TYPE.AUDIO,e.MSG_TYPE.IMAGE,e.MSG_TYPE.PTT,e.MSG_TYPE.PTV,e.MSG_TYPE.VIDEO,e.MSG_TYPE.VCARD,e.MSG_TYPE.LIST,e.MSG_TYPE.LIST_RESPONSE,e.MSG_TYPE.BUTTONS_RESPONSE,e.MSG_TYPE.NATIVE_FLOW,e.MSG_TYPE.DOCUMENT,e.MSG_TYPE.STICKER,e.MSG_TYPE.LOCATION,e.MSG_TYPE.POLL_CREATION,e.MSG_TYPE.POLL_RESULT_SNAPSHOT,e.MSG_TYPE.STATUS,e.MSG_TYPE.EVENT_CREATION,e.MSG_TYPE.STICKER_PACK,e.MSG_TYPE.NEWSLETTER_QUESTION_RESPONSE]),c=new Set([].concat(Array.from(u),[e.MSG_TYPE.UNKNOWN,e.MSG_TYPE.REVOKED,e.MSG_TYPE.CIPHERTEXT,e.MSG_TYPE.INTERACTIVE])),d=new Set([e.MSG_TYPE.CHAT,e.MSG_TYPE.AUDIO,e.MSG_TYPE.IMAGE,e.MSG_TYPE.PTT,e.MSG_TYPE.VIDEO,e.MSG_TYPE.POLL_CREATION]);l.SpamFlow=s,l.SUPPORTED_MESSAGE_TYPES_FOR_MESSAGE_LEVEL_REPORTING=u,l.SPAM_REPORT_SUPPORTED_MESSAGE_TYPES=c,l.PAID_PARTNERSHIP_LABEL_SUPPORTED_MESSAGE_TYPES=d}),98);
__d("WAWebSpamUtils",["WAWebMsgType","WAWebSpamConstants"],(function(t,n,r,o,a,i,l){function e(e){return o("WAWebSpamConstants").SUPPORTED_MESSAGE_TYPES_FOR_MESSAGE_LEVEL_REPORTING.has(e)}function s(e){return o("WAWebSpamConstants").PAID_PARTNERSHIP_LABEL_SUPPORTED_MESSAGE_TYPES.has(e)}function u(e){return o("WAWebSpamConstants").SPAM_REPORT_SUPPORTED_MESSAGE_TYPES.has(e)}function c(e){switch(e){case"album":return 0;case"audio":return 1;case"automated_greeting_message":return 2;case"biz_content_placeholder":return 3;case"biz-cover-photo":return 4;case"broadcast_notification":return 5;case"buttons_response":return 6;case"call_log":return 7;case"chat":return 8;case"ciphertext":return 9;case"comment":return 10;case"debug":return 11;case"debug_placeholder":return 12;case"document":return 13;case"e2e_notification":return 14;case"event_creation":return 15;case"event_edit_encrypted":return 16;case"event_response":return 17;case"gp2":return 18;case"groups_v4_invite":return 19;case"guest_upsell_system_msg":return 20;case"history_bundle":return 21;case"hsm":return 22;case"image":return 23;case"interactive":return 24;case"interactive_response":return 25;case"keep_in_chat":return 26;case"list":return 27;case"list_response":return 28;case"location":return 29;case"multi_vcard":return 30;case"native_flow":return 31;case"newsletter_admin_invite":return 32;case"newsletter_notification":return 33;case"newsletter_question_response":return 34;case"notification":return 35;case"notification_template":return 36;case"order":return 37;case"oversized":return 38;case"payment":return 39;case"pin_message":return 40;case"pinned_message":return 41;case"poll_creation":return 42;case"poll_result_snapshot":return 43;case"poll_update":return 44;case"product":return 45;case"protocol":return 46;case"ptt":return 47;case"ptv":return 48;case"reaction":return 49;case"reaction_enc":return 50;case"request_phone_number":return 51;case"revoked":return 52;case"rich_response":return 53;case"status":return 54;case"status_notification":return 55;case"sticker":return 56;case"sticker-pack":return 57;case"template_button_reply":return 58;case"unknown":return 59;case"vcard":return 60;case"video":return 61;case"newsletter_follower_invite":return 62;case o("WAWebMsgType").MSG_TYPE.MESSAGE_HISTORY_BUNDLE:return 63;case"message_history_notice":return 64;case o("WAWebMsgType").MSG_TYPE.QUARANTINED:return 65;case o("WAWebMsgType").MSG_TYPE.MESSAGE_EDIT_ENCRYPTED:return 66;case o("WAWebMsgType").MSG_TYPE.LOADING_MEDIA:return 67}}l.isMsgTypeSupportedForMsgLevelReporting=e,l.isMsgTypeSupportedForPaidPartnershipLabel=s,l.isSpamSupportedForMessageType=u,l.msgTypeToReportLocalMessageType=c}),98);
__d("WAWebUpdaterDownloadStateType",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum").Mirrored(["UPDATE_DOWNLOADED","UPDATE_NOT_AVAILABLE","ERROR"]);i.DownloadState=e}),66);
__d("WAWebUpdaterVersion",["WACustomError","WAWebBuildConstants"],(function(t,n,r,o,a,i,l){var e=(function(e){function t(){return e.apply(this,arguments)||this}return babelHelpers.inheritsLoose(t,e),t})(o("WACustomError").customError("InvalidVersion")),s=(function(){function t(t){var n=t.split(".");if(n.length!==3)throw new e("Version format does not contain 3 numbers.");if(this.primary=Number.parseInt(n[0],10),this.secondary=Number.parseInt(n[1],10),this.tertiary=Number.parseInt(n[2],10),Number.isNaN(this.primary)||Number.isNaN(this.secondary)||Number.isNaN(this.tertiary))throw new e("Version contains a non-parseable string.")}var n=t.prototype;return n.lt=function(n){var e=n;return typeof e=="string"&&(e=new t(e)),this.primary<e.primary||this.primary===e.primary&&this.secondary<e.secondary||this.primary===e.primary&&this.secondary===e.secondary&&this.tertiary<e.tertiary},n.equals=function(n){var e=n;return e==null||e===""?!1:(typeof e=="string"&&(e=new t(e)),this.primary===e.primary&&this.secondary===e.secondary&&this.tertiary===e.tertiary)},n.toString=function(){return this.primary+"."+this.secondary+"."+this.tertiary},t})();function u(e){return e.replace(/\.[di]$/,"")}var c=u(o("WAWebBuildConstants").VERSION_STR);l.Version=s,l.sanitizeVersionStr=u,l.SANITIZED_VERSION_STR=c}),98);
__d("WAWebSwUpdater",["Promise","WALogger","WAWebBuildConstants","WAWebUpdaterDownloadStateType","WAWebUpdaterVersion"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m;function p(){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[sw] update starts. Current app version: ",""])),String(new(o("WAWebUpdaterVersion")).Version(o("WAWebBuildConstants").VERSION_BASE)));var t=navigator.serviceWorker;return t?t.ready.then(function(e){return new(m||(m=n("Promise")))(function(n){var r;function a(e){l(),o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Unable to update service worker to version. Error: ",""])),String(e)).sendLogs("[sw] sw-update-failed: "+String(e),{sampling:.1})}function i(){o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[sw] updated"]))),l(),n(o("WAWebUpdaterDownloadStateType").DownloadState.UPDATE_DOWNLOADED)}function l(){t.removeEventListener("error",a),t.removeEventListener("controllerchange",i)}t.addEventListener("error",a),t.addEventListener("controllerchange",i),(r=e.active)!=null&&(r=r.scriptURL)!=null&&r.includes("serviceworker.js")?e.unregister():e.update().then(function(){e.installing||(o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[sw] update is not available"]))),n(o("WAWebUpdaterDownloadStateType").DownloadState.UPDATE_NOT_AVAILABLE))}).catch(function(e){a(e),n(o("WAWebUpdaterDownloadStateType").DownloadState.ERROR)})})}).catch(function(e){return o("WALogger").ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Unable to update serviceworker, error: ",""])),e).sendLogs("sw-update-failed"),o("WAWebUpdaterDownloadStateType").DownloadState.ERROR}):(m||(m=n("Promise"))).resolve(o("WAWebUpdaterDownloadStateType").DownloadState.ERROR)}l.updateSw=p}),98);
__d("WAWebLinkDeviceEvents",["WAWebEventEmitter"],(function(t,n,r,o,a,i,l){var e=(function(e){function t(){return e.apply(this,arguments)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.triggerRefreshAltLinkingCode=function(){this.trigger("link_device_events:refresh_alt_linking_code")},n.triggerErrorAltLinking=function(){this.trigger("link_device_events:error_alt_linking")},n.triggerPrimaryHelloReceived=function(){this.trigger("link_device_events:primary_hello_received")},t})(r("WAWebEventEmitter")),s=new e;l.WAWebLinkDeviceEvents=s}),98);
__d("WAWebLinkDeviceAction",["WALogger","WASmaxMdGetCountryCodeRPC","WAWebAltDeviceLinkingApi","WAWebLaunchSocket","WAWebLinkDeviceEvents","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e;function s(){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var t=yield o("WASmaxMdGetCountryCodeRPC").sendGetCountryCodeRPC();return t.value.countryCodeIso}catch(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["alt device linking: sendGetCountryCodeRPC failed with error: ",""])),t).sendLogs("alt device linking: sendGetCountryCodeRPC failed")}}),u.apply(this,arguments)}function c(e){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){o("WAWebLaunchSocket").refreshQR(),e.linkDeviceMethod===o("WAWebAltDeviceLinkingApi").PairingType.ALT_DEVICE_LINKING?(yield o("WAWebAltDeviceLinkingApi").initializeAltDeviceLinking(),o("WAWebAltDeviceLinkingApi").setPairingType(o("WAWebAltDeviceLinkingApi").PairingType.ALT_DEVICE_LINKING)):(yield o("WAWebAltDeviceLinkingApi").initializeQRLinking(),o("WAWebAltDeviceLinkingApi").setPairingType(o("WAWebAltDeviceLinkingApi").PairingType.QR_CODE))}),d.apply(this,arguments)}function m(e,t){return o("WAWebAltDeviceLinkingApi").startAltLinkingFlow(e,t)}function p(e){o("WAWebLinkDeviceEvents").WAWebLinkDeviceEvents.trigger("link_device_events:refresh_alt_linking_code")}function _(e){o("WAWebLinkDeviceEvents").WAWebLinkDeviceEvents.trigger("link_device_events:force_manual_refresh")}function f(){o("WAWebLinkDeviceEvents").WAWebLinkDeviceEvents.trigger("link_device_events:error_alt_linking")}function g(){o("WAWebLinkDeviceEvents").WAWebLinkDeviceEvents.trigger("link_device_events:primary_hello_received")}l.getPreselectedCountryCodeIso=s,l.resetLinkDeviceState=c,l.genLinkDeviceCodeForPhoneNumber=m,l.refreshAltLinkingCode=p,l.forceManualRefresh=_,l.errorAltLinking=f,l.primaryHelloReceivedAltLinking=g}),98);
__d("WAWebLockOutlineIcon.react",["WAWebSvgComponentBase","react","stylex"],(function(t,n,r,o,a,i,l){var e=["height","iconXstyle","name","viewBox","width"],s,u,c=s||(s=r("react")),d="lock-outline";function m(t){var n=t.height,a=t.iconXstyle,i=t.name,l=t.viewBox,s=t.width,m=babelHelpers.objectWithoutPropertiesLoose(t,e),p;if(l){var _=l.height,f=_===void 0?0:_,g=l.width,h=g===void 0?0:g,y=l.x,C=y===void 0?0:y,b=l.y,v=b===void 0?0:b;p=[C,v,h,f].join(" ")}var S=24,R=24;return(n!=null||s!=null)&&(S=n,R=s),c.jsx(o("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers.extends({name:i!=null?i:d},m,{children:c.jsxs("svg",{viewBox:p!=null?p:"0 0 24 24",height:S,width:R,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(a),fill:"none",children:[c.jsx("title",{children:i!=null?i:d}),c.jsx("path",{d:"M6.793 22.4C6.29767 22.4 5.875 22.2237 5.525 21.8712C5.175 21.5187 5 21.095 5 20.6V11C5 10.505 5.17625 10.0813 5.52875 9.72875C5.88125 9.37625 6.305 9.2 6.8 9.2H7.4V6.8C7.4 5.472 7.86858 4.34 8.80575 3.404C9.74275 2.468 10.8761 2 12.2057 2C13.5352 2 14.6667 2.468 15.6 3.404C16.5333 4.34 17 5.472 17 6.8V9.2H17.6C18.095 9.2 18.5187 9.37625 18.8712 9.72875C19.2237 10.0813 19.4 10.505 19.4 11V20.6C19.4 21.095 19.2237 21.5187 18.871 21.8712C18.5183 22.2237 18.0943 22.4 17.599 22.4H6.793ZM6.8 20.6H17.6V11H6.8V20.6ZM12.2052 17.6C12.7017 17.6 13.125 17.4233 13.475 17.0698C13.825 16.7163 14 16.2913 14 15.7948C14 15.2983 13.8232 14.875 13.4697 14.525C13.1162 14.175 12.6912 14 12.1947 14C11.6982 14 11.275 14.1767 10.925 14.5302C10.575 14.8837 10.4 15.3087 10.4 15.8052C10.4 16.3017 10.5767 16.725 10.9302 17.075C11.2837 17.425 11.7087 17.6 12.2052 17.6ZM9.2 9.2H15.2V6.8C15.2 5.96667 14.9083 5.25833 14.325 4.675C13.7417 4.09167 13.0333 3.8 12.2 3.8C11.3667 3.8 10.6583 4.09167 10.075 4.675C9.49167 5.25833 9.2 5.96667 9.2 6.8V9.2Z",fill:"currentColor"})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.LockOutlineIcon=m}),98);
__d("WAWebLockRefreshedIcon.react",["WAWebSvgComponentBase","react","stylex"],(function(t,n,r,o,a,i,l){var e=["height","iconXstyle","name","viewBox","width"],s,u,c=s||(s=r("react")),d="lock-refreshed";function m(t){var n=t.height,a=t.iconXstyle,i=t.name,l=t.viewBox,s=t.width,m=babelHelpers.objectWithoutPropertiesLoose(t,e),p;if(l){var _=l.height,f=_===void 0?0:_,g=l.width,h=g===void 0?0:g,y=l.x,C=y===void 0?0:y,b=l.y,v=b===void 0?0:b;p=[C,v,h,f].join(" ")}var S=24,R=24;return(n!=null||s!=null)&&(S=n,R=s),c.jsx(o("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers.extends({name:i!=null?i:d},m,{children:c.jsxs("svg",{viewBox:p!=null?p:"0 0 24 24",height:S,width:R,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(a),fill:"none",children:[c.jsx("title",{children:i!=null?i:d}),c.jsx("path",{d:"M6 22C5.45 22 4.97917 21.8042 4.5875 21.4125C4.19583 21.0208 4 20.55 4 20V10C4 9.45 4.19583 8.97917 4.5875 8.5875C4.97917 8.19583 5.45 8 6 8H7V6C7 4.61667 7.4875 3.4375 8.4625 2.4625C9.4375 1.4875 10.6167 1 12 1C13.3833 1 14.5625 1.4875 15.5375 2.4625C16.5125 3.4375 17 4.61667 17 6V8H18C18.55 8 19.0208 8.19583 19.4125 8.5875C19.8042 8.97917 20 9.45 20 10V20C20 20.55 19.8042 21.0208 19.4125 21.4125C19.0208 21.8042 18.55 22 18 22H6ZM6 20H18V10H6V20ZM12 17C12.55 17 13.0208 16.8042 13.4125 16.4125C13.8042 16.0208 14 15.55 14 15C14 14.45 13.8042 13.9792 13.4125 13.5875C13.0208 13.1958 12.55 13 12 13C11.45 13 10.9792 13.1958 10.5875 13.5875C10.1958 13.9792 10 14.45 10 15C10 15.55 10.1958 16.0208 10.5875 16.4125C10.9792 16.8042 11.45 17 12 17ZM9 8H15V6C15 5.16667 14.7083 4.45833 14.125 3.875C13.5417 3.29167 12.8333 3 12 3C11.1667 3 10.4583 3.29167 9.875 3.875C9.29167 4.45833 9 5.16667 9 6V8Z",fill:"currentColor"})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.LockRefreshedIcon=m}),98);
__d("WAWebRoundShape.react",["react","stylex"],(function(t,n,r,o,a,i,l){var e,s,u=e||(e=r("react")),c={iconRefreshed:{display:"x78zum5",alignItems:"x6s0dn4",justifyContent:"xl56j7k",width:"x100vrsf",height:"x1vqgdyp",color:"x1pse0pq",background:"xe5due1",borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",$$css:!0},disabled:{backgroundColor:"x1ailiqk",$$css:!0},transparent:{color:"xhslqc4",backgroundColor:"x1jbjsai",$$css:!0},compact:{width:"x100vrsf",height:"x1vqgdyp",$$css:!0},groupModal:{width:"x15jighw",height:"x112a4uq",$$css:!0}};function d(e){var t=e.children,n=e.disabled,o=e.theme,a=e.transparent,i=e.xstyle;return u.jsx("div",babelHelpers.extends({},(s||(s=r("stylex"))).props(c.iconRefreshed,a===!0&&c.transparent||o==="compact"&&c.compact||o==="group-modal"&&c.groupModal,n===!0&&c.disabled,i),{children:t}))}d.displayName=d.name+" [from "+i.id+"]",l.default=d}),98);
__d("WAWebVoipUiDocPipLoadable",["JSResourceForInteraction","WAWebLazyLoadedRetriable","WAWebLoadable","asyncToGeneratorRuntime","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("WAWebLazyLoadedRetriable")(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield r("JSResourceForInteraction")("WAWebVoipUiDocPip.react").__setRef("WAWebVoipUiDocPipLoadable").load();return e.WAWebVoipUiDocPip}),"WAWebVoipUiDocPip"),c=r("WAWebLoadable")({loader:u,loading:function(t){return s.jsx(s.Fragment,{})}});l.WAWebVoipUiDocPipLoadable=c}),98);
__d("WAWebVoipUiPopoutWindowLoadable",["JSResourceForInteraction","WAWebLazyLoadedRetriable","WAWebLoadable","asyncToGeneratorRuntime","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("WAWebLazyLoadedRetriable")(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield r("JSResourceForInteraction")("WAWebVoipUiPopoutWindow.react").__setRef("WAWebVoipUiPopoutWindowLoadable").load();return e.WAWebVoipUiPopoutWindow}),"WAWebVoipUiPopoutWindow"),c=r("WAWebLoadable")({loader:u,loading:function(t){return s.jsx(s.Fragment,{})}});l.WAWebVoipUiPopoutWindowLoadable=c}),98);
var W=Object.create;var q=Object.defineProperty;var U=Object.getOwnPropertyDescriptor;var V=Object.getOwnPropertyNames;var H=Object.getPrototypeOf,G=Object.prototype.hasOwnProperty;var z=function(e,a,i,l){if(a&&typeof a=="object"||typeof a=="function")for(let s of V(a))!G.call(e,s)&&s!==i&&q(e,s,{get:function(){return a[s]},enumerable:!(l=U(a,s))||l.enumerable});return e};var j=function(e,a,i){return i=e!=null?W(H(e)):{},z(a||!e||!e.__esModule?q(i,"default",{value:e,enumerable:!0}):i,e)};__d("WAWebVoipUiPopoutWindowPortalContainer.react",["WALogger","WAWebCallCollection","WAWebTypedEventEmitter","WAWebUA","WAWebUserPrefsVoip","WAWebVoipStackInterface","WAWebVoipUiPopoutWindowContext","WAWebVoipUiPopoutWindowLoadable","WAWebVoipWaCallEnums","asyncToGeneratorRuntime","react","useWAWebListener","useWAWebStableCallback","useWAWebTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h,y,C=y||(y=o("react")),b=h||(h=r("react")),v=C.useMemo,S=C.useRef,R=C.useState,L="wa-web-voip-popover-portal",E=3e3,k=new(r("WAWebTypedEventEmitter")),I=!1,T=null,D=new Map,x=new WeakMap;function $(){return I}function P(){if(T==null||!I)return!1;try{return!(T.document.hidden||T.innerWidth<=0||T.innerHeight<=0)}catch(e){return!1}}function N(){return T}function M(e,t,n){n===void 0&&(n=!1),t!=null?(D.set(e,t),x.set(t,{isFromPopout:n})):D.delete(e)}function w(e){var t,n;return e==null?!1:(t=(n=x.get(e))==null?void 0:n.isFromPopout)!=null?t:!1}function A(){var e=[];for(var t of D){var n=t[0],r=t[1];w(r)&&e.push({type:n,stream:r})}return e}var F=500;function O(){var t=R(null),a=t[0],i=t[1],l=R(null),h=l[0],y=l[1],C=R(null),x=C[0],$=C[1],P=r("useWAWebStableCallback")(function(){T&&k.trigger("popoutWindowVisibilityChanged",T.document.visibilityState)}),N=S(null),M=r("useWAWebStableCallback")(function(){N.current!=null&&(window.clearInterval(N.current),N.current=null)}),w=o("useWAWebTimeout").useManualTimeout(function(){M(),I=!1,T=null,D.clear(),a==null||a.removeEventListener("visibilitychange",P),a==null||a.close(),k.trigger("setPopoutWindowProps",{callLogMsg:null,popoutWindow:null})}),O=w[0];o("useWAWebListener").useListener(k,"setPopoutWindowProps",function(t){var a,l=t.callLogMsg,f=t.popoutWindow;if($(l),i(f),I=l!=null,T=l!=null?f:null,(a=T)==null||a.addEventListener("visibilitychange",P),l==null&&(D.clear(),M()),l!=null&&o("WAWebUA").UA.isSafari&&f!=null&&(M(),N.current=window.setInterval(function(){try{f.closed&&(o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["voip: Safari popout close polling: detected window closed"]))),M(),k.trigger("closePopoutWindow",{callEnded:!1}))}catch(e){o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["voip: Safari popout close polling: window inaccessible, treating as closed: ",""])),String(e)),M(),k.trigger("closePopoutWindow",{callEnded:!1})}},F)),l!=null&&o("WAWebUA").UA.isSafari&&f!=null){var g=r("WAWebCallCollection").activeCall,h=(g==null?void 0:g.selfVideoState)===o("WAWebVoipWaCallEnums").VideoState.Enabled,y=o("WAWebUserPrefsVoip").getSelectedAudioInputDevice();if(h||y!=null){o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["voip: Safari popout open: setting up stream re-acquisition"])));var C=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var e=yield o("WAWebVoipStackInterface").getVoipStackInterface();if(e!=null&&e.type==="web"){if(h&&(yield e.setCallVideoMute(!0),yield e.setCallVideoMute(!1)),y!=null){var t=yield Promise.resolve().then(function(){return j(require("WAWebVoipAudioCaptureAndPlayback"))}),n=t.switchAudioInputDevice,r=yield n(y,f,!0);r?o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["voip: Safari popout open: audio re-acquisition completed"]))):o("WALogger").WARN(d||(d=babelHelpers.taggedTemplateLiteralLoose(["voip: Safari popout open: audio re-acquisition failed"])))}o("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["voip: Safari popout open: stream re-acquisition completed"])))}}catch(e){o("WALogger").ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["voip: Safari popout open: stream re-acquisition failed: ",""])),String(e))}});return function(){return e.apply(this,arguments)}})(),b,v;try{b=f.document.readyState==="complete",v=f.document.hasFocus()}catch(e){o("WALogger").ERROR(_||(_=babelHelpers.taggedTemplateLiteralLoose(["voip: Safari popout open: unable to check window state: ",""])),String(e));return}if(b&&v){C();return}var S=b,R=v,L=function(){S&&R&&C()};b||f.addEventListener("load",function(){S=!0,L()},{once:!0}),v||(f.addEventListener("focus",function(){R=!0,L()},{once:!0}),f.focus())}}}),o("useWAWebListener").useListener(k,"closePopoutWindow",function(e){var t=e.callEnded,a=e.surveyInteracted,i=A();if(!t&&i.length>0){var l=i.some(function(e){return e.type==="desktop"});if(l){var s=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield o("WAWebVoipStackInterface").getVoipStackInterface();(e==null?void 0:e.type)==="web"&&(yield e.stopScreenShare())});return function(){return e.apply(this,arguments)}})();s()}var u=r("WAWebCallCollection").activeCall,c=(u==null?void 0:u.selfVideoState)===o("WAWebVoipWaCallEnums").VideoState.Enabled;if(c){var d=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var e=yield o("WAWebVoipStackInterface").getVoipStackInterface();e!=null&&e.type==="web"&&(yield e.setCallVideoMute(!0),yield e.setCallVideoMute(!1))}catch(e){}});return function(){return e.apply(this,arguments)}})();if(document.hasFocus())d();else{var m=function(){window.removeEventListener("focus",m),d()};window.addEventListener("focus",m,{once:!0}),window.focus()}}}if(!t&&(o("WAWebUA").UA.isFirefox||o("WAWebUA").UA.isSafari)){var p=o("WAWebUserPrefsVoip").getSelectedAudioInputDevice();if(p!=null){o("WALogger").LOG(f||(f=babelHelpers.taggedTemplateLiteralLoose(["voip: "," popout close: setting up audio re-acquisition"])),o("WAWebUA").UA.isFirefox?"Firefox":"Safari");var _=function(){r("WAWebCallCollection").activeCall!=null&&k.trigger("requestAudioReacquisition",{deviceId:p,targetWindow:window})};if(document.hasFocus())_();else{var h=1e4,y=function(){window.clearTimeout(C),window.removeEventListener("focus",y),o("WALogger").LOG(g||(g=babelHelpers.taggedTemplateLiteralLoose(["voip: "," popout close: main window focused, re-acquiring audio"])),o("WAWebUA").UA.isFirefox?"Firefox":"Safari"),_()},C=window.setTimeout(function(){window.removeEventListener("focus",y)},h);window.addEventListener("focus",y),window.focus()}}}var b=t&&!a;O(b?E:0)});var B=v(function(){return{isContextInPopoutWindow:!0,popoverPortalEl:h==null?void 0:h.getElementById(L),documentEl:h,windowEl:a,isDocPip:!1}},[h,a]);return x?b.jsx(r("WAWebVoipUiPopoutWindowContext").Provider,{value:B,children:b.jsx(o("WAWebVoipUiPopoutWindowLoadable").WAWebVoipUiPopoutWindowLoadable,{callLogMsg:x,popoutWindow:a,onWindowReady:function(t){return y(t.document)}})}):null}O.displayName=O.name+" [from "+i.id+"]",l.VOIP_POPOUT_POPOVER_PORTAL_ID=L,l.WAWebVoipUiPopoutWindowEventEmitter=k,l.getIsCallActiveInPopoutWindow=$,l.getIsPopoutWindowActiveAndVisible=P,l.getPopoutWindow=N,l.setMediaStream=M,l.wasStreamAcquiredFromPopout=w,l.getStreamsFromPopout=A,l.WAWebVoipUiPopoutWindowPortalContainer=O}),98);
__d("WAWebVoipUiDocPipPortalContainer.react",["WAWebTypedEventEmitter","WAWebVoipUiDocPipLoadable","WAWebVoipUiPopoutWindowPortalContainer.react","react","useWAWebListener","useWAWebTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=e||(e=r("react")),d=u.useEffect,m=u.useState,p="wa-web-voip-docpip-popover-portal",_=3e3,f=new(r("WAWebTypedEventEmitter"));function g(e){try{"mediaSession"in navigator&&navigator.mediaSession.setActionHandler("enterpictureinpicture",e)}catch(e){}}function h(){var e,t=m(null),n=t[0],r=t[1],a=m(!1),i=a[0],l=a[1],s=m(null),u=s[0],p=s[1],h=o("useWAWebTimeout").useManualTimeout(function(){l(!1),r(null),u&&u.close()}),y=h[0];return(e=o("useWAWebListener")).useListener(f,"setDocPipProps",function(e){var t=e.callLogMsg;r(t)}),e.useListener(f,"closeDocPip",function(e){var t=e.surveyInteracted;y(t!==!0?_:0)}),e.useListener(f,"reopenDocPip",function(){n&&l(!0)}),e.useListener(o("WAWebVoipUiPopoutWindowPortalContainer.react").WAWebVoipUiPopoutWindowEventEmitter,"popoutWindowVisibilityChanged",function(){var e=o("WAWebVoipUiPopoutWindowPortalContainer.react").getIsPopoutWindowActiveAndVisible();e&&u&&u.close()}),d(function(){if(!n){g(null);return}return g(function(){o("WAWebVoipUiPopoutWindowPortalContainer.react").getIsPopoutWindowActiveAndVisible()||f.trigger("reopenDocPip")}),function(){g(null)}},[n]),d(function(){if(u){var e=function(){l(!1),p(null)};return u.addEventListener("pagehide",e),function(){u.removeEventListener("pagehide",e)}}},[u]),!n||!i?null:c.jsx(o("WAWebVoipUiDocPipLoadable").WAWebVoipUiDocPipLoadable,{callLogMsg:n,onWindowReady:p})}h.displayName=h.name+" [from "+i.id+"]",l.VOIP_DOCPIP_POPOVER_PORTAL_ID=p,l.WAWebVoipUiDocPipEventEmitter=f,l.WAWebVoipUiDocPipPortalContainer=h}),98);
__d("WAWebWarningOutlineIcon.react",["WAWebSvgComponentBase","react","stylex"],(function(t,n,r,o,a,i,l){var e=["height","iconXstyle","name","viewBox","width"],s,u,c=s||(s=r("react")),d="warning-outline";function m(t){var n=t.height,a=t.iconXstyle,i=t.name,l=t.viewBox,s=t.width,m=babelHelpers.objectWithoutPropertiesLoose(t,e),p;if(l){var _=l.height,f=_===void 0?0:_,g=l.width,h=g===void 0?0:g,y=l.x,C=y===void 0?0:y,b=l.y,v=b===void 0?0:b;p=[C,v,h,f].join(" ")}var S=24,R=24;return(n!=null||s!=null)&&(S=n,R=s),c.jsx(o("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers.extends({name:i!=null?i:d},m,{children:c.jsxs("svg",{viewBox:p!=null?p:"0 0 24 24",height:S,width:R,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(a),fill:"none",children:[c.jsx("title",{children:i!=null?i:d}),c.jsx("path",{d:"M1.15571 22C0.941353 22 0.746487 21.9465 0.571107 21.8396C0.395728 21.7326 0.259322 21.5917 0.161889 21.4167C0.0644557 21.2417 0.0108675 21.0521 0.00112423 20.8479C-0.00861908 20.6438 0.0449691 20.4444 0.161889 20.25L10.977 1.58333C11.0939 1.38889 11.2449 1.24306 11.43 1.14583C11.6151 1.04861 11.8051 1 12 1C12.1949 1 12.3849 1.04861 12.57 1.14583C12.7551 1.24306 12.9061 1.38889 13.023 1.58333L23.8381 20.25C23.955 20.4444 24.0086 20.6438 23.9989 20.8479C23.9891 21.0521 23.9355 21.2417 23.8381 21.4167C23.7407 21.5917 23.6043 21.7326 23.4289 21.8396C23.2535 21.9465 23.0586 22 22.8443 22H1.15571ZM3.17257 19.6667H20.8274L12 4.5L3.17257 19.6667ZM12 18.5C12.3313 18.5 12.609 18.3882 12.8331 18.1646C13.0571 17.941 13.1692 17.6639 13.1692 17.3333C13.1692 17.0028 13.0571 16.7257 12.8331 16.5021C12.609 16.2785 12.3313 16.1667 12 16.1667C11.6687 16.1667 11.391 16.2785 11.1669 16.5021C10.9429 16.7257 10.8308 17.0028 10.8308 17.3333C10.8308 17.6639 10.9429 17.941 11.1669 18.1646C11.391 18.3882 11.6687 18.5 12 18.5ZM12 15C12.3313 15 12.609 14.8882 12.8331 14.6646C13.0571 14.441 13.1692 14.1639 13.1692 13.8333V10.3333C13.1692 10.0028 13.0571 9.72569 12.8331 9.50208C12.609 9.27847 12.3313 9.16667 12 9.16667C11.6687 9.16667 11.391 9.27847 11.1669 9.50208C10.9429 9.72569 10.8308 10.0028 10.8308 10.3333V13.8333C10.8308 14.1639 10.9429 14.441 11.1669 14.6646C11.391 14.8882 11.6687 15 12 15Z",fill:"currentColor"})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.WarningOutlineIcon=m}),98);
__d("WDSGlobalContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=r("react")),c=(e||(e=o("react"))).createContext,d=150,m=c({currentOpenMenus:new Map,registerMenu:function(){},unregisterMenu:function(){},closeAllMenus:function(){}});l.MENU_EXIT_ANIMATION_DURATION=d,l.WDSContext=m}),98);
__d("useWAWebAsync",["react","useWAWebStableCallback"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=s.useEffect,c=s.useState,d={loading:!0,error:null,value:null};function m(e,t){var n=r("useWAWebStableCallback")(e),o=c(d),a=o[0],i=o[1];return u(function(){var e=new AbortController;return i(d),n(e.signal).then(function(t){e.signal.aborted||i({loading:!1,error:null,value:t})}).catch(function(e){i({loading:!1,error:e,value:null})}),function(){e.abort()}},[n].concat(t)),a}l.default=m}),98);
__d("useWAWebRenderCallbacks",["WAAbortError","WAFilteredCatch","WAWebDocumentFlushed","react","useWAWebStableCallback","useWAWebUnmountSignal"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=s.useEffect,c=s.useLayoutEffect,d=s.useRef;function m(e){var t,n=d(null),a=r("useWAWebUnmountSignal")(),i=(t=r("useWAWebStableCallback"))(e.onDOMCommit),l=t(e.onMount),s=t(e.onBeforePaint),m=t(e.onAfterPaint),p=t(e.onUnmount),_=t(e.onError);u(function(){return l(),n.current=window.requestAnimationFrame(function(){n.current=null,s()}),o("WAWebDocumentFlushed").documentFlushed({signal:a}).then(function(){a.aborted||m()}).catch(o("WAFilteredCatch").filteredCatch(o("WAAbortError").AbortError,_)),function(){n.current!=null&&window.cancelAnimationFrame(n.current),p()}},[l,s,m,p,_,a]),c(function(){i()},[i])}l.default=m}),98);