;/*FB_PKG_DELIM*/

__d("CometAsyncFetchError",[],(function(t,n,r,o,a,i){"use strict";function e(e){if(e==null)return"";if(typeof e=="string")return e;try{return String.fromCharCode.apply(null,new Uint16Array(e))}catch(e){return"<error parsing ArrayBuffer>"}}var l=(function(t){function n(e,n,r,o,a){var i;return i=t.call(this,e)||this,i.errorMsg=e,i.errorCode=n,i.errorRawResponseHeaders=r,i.errorRawTransport=o,i.errorType=a,i}babelHelpers.inheritsLoose(n,t);var r=n.prototype;return r.toString=function(){var t,n,r,o,a,i=((t=this.errorCode)!=null?t:"")+"."+e(this.errorMsg)+"."+((n=this.errorRawResponseHeaders)!=null?n:"")+"."+((r=this.errorRawTransport)!=null?r:"")+"."+((o=this.errorType)!=null?o:"")+"."+((a=this.errorRawTransportStatus)!=null?a:"");return"CometAyncFetchError: "+i},n})(babelHelpers.wrapNativeSuper(Error));i.default=l}),66);
__d("CometAsyncFetchResponse",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e,t){this.$1=e,this.$2=this.$3(t)}var t=e.prototype;return t.getFullResponsePayload=function(){return this.$1},t.getResponsePayload=function(){var e;return(e=this.$1)==null?void 0:e.payload},t.getResponseHeader=function(t){var e;return(e=this.$2)==null?void 0:e.get(t.toLowerCase())},t.getAllResponseHeadersMap=function(){return new Map(this.$2)},t.$3=function(t){if(t==null||t.length===0)return null;var e=new Map,n=t.split("\r\n");for(var r of n){var o=r.indexOf(": ");if(!(o<=0)){var a=r.substring(0,o).toLowerCase(),i=r.substring(o+2),l=e.get(a),s=l!=null?l+", "+i:i;e.set(a,s)}}return e},e})();i.default=e}),66);
__d("isDeviceManagerDotMetaDotComURI",[],(function(t,n,r,o,a,i){var e=new RegExp("(^|\\.)devicemanager\\.meta\\.com$","i"),l=["https"];function s(t){return t.isEmpty()&&t.toString()!=="#"||!t.getDomain()&&!t.getProtocol()?!1:l.indexOf(t.getProtocol())!==-1&&e.test(t.getDomain())}i.default=s}),66);
__d("isWwwMetaDotComURI",[],(function(t,n,r,o,a,i){var e=new RegExp("(^|\\.)www\\.meta\\.com$","i"),l=["https"];function s(t){return t.isEmpty()&&t.toString()!=="#"||!t.getDomain()&&!t.getProtocol()?!1:l.indexOf(t.getProtocol())!==-1&&e.test(t.getDomain())}i.default=s}),66);
__d("getCometAsyncFetchResponse",["CSRFGuard","CometAsyncFetchError","CometAsyncFetchResponse","ConstUriUtils","DTSG","DTSG_ASYNC","FBLogger","NetworkStatus","PHPQuerySerializer","Promise","XHRRequest","cometAsyncRequestHeaders","getAsyncParams","getErrorSafe","handleCometErrorCodeSideEffects","isAIDemosDotMetaDotComURI","isArDotMetaDotComURI","isBugBountyDotMetaDotComURI","isDevelopersDotMetaDotComURI","isDeviceManagerDotMetaDotComURI","isFacebookURI","isHorizonDotMetaDotComURI","isInstagramURI","isInternalFBURI","isMessengerDotComURI","isMetaAIURI","isWearablesDotDeveloperDotMetaDotComURI","isWorkDotMetaDotComURI","isWorkplaceDotComURI","isWorkroomsDotComURI","isWwwMetaDotComURI","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=250;function c(t,a){var i=0,l;return new(s||(s=n("Promise")))(function(n,s){var c,p=function(i,l){if(a.ignoreResponse===!0)return n();var e,u=i.trim();try{o("CSRFGuard").exists(u)&&(u=o("CSRFGuard").clean(u)),e=JSON.parse(u)}catch(e){var c=r("getErrorSafe")(e);r("FBLogger")("comet_infra").mustfix("Unable to parse uri %s response. Error: %s, response: %s",t.toString(),c.message,u.substring(0,1e3)),s(c);return}if(m(t)){var d,p,_=(d=e)==null?void 0:d.dtsgToken,f=(p=e)==null?void 0:p.dtsgAsyncGetToken;_&&o("DTSG").setToken(_),f&&o("DTSG_ASYNC").setToken(f)}if(e.error){r("handleCometErrorCodeSideEffects")(e.error,e.errorSummary,e.errorDescription,e.redirectTo,a.shouldShowErrorDialog),s({error:e.error,errorMsg:e.errorDescription,errorType:e.errorSummary,redirectTo:e.redirectTo});return}return n(new(r("CometAsyncFetchResponse"))(e,l))};p.includeHeaders=!0;function _(e){var t=a.retryCount!=null&&a.retryCount>0&&i<=a.retryCount;if(t)r("setTimeout")(g,u);else{var n=new(r("CometAsyncFetchError"))(e.errorMsg,e.errorCode,e.errorRawResponseHeaders,e.errorRawTransport,e.errorType);return s(n)}}function f(){var e=new(r("CometAsyncFetchError"))("Request to "+t+" was aborted",null,null,null,"Abort");return s(e)}function g(){var e;if(((e=a.abortSignal)==null?void 0:e.aborted)===!0)return f();h(),y()}function h(){c!=null&&(c.abort(),c=null)}function y(){var n,l,s=(n=a.requestHeaders)!=null?n:{};a.skipCustomHeaders!==!0&&Object.assign(s,o("cometAsyncRequestHeaders").getHeaders());var u=Object.keys(s).reduce(function(e,t){return e.setRequestHeader(t,s[t])},new(r("XHRRequest"))(t)).setMethod(a.method).setData(babelHelpers.extends({},a.data,a.skipAsyncParams===!0?{}:r("getAsyncParams")(a.method,(l=a.skipSRState)!=null?l:!1))).setRawData(a.formData).setResponseHandler(p).setErrorHandler(_).setAbortHandler(f).setUploadProgressHandler(a.onUploadProgress).setDataSerializer((e||(e=r("PHPQuerySerializer"))).serialize);c=u,a.withCredentials===!0&&d(t)&&u.setWithCredentials(!0),u.send(),i++}a.abortSignal&&(a.abortSignal.onabort=function(){h()}),r("NetworkStatus").isOnline()?g():l=r("NetworkStatus").onChange(function(e){var t=e.online;t&&(g(),l.remove())})})}function d(e){var t=o("ConstUriUtils").getUri(e);return t==null?!1:r("isMetaAIURI")(t)||r("isFacebookURI")(t)||r("isInstagramURI")(t)||r("isInternalFBURI")(t)||r("isMessengerDotComURI")(t)||r("isWearablesDotDeveloperDotMetaDotComURI")(t)||r("isWorkplaceDotComURI")(t)||r("isWorkroomsDotComURI")(t)||r("isWorkDotMetaDotComURI")(t)||r("isHorizonDotMetaDotComURI")(t)||r("isDevelopersDotMetaDotComURI")(t)||r("isArDotMetaDotComURI")(t)||r("isWwwMetaDotComURI")(t)||r("isAIDemosDotMetaDotComURI")(t)||r("isBugBountyDotMetaDotComURI")(t)||r("isDeviceManagerDotMetaDotComURI")(t)}function m(e){var t=o("ConstUriUtils").getUri(e);return t==null?!1:!t.getProtocol()&&!t.getDomain()?!0:document.location.origin===t.getOrigin()}l.default=c}),98);
__d("cometAsyncFetch",["getCometAsyncFetchResponse"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return t===void 0&&(t={data:{},method:"GET"}),r("getCometAsyncFetchResponse")(e,t).then(function(e){var n;return((n=t)==null?void 0:n.getFullPayload)===!0?e==null?void 0:e.getFullResponsePayload():e==null?void 0:e.getResponsePayload()})}l.default=e}),98);